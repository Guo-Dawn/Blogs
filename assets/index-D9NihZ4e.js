const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/BlogList-DFbr1jIR.js","assets/BlogList-BP85BDJD.css","assets/BlogPost-DrFKJfBu.js","assets/BlogPost-BriCYJkB.css","assets/About-BURwbSfg.js","assets/About-CY0gonp7.css","assets/dagre-6UL2VRFP-BGkJMz43.js","assets/graph-Diw7DLCr.js","assets/_baseUniq-hChzujAl.js","assets/layout-DR4smPaf.js","assets/min-DR3dOGVw.js","assets/clone-GE6PDHxL.js","assets/cose-bilkent-S5V4N54A-DLp6Igro.js","assets/cytoscape.esm-5J0xJHOV.js","assets/c4Diagram-YG6GDRKO-CuAUQTl_.js","assets/chunk-TZMSLE5B-BSwo-quG.js","assets/flowDiagram-NV44I4VS-t_rUD_c2.js","assets/chunk-FMBD7UC4-DRAKx5Vy.js","assets/chunk-55IACEB6-CG3Ki62G.js","assets/chunk-QN33PNHL-BlP8gVoa.js","assets/channel-CR_PQHLJ.js","assets/erDiagram-Q2GNP2WA-BCJ0qWvy.js","assets/gitGraphDiagram-NY62KEGX-b6H7Aj_B.js","assets/chunk-4BX2VUAB-bN47T9DN.js","assets/chunk-QZHKN3VN-CgMNgKb7.js","assets/treemap-KMMF4GRG-B2Xn-qwM.js","assets/ganttDiagram-JELNMOA3-Bx7O3S07.js","assets/linear-CjsE7KBd.js","assets/init-Gi6I4Gst.js","assets/defaultLocale-DX6XiGOO.js","assets/infoDiagram-WHAUD3N6-BUSRwQrM.js","assets/pieDiagram-ADFJNKIX-C74se6QC.js","assets/arc-CI6IJPAk.js","assets/ordinal-Cboi1Yqb.js","assets/quadrantDiagram-AYHSOK5B-DSmEhRV4.js","assets/xychartDiagram-PRI3JC2R-COo7oR7p.js","assets/requirementDiagram-UZGBJVZJ-Bx3R3nCI.js","assets/sequenceDiagram-WL72ISMW-DVBkEcje.js","assets/classDiagram-2ON5EDUG-DMtRB23a.js","assets/chunk-B4BG7PRW-BFbZ2oDc.js","assets/classDiagram-v2-WZHVMYZB-DMtRB23a.js","assets/stateDiagram-FKZM4ZOC-BJ4yAf1s.js","assets/chunk-DI55MBZ5-2CYGQXNT.js","assets/stateDiagram-v2-4FDKWEC3-kYvuriAw.js","assets/journeyDiagram-XKPGCS4Q-BwrQKhXc.js","assets/timeline-definition-IT6M3QCI-_PeLrePV.js","assets/mindmap-definition-VGOIOE7T-BzFX8Ipu.js","assets/kanban-definition-3W4ZIXB7-o-WeTiMO.js","assets/sankeyDiagram-TZEHDZUN-DKf_m5bS.js","assets/diagram-S2PKOQOG-DzX1Sy7S.js","assets/diagram-QEK2KX5R-VsuAoklT.js","assets/blockDiagram-VD42YOAC-BLblwFWd.js","assets/architectureDiagram-VXUJARFQ-QWfjrkN1.js","assets/diagram-PSM6KHXK-eL0VgOPT.js"])))=>i.map(i=>d[i]);
(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function i(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(r){if(r.ep)return;r.ep=!0;const s=i(r);fetch(r.href,s)}})();function i0(e){const t=Object.create(null);for(const i of e.split(","))t[i]=1;return i=>i in t}const ce={},ha=[],Qn=()=>{},Mb=()=>!1,Dd=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),n0=e=>e.startsWith("onUpdate:"),qe=Object.assign,r0=(e,t)=>{const i=e.indexOf(t);i>-1&&e.splice(i,1)},pL=Object.prototype.hasOwnProperty,ie=(e,t)=>pL.call(e,t),Ot=Array.isArray,ua=e=>Bd(e)==="[object Map]",Ib=e=>Bd(e)==="[object Set]",Bt=e=>typeof e=="function",Ae=e=>typeof e=="string",Ur=e=>typeof e=="symbol",fe=e=>e!==null&&typeof e=="object",Pb=e=>(fe(e)||Bt(e))&&Bt(e.then)&&Bt(e.catch),Fb=Object.prototype.toString,Bd=e=>Fb.call(e),mL=e=>Bd(e).slice(8,-1),Ob=e=>Bd(e)==="[object Object]",s0=e=>Ae(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,ql=i0(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Nd=e=>{const t=Object.create(null);return(i=>t[i]||(t[i]=e(i)))},yL=/-\w/g,cn=Nd(e=>e.replace(yL,t=>t.slice(1).toUpperCase())),_L=/\B([A-Z])/g,Mo=Nd(e=>e.replace(_L,"-$1").toLowerCase()),$d=Nd(e=>e.charAt(0).toUpperCase()+e.slice(1)),eg=Nd(e=>e?`on${$d(e)}`:""),bs=(e,t)=>!Object.is(e,t),tu=(e,...t)=>{for(let i=0;i<e.length;i++)e[i](...t)},Db=(e,t,i,n=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:n,value:i})},o0=e=>{const t=parseFloat(e);return isNaN(t)?e:t},xL=e=>{const t=Ae(e)?Number(e):NaN;return isNaN(t)?e:t};let O_;const zd=()=>O_||(O_=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Gd(e){if(Ot(e)){const t={};for(let i=0;i<e.length;i++){const n=e[i],r=Ae(n)?wL(n):Gd(n);if(r)for(const s in r)t[s]=r[s]}return t}else if(Ae(e)||fe(e))return e}const CL=/;(?![^(]*\))/g,bL=/:([^]+)/,vL=/\/\*[^]*?\*\//g;function wL(e){const t={};return e.replace(vL,"").split(CL).forEach(i=>{if(i){const n=i.split(bL);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function yo(e){let t="";if(Ae(e))t=e;else if(Ot(e))for(let i=0;i<e.length;i++){const n=yo(e[i]);n&&(t+=n+" ")}else if(fe(e))for(const i in e)e[i]&&(t+=i+" ");return t.trim()}const SL="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",TL=i0(SL);function Bb(e){return!!e||e===""}const Nb=e=>!!(e&&e.__v_isRef===!0),Rr=e=>Ae(e)?e:e==null?"":Ot(e)||fe(e)&&(e.toString===Fb||!Bt(e.toString))?Nb(e)?Rr(e.value):JSON.stringify(e,$b,2):String(e),$b=(e,t)=>Nb(t)?$b(e,t.value):ua(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((i,[n,r],s)=>(i[ig(n,s)+" =>"]=r,i),{})}:Ib(t)?{[`Set(${t.size})`]:[...t.values()].map(i=>ig(i))}:Ur(t)?ig(t):fe(t)&&!Ot(t)&&!Ob(t)?String(t):t,ig=(e,t="")=>{var i;return Ur(e)?`Symbol(${(i=e.description)!=null?i:t})`:e};let Pi;class EL{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Pi,!t&&Pi&&(this.index=(Pi.scopes||(Pi.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,i;if(this.scopes)for(t=0,i=this.scopes.length;t<i;t++)this.scopes[t].pause();for(t=0,i=this.effects.length;t<i;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,i;if(this.scopes)for(t=0,i=this.scopes.length;t<i;t++)this.scopes[t].resume();for(t=0,i=this.effects.length;t<i;t++)this.effects[t].resume()}}run(t){if(this._active){const i=Pi;try{return Pi=this,t()}finally{Pi=i}}}on(){++this._on===1&&(this.prevScope=Pi,Pi=this)}off(){this._on>0&&--this._on===0&&(Pi=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let i,n;for(i=0,n=this.effects.length;i<n;i++)this.effects[i].stop();for(this.effects.length=0,i=0,n=this.cleanups.length;i<n;i++)this.cleanups[i]();if(this.cleanups.length=0,this.scopes){for(i=0,n=this.scopes.length;i<n;i++)this.scopes[i].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function kL(){return Pi}let ue;const ng=new WeakSet;class zb{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Pi&&Pi.active&&Pi.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,ng.has(this)&&(ng.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Wb(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,D_(this),jb(this);const t=ue,i=wn;ue=this,wn=!0;try{return this.fn()}finally{Hb(this),ue=t,wn=i,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)c0(t);this.deps=this.depsTail=void 0,D_(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?ng.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){mp(this)&&this.run()}get dirty(){return mp(this)}}let Gb=0,Yl,Xl;function Wb(e,t=!1){if(e.flags|=8,t){e.next=Xl,Xl=e;return}e.next=Yl,Yl=e}function a0(){Gb++}function l0(){if(--Gb>0)return;if(Xl){let t=Xl;for(Xl=void 0;t;){const i=t.next;t.next=void 0,t.flags&=-9,t=i}}let e;for(;Yl;){let t=Yl;for(Yl=void 0;t;){const i=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(n){e||(e=n)}t=i}}if(e)throw e}function jb(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Hb(e){let t,i=e.depsTail,n=i;for(;n;){const r=n.prevDep;n.version===-1?(n===i&&(i=r),c0(n),RL(n)):t=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=r}e.deps=t,e.depsTail=i}function mp(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Vb(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Vb(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===cc)||(e.globalVersion=cc,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!mp(e))))return;e.flags|=2;const t=e.dep,i=ue,n=wn;ue=e,wn=!0;try{jb(e);const r=e.fn(e._value);(t.version===0||bs(r,e._value))&&(e.flags|=128,e._value=r,t.version++)}catch(r){throw t.version++,r}finally{ue=i,wn=n,Hb(e),e.flags&=-3}}function c0(e,t=!1){const{dep:i,prevSub:n,nextSub:r}=e;if(n&&(n.nextSub=r,e.prevSub=void 0),r&&(r.prevSub=n,e.nextSub=void 0),i.subs===e&&(i.subs=n,!n&&i.computed)){i.computed.flags&=-5;for(let s=i.computed.deps;s;s=s.nextDep)c0(s,!0)}!t&&!--i.sc&&i.map&&i.map.delete(i.key)}function RL(e){const{prevDep:t,nextDep:i}=e;t&&(t.nextDep=i,e.prevDep=void 0),i&&(i.prevDep=t,e.nextDep=void 0)}let wn=!0;const Ub=[];function Br(){Ub.push(wn),wn=!1}function Nr(){const e=Ub.pop();wn=e===void 0?!0:e}function D_(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const i=ue;ue=void 0;try{t()}finally{ue=i}}}let cc=0;class AL{constructor(t,i){this.sub=t,this.dep=i,this.version=i.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class h0{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!ue||!wn||ue===this.computed)return;let i=this.activeLink;if(i===void 0||i.sub!==ue)i=this.activeLink=new AL(ue,this),ue.deps?(i.prevDep=ue.depsTail,ue.depsTail.nextDep=i,ue.depsTail=i):ue.deps=ue.depsTail=i,qb(i);else if(i.version===-1&&(i.version=this.version,i.nextDep)){const n=i.nextDep;n.prevDep=i.prevDep,i.prevDep&&(i.prevDep.nextDep=n),i.prevDep=ue.depsTail,i.nextDep=void 0,ue.depsTail.nextDep=i,ue.depsTail=i,ue.deps===i&&(ue.deps=n)}return i}trigger(t){this.version++,cc++,this.notify(t)}notify(t){a0();try{for(let i=this.subs;i;i=i.prevSub)i.sub.notify()&&i.sub.dep.notify()}finally{l0()}}}function qb(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let n=t.deps;n;n=n.nextDep)qb(n)}const i=e.dep.subs;i!==e&&(e.prevSub=i,i&&(i.nextSub=e)),e.dep.subs=e}}const yp=new WeakMap,ho=Symbol(""),_p=Symbol(""),hc=Symbol("");function ai(e,t,i){if(wn&&ue){let n=yp.get(e);n||yp.set(e,n=new Map);let r=n.get(i);r||(n.set(i,r=new h0),r.map=n,r.key=i),r.track()}}function Mr(e,t,i,n,r,s){const o=yp.get(e);if(!o){cc++;return}const a=l=>{l&&l.trigger()};if(a0(),t==="clear")o.forEach(a);else{const l=Ot(e),c=l&&s0(i);if(l&&i==="length"){const h=Number(n);o.forEach((u,d)=>{(d==="length"||d===hc||!Ur(d)&&d>=h)&&a(u)})}else switch((i!==void 0||o.has(void 0))&&a(o.get(i)),c&&a(o.get(hc)),t){case"add":l?c&&a(o.get("length")):(a(o.get(ho)),ua(e)&&a(o.get(_p)));break;case"delete":l||(a(o.get(ho)),ua(e)&&a(o.get(_p)));break;case"set":ua(e)&&a(o.get(ho));break}}l0()}function zo(e){const t=te(e);return t===e?t:(ai(t,"iterate",hc),an(e)?t:t.map(In))}function Wd(e){return ai(e=te(e),"iterate",hc),e}function ls(e,t){return $r(e)?uo(e)?La(In(t)):La(t):In(t)}const LL={__proto__:null,[Symbol.iterator](){return rg(this,Symbol.iterator,e=>ls(this,e))},concat(...e){return zo(this).concat(...e.map(t=>Ot(t)?zo(t):t))},entries(){return rg(this,"entries",e=>(e[1]=ls(this,e[1]),e))},every(e,t){return mr(this,"every",e,t,void 0,arguments)},filter(e,t){return mr(this,"filter",e,t,i=>i.map(n=>ls(this,n)),arguments)},find(e,t){return mr(this,"find",e,t,i=>ls(this,i),arguments)},findIndex(e,t){return mr(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return mr(this,"findLast",e,t,i=>ls(this,i),arguments)},findLastIndex(e,t){return mr(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return mr(this,"forEach",e,t,void 0,arguments)},includes(...e){return sg(this,"includes",e)},indexOf(...e){return sg(this,"indexOf",e)},join(e){return zo(this).join(e)},lastIndexOf(...e){return sg(this,"lastIndexOf",e)},map(e,t){return mr(this,"map",e,t,void 0,arguments)},pop(){return ll(this,"pop")},push(...e){return ll(this,"push",e)},reduce(e,...t){return B_(this,"reduce",e,t)},reduceRight(e,...t){return B_(this,"reduceRight",e,t)},shift(){return ll(this,"shift")},some(e,t){return mr(this,"some",e,t,void 0,arguments)},splice(...e){return ll(this,"splice",e)},toReversed(){return zo(this).toReversed()},toSorted(e){return zo(this).toSorted(e)},toSpliced(...e){return zo(this).toSpliced(...e)},unshift(...e){return ll(this,"unshift",e)},values(){return rg(this,"values",e=>ls(this,e))}};function rg(e,t,i){const n=Wd(e),r=n[t]();return n!==e&&!an(e)&&(r._next=r.next,r.next=()=>{const s=r._next();return s.done||(s.value=i(s.value)),s}),r}const ML=Array.prototype;function mr(e,t,i,n,r,s){const o=Wd(e),a=o!==e&&!an(e),l=o[t];if(l!==ML[t]){const u=l.apply(e,s);return a?In(u):u}let c=i;o!==e&&(a?c=function(u,d){return i.call(this,ls(e,u),d,e)}:i.length>2&&(c=function(u,d){return i.call(this,u,d,e)}));const h=l.call(o,c,n);return a&&r?r(h):h}function B_(e,t,i,n){const r=Wd(e);let s=i;return r!==e&&(an(e)?i.length>3&&(s=function(o,a,l){return i.call(this,o,a,l,e)}):s=function(o,a,l){return i.call(this,o,ls(e,a),l,e)}),r[t](s,...n)}function sg(e,t,i){const n=te(e);ai(n,"iterate",hc);const r=n[t](...i);return(r===-1||r===!1)&&f0(i[0])?(i[0]=te(i[0]),n[t](...i)):r}function ll(e,t,i=[]){Br(),a0();const n=te(e)[t].apply(e,i);return l0(),Nr(),n}const IL=i0("__proto__,__v_isRef,__isVue"),Yb=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Ur));function PL(e){Ur(e)||(e=String(e));const t=te(this);return ai(t,"has",e),t.hasOwnProperty(e)}class Xb{constructor(t=!1,i=!1){this._isReadonly=t,this._isShallow=i}get(t,i,n){if(i==="__v_skip")return t.__v_skip;const r=this._isReadonly,s=this._isShallow;if(i==="__v_isReactive")return!r;if(i==="__v_isReadonly")return r;if(i==="__v_isShallow")return s;if(i==="__v_raw")return n===(r?s?jL:Qb:s?Jb:Zb).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(n)?t:void 0;const o=Ot(t);if(!r){let l;if(o&&(l=LL[i]))return l;if(i==="hasOwnProperty")return PL}const a=Reflect.get(t,i,hi(t)?t:n);if((Ur(i)?Yb.has(i):IL(i))||(r||ai(t,"get",i),s))return a;if(hi(a)){const l=o&&s0(i)?a:a.value;return r&&fe(l)?Cp(l):l}return fe(a)?r?Cp(a):jd(a):a}}class Kb extends Xb{constructor(t=!1){super(!1,t)}set(t,i,n,r){let s=t[i];const o=Ot(t)&&s0(i);if(!this._isShallow){const c=$r(s);if(!an(n)&&!$r(n)&&(s=te(s),n=te(n)),!o&&hi(s)&&!hi(n))return c||(s.value=n),!0}const a=o?Number(i)<t.length:ie(t,i),l=Reflect.set(t,i,n,hi(t)?t:r);return t===te(r)&&(a?bs(n,s)&&Mr(t,"set",i,n):Mr(t,"add",i,n)),l}deleteProperty(t,i){const n=ie(t,i);t[i];const r=Reflect.deleteProperty(t,i);return r&&n&&Mr(t,"delete",i,void 0),r}has(t,i){const n=Reflect.has(t,i);return(!Ur(i)||!Yb.has(i))&&ai(t,"has",i),n}ownKeys(t){return ai(t,"iterate",Ot(t)?"length":ho),Reflect.ownKeys(t)}}class FL extends Xb{constructor(t=!1){super(!0,t)}set(t,i){return!0}deleteProperty(t,i){return!0}}const OL=new Kb,DL=new FL,BL=new Kb(!0);const xp=e=>e,xh=e=>Reflect.getPrototypeOf(e);function NL(e,t,i){return function(...n){const r=this.__v_raw,s=te(r),o=ua(s),a=e==="entries"||e===Symbol.iterator&&o,l=e==="keys"&&o,c=r[e](...n),h=i?xp:t?La:In;return!t&&ai(s,"iterate",l?_p:ho),{next(){const{value:u,done:d}=c.next();return d?{value:u,done:d}:{value:a?[h(u[0]),h(u[1])]:h(u),done:d}},[Symbol.iterator](){return this}}}}function Ch(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function $L(e,t){const i={get(r){const s=this.__v_raw,o=te(s),a=te(r);e||(bs(r,a)&&ai(o,"get",r),ai(o,"get",a));const{has:l}=xh(o),c=t?xp:e?La:In;if(l.call(o,r))return c(s.get(r));if(l.call(o,a))return c(s.get(a));s!==o&&s.get(r)},get size(){const r=this.__v_raw;return!e&&ai(te(r),"iterate",ho),r.size},has(r){const s=this.__v_raw,o=te(s),a=te(r);return e||(bs(r,a)&&ai(o,"has",r),ai(o,"has",a)),r===a?s.has(r):s.has(r)||s.has(a)},forEach(r,s){const o=this,a=o.__v_raw,l=te(a),c=t?xp:e?La:In;return!e&&ai(l,"iterate",ho),a.forEach((h,u)=>r.call(s,c(h),c(u),o))}};return qe(i,e?{add:Ch("add"),set:Ch("set"),delete:Ch("delete"),clear:Ch("clear")}:{add(r){!t&&!an(r)&&!$r(r)&&(r=te(r));const s=te(this);return xh(s).has.call(s,r)||(s.add(r),Mr(s,"add",r,r)),this},set(r,s){!t&&!an(s)&&!$r(s)&&(s=te(s));const o=te(this),{has:a,get:l}=xh(o);let c=a.call(o,r);c||(r=te(r),c=a.call(o,r));const h=l.call(o,r);return o.set(r,s),c?bs(s,h)&&Mr(o,"set",r,s):Mr(o,"add",r,s),this},delete(r){const s=te(this),{has:o,get:a}=xh(s);let l=o.call(s,r);l||(r=te(r),l=o.call(s,r)),a&&a.call(s,r);const c=s.delete(r);return l&&Mr(s,"delete",r,void 0),c},clear(){const r=te(this),s=r.size!==0,o=r.clear();return s&&Mr(r,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(r=>{i[r]=NL(r,e,t)}),i}function u0(e,t){const i=$L(e,t);return(n,r,s)=>r==="__v_isReactive"?!e:r==="__v_isReadonly"?e:r==="__v_raw"?n:Reflect.get(ie(i,r)&&r in n?i:n,r,s)}const zL={get:u0(!1,!1)},GL={get:u0(!1,!0)},WL={get:u0(!0,!1)};const Zb=new WeakMap,Jb=new WeakMap,Qb=new WeakMap,jL=new WeakMap;function HL(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function VL(e){return e.__v_skip||!Object.isExtensible(e)?0:HL(mL(e))}function jd(e){return $r(e)?e:d0(e,!1,OL,zL,Zb)}function tv(e){return d0(e,!1,BL,GL,Jb)}function Cp(e){return d0(e,!0,DL,WL,Qb)}function d0(e,t,i,n,r){if(!fe(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const s=VL(e);if(s===0)return e;const o=r.get(e);if(o)return o;const a=new Proxy(e,s===2?n:i);return r.set(e,a),a}function uo(e){return $r(e)?uo(e.__v_raw):!!(e&&e.__v_isReactive)}function $r(e){return!!(e&&e.__v_isReadonly)}function an(e){return!!(e&&e.__v_isShallow)}function f0(e){return e?!!e.__v_raw:!1}function te(e){const t=e&&e.__v_raw;return t?te(t):e}function UL(e){return!ie(e,"__v_skip")&&Object.isExtensible(e)&&Db(e,"__v_skip",!0),e}const In=e=>fe(e)?jd(e):e,La=e=>fe(e)?Cp(e):e;function hi(e){return e?e.__v_isRef===!0:!1}function Je(e){return ev(e,!1)}function qL(e){return ev(e,!0)}function ev(e,t){return hi(e)?e:new YL(e,t)}class YL{constructor(t,i){this.dep=new h0,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=i?t:te(t),this._value=i?t:In(t),this.__v_isShallow=i}get value(){return this.dep.track(),this._value}set value(t){const i=this._rawValue,n=this.__v_isShallow||an(t)||$r(t);t=n?t:te(t),bs(t,i)&&(this._rawValue=t,this._value=n?t:In(t),this.dep.trigger())}}function Te(e){return hi(e)?e.value:e}const XL={get:(e,t,i)=>t==="__v_raw"?e:Te(Reflect.get(e,t,i)),set:(e,t,i,n)=>{const r=e[t];return hi(r)&&!hi(i)?(r.value=i,!0):Reflect.set(e,t,i,n)}};function iv(e){return uo(e)?e:new Proxy(e,XL)}class KL{constructor(t,i,n){this.fn=t,this.setter=i,this._value=void 0,this.dep=new h0(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=cc-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!i,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&ue!==this)return Wb(this,!0),!0}get value(){const t=this.dep.track();return Vb(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function ZL(e,t,i=!1){let n,r;return Bt(e)?n=e:(n=e.get,r=e.set),new KL(n,r,i)}const bh={},wu=new WeakMap;let Us;function JL(e,t=!1,i=Us){if(i){let n=wu.get(i);n||wu.set(i,n=[]),n.push(e)}}function QL(e,t,i=ce){const{immediate:n,deep:r,once:s,scheduler:o,augmentJob:a,call:l}=i,c=b=>r?b:an(b)||r===!1||r===0?Ir(b,1):Ir(b);let h,u,d,f,g=!1,p=!1;if(hi(e)?(u=()=>e.value,g=an(e)):uo(e)?(u=()=>c(e),g=!0):Ot(e)?(p=!0,g=e.some(b=>uo(b)||an(b)),u=()=>e.map(b=>{if(hi(b))return b.value;if(uo(b))return c(b);if(Bt(b))return l?l(b,2):b()})):Bt(e)?t?u=l?()=>l(e,2):e:u=()=>{if(d){Br();try{d()}finally{Nr()}}const b=Us;Us=h;try{return l?l(e,3,[f]):e(f)}finally{Us=b}}:u=Qn,t&&r){const b=u,v=r===!0?1/0:r;u=()=>Ir(b(),v)}const m=kL(),y=()=>{h.stop(),m&&m.active&&r0(m.effects,h)};if(s&&t){const b=t;t=(...v)=>{b(...v),y()}}let _=p?new Array(e.length).fill(bh):bh;const C=b=>{if(!(!(h.flags&1)||!h.dirty&&!b))if(t){const v=h.run();if(r||g||(p?v.some((S,w)=>bs(S,_[w])):bs(v,_))){d&&d();const S=Us;Us=h;try{const w=[v,_===bh?void 0:p&&_[0]===bh?[]:_,f];_=v,l?l(t,3,w):t(...w)}finally{Us=S}}}else h.run()};return a&&a(C),h=new zb(u),h.scheduler=o?()=>o(C,!1):C,f=b=>JL(b,!1,h),d=h.onStop=()=>{const b=wu.get(h);if(b){if(l)l(b,4);else for(const v of b)v();wu.delete(h)}},t?n?C(!0):_=h.run():o?o(C.bind(null,!0),!0):h.run(),y.pause=h.pause.bind(h),y.resume=h.resume.bind(h),y.stop=y,y}function Ir(e,t=1/0,i){if(t<=0||!fe(e)||e.__v_skip||(i=i||new Map,(i.get(e)||0)>=t))return e;if(i.set(e,t),t--,hi(e))Ir(e.value,t,i);else if(Ot(e))for(let n=0;n<e.length;n++)Ir(e[n],t,i);else if(Ib(e)||ua(e))e.forEach(n=>{Ir(n,t,i)});else if(Ob(e)){for(const n in e)Ir(e[n],t,i);for(const n of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,n)&&Ir(e[n],t,i)}return e}function Vc(e,t,i,n){try{return n?e(...n):e()}catch(r){Uc(r,t,i)}}function Pn(e,t,i,n){if(Bt(e)){const r=Vc(e,t,i,n);return r&&Pb(r)&&r.catch(s=>{Uc(s,t,i)}),r}if(Ot(e)){const r=[];for(let s=0;s<e.length;s++)r.push(Pn(e[s],t,i,n));return r}}function Uc(e,t,i,n=!0){const r=t?t.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:o}=t&&t.appContext.config||ce;if(t){let a=t.parent;const l=t.proxy,c=`https://vuejs.org/error-reference/#runtime-${i}`;for(;a;){const h=a.ec;if(h){for(let u=0;u<h.length;u++)if(h[u](e,l,c)===!1)return}a=a.parent}if(s){Br(),Vc(s,null,10,[e,l,c]),Nr();return}}tM(e,i,r,n,o)}function tM(e,t,i,n=!0,r=!1){if(r)throw e;console.error(e)}const Ci=[];let Un=-1;const da=[];let cs=null,Zo=0;const nv=Promise.resolve();let Su=null;function rv(e){const t=Su||nv;return e?t.then(this?e.bind(this):e):t}function eM(e){let t=Un+1,i=Ci.length;for(;t<i;){const n=t+i>>>1,r=Ci[n],s=uc(r);s<e||s===e&&r.flags&2?t=n+1:i=n}return t}function g0(e){if(!(e.flags&1)){const t=uc(e),i=Ci[Ci.length-1];!i||!(e.flags&2)&&t>=uc(i)?Ci.push(e):Ci.splice(eM(t),0,e),e.flags|=1,sv()}}function sv(){Su||(Su=nv.then(av))}function iM(e){Ot(e)?da.push(...e):cs&&e.id===-1?cs.splice(Zo+1,0,e):e.flags&1||(da.push(e),e.flags|=1),sv()}function N_(e,t,i=Un+1){for(;i<Ci.length;i++){const n=Ci[i];if(n&&n.flags&2){if(e&&n.id!==e.uid)continue;Ci.splice(i,1),i--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function ov(e){if(da.length){const t=[...new Set(da)].sort((i,n)=>uc(i)-uc(n));if(da.length=0,cs){cs.push(...t);return}for(cs=t,Zo=0;Zo<cs.length;Zo++){const i=cs[Zo];i.flags&4&&(i.flags&=-2),i.flags&8||i(),i.flags&=-2}cs=null,Zo=0}}const uc=e=>e.id==null?e.flags&2?-1:1/0:e.id;function av(e){try{for(Un=0;Un<Ci.length;Un++){const t=Ci[Un];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Vc(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Un<Ci.length;Un++){const t=Ci[Un];t&&(t.flags&=-2)}Un=-1,Ci.length=0,ov(),Su=null,(Ci.length||da.length)&&av()}}let ti=null,lv=null;function Tu(e){const t=ti;return ti=e,lv=e&&e.type.__scopeId||null,t}function mn(e,t=ti,i){if(!t||e._n)return e;const n=(...r)=>{n._d&&Ru(-1);const s=Tu(t);let o;try{o=e(...r)}finally{Tu(s),n._d&&Ru(1)}return o};return n._n=!0,n._c=!0,n._d=!0,n}function nM(e,t){if(ti===null)return e;const i=Xd(ti),n=e.dirs||(e.dirs=[]);for(let r=0;r<t.length;r++){let[s,o,a,l=ce]=t[r];s&&(Bt(s)&&(s={mounted:s,updated:s}),s.deep&&Ir(o),n.push({dir:s,instance:i,value:o,oldValue:void 0,arg:a,modifiers:l}))}return e}function $s(e,t,i,n){const r=e.dirs,s=t&&t.dirs;for(let o=0;o<r.length;o++){const a=r[o];s&&(a.oldValue=s[o].value);let l=a.dir[n];l&&(Br(),Pn(l,i,8,[e.el,a,e,t]),Nr())}}function eu(e,t){if(Qe){let i=Qe.provides;const n=Qe.parent&&Qe.parent.provides;n===i&&(i=Qe.provides=Object.create(n)),i[e]=t}}function Sn(e,t,i=!1){const n=$v();if(n||ga){let r=ga?ga._context.provides:n?n.parent==null||n.ce?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(r&&e in r)return r[e];if(arguments.length>1)return i&&Bt(t)?t.call(n&&n.proxy):t}}const rM=Symbol.for("v-scx"),sM=()=>Sn(rM);function Tn(e,t,i){return cv(e,t,i)}function cv(e,t,i=ce){const{immediate:n,deep:r,flush:s,once:o}=i,a=qe({},i),l=t&&n||!t&&s!=="post";let c;if(Ia){if(s==="sync"){const f=sM();c=f.__watcherHandles||(f.__watcherHandles=[])}else if(!l){const f=()=>{};return f.stop=Qn,f.resume=Qn,f.pause=Qn,f}}const h=Qe;a.call=(f,g,p)=>Pn(f,h,g,p);let u=!1;s==="post"?a.scheduler=f=>{Hi(f,h&&h.suspense)}:s!=="sync"&&(u=!0,a.scheduler=(f,g)=>{g?f():g0(f)}),a.augmentJob=f=>{t&&(f.flags|=4),u&&(f.flags|=2,h&&(f.id=h.uid,f.i=h))};const d=QL(e,t,a);return Ia&&(c?c.push(d):l&&d()),d}function oM(e,t,i){const n=this.proxy,r=Ae(e)?e.includes(".")?hv(n,e):()=>n[e]:e.bind(n,n);let s;Bt(t)?s=t:(s=t.handler,i=t);const o=Yc(this),a=cv(r,s.bind(n),i);return o(),a}function hv(e,t){const i=t.split(".");return()=>{let n=e;for(let r=0;r<i.length&&n;r++)n=n[i[r]];return n}}const aM=Symbol("_vte"),uv=e=>e.__isTeleport,Ar=Symbol("_leaveCb"),vh=Symbol("_enterCb");function lM(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Vd(()=>{e.isMounted=!0}),_v(()=>{e.isUnmounting=!0}),e}const Qi=[Function,Array],dv={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Qi,onEnter:Qi,onAfterEnter:Qi,onEnterCancelled:Qi,onBeforeLeave:Qi,onLeave:Qi,onAfterLeave:Qi,onLeaveCancelled:Qi,onBeforeAppear:Qi,onAppear:Qi,onAfterAppear:Qi,onAppearCancelled:Qi},fv=e=>{const t=e.subTree;return t.component?fv(t.component):t},cM={name:"BaseTransition",props:dv,setup(e,{slots:t}){const i=$v(),n=lM();return()=>{const r=t.default&&mv(t.default(),!0);if(!r||!r.length)return;const s=gv(r),o=te(e),{mode:a}=o;if(n.isLeaving)return og(s);const l=$_(s);if(!l)return og(s);let c=bp(l,o,n,i,u=>c=u);l.type!==li&&dc(l,c);let h=i.subTree&&$_(i.subTree);if(h&&h.type!==li&&!Zs(h,l)&&fv(i).type!==li){let u=bp(h,o,n,i);if(dc(h,u),a==="out-in"&&l.type!==li)return n.isLeaving=!0,u.afterLeave=()=>{n.isLeaving=!1,i.job.flags&8||i.update(),delete u.afterLeave,h=void 0},og(s);a==="in-out"&&l.type!==li?u.delayLeave=(d,f,g)=>{const p=pv(n,h);p[String(h.key)]=h,d[Ar]=()=>{f(),d[Ar]=void 0,delete c.delayedLeave,h=void 0},c.delayedLeave=()=>{g(),delete c.delayedLeave,h=void 0}}:h=void 0}else h&&(h=void 0);return s}}};function gv(e){let t=e[0];if(e.length>1){for(const i of e)if(i.type!==li){t=i;break}}return t}const hM=cM;function pv(e,t){const{leavingVNodes:i}=e;let n=i.get(t.type);return n||(n=Object.create(null),i.set(t.type,n)),n}function bp(e,t,i,n,r){const{appear:s,mode:o,persisted:a=!1,onBeforeEnter:l,onEnter:c,onAfterEnter:h,onEnterCancelled:u,onBeforeLeave:d,onLeave:f,onAfterLeave:g,onLeaveCancelled:p,onBeforeAppear:m,onAppear:y,onAfterAppear:_,onAppearCancelled:C}=t,b=String(e.key),v=pv(i,e),S=(A,B)=>{A&&Pn(A,n,9,B)},w=(A,B)=>{const O=B[1];S(A,B),Ot(A)?A.every(F=>F.length<=1)&&O():A.length<=1&&O()},L={mode:o,persisted:a,beforeEnter(A){let B=l;if(!i.isMounted)if(s)B=m||l;else return;A[Ar]&&A[Ar](!0);const O=v[b];O&&Zs(e,O)&&O.el[Ar]&&O.el[Ar](),S(B,[A])},enter(A){let B=c,O=h,F=u;if(!i.isMounted)if(s)B=y||c,O=_||h,F=C||u;else return;let R=!1;const T=A[vh]=P=>{R||(R=!0,P?S(F,[A]):S(O,[A]),L.delayedLeave&&L.delayedLeave(),A[vh]=void 0)};B?w(B,[A,T]):T()},leave(A,B){const O=String(e.key);if(A[vh]&&A[vh](!0),i.isUnmounting)return B();S(d,[A]);let F=!1;const R=A[Ar]=T=>{F||(F=!0,B(),T?S(p,[A]):S(g,[A]),A[Ar]=void 0,v[O]===e&&delete v[O])};v[O]=e,f?w(f,[A,R]):R()},clone(A){const B=bp(A,t,i,n,r);return r&&r(B),B}};return L}function og(e){if(qc(e))return e=Ss(e),e.children=null,e}function $_(e){if(!qc(e))return uv(e.type)&&e.children?gv(e.children):e;if(e.component)return e.component.subTree;const{shapeFlag:t,children:i}=e;if(i){if(t&16)return i[0];if(t&32&&Bt(i.default))return i.default()}}function dc(e,t){e.shapeFlag&6&&e.component?(e.transition=t,dc(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function mv(e,t=!1,i){let n=[],r=0;for(let s=0;s<e.length;s++){let o=e[s];const a=i==null?o.key:String(i)+String(o.key!=null?o.key:s);o.type===Ee?(o.patchFlag&128&&r++,n=n.concat(mv(o.children,t,a))):(t||o.type!==li)&&n.push(a!=null?Ss(o,{key:a}):o)}if(r>1)for(let s=0;s<n.length;s++)n[s].patchFlag=-2;return n}function p0(e,t){return Bt(e)?qe({name:e.name},t,{setup:e}):e}function m0(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const Eu=new WeakMap;function Kl(e,t,i,n,r=!1){if(Ot(e)){e.forEach((g,p)=>Kl(g,t&&(Ot(t)?t[p]:t),i,n,r));return}if(fa(n)&&!r){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&Kl(e,t,i,n.component.subTree);return}const s=n.shapeFlag&4?Xd(n.component):n.el,o=r?null:s,{i:a,r:l}=e,c=t&&t.r,h=a.refs===ce?a.refs={}:a.refs,u=a.setupState,d=te(u),f=u===ce?Mb:g=>ie(d,g);if(c!=null&&c!==l){if(z_(t),Ae(c))h[c]=null,f(c)&&(u[c]=null);else if(hi(c)){c.value=null;const g=t;g.k&&(h[g.k]=null)}}if(Bt(l))Vc(l,a,12,[o,h]);else{const g=Ae(l),p=hi(l);if(g||p){const m=()=>{if(e.f){const y=g?f(l)?u[l]:h[l]:l.value;if(r)Ot(y)&&r0(y,s);else if(Ot(y))y.includes(s)||y.push(s);else if(g)h[l]=[s],f(l)&&(u[l]=h[l]);else{const _=[s];l.value=_,e.k&&(h[e.k]=_)}}else g?(h[l]=o,f(l)&&(u[l]=o)):p&&(l.value=o,e.k&&(h[e.k]=o))};if(o){const y=()=>{m(),Eu.delete(e)};y.id=-1,Eu.set(e,y),Hi(y,i)}else z_(e),m()}}}function z_(e){const t=Eu.get(e);t&&(t.flags|=8,Eu.delete(e))}const G_=e=>e.nodeType===8;zd().requestIdleCallback;zd().cancelIdleCallback;function uM(e,t){if(G_(e)&&e.data==="["){let i=1,n=e.nextSibling;for(;n;){if(n.nodeType===1){if(t(n)===!1)break}else if(G_(n))if(n.data==="]"){if(--i===0)break}else n.data==="["&&i++;n=n.nextSibling}}else t(e)}const fa=e=>!!e.type.__asyncLoader;function P7(e){Bt(e)&&(e={loader:e});const{loader:t,loadingComponent:i,errorComponent:n,delay:r=200,hydrate:s,timeout:o,suspensible:a=!0,onError:l}=e;let c=null,h,u=0;const d=()=>(u++,c=null,f()),f=()=>{let g;return c||(g=c=t().catch(p=>{if(p=p instanceof Error?p:new Error(String(p)),l)return new Promise((m,y)=>{l(p,()=>m(d()),()=>y(p),u+1)});throw p}).then(p=>g!==c&&c?c:(p&&(p.__esModule||p[Symbol.toStringTag]==="Module")&&(p=p.default),h=p,p)))};return p0({name:"AsyncComponentWrapper",__asyncLoader:f,__asyncHydrate(g,p,m){let y=!1;(p.bu||(p.bu=[])).push(()=>y=!0);const _=()=>{y||m()},C=s?()=>{const b=s(_,v=>uM(g,v));b&&(p.bum||(p.bum=[])).push(b)}:_;h?C():f().then(()=>!p.isUnmounted&&C())},get __asyncResolved(){return h},setup(){const g=Qe;if(m0(g),h)return()=>wh(h,g);const p=C=>{c=null,Uc(C,g,13,!n)};if(a&&g.suspense||Ia)return f().then(C=>()=>wh(C,g)).catch(C=>(p(C),()=>n?me(n,{error:C}):null));const m=Je(!1),y=Je(),_=Je(!!r);return r&&setTimeout(()=>{_.value=!1},r),o!=null&&setTimeout(()=>{if(!m.value&&!y.value){const C=new Error(`Async component timed out after ${o}ms.`);p(C),y.value=C}},o),f().then(()=>{m.value=!0,g.parent&&qc(g.parent.vnode)&&g.parent.update()}).catch(C=>{p(C),y.value=C}),()=>{if(m.value&&h)return wh(h,g);if(y.value&&n)return me(n,{error:y.value});if(i&&!_.value)return wh(i,g)}}})}function wh(e,t){const{ref:i,props:n,children:r,ce:s}=t.vnode,o=me(e,n,r);return o.ref=i,o.ce=s,delete t.vnode.ce,o}const qc=e=>e.type.__isKeepAlive;function dM(e,t){yv(e,"a",t)}function fM(e,t){yv(e,"da",t)}function yv(e,t,i=Qe){const n=e.__wdc||(e.__wdc=()=>{let r=i;for(;r;){if(r.isDeactivated)return;r=r.parent}return e()});if(Hd(t,n,i),i){let r=i.parent;for(;r&&r.parent;)qc(r.parent.vnode)&&gM(n,t,i,r),r=r.parent}}function gM(e,t,i,n){const r=Hd(t,e,n,!0);Ud(()=>{r0(n[t],r)},i)}function Hd(e,t,i=Qe,n=!1){if(i){const r=i[e]||(i[e]=[]),s=t.__weh||(t.__weh=(...o)=>{Br();const a=Yc(i),l=Pn(t,i,e,o);return a(),Nr(),l});return n?r.unshift(s):r.push(s),s}}const qr=e=>(t,i=Qe)=>{(!Ia||e==="sp")&&Hd(e,(...n)=>t(...n),i)},pM=qr("bm"),Vd=qr("m"),mM=qr("bu"),yM=qr("u"),_v=qr("bum"),Ud=qr("um"),_M=qr("sp"),xM=qr("rtg"),CM=qr("rtc");function bM(e,t=Qe){Hd("ec",e,t)}const vM="components";function y0(e,t){return SM(vM,e,!0,t)||e}const wM=Symbol.for("v-ndc");function SM(e,t,i=!0,n=!1){const r=ti||Qe;if(r){const s=r.type;{const a=cI(s,!1);if(a&&(a===t||a===cn(t)||a===$d(cn(t))))return s}const o=W_(r[e]||s[e],t)||W_(r.appContext[e],t);return!o&&n?s:o}}function W_(e,t){return e&&(e[t]||e[cn(t)]||e[$d(cn(t))])}function Sh(e,t,i,n){let r;const s=i,o=Ot(e);if(o||Ae(e)){const a=o&&uo(e);let l=!1,c=!1;a&&(l=!an(e),c=$r(e),e=Wd(e)),r=new Array(e.length);for(let h=0,u=e.length;h<u;h++)r[h]=t(l?c?La(In(e[h])):In(e[h]):e[h],h,void 0,s)}else if(typeof e=="number"){r=new Array(e);for(let a=0;a<e;a++)r[a]=t(a+1,a,void 0,s)}else if(fe(e))if(e[Symbol.iterator])r=Array.from(e,(a,l)=>t(a,l,void 0,s));else{const a=Object.keys(e);r=new Array(a.length);for(let l=0,c=a.length;l<c;l++){const h=a[l];r[l]=t(e[h],h,l,s)}}else r=[];return r}function TM(e,t,i={},n,r){if(ti.ce||ti.parent&&fa(ti.parent)&&ti.parent.ce){const c=Object.keys(i).length>0;return i.name=t,Wt(),En(Ee,null,[me("slot",i,n&&n())],c?-2:64)}let s=e[t];s&&s._c&&(s._d=!1),Wt();const o=s&&xv(s(i)),a=i.key||o&&o.key,l=En(Ee,{key:(a&&!Ur(a)?a:`_${t}`)+(!o&&n?"_fb":"")},o||(n?n():[]),o&&e._===1?64:-2);return s&&s._c&&(s._d=!0),l}function xv(e){return e.some(t=>gc(t)?!(t.type===li||t.type===Ee&&!xv(t.children)):!0)?e:null}const vp=e=>e?zv(e)?Xd(e):vp(e.parent):null,Zl=qe(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>vp(e.parent),$root:e=>vp(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>bv(e),$forceUpdate:e=>e.f||(e.f=()=>{g0(e.update)}),$nextTick:e=>e.n||(e.n=rv.bind(e.proxy)),$watch:e=>oM.bind(e)}),ag=(e,t)=>e!==ce&&!e.__isScriptSetup&&ie(e,t),EM={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:i,setupState:n,data:r,props:s,accessCache:o,type:a,appContext:l}=e;if(t[0]!=="$"){const d=o[t];if(d!==void 0)switch(d){case 1:return n[t];case 2:return r[t];case 4:return i[t];case 3:return s[t]}else{if(ag(n,t))return o[t]=1,n[t];if(r!==ce&&ie(r,t))return o[t]=2,r[t];if(ie(s,t))return o[t]=3,s[t];if(i!==ce&&ie(i,t))return o[t]=4,i[t];wp&&(o[t]=0)}}const c=Zl[t];let h,u;if(c)return t==="$attrs"&&ai(e.attrs,"get",""),c(e);if((h=a.__cssModules)&&(h=h[t]))return h;if(i!==ce&&ie(i,t))return o[t]=4,i[t];if(u=l.config.globalProperties,ie(u,t))return u[t]},set({_:e},t,i){const{data:n,setupState:r,ctx:s}=e;return ag(r,t)?(r[t]=i,!0):n!==ce&&ie(n,t)?(n[t]=i,!0):ie(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(s[t]=i,!0)},has({_:{data:e,setupState:t,accessCache:i,ctx:n,appContext:r,props:s,type:o}},a){let l;return!!(i[a]||e!==ce&&a[0]!=="$"&&ie(e,a)||ag(t,a)||ie(s,a)||ie(n,a)||ie(Zl,a)||ie(r.config.globalProperties,a)||(l=o.__cssModules)&&l[a])},defineProperty(e,t,i){return i.get!=null?e._.accessCache[t]=0:ie(i,"value")&&this.set(e,t,i.value,null),Reflect.defineProperty(e,t,i)}};function j_(e){return Ot(e)?e.reduce((t,i)=>(t[i]=null,t),{}):e}let wp=!0;function kM(e){const t=bv(e),i=e.proxy,n=e.ctx;wp=!1,t.beforeCreate&&H_(t.beforeCreate,e,"bc");const{data:r,computed:s,methods:o,watch:a,provide:l,inject:c,created:h,beforeMount:u,mounted:d,beforeUpdate:f,updated:g,activated:p,deactivated:m,beforeDestroy:y,beforeUnmount:_,destroyed:C,unmounted:b,render:v,renderTracked:S,renderTriggered:w,errorCaptured:L,serverPrefetch:A,expose:B,inheritAttrs:O,components:F,directives:R,filters:T}=t;if(c&&RM(c,n,null),o)for(const D in o){const M=o[D];Bt(M)&&(n[D]=M.bind(i))}if(r){const D=r.call(i,i);fe(D)&&(e.data=jd(D))}if(wp=!0,s)for(const D in s){const M=s[D],j=Bt(M)?M.bind(i,i):Bt(M.get)?M.get.bind(i,i):Qn,Y=!Bt(M)&&Bt(M.set)?M.set.bind(i):Qn,K=wi({get:j,set:Y});Object.defineProperty(n,D,{enumerable:!0,configurable:!0,get:()=>K.value,set:G=>K.value=G})}if(a)for(const D in a)Cv(a[D],n,i,D);if(l){const D=Bt(l)?l.call(i):l;Reflect.ownKeys(D).forEach(M=>{eu(M,D[M])})}h&&H_(h,e,"c");function E(D,M){Ot(M)?M.forEach(j=>D(j.bind(i))):M&&D(M.bind(i))}if(E(pM,u),E(Vd,d),E(mM,f),E(yM,g),E(dM,p),E(fM,m),E(bM,L),E(CM,S),E(xM,w),E(_v,_),E(Ud,b),E(_M,A),Ot(B))if(B.length){const D=e.exposed||(e.exposed={});B.forEach(M=>{Object.defineProperty(D,M,{get:()=>i[M],set:j=>i[M]=j,enumerable:!0})})}else e.exposed||(e.exposed={});v&&e.render===Qn&&(e.render=v),O!=null&&(e.inheritAttrs=O),F&&(e.components=F),R&&(e.directives=R),A&&m0(e)}function RM(e,t,i=Qn){Ot(e)&&(e=Sp(e));for(const n in e){const r=e[n];let s;fe(r)?"default"in r?s=Sn(r.from||n,r.default,!0):s=Sn(r.from||n):s=Sn(r),hi(s)?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):t[n]=s}}function H_(e,t,i){Pn(Ot(e)?e.map(n=>n.bind(t.proxy)):e.bind(t.proxy),t,i)}function Cv(e,t,i,n){let r=n.includes(".")?hv(i,n):()=>i[n];if(Ae(e)){const s=t[e];Bt(s)&&Tn(r,s)}else if(Bt(e))Tn(r,e.bind(i));else if(fe(e))if(Ot(e))e.forEach(s=>Cv(s,t,i,n));else{const s=Bt(e.handler)?e.handler.bind(i):t[e.handler];Bt(s)&&Tn(r,s,e)}}function bv(e){const t=e.type,{mixins:i,extends:n}=t,{mixins:r,optionsCache:s,config:{optionMergeStrategies:o}}=e.appContext,a=s.get(t);let l;return a?l=a:!r.length&&!i&&!n?l=t:(l={},r.length&&r.forEach(c=>ku(l,c,o,!0)),ku(l,t,o)),fe(t)&&s.set(t,l),l}function ku(e,t,i,n=!1){const{mixins:r,extends:s}=t;s&&ku(e,s,i,!0),r&&r.forEach(o=>ku(e,o,i,!0));for(const o in t)if(!(n&&o==="expose")){const a=AM[o]||i&&i[o];e[o]=a?a(e[o],t[o]):t[o]}return e}const AM={data:V_,props:U_,emits:U_,methods:Ml,computed:Ml,beforeCreate:_i,created:_i,beforeMount:_i,mounted:_i,beforeUpdate:_i,updated:_i,beforeDestroy:_i,beforeUnmount:_i,destroyed:_i,unmounted:_i,activated:_i,deactivated:_i,errorCaptured:_i,serverPrefetch:_i,components:Ml,directives:Ml,watch:MM,provide:V_,inject:LM};function V_(e,t){return t?e?function(){return qe(Bt(e)?e.call(this,this):e,Bt(t)?t.call(this,this):t)}:t:e}function LM(e,t){return Ml(Sp(e),Sp(t))}function Sp(e){if(Ot(e)){const t={};for(let i=0;i<e.length;i++)t[e[i]]=e[i];return t}return e}function _i(e,t){return e?[...new Set([].concat(e,t))]:t}function Ml(e,t){return e?qe(Object.create(null),e,t):t}function U_(e,t){return e?Ot(e)&&Ot(t)?[...new Set([...e,...t])]:qe(Object.create(null),j_(e),j_(t??{})):t}function MM(e,t){if(!e)return t;if(!t)return e;const i=qe(Object.create(null),e);for(const n in t)i[n]=_i(e[n],t[n]);return i}function vv(){return{app:null,config:{isNativeTag:Mb,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let IM=0;function PM(e,t){return function(n,r=null){Bt(n)||(n=qe({},n)),r!=null&&!fe(r)&&(r=null);const s=vv(),o=new WeakSet,a=[];let l=!1;const c=s.app={_uid:IM++,_component:n,_props:r,_container:null,_context:s,_instance:null,version:uI,get config(){return s.config},set config(h){},use(h,...u){return o.has(h)||(h&&Bt(h.install)?(o.add(h),h.install(c,...u)):Bt(h)&&(o.add(h),h(c,...u))),c},mixin(h){return s.mixins.includes(h)||s.mixins.push(h),c},component(h,u){return u?(s.components[h]=u,c):s.components[h]},directive(h,u){return u?(s.directives[h]=u,c):s.directives[h]},mount(h,u,d){if(!l){const f=c._ceVNode||me(n,r);return f.appContext=s,d===!0?d="svg":d===!1&&(d=void 0),e(f,h,d),l=!0,c._container=h,h.__vue_app__=c,Xd(f.component)}},onUnmount(h){a.push(h)},unmount(){l&&(Pn(a,c._instance,16),e(null,c._container),delete c._container.__vue_app__)},provide(h,u){return s.provides[h]=u,c},runWithContext(h){const u=ga;ga=c;try{return h()}finally{ga=u}}};return c}}let ga=null;const FM=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${cn(t)}Modifiers`]||e[`${Mo(t)}Modifiers`];function OM(e,t,...i){if(e.isUnmounted)return;const n=e.vnode.props||ce;let r=i;const s=t.startsWith("update:"),o=s&&FM(n,t.slice(7));o&&(o.trim&&(r=i.map(h=>Ae(h)?h.trim():h)),o.number&&(r=i.map(o0)));let a,l=n[a=eg(t)]||n[a=eg(cn(t))];!l&&s&&(l=n[a=eg(Mo(t))]),l&&Pn(l,e,6,r);const c=n[a+"Once"];if(c){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,Pn(c,e,6,r)}}const DM=new WeakMap;function wv(e,t,i=!1){const n=i?DM:t.emitsCache,r=n.get(e);if(r!==void 0)return r;const s=e.emits;let o={},a=!1;if(!Bt(e)){const l=c=>{const h=wv(c,t,!0);h&&(a=!0,qe(o,h))};!i&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!s&&!a?(fe(e)&&n.set(e,null),null):(Ot(s)?s.forEach(l=>o[l]=null):qe(o,s),fe(e)&&n.set(e,o),o)}function qd(e,t){return!e||!Dd(t)?!1:(t=t.slice(2).replace(/Once$/,""),ie(e,t[0].toLowerCase()+t.slice(1))||ie(e,Mo(t))||ie(e,t))}function q_(e){const{type:t,vnode:i,proxy:n,withProxy:r,propsOptions:[s],slots:o,attrs:a,emit:l,render:c,renderCache:h,props:u,data:d,setupState:f,ctx:g,inheritAttrs:p}=e,m=Tu(e);let y,_;try{if(i.shapeFlag&4){const b=r||n,v=b;y=Yn(c.call(v,b,h,u,f,d,g)),_=a}else{const b=t;y=Yn(b.length>1?b(u,{attrs:a,slots:o,emit:l}):b(u,null)),_=t.props?a:BM(a)}}catch(b){Jl.length=0,Uc(b,e,1),y=me(li)}let C=y;if(_&&p!==!1){const b=Object.keys(_),{shapeFlag:v}=C;b.length&&v&7&&(s&&b.some(n0)&&(_=NM(_,s)),C=Ss(C,_,!1,!0))}return i.dirs&&(C=Ss(C,null,!1,!0),C.dirs=C.dirs?C.dirs.concat(i.dirs):i.dirs),i.transition&&dc(C,i.transition),y=C,Tu(m),y}const BM=e=>{let t;for(const i in e)(i==="class"||i==="style"||Dd(i))&&((t||(t={}))[i]=e[i]);return t},NM=(e,t)=>{const i={};for(const n in e)(!n0(n)||!(n.slice(9)in t))&&(i[n]=e[n]);return i};function $M(e,t,i){const{props:n,children:r,component:s}=e,{props:o,children:a,patchFlag:l}=t,c=s.emitsOptions;if(t.dirs||t.transition)return!0;if(i&&l>=0){if(l&1024)return!0;if(l&16)return n?Y_(n,o,c):!!o;if(l&8){const h=t.dynamicProps;for(let u=0;u<h.length;u++){const d=h[u];if(o[d]!==n[d]&&!qd(c,d))return!0}}}else return(r||a)&&(!a||!a.$stable)?!0:n===o?!1:n?o?Y_(n,o,c):!0:!!o;return!1}function Y_(e,t,i){const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(let r=0;r<n.length;r++){const s=n[r];if(t[s]!==e[s]&&!qd(i,s))return!0}return!1}function zM({vnode:e,parent:t},i){for(;t;){const n=t.subTree;if(n.suspense&&n.suspense.activeBranch===e&&(n.el=e.el),n===e)(e=t.vnode).el=i,t=t.parent;else break}}const Sv={},Tv=()=>Object.create(Sv),Ev=e=>Object.getPrototypeOf(e)===Sv;function GM(e,t,i,n=!1){const r={},s=Tv();e.propsDefaults=Object.create(null),kv(e,t,r,s);for(const o in e.propsOptions[0])o in r||(r[o]=void 0);i?e.props=n?r:tv(r):e.type.props?e.props=r:e.props=s,e.attrs=s}function WM(e,t,i,n){const{props:r,attrs:s,vnode:{patchFlag:o}}=e,a=te(r),[l]=e.propsOptions;let c=!1;if((n||o>0)&&!(o&16)){if(o&8){const h=e.vnode.dynamicProps;for(let u=0;u<h.length;u++){let d=h[u];if(qd(e.emitsOptions,d))continue;const f=t[d];if(l)if(ie(s,d))f!==s[d]&&(s[d]=f,c=!0);else{const g=cn(d);r[g]=Tp(l,a,g,f,e,!1)}else f!==s[d]&&(s[d]=f,c=!0)}}}else{kv(e,t,r,s)&&(c=!0);let h;for(const u in a)(!t||!ie(t,u)&&((h=Mo(u))===u||!ie(t,h)))&&(l?i&&(i[u]!==void 0||i[h]!==void 0)&&(r[u]=Tp(l,a,u,void 0,e,!0)):delete r[u]);if(s!==a)for(const u in s)(!t||!ie(t,u))&&(delete s[u],c=!0)}c&&Mr(e.attrs,"set","")}function kv(e,t,i,n){const[r,s]=e.propsOptions;let o=!1,a;if(t)for(let l in t){if(ql(l))continue;const c=t[l];let h;r&&ie(r,h=cn(l))?!s||!s.includes(h)?i[h]=c:(a||(a={}))[h]=c:qd(e.emitsOptions,l)||(!(l in n)||c!==n[l])&&(n[l]=c,o=!0)}if(s){const l=te(i),c=a||ce;for(let h=0;h<s.length;h++){const u=s[h];i[u]=Tp(r,l,u,c[u],e,!ie(c,u))}}return o}function Tp(e,t,i,n,r,s){const o=e[i];if(o!=null){const a=ie(o,"default");if(a&&n===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&Bt(l)){const{propsDefaults:c}=r;if(i in c)n=c[i];else{const h=Yc(r);n=c[i]=l.call(null,t),h()}}else n=l;r.ce&&r.ce._setProp(i,n)}o[0]&&(s&&!a?n=!1:o[1]&&(n===""||n===Mo(i))&&(n=!0))}return n}const jM=new WeakMap;function Rv(e,t,i=!1){const n=i?jM:t.propsCache,r=n.get(e);if(r)return r;const s=e.props,o={},a=[];let l=!1;if(!Bt(e)){const h=u=>{l=!0;const[d,f]=Rv(u,t,!0);qe(o,d),f&&a.push(...f)};!i&&t.mixins.length&&t.mixins.forEach(h),e.extends&&h(e.extends),e.mixins&&e.mixins.forEach(h)}if(!s&&!l)return fe(e)&&n.set(e,ha),ha;if(Ot(s))for(let h=0;h<s.length;h++){const u=cn(s[h]);X_(u)&&(o[u]=ce)}else if(s)for(const h in s){const u=cn(h);if(X_(u)){const d=s[h],f=o[u]=Ot(d)||Bt(d)?{type:d}:qe({},d),g=f.type;let p=!1,m=!0;if(Ot(g))for(let y=0;y<g.length;++y){const _=g[y],C=Bt(_)&&_.name;if(C==="Boolean"){p=!0;break}else C==="String"&&(m=!1)}else p=Bt(g)&&g.name==="Boolean";f[0]=p,f[1]=m,(p||ie(f,"default"))&&a.push(u)}}const c=[o,a];return fe(e)&&n.set(e,c),c}function X_(e){return e[0]!=="$"&&!ql(e)}const _0=e=>e==="_"||e==="_ctx"||e==="$stable",x0=e=>Ot(e)?e.map(Yn):[Yn(e)],HM=(e,t,i)=>{if(t._n)return t;const n=mn((...r)=>x0(t(...r)),i);return n._c=!1,n},Av=(e,t,i)=>{const n=e._ctx;for(const r in e){if(_0(r))continue;const s=e[r];if(Bt(s))t[r]=HM(r,s,n);else if(s!=null){const o=x0(s);t[r]=()=>o}}},Lv=(e,t)=>{const i=x0(t);e.slots.default=()=>i},Mv=(e,t,i)=>{for(const n in t)(i||!_0(n))&&(e[n]=t[n])},VM=(e,t,i)=>{const n=e.slots=Tv();if(e.vnode.shapeFlag&32){const r=t._;r?(Mv(n,t,i),i&&Db(n,"_",r,!0)):Av(t,n)}else t&&Lv(e,t)},UM=(e,t,i)=>{const{vnode:n,slots:r}=e;let s=!0,o=ce;if(n.shapeFlag&32){const a=t._;a?i&&a===1?s=!1:Mv(r,t,i):(s=!t.$stable,Av(t,r)),o=t}else t&&(Lv(e,t),o={default:1});if(s)for(const a in r)!_0(a)&&o[a]==null&&delete r[a]},Hi=ZM;function qM(e){return YM(e)}function YM(e,t){const i=zd();i.__VUE__=!0;const{insert:n,remove:r,patchProp:s,createElement:o,createText:a,createComment:l,setText:c,setElementText:h,parentNode:u,nextSibling:d,setScopeId:f=Qn,insertStaticContent:g}=e,p=(k,I,$,H=null,U=null,V=null,ot=void 0,st=null,tt=!!I.dynamicChildren)=>{if(k===I)return;k&&!Zs(k,I)&&(H=W(k),G(k,U,V,!0),k=null),I.patchFlag===-2&&(tt=!1,I.dynamicChildren=null);const{type:Z,ref:Ct,shapeFlag:nt}=I;switch(Z){case Yd:m(k,I,$,H);break;case li:y(k,I,$,H);break;case iu:k==null&&_(I,$,H,ot);break;case Ee:F(k,I,$,H,U,V,ot,st,tt);break;default:nt&1?v(k,I,$,H,U,V,ot,st,tt):nt&6?R(k,I,$,H,U,V,ot,st,tt):(nt&64||nt&128)&&Z.process(k,I,$,H,U,V,ot,st,tt,it)}Ct!=null&&U?Kl(Ct,k&&k.ref,V,I||k,!I):Ct==null&&k&&k.ref!=null&&Kl(k.ref,null,V,k,!0)},m=(k,I,$,H)=>{if(k==null)n(I.el=a(I.children),$,H);else{const U=I.el=k.el;I.children!==k.children&&c(U,I.children)}},y=(k,I,$,H)=>{k==null?n(I.el=l(I.children||""),$,H):I.el=k.el},_=(k,I,$,H)=>{[k.el,k.anchor]=g(k.children,I,$,H,k.el,k.anchor)},C=({el:k,anchor:I},$,H)=>{let U;for(;k&&k!==I;)U=d(k),n(k,$,H),k=U;n(I,$,H)},b=({el:k,anchor:I})=>{let $;for(;k&&k!==I;)$=d(k),r(k),k=$;r(I)},v=(k,I,$,H,U,V,ot,st,tt)=>{if(I.type==="svg"?ot="svg":I.type==="math"&&(ot="mathml"),k==null)S(I,$,H,U,V,ot,st,tt);else{const Z=k.el&&k.el._isVueCE?k.el:null;try{Z&&Z._beginPatch(),A(k,I,U,V,ot,st,tt)}finally{Z&&Z._endPatch()}}},S=(k,I,$,H,U,V,ot,st)=>{let tt,Z;const{props:Ct,shapeFlag:nt,transition:_t,dirs:wt}=k;if(tt=k.el=o(k.type,V,Ct&&Ct.is,Ct),nt&8?h(tt,k.children):nt&16&&L(k.children,tt,null,H,U,lg(k,V),ot,st),wt&&$s(k,null,H,"created"),w(tt,k,k.scopeId,ot,H),Ct){for(const $t in Ct)$t!=="value"&&!ql($t)&&s(tt,$t,null,Ct[$t],V,H);"value"in Ct&&s(tt,"value",null,Ct.value,V),(Z=Ct.onVnodeBeforeMount)&&Gn(Z,H,k)}wt&&$s(k,null,H,"beforeMount");const Dt=XM(U,_t);Dt&&_t.beforeEnter(tt),n(tt,I,$),((Z=Ct&&Ct.onVnodeMounted)||Dt||wt)&&Hi(()=>{Z&&Gn(Z,H,k),Dt&&_t.enter(tt),wt&&$s(k,null,H,"mounted")},U)},w=(k,I,$,H,U)=>{if($&&f(k,$),H)for(let V=0;V<H.length;V++)f(k,H[V]);if(U){let V=U.subTree;if(I===V||Ov(V.type)&&(V.ssContent===I||V.ssFallback===I)){const ot=U.vnode;w(k,ot,ot.scopeId,ot.slotScopeIds,U.parent)}}},L=(k,I,$,H,U,V,ot,st,tt=0)=>{for(let Z=tt;Z<k.length;Z++){const Ct=k[Z]=st?hs(k[Z]):Yn(k[Z]);p(null,Ct,I,$,H,U,V,ot,st)}},A=(k,I,$,H,U,V,ot)=>{const st=I.el=k.el;let{patchFlag:tt,dynamicChildren:Z,dirs:Ct}=I;tt|=k.patchFlag&16;const nt=k.props||ce,_t=I.props||ce;let wt;if($&&zs($,!1),(wt=_t.onVnodeBeforeUpdate)&&Gn(wt,$,I,k),Ct&&$s(I,k,$,"beforeUpdate"),$&&zs($,!0),(nt.innerHTML&&_t.innerHTML==null||nt.textContent&&_t.textContent==null)&&h(st,""),Z?B(k.dynamicChildren,Z,st,$,H,lg(I,U),V):ot||M(k,I,st,null,$,H,lg(I,U),V,!1),tt>0){if(tt&16)O(st,nt,_t,$,U);else if(tt&2&&nt.class!==_t.class&&s(st,"class",null,_t.class,U),tt&4&&s(st,"style",nt.style,_t.style,U),tt&8){const Dt=I.dynamicProps;for(let $t=0;$t<Dt.length;$t++){const Vt=Dt[$t],Le=nt[Vt],Me=_t[Vt];(Me!==Le||Vt==="value")&&s(st,Vt,Le,Me,U,$)}}tt&1&&k.children!==I.children&&h(st,I.children)}else!ot&&Z==null&&O(st,nt,_t,$,U);((wt=_t.onVnodeUpdated)||Ct)&&Hi(()=>{wt&&Gn(wt,$,I,k),Ct&&$s(I,k,$,"updated")},H)},B=(k,I,$,H,U,V,ot)=>{for(let st=0;st<I.length;st++){const tt=k[st],Z=I[st],Ct=tt.el&&(tt.type===Ee||!Zs(tt,Z)||tt.shapeFlag&198)?u(tt.el):$;p(tt,Z,Ct,null,H,U,V,ot,!0)}},O=(k,I,$,H,U)=>{if(I!==$){if(I!==ce)for(const V in I)!ql(V)&&!(V in $)&&s(k,V,I[V],null,U,H);for(const V in $){if(ql(V))continue;const ot=$[V],st=I[V];ot!==st&&V!=="value"&&s(k,V,st,ot,U,H)}"value"in $&&s(k,"value",I.value,$.value,U)}},F=(k,I,$,H,U,V,ot,st,tt)=>{const Z=I.el=k?k.el:a(""),Ct=I.anchor=k?k.anchor:a("");let{patchFlag:nt,dynamicChildren:_t,slotScopeIds:wt}=I;wt&&(st=st?st.concat(wt):wt),k==null?(n(Z,$,H),n(Ct,$,H),L(I.children||[],$,Ct,U,V,ot,st,tt)):nt>0&&nt&64&&_t&&k.dynamicChildren&&k.dynamicChildren.length===_t.length?(B(k.dynamicChildren,_t,$,U,V,ot,st),(I.key!=null||U&&I===U.subTree)&&Iv(k,I,!0)):M(k,I,$,Ct,U,V,ot,st,tt)},R=(k,I,$,H,U,V,ot,st,tt)=>{I.slotScopeIds=st,k==null?I.shapeFlag&512?U.ctx.activate(I,$,H,ot,tt):T(I,$,H,U,V,ot,tt):P(k,I,tt)},T=(k,I,$,H,U,V,ot)=>{const st=k.component=rI(k,H,U);if(qc(k)&&(st.ctx.renderer=it),sI(st,!1,ot),st.asyncDep){if(U&&U.registerDep(st,E,ot),!k.el){const tt=st.subTree=me(li);y(null,tt,I,$),k.placeholder=tt.el}}else E(st,k,I,$,U,V,ot)},P=(k,I,$)=>{const H=I.component=k.component;if($M(k,I,$))if(H.asyncDep&&!H.asyncResolved){D(H,I,$);return}else H.next=I,H.update();else I.el=k.el,H.vnode=I},E=(k,I,$,H,U,V,ot)=>{const st=()=>{if(k.isMounted){let{next:nt,bu:_t,u:wt,parent:Dt,vnode:$t}=k;{const pi=Pv(k);if(pi){nt&&(nt.el=$t.el,D(k,nt,ot)),pi.asyncDep.then(()=>{k.isUnmounted||st()});return}}let Vt=nt,Le;zs(k,!1),nt?(nt.el=$t.el,D(k,nt,ot)):nt=$t,_t&&tu(_t),(Le=nt.props&&nt.props.onVnodeBeforeUpdate)&&Gn(Le,Dt,nt,$t),zs(k,!0);const Me=q_(k),Ve=k.subTree;k.subTree=Me,p(Ve,Me,u(Ve.el),W(Ve),k,U,V),nt.el=Me.el,Vt===null&&zM(k,Me.el),wt&&Hi(wt,U),(Le=nt.props&&nt.props.onVnodeUpdated)&&Hi(()=>Gn(Le,Dt,nt,$t),U)}else{let nt;const{el:_t,props:wt}=I,{bm:Dt,m:$t,parent:Vt,root:Le,type:Me}=k,Ve=fa(I);zs(k,!1),Dt&&tu(Dt),!Ve&&(nt=wt&&wt.onVnodeBeforeMount)&&Gn(nt,Vt,I),zs(k,!0);{Le.ce&&Le.ce._def.shadowRoot!==!1&&Le.ce._injectChildStyle(Me);const pi=k.subTree=q_(k);p(null,pi,$,H,k,U,V),I.el=pi.el}if($t&&Hi($t,U),!Ve&&(nt=wt&&wt.onVnodeMounted)){const pi=I;Hi(()=>Gn(nt,Vt,pi),U)}(I.shapeFlag&256||Vt&&fa(Vt.vnode)&&Vt.vnode.shapeFlag&256)&&k.a&&Hi(k.a,U),k.isMounted=!0,I=$=H=null}};k.scope.on();const tt=k.effect=new zb(st);k.scope.off();const Z=k.update=tt.run.bind(tt),Ct=k.job=tt.runIfDirty.bind(tt);Ct.i=k,Ct.id=k.uid,tt.scheduler=()=>g0(Ct),zs(k,!0),Z()},D=(k,I,$)=>{I.component=k;const H=k.vnode.props;k.vnode=I,k.next=null,WM(k,I.props,H,$),UM(k,I.children,$),Br(),N_(k),Nr()},M=(k,I,$,H,U,V,ot,st,tt=!1)=>{const Z=k&&k.children,Ct=k?k.shapeFlag:0,nt=I.children,{patchFlag:_t,shapeFlag:wt}=I;if(_t>0){if(_t&128){Y(Z,nt,$,H,U,V,ot,st,tt);return}else if(_t&256){j(Z,nt,$,H,U,V,ot,st,tt);return}}wt&8?(Ct&16&&It(Z,U,V),nt!==Z&&h($,nt)):Ct&16?wt&16?Y(Z,nt,$,H,U,V,ot,st,tt):It(Z,U,V,!0):(Ct&8&&h($,""),wt&16&&L(nt,$,H,U,V,ot,st,tt))},j=(k,I,$,H,U,V,ot,st,tt)=>{k=k||ha,I=I||ha;const Z=k.length,Ct=I.length,nt=Math.min(Z,Ct);let _t;for(_t=0;_t<nt;_t++){const wt=I[_t]=tt?hs(I[_t]):Yn(I[_t]);p(k[_t],wt,$,null,U,V,ot,st,tt)}Z>Ct?It(k,U,V,!0,!1,nt):L(I,$,H,U,V,ot,st,tt,nt)},Y=(k,I,$,H,U,V,ot,st,tt)=>{let Z=0;const Ct=I.length;let nt=k.length-1,_t=Ct-1;for(;Z<=nt&&Z<=_t;){const wt=k[Z],Dt=I[Z]=tt?hs(I[Z]):Yn(I[Z]);if(Zs(wt,Dt))p(wt,Dt,$,null,U,V,ot,st,tt);else break;Z++}for(;Z<=nt&&Z<=_t;){const wt=k[nt],Dt=I[_t]=tt?hs(I[_t]):Yn(I[_t]);if(Zs(wt,Dt))p(wt,Dt,$,null,U,V,ot,st,tt);else break;nt--,_t--}if(Z>nt){if(Z<=_t){const wt=_t+1,Dt=wt<Ct?I[wt].el:H;for(;Z<=_t;)p(null,I[Z]=tt?hs(I[Z]):Yn(I[Z]),$,Dt,U,V,ot,st,tt),Z++}}else if(Z>_t)for(;Z<=nt;)G(k[Z],U,V,!0),Z++;else{const wt=Z,Dt=Z,$t=new Map;for(Z=Dt;Z<=_t;Z++){const he=I[Z]=tt?hs(I[Z]):Yn(I[Z]);he.key!=null&&$t.set(he.key,Z)}let Vt,Le=0;const Me=_t-Dt+1;let Ve=!1,pi=0;const Ki=new Array(Me);for(Z=0;Z<Me;Z++)Ki[Z]=0;for(Z=wt;Z<=nt;Z++){const he=k[Z];if(Le>=Me){G(he,U,V,!0);continue}let Se;if(he.key!=null)Se=$t.get(he.key);else for(Vt=Dt;Vt<=_t;Vt++)if(Ki[Vt-Dt]===0&&Zs(he,I[Vt])){Se=Vt;break}Se===void 0?G(he,U,V,!0):(Ki[Se-Dt]=Z+1,Se>=pi?pi=Se:Ve=!0,p(he,I[Se],$,null,U,V,ot,st,tt),Le++)}const Nn=Ve?KM(Ki):ha;for(Vt=Nn.length-1,Z=Me-1;Z>=0;Z--){const he=Dt+Z,Se=I[he],dr=I[he+1],Kr=he+1<Ct?dr.el||Fv(dr):H;Ki[Z]===0?p(null,Se,$,Kr,U,V,ot,st,tt):Ve&&(Vt<0||Z!==Nn[Vt]?K(Se,$,Kr,2):Vt--)}}},K=(k,I,$,H,U=null)=>{const{el:V,type:ot,transition:st,children:tt,shapeFlag:Z}=k;if(Z&6){K(k.component.subTree,I,$,H);return}if(Z&128){k.suspense.move(I,$,H);return}if(Z&64){ot.move(k,I,$,it);return}if(ot===Ee){n(V,I,$);for(let nt=0;nt<tt.length;nt++)K(tt[nt],I,$,H);n(k.anchor,I,$);return}if(ot===iu){C(k,I,$);return}if(H!==2&&Z&1&&st)if(H===0)st.beforeEnter(V),n(V,I,$),Hi(()=>st.enter(V),U);else{const{leave:nt,delayLeave:_t,afterLeave:wt}=st,Dt=()=>{k.ctx.isUnmounted?r(V):n(V,I,$)},$t=()=>{V._isLeaving&&V[Ar](!0),nt(V,()=>{Dt(),wt&&wt()})};_t?_t(V,Dt,$t):$t()}else n(V,I,$)},G=(k,I,$,H=!1,U=!1)=>{const{type:V,props:ot,ref:st,children:tt,dynamicChildren:Z,shapeFlag:Ct,patchFlag:nt,dirs:_t,cacheIndex:wt}=k;if(nt===-2&&(U=!1),st!=null&&(Br(),Kl(st,null,$,k,!0),Nr()),wt!=null&&(I.renderCache[wt]=void 0),Ct&256){I.ctx.deactivate(k);return}const Dt=Ct&1&&_t,$t=!fa(k);let Vt;if($t&&(Vt=ot&&ot.onVnodeBeforeUnmount)&&Gn(Vt,I,k),Ct&6)at(k.component,$,H);else{if(Ct&128){k.suspense.unmount($,H);return}Dt&&$s(k,null,I,"beforeUnmount"),Ct&64?k.type.remove(k,I,$,it,H):Z&&!Z.hasOnce&&(V!==Ee||nt>0&&nt&64)?It(Z,I,$,!1,!0):(V===Ee&&nt&384||!U&&Ct&16)&&It(tt,I,$),H&&Q(k)}($t&&(Vt=ot&&ot.onVnodeUnmounted)||Dt)&&Hi(()=>{Vt&&Gn(Vt,I,k),Dt&&$s(k,null,I,"unmounted")},$)},Q=k=>{const{type:I,el:$,anchor:H,transition:U}=k;if(I===Ee){ut($,H);return}if(I===iu){b(k);return}const V=()=>{r($),U&&!U.persisted&&U.afterLeave&&U.afterLeave()};if(k.shapeFlag&1&&U&&!U.persisted){const{leave:ot,delayLeave:st}=U,tt=()=>ot($,V);st?st(k.el,V,tt):tt()}else V()},ut=(k,I)=>{let $;for(;k!==I;)$=d(k),r(k),k=$;r(I)},at=(k,I,$)=>{const{bum:H,scope:U,job:V,subTree:ot,um:st,m:tt,a:Z}=k;K_(tt),K_(Z),H&&tu(H),U.stop(),V&&(V.flags|=8,G(ot,k,I,$)),st&&Hi(st,I),Hi(()=>{k.isUnmounted=!0},I)},It=(k,I,$,H=!1,U=!1,V=0)=>{for(let ot=V;ot<k.length;ot++)G(k[ot],I,$,H,U)},W=k=>{if(k.shapeFlag&6)return W(k.component.subTree);if(k.shapeFlag&128)return k.suspense.next();const I=d(k.anchor||k.el),$=I&&I[aM];return $?d($):I};let et=!1;const J=(k,I,$)=>{let H;k==null?I._vnode&&(G(I._vnode,null,null,!0),H=I._vnode.component):p(I._vnode||null,k,I,null,null,null,$),I._vnode=k,et||(et=!0,N_(H),ov(),et=!1)},it={p,um:G,m:K,r:Q,mt:T,mc:L,pc:M,pbc:B,n:W,o:e};return{render:J,hydrate:void 0,createApp:PM(J)}}function lg({type:e,props:t},i){return i==="svg"&&e==="foreignObject"||i==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:i}function zs({effect:e,job:t},i){i?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function XM(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Iv(e,t,i=!1){const n=e.children,r=t.children;if(Ot(n)&&Ot(r))for(let s=0;s<n.length;s++){const o=n[s];let a=r[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=r[s]=hs(r[s]),a.el=o.el),!i&&a.patchFlag!==-2&&Iv(o,a)),a.type===Yd&&(a.patchFlag!==-1?a.el=o.el:a.__elIndex=s+(e.type===Ee?1:0)),a.type===li&&!a.el&&(a.el=o.el)}}function KM(e){const t=e.slice(),i=[0];let n,r,s,o,a;const l=e.length;for(n=0;n<l;n++){const c=e[n];if(c!==0){if(r=i[i.length-1],e[r]<c){t[n]=r,i.push(n);continue}for(s=0,o=i.length-1;s<o;)a=s+o>>1,e[i[a]]<c?s=a+1:o=a;c<e[i[s]]&&(s>0&&(t[n]=i[s-1]),i[s]=n)}}for(s=i.length,o=i[s-1];s-- >0;)i[s]=o,o=t[o];return i}function Pv(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Pv(t)}function K_(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}function Fv(e){if(e.placeholder)return e.placeholder;const t=e.component;return t?Fv(t.subTree):null}const Ov=e=>e.__isSuspense;function ZM(e,t){t&&t.pendingBranch?Ot(e)?t.effects.push(...e):t.effects.push(e):iM(e)}const Ee=Symbol.for("v-fgt"),Yd=Symbol.for("v-txt"),li=Symbol.for("v-cmt"),iu=Symbol.for("v-stc"),Jl=[];let qi=null;function Wt(e=!1){Jl.push(qi=e?null:[])}function JM(){Jl.pop(),qi=Jl[Jl.length-1]||null}let fc=1;function Ru(e,t=!1){fc+=e,e<0&&qi&&t&&(qi.hasOnce=!0)}function Dv(e){return e.dynamicChildren=fc>0?qi||ha:null,JM(),fc>0&&qi&&qi.push(e),e}function oe(e,t,i,n,r,s){return Dv(dt(e,t,i,n,r,s,!0))}function En(e,t,i,n,r){return Dv(me(e,t,i,n,r,!0))}function gc(e){return e?e.__v_isVNode===!0:!1}function Zs(e,t){return e.type===t.type&&e.key===t.key}const Bv=({key:e})=>e??null,nu=({ref:e,ref_key:t,ref_for:i})=>(typeof e=="number"&&(e=""+e),e!=null?Ae(e)||hi(e)||Bt(e)?{i:ti,r:e,k:t,f:!!i}:e:null);function dt(e,t=null,i=null,n=0,r=null,s=e===Ee?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Bv(t),ref:t&&nu(t),scopeId:lv,slotScopeIds:null,children:i,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:n,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:ti};return a?(C0(l,i),s&128&&e.normalize(l)):i&&(l.shapeFlag|=Ae(i)?8:16),fc>0&&!o&&qi&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&qi.push(l),l}const me=QM;function QM(e,t=null,i=null,n=0,r=null,s=!1){if((!e||e===wM)&&(e=li),gc(e)){const a=Ss(e,t,!0);return i&&C0(a,i),fc>0&&!s&&qi&&(a.shapeFlag&6?qi[qi.indexOf(e)]=a:qi.push(a)),a.patchFlag=-2,a}if(hI(e)&&(e=e.__vccOpts),t){t=tI(t);let{class:a,style:l}=t;a&&!Ae(a)&&(t.class=yo(a)),fe(l)&&(f0(l)&&!Ot(l)&&(l=qe({},l)),t.style=Gd(l))}const o=Ae(e)?1:Ov(e)?128:uv(e)?64:fe(e)?4:Bt(e)?2:0;return dt(e,t,i,n,r,o,s,!0)}function tI(e){return e?f0(e)||Ev(e)?qe({},e):e:null}function Ss(e,t,i=!1,n=!1){const{props:r,ref:s,patchFlag:o,children:a,transition:l}=e,c=t?eI(r||{},t):r,h={__v_isVNode:!0,__v_skip:!0,type:e.type,props:c,key:c&&Bv(c),ref:t&&t.ref?i&&s?Ot(s)?s.concat(nu(t)):[s,nu(t)]:nu(t):s,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Ee?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:l,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Ss(e.ssContent),ssFallback:e.ssFallback&&Ss(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return l&&n&&dc(h,l.clone(h)),h}function Js(e=" ",t=0){return me(Yd,null,e,t)}function Nv(e,t){const i=me(iu,null,e);return i.staticCount=t,i}function Ma(e="",t=!1){return t?(Wt(),En(li,null,e)):me(li,null,e)}function Yn(e){return e==null||typeof e=="boolean"?me(li):Ot(e)?me(Ee,null,e.slice()):gc(e)?hs(e):me(Yd,null,String(e))}function hs(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Ss(e)}function C0(e,t){let i=0;const{shapeFlag:n}=e;if(t==null)t=null;else if(Ot(t))i=16;else if(typeof t=="object")if(n&65){const r=t.default;r&&(r._c&&(r._d=!1),C0(e,r()),r._c&&(r._d=!0));return}else{i=32;const r=t._;!r&&!Ev(t)?t._ctx=ti:r===3&&ti&&(ti.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Bt(t)?(t={default:t,_ctx:ti},i=32):(t=String(t),n&64?(i=16,t=[Js(t)]):i=8);e.children=t,e.shapeFlag|=i}function eI(...e){const t={};for(let i=0;i<e.length;i++){const n=e[i];for(const r in n)if(r==="class")t.class!==n.class&&(t.class=yo([t.class,n.class]));else if(r==="style")t.style=Gd([t.style,n.style]);else if(Dd(r)){const s=t[r],o=n[r];o&&s!==o&&!(Ot(s)&&s.includes(o))&&(t[r]=s?[].concat(s,o):o)}else r!==""&&(t[r]=n[r])}return t}function Gn(e,t,i,n=null){Pn(e,t,7,[i,n])}const iI=vv();let nI=0;function rI(e,t,i){const n=e.type,r=(t?t.appContext:e.appContext)||iI,s={uid:nI++,vnode:e,type:n,parent:t,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new EL(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(r.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Rv(n,r),emitsOptions:wv(n,r),emit:null,emitted:null,propsDefaults:ce,inheritAttrs:n.inheritAttrs,ctx:ce,data:ce,props:ce,attrs:ce,slots:ce,refs:ce,setupState:ce,setupContext:null,suspense:i,suspenseId:i?i.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=t?t.root:s,s.emit=OM.bind(null,s),e.ce&&e.ce(s),s}let Qe=null;const $v=()=>Qe||ti;let Au,Ep;{const e=zd(),t=(i,n)=>{let r;return(r=e[i])||(r=e[i]=[]),r.push(n),s=>{r.length>1?r.forEach(o=>o(s)):r[0](s)}};Au=t("__VUE_INSTANCE_SETTERS__",i=>Qe=i),Ep=t("__VUE_SSR_SETTERS__",i=>Ia=i)}const Yc=e=>{const t=Qe;return Au(e),e.scope.on(),()=>{e.scope.off(),Au(t)}},Z_=()=>{Qe&&Qe.scope.off(),Au(null)};function zv(e){return e.vnode.shapeFlag&4}let Ia=!1;function sI(e,t=!1,i=!1){t&&Ep(t);const{props:n,children:r}=e.vnode,s=zv(e);GM(e,n,s,t),VM(e,r,i||t);const o=s?oI(e,t):void 0;return t&&Ep(!1),o}function oI(e,t){const i=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,EM);const{setup:n}=i;if(n){Br();const r=e.setupContext=n.length>1?lI(e):null,s=Yc(e),o=Vc(n,e,0,[e.props,r]),a=Pb(o);if(Nr(),s(),(a||e.sp)&&!fa(e)&&m0(e),a){if(o.then(Z_,Z_),t)return o.then(l=>{J_(e,l)}).catch(l=>{Uc(l,e,0)});e.asyncDep=o}else J_(e,o)}else Gv(e)}function J_(e,t,i){Bt(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:fe(t)&&(e.setupState=iv(t)),Gv(e)}function Gv(e,t,i){const n=e.type;e.render||(e.render=n.render||Qn);{const r=Yc(e);Br();try{kM(e)}finally{Nr(),r()}}}const aI={get(e,t){return ai(e,"get",""),e[t]}};function lI(e){const t=i=>{e.exposed=i||{}};return{attrs:new Proxy(e.attrs,aI),slots:e.slots,emit:e.emit,expose:t}}function Xd(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(iv(UL(e.exposed)),{get(t,i){if(i in t)return t[i];if(i in Zl)return Zl[i](e)},has(t,i){return i in t||i in Zl}})):e.proxy}function cI(e,t=!0){return Bt(e)?e.displayName||e.name:e.name||t&&e.__name}function hI(e){return Bt(e)&&"__vccOpts"in e}const wi=(e,t)=>ZL(e,t,Ia);function b0(e,t,i){try{Ru(-1);const n=arguments.length;return n===2?fe(t)&&!Ot(t)?gc(t)?me(e,null,[t]):me(e,t):me(e,null,t):(n>3?i=Array.prototype.slice.call(arguments,2):n===3&&gc(i)&&(i=[i]),me(e,t,i))}finally{Ru(1)}}const uI="3.5.26";let kp;const Q_=typeof window<"u"&&window.trustedTypes;if(Q_)try{kp=Q_.createPolicy("vue",{createHTML:e=>e})}catch{}const Wv=kp?e=>kp.createHTML(e):e=>e,dI="http://www.w3.org/2000/svg",fI="http://www.w3.org/1998/Math/MathML",Er=typeof document<"u"?document:null,tx=Er&&Er.createElement("template"),gI={insert:(e,t,i)=>{t.insertBefore(e,i||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,i,n)=>{const r=t==="svg"?Er.createElementNS(dI,e):t==="mathml"?Er.createElementNS(fI,e):i?Er.createElement(e,{is:i}):Er.createElement(e);return e==="select"&&n&&n.multiple!=null&&r.setAttribute("multiple",n.multiple),r},createText:e=>Er.createTextNode(e),createComment:e=>Er.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Er.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,i,n,r,s){const o=i?i.previousSibling:t.lastChild;if(r&&(r===s||r.nextSibling))for(;t.insertBefore(r.cloneNode(!0),i),!(r===s||!(r=r.nextSibling)););else{tx.innerHTML=Wv(n==="svg"?`<svg>${e}</svg>`:n==="mathml"?`<math>${e}</math>`:e);const a=tx.content;if(n==="svg"||n==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,i)}return[o?o.nextSibling:t.firstChild,i?i.previousSibling:t.lastChild]}},Jr="transition",cl="animation",pc=Symbol("_vtc"),jv={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},pI=qe({},dv,jv),mI=e=>(e.displayName="Transition",e.props=pI,e),Lu=mI((e,{slots:t})=>b0(hM,yI(e),t)),Gs=(e,t=[])=>{Ot(e)?e.forEach(i=>i(...t)):e&&e(...t)},ex=e=>e?Ot(e)?e.some(t=>t.length>1):e.length>1:!1;function yI(e){const t={};for(const F in e)F in jv||(t[F]=e[F]);if(e.css===!1)return t;const{name:i="v",type:n,duration:r,enterFromClass:s=`${i}-enter-from`,enterActiveClass:o=`${i}-enter-active`,enterToClass:a=`${i}-enter-to`,appearFromClass:l=s,appearActiveClass:c=o,appearToClass:h=a,leaveFromClass:u=`${i}-leave-from`,leaveActiveClass:d=`${i}-leave-active`,leaveToClass:f=`${i}-leave-to`}=e,g=_I(r),p=g&&g[0],m=g&&g[1],{onBeforeEnter:y,onEnter:_,onEnterCancelled:C,onLeave:b,onLeaveCancelled:v,onBeforeAppear:S=y,onAppear:w=_,onAppearCancelled:L=C}=t,A=(F,R,T,P)=>{F._enterCancelled=P,Ws(F,R?h:a),Ws(F,R?c:o),T&&T()},B=(F,R)=>{F._isLeaving=!1,Ws(F,u),Ws(F,f),Ws(F,d),R&&R()},O=F=>(R,T)=>{const P=F?w:_,E=()=>A(R,F,T);Gs(P,[R,E]),ix(()=>{Ws(R,F?l:s),yr(R,F?h:a),ex(P)||nx(R,n,p,E)})};return qe(t,{onBeforeEnter(F){Gs(y,[F]),yr(F,s),yr(F,o)},onBeforeAppear(F){Gs(S,[F]),yr(F,l),yr(F,c)},onEnter:O(!1),onAppear:O(!0),onLeave(F,R){F._isLeaving=!0;const T=()=>B(F,R);yr(F,u),F._enterCancelled?(yr(F,d),ox(F)):(ox(F),yr(F,d)),ix(()=>{F._isLeaving&&(Ws(F,u),yr(F,f),ex(b)||nx(F,n,m,T))}),Gs(b,[F,T])},onEnterCancelled(F){A(F,!1,void 0,!0),Gs(C,[F])},onAppearCancelled(F){A(F,!0,void 0,!0),Gs(L,[F])},onLeaveCancelled(F){B(F),Gs(v,[F])}})}function _I(e){if(e==null)return null;if(fe(e))return[cg(e.enter),cg(e.leave)];{const t=cg(e);return[t,t]}}function cg(e){return xL(e)}function yr(e,t){t.split(/\s+/).forEach(i=>i&&e.classList.add(i)),(e[pc]||(e[pc]=new Set)).add(t)}function Ws(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.remove(n));const i=e[pc];i&&(i.delete(t),i.size||(e[pc]=void 0))}function ix(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let xI=0;function nx(e,t,i,n){const r=e._endId=++xI,s=()=>{r===e._endId&&n()};if(i!=null)return setTimeout(s,i);const{type:o,timeout:a,propCount:l}=CI(e,t);if(!o)return n();const c=o+"end";let h=0;const u=()=>{e.removeEventListener(c,d),s()},d=f=>{f.target===e&&++h>=l&&u()};setTimeout(()=>{h<l&&u()},a+1),e.addEventListener(c,d)}function CI(e,t){const i=window.getComputedStyle(e),n=g=>(i[g]||"").split(", "),r=n(`${Jr}Delay`),s=n(`${Jr}Duration`),o=rx(r,s),a=n(`${cl}Delay`),l=n(`${cl}Duration`),c=rx(a,l);let h=null,u=0,d=0;t===Jr?o>0&&(h=Jr,u=o,d=s.length):t===cl?c>0&&(h=cl,u=c,d=l.length):(u=Math.max(o,c),h=u>0?o>c?Jr:cl:null,d=h?h===Jr?s.length:l.length:0);const f=h===Jr&&/\b(?:transform|all)(?:,|$)/.test(n(`${Jr}Property`).toString());return{type:h,timeout:u,propCount:d,hasTransform:f}}function rx(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((i,n)=>sx(i)+sx(e[n])))}function sx(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function ox(e){return(e?e.ownerDocument:document).body.offsetHeight}function bI(e,t,i){const n=e[pc];n&&(t=(t?[t,...n]:[...n]).join(" ")),t==null?e.removeAttribute("class"):i?e.setAttribute("class",t):e.className=t}const Mu=Symbol("_vod"),Hv=Symbol("_vsh"),vI={name:"show",beforeMount(e,{value:t},{transition:i}){e[Mu]=e.style.display==="none"?"":e.style.display,i&&t?i.beforeEnter(e):hl(e,t)},mounted(e,{value:t},{transition:i}){i&&t&&i.enter(e)},updated(e,{value:t,oldValue:i},{transition:n}){!t!=!i&&(n?t?(n.beforeEnter(e),hl(e,!0),n.enter(e)):n.leave(e,()=>{hl(e,!1)}):hl(e,t))},beforeUnmount(e,{value:t}){hl(e,t)}};function hl(e,t){e.style.display=t?e[Mu]:"none",e[Hv]=!t}const wI=Symbol(""),SI=/(?:^|;)\s*display\s*:/;function TI(e,t,i){const n=e.style,r=Ae(i);let s=!1;if(i&&!r){if(t)if(Ae(t))for(const o of t.split(";")){const a=o.slice(0,o.indexOf(":")).trim();i[a]==null&&ru(n,a,"")}else for(const o in t)i[o]==null&&ru(n,o,"");for(const o in i)o==="display"&&(s=!0),ru(n,o,i[o])}else if(r){if(t!==i){const o=n[wI];o&&(i+=";"+o),n.cssText=i,s=SI.test(i)}}else t&&e.removeAttribute("style");Mu in e&&(e[Mu]=s?n.display:"",e[Hv]&&(n.display="none"))}const ax=/\s*!important$/;function ru(e,t,i){if(Ot(i))i.forEach(n=>ru(e,t,n));else if(i==null&&(i=""),t.startsWith("--"))e.setProperty(t,i);else{const n=EI(e,t);ax.test(i)?e.setProperty(Mo(n),i.replace(ax,""),"important"):e[n]=i}}const lx=["Webkit","Moz","ms"],hg={};function EI(e,t){const i=hg[t];if(i)return i;let n=cn(t);if(n!=="filter"&&n in e)return hg[t]=n;n=$d(n);for(let r=0;r<lx.length;r++){const s=lx[r]+n;if(s in e)return hg[t]=s}return t}const cx="http://www.w3.org/1999/xlink";function hx(e,t,i,n,r,s=TL(t)){n&&t.startsWith("xlink:")?i==null?e.removeAttributeNS(cx,t.slice(6,t.length)):e.setAttributeNS(cx,t,i):i==null||s&&!Bb(i)?e.removeAttribute(t):e.setAttribute(t,s?"":Ur(i)?String(i):i)}function ux(e,t,i,n,r){if(t==="innerHTML"||t==="textContent"){i!=null&&(e[t]=t==="innerHTML"?Wv(i):i);return}const s=e.tagName;if(t==="value"&&s!=="PROGRESS"&&!s.includes("-")){const a=s==="OPTION"?e.getAttribute("value")||"":e.value,l=i==null?e.type==="checkbox"?"on":"":String(i);(a!==l||!("_value"in e))&&(e.value=l),i==null&&e.removeAttribute(t),e._value=i;return}let o=!1;if(i===""||i==null){const a=typeof e[t];a==="boolean"?i=Bb(i):i==null&&a==="string"?(i="",o=!0):a==="number"&&(i=0,o=!0)}try{e[t]=i}catch{}o&&e.removeAttribute(r||t)}function Jo(e,t,i,n){e.addEventListener(t,i,n)}function kI(e,t,i,n){e.removeEventListener(t,i,n)}const dx=Symbol("_vei");function RI(e,t,i,n,r=null){const s=e[dx]||(e[dx]={}),o=s[t];if(n&&o)o.value=n;else{const[a,l]=AI(t);if(n){const c=s[t]=II(n,r);Jo(e,a,c,l)}else o&&(kI(e,a,o,l),s[t]=void 0)}}const fx=/(?:Once|Passive|Capture)$/;function AI(e){let t;if(fx.test(e)){t={};let n;for(;n=e.match(fx);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Mo(e.slice(2)),t]}let ug=0;const LI=Promise.resolve(),MI=()=>ug||(LI.then(()=>ug=0),ug=Date.now());function II(e,t){const i=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=i.attached)return;Pn(PI(n,i.value),t,5,[n])};return i.value=e,i.attached=MI(),i}function PI(e,t){if(Ot(t)){const i=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{i.call(e),e._stopped=!0},t.map(n=>r=>!r._stopped&&n&&n(r))}else return t}const gx=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,FI=(e,t,i,n,r,s)=>{const o=r==="svg";t==="class"?bI(e,n,o):t==="style"?TI(e,i,n):Dd(t)?n0(t)||RI(e,t,i,n,s):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):OI(e,t,n,o))?(ux(e,t,n),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&hx(e,t,n,o,s,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Ae(n))?ux(e,cn(t),n,s,t):(t==="true-value"?e._trueValue=n:t==="false-value"&&(e._falseValue=n),hx(e,t,n,o))};function OI(e,t,i,n){if(n)return!!(t==="innerHTML"||t==="textContent"||t in e&&gx(t)&&Bt(i));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="sandbox"&&e.tagName==="IFRAME"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const r=e.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return gx(t)&&Ae(i)?!1:t in e}const px=e=>{const t=e.props["onUpdate:modelValue"]||!1;return Ot(t)?i=>tu(t,i):t};function DI(e){e.target.composing=!0}function mx(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const dg=Symbol("_assign");function yx(e,t,i){return t&&(e=e.trim()),i&&(e=o0(e)),e}const F7={created(e,{modifiers:{lazy:t,trim:i,number:n}},r){e[dg]=px(r);const s=n||r.props&&r.props.type==="number";Jo(e,t?"change":"input",o=>{o.target.composing||e[dg](yx(e.value,i,s))}),(i||s)&&Jo(e,"change",()=>{e.value=yx(e.value,i,s)}),t||(Jo(e,"compositionstart",DI),Jo(e,"compositionend",mx),Jo(e,"change",mx))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:i,modifiers:{lazy:n,trim:r,number:s}},o){if(e[dg]=px(o),e.composing)return;const a=(s||e.type==="number")&&!/^0\d/.test(e.value)?o0(e.value):e.value,l=t??"";a!==l&&(document.activeElement===e&&e.type!=="range"&&(n&&t===i||r&&e.value.trim()===l)||(e.value=l))}},BI=["ctrl","shift","alt","meta"],NI={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>BI.some(i=>e[`${i}Key`]&&!t.includes(i))},$I=(e,t)=>{const i=e._withMods||(e._withMods={}),n=t.join(".");return i[n]||(i[n]=((r,...s)=>{for(let o=0;o<t.length;o++){const a=NI[t[o]];if(a&&a(r,t))return}return e(r,...s)}))},zI=qe({patchProp:FI},gI);let _x;function GI(){return _x||(_x=qM(zI))}const WI=((...e)=>{const t=GI().createApp(...e),{mount:i}=t;return t.mount=n=>{const r=HI(n);if(!r)return;const s=t._component;!Bt(s)&&!s.render&&!s.template&&(s.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const o=i(r,!1,jI(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},t});function jI(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function HI(e){return Ae(e)?document.querySelector(e):e}const VI="/Blogs/logo.svg";const Qo=typeof document<"u";function Vv(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function UI(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&Vv(e.default)}const ee=Object.assign;function fg(e,t){const i={};for(const n in t){const r=t[n];i[n]=Fn(r)?r.map(e):e(r)}return i}const Ql=()=>{},Fn=Array.isArray;function xx(e,t){const i={};for(const n in e)i[n]=n in t?t[n]:e[n];return i}const Uv=/#/g,qI=/&/g,YI=/\//g,XI=/=/g,KI=/\?/g,qv=/\+/g,ZI=/%5B/g,JI=/%5D/g,Yv=/%5E/g,QI=/%60/g,Xv=/%7B/g,tP=/%7C/g,Kv=/%7D/g,eP=/%20/g;function v0(e){return e==null?"":encodeURI(""+e).replace(tP,"|").replace(ZI,"[").replace(JI,"]")}function iP(e){return v0(e).replace(Xv,"{").replace(Kv,"}").replace(Yv,"^")}function Rp(e){return v0(e).replace(qv,"%2B").replace(eP,"+").replace(Uv,"%23").replace(qI,"%26").replace(QI,"`").replace(Xv,"{").replace(Kv,"}").replace(Yv,"^")}function nP(e){return Rp(e).replace(XI,"%3D")}function rP(e){return v0(e).replace(Uv,"%23").replace(KI,"%3F")}function sP(e){return rP(e).replace(YI,"%2F")}function mc(e){if(e==null)return null;try{return decodeURIComponent(""+e)}catch{}return""+e}const oP=/\/$/,aP=e=>e.replace(oP,"");function gg(e,t,i="/"){let n,r={},s="",o="";const a=t.indexOf("#");let l=t.indexOf("?");return l=a>=0&&l>a?-1:l,l>=0&&(n=t.slice(0,l),s=t.slice(l,a>0?a:t.length),r=e(s.slice(1))),a>=0&&(n=n||t.slice(0,a),o=t.slice(a,t.length)),n=uP(n??t,i),{fullPath:n+s+o,path:n,query:r,hash:mc(o)}}function lP(e,t){const i=t.query?e(t.query):"";return t.path+(i&&"?")+i+(t.hash||"")}function Cx(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function cP(e,t,i){const n=t.matched.length-1,r=i.matched.length-1;return n>-1&&n===r&&Pa(t.matched[n],i.matched[r])&&Zv(t.params,i.params)&&e(t.query)===e(i.query)&&t.hash===i.hash}function Pa(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function Zv(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var i in e)if(!hP(e[i],t[i]))return!1;return!0}function hP(e,t){return Fn(e)?bx(e,t):Fn(t)?bx(t,e):e?.valueOf()===t?.valueOf()}function bx(e,t){return Fn(t)?e.length===t.length&&e.every((i,n)=>i===t[n]):e.length===1&&e[0]===t}function uP(e,t){if(e.startsWith("/"))return e;if(!e)return t;const i=t.split("/"),n=e.split("/"),r=n[n.length-1];(r===".."||r===".")&&n.push("");let s=i.length-1,o,a;for(o=0;o<n.length;o++)if(a=n[o],a!==".")if(a==="..")s>1&&s--;else break;return i.slice(0,s).join("/")+"/"+n.slice(o).join("/")}const Qr={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let Ap=(function(e){return e.pop="pop",e.push="push",e})({}),pg=(function(e){return e.back="back",e.forward="forward",e.unknown="",e})({});function dP(e){if(!e)if(Qo){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),aP(e)}const fP=/^[^#]+#/;function gP(e,t){return e.replace(fP,"#")+t}function pP(e,t){const i=document.documentElement.getBoundingClientRect(),n=e.getBoundingClientRect();return{behavior:t.behavior,left:n.left-i.left-(t.left||0),top:n.top-i.top-(t.top||0)}}const Kd=()=>({left:window.scrollX,top:window.scrollY});function mP(e){let t;if("el"in e){const i=e.el,n=typeof i=="string"&&i.startsWith("#"),r=typeof i=="string"?n?document.getElementById(i.slice(1)):document.querySelector(i):i;if(!r)return;t=pP(r,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function vx(e,t){return(history.state?history.state.position-t:-1)+e}const Lp=new Map;function yP(e,t){Lp.set(e,t)}function _P(e){const t=Lp.get(e);return Lp.delete(e),t}function xP(e){return typeof e=="string"||e&&typeof e=="object"}function Jv(e){return typeof e=="string"||typeof e=="symbol"}let ve=(function(e){return e[e.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",e[e.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",e[e.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",e[e.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",e[e.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",e})({});const Qv=Symbol("");ve.MATCHER_NOT_FOUND+"",ve.NAVIGATION_GUARD_REDIRECT+"",ve.NAVIGATION_ABORTED+"",ve.NAVIGATION_CANCELLED+"",ve.NAVIGATION_DUPLICATED+"";function Fa(e,t){return ee(new Error,{type:e,[Qv]:!0},t)}function _r(e,t){return e instanceof Error&&Qv in e&&(t==null||!!(e.type&t))}const CP=["params","query","hash"];function bP(e){if(typeof e=="string")return e;if(e.path!=null)return e.path;const t={};for(const i of CP)i in e&&(t[i]=e[i]);return JSON.stringify(t,null,2)}function vP(e){const t={};if(e===""||e==="?")return t;const i=(e[0]==="?"?e.slice(1):e).split("&");for(let n=0;n<i.length;++n){const r=i[n].replace(qv," "),s=r.indexOf("="),o=mc(s<0?r:r.slice(0,s)),a=s<0?null:mc(r.slice(s+1));if(o in t){let l=t[o];Fn(l)||(l=t[o]=[l]),l.push(a)}else t[o]=a}return t}function wx(e){let t="";for(let i in e){const n=e[i];if(i=nP(i),n==null){n!==void 0&&(t+=(t.length?"&":"")+i);continue}(Fn(n)?n.map(r=>r&&Rp(r)):[n&&Rp(n)]).forEach(r=>{r!==void 0&&(t+=(t.length?"&":"")+i,r!=null&&(t+="="+r))})}return t}function wP(e){const t={};for(const i in e){const n=e[i];n!==void 0&&(t[i]=Fn(n)?n.map(r=>r==null?null:""+r):n==null?n:""+n)}return t}const SP=Symbol(""),Sx=Symbol(""),Zd=Symbol(""),w0=Symbol(""),Mp=Symbol("");function ul(){let e=[];function t(n){return e.push(n),()=>{const r=e.indexOf(n);r>-1&&e.splice(r,1)}}function i(){e=[]}return{add:t,list:()=>e.slice(),reset:i}}function us(e,t,i,n,r,s=o=>o()){const o=n&&(n.enterCallbacks[r]=n.enterCallbacks[r]||[]);return()=>new Promise((a,l)=>{const c=d=>{d===!1?l(Fa(ve.NAVIGATION_ABORTED,{from:i,to:t})):d instanceof Error?l(d):xP(d)?l(Fa(ve.NAVIGATION_GUARD_REDIRECT,{from:t,to:d})):(o&&n.enterCallbacks[r]===o&&typeof d=="function"&&o.push(d),a())},h=s(()=>e.call(n&&n.instances[r],t,i,c));let u=Promise.resolve(h);e.length<3&&(u=u.then(c)),u.catch(d=>l(d))})}function mg(e,t,i,n,r=s=>s()){const s=[];for(const o of e)for(const a in o.components){let l=o.components[a];if(!(t!=="beforeRouteEnter"&&!o.instances[a]))if(Vv(l)){const c=(l.__vccOpts||l)[t];c&&s.push(us(c,i,n,o,a,r))}else{let c=l();s.push(()=>c.then(h=>{if(!h)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const u=UI(h)?h.default:h;o.mods[a]=h,o.components[a]=u;const d=(u.__vccOpts||u)[t];return d&&us(d,i,n,o,a,r)()}))}}return s}function TP(e,t){const i=[],n=[],r=[],s=Math.max(t.matched.length,e.matched.length);for(let o=0;o<s;o++){const a=t.matched[o];a&&(e.matched.find(c=>Pa(c,a))?n.push(a):i.push(a));const l=e.matched[o];l&&(t.matched.find(c=>Pa(c,l))||r.push(l))}return[i,n,r]}let EP=()=>location.protocol+"//"+location.host;function tw(e,t){const{pathname:i,search:n,hash:r}=t,s=e.indexOf("#");if(s>-1){let o=r.includes(e.slice(s))?e.slice(s).length:1,a=r.slice(o);return a[0]!=="/"&&(a="/"+a),Cx(a,"")}return Cx(i,e)+n+r}function kP(e,t,i,n){let r=[],s=[],o=null;const a=({state:d})=>{const f=tw(e,location),g=i.value,p=t.value;let m=0;if(d){if(i.value=f,t.value=d,o&&o===g){o=null;return}m=p?d.position-p.position:0}else n(f);r.forEach(y=>{y(i.value,g,{delta:m,type:Ap.pop,direction:m?m>0?pg.forward:pg.back:pg.unknown})})};function l(){o=i.value}function c(d){r.push(d);const f=()=>{const g=r.indexOf(d);g>-1&&r.splice(g,1)};return s.push(f),f}function h(){if(document.visibilityState==="hidden"){const{history:d}=window;if(!d.state)return;d.replaceState(ee({},d.state,{scroll:Kd()}),"")}}function u(){for(const d of s)d();s=[],window.removeEventListener("popstate",a),window.removeEventListener("pagehide",h),document.removeEventListener("visibilitychange",h)}return window.addEventListener("popstate",a),window.addEventListener("pagehide",h),document.addEventListener("visibilitychange",h),{pauseListeners:l,listen:c,destroy:u}}function Tx(e,t,i,n=!1,r=!1){return{back:e,current:t,forward:i,replaced:n,position:window.history.length,scroll:r?Kd():null}}function RP(e){const{history:t,location:i}=window,n={value:tw(e,i)},r={value:t.state};r.value||s(n.value,{back:null,current:n.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function s(l,c,h){const u=e.indexOf("#"),d=u>-1?(i.host&&document.querySelector("base")?e:e.slice(u))+l:EP()+e+l;try{t[h?"replaceState":"pushState"](c,"",d),r.value=c}catch(f){console.error(f),i[h?"replace":"assign"](d)}}function o(l,c){s(l,ee({},t.state,Tx(r.value.back,l,r.value.forward,!0),c,{position:r.value.position}),!0),n.value=l}function a(l,c){const h=ee({},r.value,t.state,{forward:l,scroll:Kd()});s(h.current,h,!0),s(l,ee({},Tx(n.value,l,null),{position:h.position+1},c),!1),n.value=l}return{location:n,state:r,push:a,replace:o}}function AP(e){e=dP(e);const t=RP(e),i=kP(e,t.state,t.location,t.replace);function n(s,o=!0){o||i.pauseListeners(),history.go(s)}const r=ee({location:"",base:e,go:n,createHref:gP.bind(null,e)},t,i);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>t.state.value}),r}function LP(e){return e=location.host?e||location.pathname+location.search:"",e.includes("#")||(e+="#"),AP(e)}let to=(function(e){return e[e.Static=0]="Static",e[e.Param=1]="Param",e[e.Group=2]="Group",e})({});var $e=(function(e){return e[e.Static=0]="Static",e[e.Param=1]="Param",e[e.ParamRegExp=2]="ParamRegExp",e[e.ParamRegExpEnd=3]="ParamRegExpEnd",e[e.EscapeNext=4]="EscapeNext",e})($e||{});const MP={type:to.Static,value:""},IP=/[a-zA-Z0-9_]/;function PP(e){if(!e)return[[]];if(e==="/")return[[MP]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(f){throw new Error(`ERR (${i})/"${c}": ${f}`)}let i=$e.Static,n=i;const r=[];let s;function o(){s&&r.push(s),s=[]}let a=0,l,c="",h="";function u(){c&&(i===$e.Static?s.push({type:to.Static,value:c}):i===$e.Param||i===$e.ParamRegExp||i===$e.ParamRegExpEnd?(s.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),s.push({type:to.Param,value:c,regexp:h,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),c="")}function d(){c+=l}for(;a<e.length;){if(l=e[a++],l==="\\"&&i!==$e.ParamRegExp){n=i,i=$e.EscapeNext;continue}switch(i){case $e.Static:l==="/"?(c&&u(),o()):l===":"?(u(),i=$e.Param):d();break;case $e.EscapeNext:d(),i=n;break;case $e.Param:l==="("?i=$e.ParamRegExp:IP.test(l)?d():(u(),i=$e.Static,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case $e.ParamRegExp:l===")"?h[h.length-1]=="\\"?h=h.slice(0,-1)+l:i=$e.ParamRegExpEnd:h+=l;break;case $e.ParamRegExpEnd:u(),i=$e.Static,l!=="*"&&l!=="?"&&l!=="+"&&a--,h="";break;default:t("Unknown state");break}}return i===$e.ParamRegExp&&t(`Unfinished custom RegExp for param "${c}"`),u(),o(),r}const Ex="[^/]+?",FP={sensitive:!1,strict:!1,start:!0,end:!0};var xi=(function(e){return e[e._multiplier=10]="_multiplier",e[e.Root=90]="Root",e[e.Segment=40]="Segment",e[e.SubSegment=30]="SubSegment",e[e.Static=40]="Static",e[e.Dynamic=20]="Dynamic",e[e.BonusCustomRegExp=10]="BonusCustomRegExp",e[e.BonusWildcard=-50]="BonusWildcard",e[e.BonusRepeatable=-20]="BonusRepeatable",e[e.BonusOptional=-8]="BonusOptional",e[e.BonusStrict=.7000000000000001]="BonusStrict",e[e.BonusCaseSensitive=.25]="BonusCaseSensitive",e})(xi||{});const OP=/[.+*?^${}()[\]/\\]/g;function DP(e,t){const i=ee({},FP,t),n=[];let r=i.start?"^":"";const s=[];for(const c of e){const h=c.length?[]:[xi.Root];i.strict&&!c.length&&(r+="/");for(let u=0;u<c.length;u++){const d=c[u];let f=xi.Segment+(i.sensitive?xi.BonusCaseSensitive:0);if(d.type===to.Static)u||(r+="/"),r+=d.value.replace(OP,"\\$&"),f+=xi.Static;else if(d.type===to.Param){const{value:g,repeatable:p,optional:m,regexp:y}=d;s.push({name:g,repeatable:p,optional:m});const _=y||Ex;if(_!==Ex){f+=xi.BonusCustomRegExp;try{`${_}`}catch(b){throw new Error(`Invalid custom RegExp for param "${g}" (${_}): `+b.message)}}let C=p?`((?:${_})(?:/(?:${_}))*)`:`(${_})`;u||(C=m&&c.length<2?`(?:/${C})`:"/"+C),m&&(C+="?"),r+=C,f+=xi.Dynamic,m&&(f+=xi.BonusOptional),p&&(f+=xi.BonusRepeatable),_===".*"&&(f+=xi.BonusWildcard)}h.push(f)}n.push(h)}if(i.strict&&i.end){const c=n.length-1;n[c][n[c].length-1]+=xi.BonusStrict}i.strict||(r+="/?"),i.end?r+="$":i.strict&&!r.endsWith("/")&&(r+="(?:/|$)");const o=new RegExp(r,i.sensitive?"":"i");function a(c){const h=c.match(o),u={};if(!h)return null;for(let d=1;d<h.length;d++){const f=h[d]||"",g=s[d-1];u[g.name]=f&&g.repeatable?f.split("/"):f}return u}function l(c){let h="",u=!1;for(const d of e){(!u||!h.endsWith("/"))&&(h+="/"),u=!1;for(const f of d)if(f.type===to.Static)h+=f.value;else if(f.type===to.Param){const{value:g,repeatable:p,optional:m}=f,y=g in c?c[g]:"";if(Fn(y)&&!p)throw new Error(`Provided param "${g}" is an array but it is not repeatable (* or + modifiers)`);const _=Fn(y)?y.join("/"):y;if(!_)if(m)d.length<2&&(h.endsWith("/")?h=h.slice(0,-1):u=!0);else throw new Error(`Missing required param "${g}"`);h+=_}}return h||"/"}return{re:o,score:n,keys:s,parse:a,stringify:l}}function BP(e,t){let i=0;for(;i<e.length&&i<t.length;){const n=t[i]-e[i];if(n)return n;i++}return e.length<t.length?e.length===1&&e[0]===xi.Static+xi.Segment?-1:1:e.length>t.length?t.length===1&&t[0]===xi.Static+xi.Segment?1:-1:0}function ew(e,t){let i=0;const n=e.score,r=t.score;for(;i<n.length&&i<r.length;){const s=BP(n[i],r[i]);if(s)return s;i++}if(Math.abs(r.length-n.length)===1){if(kx(n))return 1;if(kx(r))return-1}return r.length-n.length}function kx(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const NP={strict:!1,end:!0,sensitive:!1};function $P(e,t,i){const n=DP(PP(e.path),i),r=ee(n,{record:e,parent:t,children:[],alias:[]});return t&&!r.record.aliasOf==!t.record.aliasOf&&t.children.push(r),r}function zP(e,t){const i=[],n=new Map;t=xx(NP,t);function r(u){return n.get(u)}function s(u,d,f){const g=!f,p=Ax(u);p.aliasOf=f&&f.record;const m=xx(t,u),y=[p];if("alias"in u){const b=typeof u.alias=="string"?[u.alias]:u.alias;for(const v of b)y.push(Ax(ee({},p,{components:f?f.record.components:p.components,path:v,aliasOf:f?f.record:p})))}let _,C;for(const b of y){const{path:v}=b;if(d&&v[0]!=="/"){const S=d.record.path,w=S[S.length-1]==="/"?"":"/";b.path=d.record.path+(v&&w+v)}if(_=$P(b,d,m),f?f.alias.push(_):(C=C||_,C!==_&&C.alias.push(_),g&&u.name&&!Lx(_)&&o(u.name)),iw(_)&&l(_),p.children){const S=p.children;for(let w=0;w<S.length;w++)s(S[w],_,f&&f.children[w])}f=f||_}return C?()=>{o(C)}:Ql}function o(u){if(Jv(u)){const d=n.get(u);d&&(n.delete(u),i.splice(i.indexOf(d),1),d.children.forEach(o),d.alias.forEach(o))}else{const d=i.indexOf(u);d>-1&&(i.splice(d,1),u.record.name&&n.delete(u.record.name),u.children.forEach(o),u.alias.forEach(o))}}function a(){return i}function l(u){const d=jP(u,i);i.splice(d,0,u),u.record.name&&!Lx(u)&&n.set(u.record.name,u)}function c(u,d){let f,g={},p,m;if("name"in u&&u.name){if(f=n.get(u.name),!f)throw Fa(ve.MATCHER_NOT_FOUND,{location:u});m=f.record.name,g=ee(Rx(d.params,f.keys.filter(C=>!C.optional).concat(f.parent?f.parent.keys.filter(C=>C.optional):[]).map(C=>C.name)),u.params&&Rx(u.params,f.keys.map(C=>C.name))),p=f.stringify(g)}else if(u.path!=null)p=u.path,f=i.find(C=>C.re.test(p)),f&&(g=f.parse(p),m=f.record.name);else{if(f=d.name?n.get(d.name):i.find(C=>C.re.test(d.path)),!f)throw Fa(ve.MATCHER_NOT_FOUND,{location:u,currentLocation:d});m=f.record.name,g=ee({},d.params,u.params),p=f.stringify(g)}const y=[];let _=f;for(;_;)y.unshift(_.record),_=_.parent;return{name:m,path:p,params:g,matched:y,meta:WP(y)}}e.forEach(u=>s(u));function h(){i.length=0,n.clear()}return{addRoute:s,resolve:c,removeRoute:o,clearRoutes:h,getRoutes:a,getRecordMatcher:r}}function Rx(e,t){const i={};for(const n of t)n in e&&(i[n]=e[n]);return i}function Ax(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:GP(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function GP(e){const t={},i=e.props||!1;if("component"in e)t.default=i;else for(const n in e.components)t[n]=typeof i=="object"?i[n]:i;return t}function Lx(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function WP(e){return e.reduce((t,i)=>ee(t,i.meta),{})}function jP(e,t){let i=0,n=t.length;for(;i!==n;){const s=i+n>>1;ew(e,t[s])<0?n=s:i=s+1}const r=HP(e);return r&&(n=t.lastIndexOf(r,n-1)),n}function HP(e){let t=e;for(;t=t.parent;)if(iw(t)&&ew(e,t)===0)return t}function iw({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function Mx(e){const t=Sn(Zd),i=Sn(w0),n=wi(()=>{const l=Te(e.to);return t.resolve(l)}),r=wi(()=>{const{matched:l}=n.value,{length:c}=l,h=l[c-1],u=i.matched;if(!h||!u.length)return-1;const d=u.findIndex(Pa.bind(null,h));if(d>-1)return d;const f=Ix(l[c-2]);return c>1&&Ix(h)===f&&u[u.length-1].path!==f?u.findIndex(Pa.bind(null,l[c-2])):d}),s=wi(()=>r.value>-1&&XP(i.params,n.value.params)),o=wi(()=>r.value>-1&&r.value===i.matched.length-1&&Zv(i.params,n.value.params));function a(l={}){if(YP(l)){const c=t[Te(e.replace)?"replace":"push"](Te(e.to)).catch(Ql);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:n,href:wi(()=>n.value.href),isActive:s,isExactActive:o,navigate:a}}function VP(e){return e.length===1?e[0]:e}const UP=p0({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Mx,setup(e,{slots:t}){const i=jd(Mx(e)),{options:n}=Sn(Zd),r=wi(()=>({[Px(e.activeClass,n.linkActiveClass,"router-link-active")]:i.isActive,[Px(e.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:i.isExactActive}));return()=>{const s=t.default&&VP(t.default(i));return e.custom?s:b0("a",{"aria-current":i.isExactActive?e.ariaCurrentValue:null,href:i.href,onClick:i.navigate,class:r.value},s)}}}),qP=UP;function YP(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function XP(e,t){for(const i in t){const n=t[i],r=e[i];if(typeof n=="string"){if(n!==r)return!1}else if(!Fn(r)||r.length!==n.length||n.some((s,o)=>s.valueOf()!==r[o].valueOf()))return!1}return!0}function Ix(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const Px=(e,t,i)=>e??t??i,KP=p0({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:i}){const n=Sn(Mp),r=wi(()=>e.route||n.value),s=Sn(Sx,0),o=wi(()=>{let c=Te(s);const{matched:h}=r.value;let u;for(;(u=h[c])&&!u.components;)c++;return c}),a=wi(()=>r.value.matched[o.value]);eu(Sx,wi(()=>o.value+1)),eu(SP,a),eu(Mp,r);const l=Je();return Tn(()=>[l.value,a.value,e.name],([c,h,u],[d,f,g])=>{h&&(h.instances[u]=c,f&&f!==h&&c&&c===d&&(h.leaveGuards.size||(h.leaveGuards=f.leaveGuards),h.updateGuards.size||(h.updateGuards=f.updateGuards))),c&&h&&(!f||!Pa(h,f)||!d)&&(h.enterCallbacks[u]||[]).forEach(p=>p(c))},{flush:"post"}),()=>{const c=r.value,h=e.name,u=a.value,d=u&&u.components[h];if(!d)return Fx(i.default,{Component:d,route:c});const f=u.props[h],g=f?f===!0?c.params:typeof f=="function"?f(c):f:null,m=b0(d,ee({},g,t,{onVnodeUnmounted:y=>{y.component.isUnmounted&&(u.instances[h]=null)},ref:l}));return Fx(i.default,{Component:m,route:c})||m}}});function Fx(e,t){if(!e)return null;const i=e(t);return i.length===1?i[0]:i}const ZP=KP;function JP(e){const t=zP(e.routes,e),i=e.parseQuery||vP,n=e.stringifyQuery||wx,r=e.history,s=ul(),o=ul(),a=ul(),l=qL(Qr);let c=Qr;Qo&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const h=fg.bind(null,W=>""+W),u=fg.bind(null,sP),d=fg.bind(null,mc);function f(W,et){let J,it;return Jv(W)?(J=t.getRecordMatcher(W),it=et):it=W,t.addRoute(it,J)}function g(W){const et=t.getRecordMatcher(W);et&&t.removeRoute(et)}function p(){return t.getRoutes().map(W=>W.record)}function m(W){return!!t.getRecordMatcher(W)}function y(W,et){if(et=ee({},et||l.value),typeof W=="string"){const $=gg(i,W,et.path),H=t.resolve({path:$.path},et),U=r.createHref($.fullPath);return ee($,H,{params:d(H.params),hash:mc($.hash),redirectedFrom:void 0,href:U})}let J;if(W.path!=null)J=ee({},W,{path:gg(i,W.path,et.path).path});else{const $=ee({},W.params);for(const H in $)$[H]==null&&delete $[H];J=ee({},W,{params:u($)}),et.params=u(et.params)}const it=t.resolve(J,et),Rt=W.hash||"";it.params=h(d(it.params));const k=lP(n,ee({},W,{hash:iP(Rt),path:it.path})),I=r.createHref(k);return ee({fullPath:k,hash:Rt,query:n===wx?wP(W.query):W.query||{}},it,{redirectedFrom:void 0,href:I})}function _(W){return typeof W=="string"?gg(i,W,l.value.path):ee({},W)}function C(W,et){if(c!==W)return Fa(ve.NAVIGATION_CANCELLED,{from:et,to:W})}function b(W){return w(W)}function v(W){return b(ee(_(W),{replace:!0}))}function S(W,et){const J=W.matched[W.matched.length-1];if(J&&J.redirect){const{redirect:it}=J;let Rt=typeof it=="function"?it(W,et):it;return typeof Rt=="string"&&(Rt=Rt.includes("?")||Rt.includes("#")?Rt=_(Rt):{path:Rt},Rt.params={}),ee({query:W.query,hash:W.hash,params:Rt.path!=null?{}:W.params},Rt)}}function w(W,et){const J=c=y(W),it=l.value,Rt=W.state,k=W.force,I=W.replace===!0,$=S(J,it);if($)return w(ee(_($),{state:typeof $=="object"?ee({},Rt,$.state):Rt,force:k,replace:I}),et||J);const H=J;H.redirectedFrom=et;let U;return!k&&cP(n,it,J)&&(U=Fa(ve.NAVIGATION_DUPLICATED,{to:H,from:it}),K(it,it,!0,!1)),(U?Promise.resolve(U):B(H,it)).catch(V=>_r(V)?_r(V,ve.NAVIGATION_GUARD_REDIRECT)?V:Y(V):M(V,H,it)).then(V=>{if(V){if(_r(V,ve.NAVIGATION_GUARD_REDIRECT))return w(ee({replace:I},_(V.to),{state:typeof V.to=="object"?ee({},Rt,V.to.state):Rt,force:k}),et||H)}else V=F(H,it,!0,I,Rt);return O(H,it,V),V})}function L(W,et){const J=C(W,et);return J?Promise.reject(J):Promise.resolve()}function A(W){const et=ut.values().next().value;return et&&typeof et.runWithContext=="function"?et.runWithContext(W):W()}function B(W,et){let J;const[it,Rt,k]=TP(W,et);J=mg(it.reverse(),"beforeRouteLeave",W,et);for(const $ of it)$.leaveGuards.forEach(H=>{J.push(us(H,W,et))});const I=L.bind(null,W,et);return J.push(I),It(J).then(()=>{J=[];for(const $ of s.list())J.push(us($,W,et));return J.push(I),It(J)}).then(()=>{J=mg(Rt,"beforeRouteUpdate",W,et);for(const $ of Rt)$.updateGuards.forEach(H=>{J.push(us(H,W,et))});return J.push(I),It(J)}).then(()=>{J=[];for(const $ of k)if($.beforeEnter)if(Fn($.beforeEnter))for(const H of $.beforeEnter)J.push(us(H,W,et));else J.push(us($.beforeEnter,W,et));return J.push(I),It(J)}).then(()=>(W.matched.forEach($=>$.enterCallbacks={}),J=mg(k,"beforeRouteEnter",W,et,A),J.push(I),It(J))).then(()=>{J=[];for(const $ of o.list())J.push(us($,W,et));return J.push(I),It(J)}).catch($=>_r($,ve.NAVIGATION_CANCELLED)?$:Promise.reject($))}function O(W,et,J){a.list().forEach(it=>A(()=>it(W,et,J)))}function F(W,et,J,it,Rt){const k=C(W,et);if(k)return k;const I=et===Qr,$=Qo?history.state:{};J&&(it||I?r.replace(W.fullPath,ee({scroll:I&&$&&$.scroll},Rt)):r.push(W.fullPath,Rt)),l.value=W,K(W,et,J,I),Y()}let R;function T(){R||(R=r.listen((W,et,J)=>{if(!at.listening)return;const it=y(W),Rt=S(it,at.currentRoute.value);if(Rt){w(ee(Rt,{replace:!0,force:!0}),it).catch(Ql);return}c=it;const k=l.value;Qo&&yP(vx(k.fullPath,J.delta),Kd()),B(it,k).catch(I=>_r(I,ve.NAVIGATION_ABORTED|ve.NAVIGATION_CANCELLED)?I:_r(I,ve.NAVIGATION_GUARD_REDIRECT)?(w(ee(_(I.to),{force:!0}),it).then($=>{_r($,ve.NAVIGATION_ABORTED|ve.NAVIGATION_DUPLICATED)&&!J.delta&&J.type===Ap.pop&&r.go(-1,!1)}).catch(Ql),Promise.reject()):(J.delta&&r.go(-J.delta,!1),M(I,it,k))).then(I=>{I=I||F(it,k,!1),I&&(J.delta&&!_r(I,ve.NAVIGATION_CANCELLED)?r.go(-J.delta,!1):J.type===Ap.pop&&_r(I,ve.NAVIGATION_ABORTED|ve.NAVIGATION_DUPLICATED)&&r.go(-1,!1)),O(it,k,I)}).catch(Ql)}))}let P=ul(),E=ul(),D;function M(W,et,J){Y(W);const it=E.list();return it.length?it.forEach(Rt=>Rt(W,et,J)):console.error(W),Promise.reject(W)}function j(){return D&&l.value!==Qr?Promise.resolve():new Promise((W,et)=>{P.add([W,et])})}function Y(W){return D||(D=!W,T(),P.list().forEach(([et,J])=>W?J(W):et()),P.reset()),W}function K(W,et,J,it){const{scrollBehavior:Rt}=e;if(!Qo||!Rt)return Promise.resolve();const k=!J&&_P(vx(W.fullPath,0))||(it||!J)&&history.state&&history.state.scroll||null;return rv().then(()=>Rt(W,et,k)).then(I=>I&&mP(I)).catch(I=>M(I,W,et))}const G=W=>r.go(W);let Q;const ut=new Set,at={currentRoute:l,listening:!0,addRoute:f,removeRoute:g,clearRoutes:t.clearRoutes,hasRoute:m,getRoutes:p,resolve:y,options:e,push:b,replace:v,go:G,back:()=>G(-1),forward:()=>G(1),beforeEach:s.add,beforeResolve:o.add,afterEach:a.add,onError:E.add,isReady:j,install(W){W.component("RouterLink",qP),W.component("RouterView",ZP),W.config.globalProperties.$router=at,Object.defineProperty(W.config.globalProperties,"$route",{enumerable:!0,get:()=>Te(l)}),Qo&&!Q&&l.value===Qr&&(Q=!0,b(r.location).catch(it=>{}));const et={};for(const it in Qr)Object.defineProperty(et,it,{get:()=>l.value[it],enumerable:!0});W.provide(Zd,at),W.provide(w0,tv(et)),W.provide(Mp,l);const J=W.unmount;ut.add(W),W.unmount=function(){ut.delete(W),ut.size<1&&(c=Qr,R&&R(),R=null,l.value=Qr,Q=!1,D=!1),J()}}};function It(W){return W.reduce((et,J)=>et.then(()=>A(J)),Promise.resolve())}return at}function QP(){return Sn(Zd)}function nw(e){return Sn(w0)}const pa=Je(!1),rw="app-theme",tF=()=>{try{if(typeof window>"u"||!window.localStorage)return null;const e=window.localStorage.getItem(rw);return e==="dark"?!0:e==="light"?!1:null}catch{return null}},eF=e=>{try{if(typeof window>"u"||!window.localStorage)return;window.localStorage.setItem(rw,e?"dark":"light")}catch{}},sw=e=>{if(typeof document>"u")return;const t=document.documentElement;t.classList.toggle("theme-dark",!!e),t.classList.toggle("theme-light",!e)},Ox=tF();Ox!==null&&(pa.value=Ox);sw(pa.value);Tn(pa,e=>{sw(e),eF(e)});function S0(){return{isDark:pa,toggleTheme:()=>{pa.value=!pa.value}}}const Ka=(e,t)=>{const i=e.__vccOpts||e;for(const[n,r]of t)i[n]=r;return i},iF={class:"nav-panel right-panel"},nF={class:"panel-content"},rF={class:"nav-menu"},sF=["onClick"],oF={class:"submenu"},aF=["title"],lF={key:0,xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},cF={key:1,xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},hF={class:"panel-content mobile-trigger-content"},uF={key:0,xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},dF={key:1,xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},fF={class:"panel-content mobile-menu-content"},gF={class:"mobile-menu"},pF=["onClick"],mF={class:"mobile-submenu"},yF={class:"mobile-menu-item"},_F=["title"],xF={key:0,xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},CF={key:1,xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},bF={__name:"FloatingNavBar",setup(e){const{isDark:t,toggleTheme:i}=S0(),n=nw(),r=Je(null),s=u=>{r.value=r.value===u?null:u},o=Je(!1),a=()=>{o.value=!1,r.value=null},l=()=>{o.value=!o.value,o.value||(r.value=null)};Tn(()=>n.fullPath,()=>{a()});const c=wi(()=>["BlogList","BlogPost","About"].includes(n.name)),h=Je([{title:"",link:"/"},{title:"",link:"/blog"},{title:"",children:[{title:""},{title:""}]},{title:"",link:"/about"}]);return(u,d)=>{const f=y0("router-link");return Wt(),oe("nav",{class:yo(["floating-nav-container",{"with-bg":c.value,"theme-dark":Te(t),"theme-light":!Te(t)}])},[me(f,{to:"/",class:"nav-panel left-panel"},{default:mn(()=>[...d[4]||(d[4]=[dt("div",{class:"border-effect"},[dt("svg",{class:"border-svg",xmlns:"http://www.w3.org/2000/svg"},[dt("rect",{class:"border-rect",x:"0",y:"0",width:"100%",height:"100%",rx:"16",ry:"16",pathLength:"100"})])],-1),dt("div",{class:"panel-content"},[dt("img",{src:VI,class:"logo-icon",alt:"Logo"}),dt("span",{class:"logo-text"},"Dawn")],-1)])]),_:1}),dt("div",iF,[d[8]||(d[8]=dt("div",{class:"border-effect"},[dt("svg",{class:"border-svg",xmlns:"http://www.w3.org/2000/svg"},[dt("rect",{class:"border-rect",x:"0",y:"0",width:"100%",height:"100%",rx:"16",ry:"16",pathLength:"100"})])],-1)),dt("div",nF,[dt("ul",rF,[(Wt(!0),oe(Ee,null,Sh(h.value,(g,p)=>(Wt(),oe("li",{key:p,class:yo(["menu-item",{open:r.value===p}])},[g.children?(Wt(),oe(Ee,{key:0},[dt("span",{class:"menu-link",onClick:m=>s(p)},[Js(Rr(g.title)+" ",1),d[5]||(d[5]=dt("span",{class:"arrow-icon"},"",-1))],8,sF),dt("ul",oF,[(Wt(!0),oe(Ee,null,Sh(g.children,(m,y)=>(Wt(),oe("li",{key:y,class:"submenu-item"},[me(f,{to:m.link||"#",class:"submenu-link",onClick:d[0]||(d[0]=_=>r.value=null)},{default:mn(()=>[Js(Rr(m.title),1)]),_:2},1032,["to"])]))),128))])],64)):(Wt(),En(f,{key:1,to:g.link||"#",class:"menu-link"},{default:mn(()=>[Js(Rr(g.title),1)]),_:2},1032,["to"]))],2))),128)),dt("li",{class:"menu-item theme-toggle-item",onClick:d[1]||(d[1]=(...g)=>Te(i)&&Te(i)(...g))},[dt("span",{class:"menu-link theme-toggle-btn",title:Te(t)?"":""},[Te(t)?(Wt(),oe("svg",lF,[...d[6]||(d[6]=[dt("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"},null,-1)])])):(Wt(),oe("svg",cF,[...d[7]||(d[7]=[Nv('<circle cx="12" cy="12" r="5" data-v-0b194b94></circle><line x1="12" y1="1" x2="12" y2="3" data-v-0b194b94></line><line x1="12" y1="21" x2="12" y2="23" data-v-0b194b94></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64" data-v-0b194b94></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78" data-v-0b194b94></line><line x1="1" y1="12" x2="3" y2="12" data-v-0b194b94></line><line x1="21" y1="12" x2="23" y2="12" data-v-0b194b94></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36" data-v-0b194b94></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22" data-v-0b194b94></line>',9)])]))],8,aF)])])])]),dt("div",{class:"nav-panel mobile-trigger",onClick:l},[d[11]||(d[11]=dt("div",{class:"border-effect"},[dt("svg",{class:"border-svg",xmlns:"http://www.w3.org/2000/svg"},[dt("rect",{class:"border-rect",x:"0",y:"0",width:"100%",height:"100%",rx:"16",ry:"16",pathLength:"100"})])],-1)),dt("div",hF,[o.value?(Wt(),oe("svg",dF,[...d[10]||(d[10]=[dt("line",{x1:"18",y1:"6",x2:"6",y2:"18"},null,-1),dt("line",{x1:"6",y1:"6",x2:"18",y2:"18"},null,-1)])])):(Wt(),oe("svg",uF,[...d[9]||(d[9]=[dt("line",{x1:"3",y1:"12",x2:"21",y2:"12"},null,-1),dt("line",{x1:"3",y1:"6",x2:"21",y2:"6"},null,-1),dt("line",{x1:"3",y1:"18",x2:"21",y2:"18"},null,-1)])]))])]),me(Lu,{name:"fade"},{default:mn(()=>[o.value?(Wt(),oe("div",{key:0,class:"mobile-menu-overlay",onClick:a})):Ma("",!0)]),_:1}),me(Lu,{name:"slide-fade"},{default:mn(()=>[o.value?(Wt(),oe("div",{key:0,class:"nav-panel mobile-menu-drawer",onClick:d[3]||(d[3]=$I(()=>{},["stop"]))},[dt("div",fF,[dt("ul",gF,[(Wt(!0),oe(Ee,null,Sh(h.value,(g,p)=>(Wt(),oe("li",{key:`m-${p}`,class:"mobile-menu-item"},[g.children?(Wt(),oe(Ee,{key:0},[dt("button",{type:"button",class:"mobile-menu-link",onClick:m=>s(p)},[dt("span",null,Rr(g.title),1),d[12]||(d[12]=dt("span",{class:"arrow-icon"},"",-1))],8,pF),nM(dt("div",mF,[(Wt(!0),oe(Ee,null,Sh(g.children,(m,y)=>(Wt(),En(f,{key:`m-${p}-${y}`,to:m.link||"#",class:"mobile-submenu-link",onClick:a},{default:mn(()=>[Js(Rr(m.title),1)]),_:2},1032,["to"]))),128))],512),[[vI,r.value===p]])],64)):(Wt(),En(f,{key:1,to:g.link||"#",class:"mobile-menu-link",onClick:a},{default:mn(()=>[Js(Rr(g.title),1)]),_:2},1032,["to"]))]))),128)),dt("li",yF,[dt("button",{type:"button",class:"mobile-menu-link mobile-theme-toggle",onClick:d[2]||(d[2]=(...g)=>Te(i)&&Te(i)(...g)),title:Te(t)?"":""},[Te(t)?(Wt(),oe("svg",xF,[...d[13]||(d[13]=[dt("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"},null,-1)])])):(Wt(),oe("svg",CF,[...d[14]||(d[14]=[dt("circle",{cx:"12",cy:"12",r:"5"},null,-1),dt("line",{x1:"12",y1:"1",x2:"12",y2:"3"},null,-1),dt("line",{x1:"12",y1:"21",x2:"12",y2:"23"},null,-1),dt("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"},null,-1),dt("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"},null,-1),dt("line",{x1:"1",y1:"12",x2:"3",y2:"12"},null,-1),dt("line",{x1:"21",y1:"12",x2:"23",y2:"12"},null,-1),dt("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"},null,-1),dt("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"},null,-1)])]))],8,_F)])])])])):Ma("",!0)]),_:1})],2)}}},vF=Ka(bF,[["__scopeId","data-v-0b194b94"]]),wF={key:0,class:"loading-overlay"},SF={__name:"Loading",props:{loading:{type:Boolean,default:!1},text:{type:String,default:"..."}},setup(e){return(t,i)=>(Wt(),En(Lu,{name:"fade"},{default:mn(()=>[e.loading?(Wt(),oe("div",wF,[i[0]||(i[0]=dt("div",{class:"spinner"},null,-1)),dt("p",null,Rr(e.text),1)])):Ma("",!0)]),_:1}))}},TF=Ka(SF,[["__scopeId","data-v-bbe7a72a"]]),yg=Je(!1),Dx=Je("...");function T0(){return{isLoading:yg,loadingText:Dx,showLoading:(i="...")=>{Dx.value=i,yg.value=!0},hideLoading:()=>{yg.value=!1}}}const _g=Je(null);function E0(){return{appError:_g,setAppError:i=>{_g.value=i||new Error("Unknown error")},clearAppError:()=>{_g.value=null}}}const EF={class:"nf-page"},kF={class:"nf-center"},RF={__name:"NotFound",setup(e){const{clearAppError:t}=E0();return(i,n)=>{const r=y0("router-link");return Wt(),oe("main",EF,[dt("div",kF,[n[1]||(n[1]=dt("div",{class:"nf-code"},"404",-1)),me(r,{to:"/",class:"nf-home",onClick:Te(t)},{default:mn(()=>[...n[0]||(n[0]=[Js("",-1)])]),_:1},8,["onClick"])])])}}},ow=Ka(RF,[["__scopeId","data-v-0e860860"]]),AF=Object.freeze(Object.defineProperty({__proto__:null,default:ow},Symbol.toStringTag,{value:"Module"})),LF={__name:"App",setup(e){const{isLoading:t,loadingText:i}=T0(),n=nw(),{appError:r,clearAppError:s}=E0(),o=wi(()=>r.value?!0:n.name==="NotFound");return Tn(()=>n.fullPath,()=>{r.value&&s()}),(a,l)=>{const c=y0("router-view");return Wt(),oe(Ee,null,[me(TF,{loading:Te(t),text:Te(i)},null,8,["loading","text"]),o.value?Ma("",!0):(Wt(),En(vF,{key:0})),Te(r)?(Wt(),En(ow,{key:1})):(Wt(),En(c,{key:2}))],64)}}},MF="modulepreload",IF=function(e){return"/Blogs/"+e},Bx={},Kt=function(t,i,n){let r=Promise.resolve();if(i&&i.length>0){let l=function(c){return Promise.all(c.map(h=>Promise.resolve(h).then(u=>({status:"fulfilled",value:u}),u=>({status:"rejected",reason:u}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=o?.nonce||o?.getAttribute("nonce");r=l(i.map(c=>{if(c=IF(c),c in Bx)return;Bx[c]=!0;const h=c.endsWith(".css"),u=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const d=document.createElement("link");if(d.rel=h?"stylesheet":MF,h||(d.as="script"),d.crossOrigin="",d.href=c,a&&d.setAttribute("nonce",a),document.head.appendChild(d),h)return new Promise((f,g)=>{d.addEventListener("load",f),d.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return r.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return t().catch(s)})},PF={key:0,viewBox:"0 0 24 24",width:"16",height:"16",stroke:"currentColor","stroke-width":"2",fill:"none"},FF={key:1,viewBox:"0 0 24 24",width:"18",height:"18",stroke:"currentColor","stroke-width":"2",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},OF={key:2,viewBox:"0 0 24 24",width:"18",height:"18",stroke:"currentColor","stroke-width":"2",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},DF={key:3,viewBox:"0 0 24 24",width:"18",height:"18",stroke:"currentColor","stroke-width":"2",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},BF={class:"toast-text"},NF={__name:"Toast",props:{visible:{type:Boolean,default:!1},message:{type:String,default:""},position:{type:String,default:"bottom",validator:e=>["bottom","top","center"].includes(e)},duration:{type:Number,default:2e3},type:{type:String,default:"default",validator:e=>["success","info","warning","error","default"].includes(e)}},emits:["update:visible","close"],setup(e,{emit:t}){const i=e,n=t;let r=null;const s=wi(()=>i.position==="top"?"fade-down":i.position==="center"?"fade":"fade-up"),o=wi(()=>({})),a=()=>{r&&clearTimeout(r),i.duration>0&&(r=setTimeout(()=>{l()},i.duration))},l=()=>{n("update:visible",!1),n("close")};return Tn(()=>i.visible,c=>{c?a():r&&clearTimeout(r)}),Ud(()=>{r&&clearTimeout(r)}),(c,h)=>(Wt(),En(Lu,{name:s.value},{default:mn(()=>[e.visible?(Wt(),oe("div",{key:0,class:yo(["toast-message",[`position-${e.position}`,`type-${e.type}`]]),style:Gd(o.value)},[TM(c.$slots,"icon",{},()=>[e.type==="default"||e.type==="success"?(Wt(),oe("svg",PF,[...h[0]||(h[0]=[dt("polyline",{points:"20 6 9 17 4 12"},null,-1)])])):e.type==="info"?(Wt(),oe("svg",FF,[...h[1]||(h[1]=[dt("circle",{cx:"12",cy:"12",r:"10"},null,-1),dt("line",{x1:"12",y1:"16",x2:"12",y2:"12"},null,-1),dt("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"},null,-1)])])):e.type==="warning"?(Wt(),oe("svg",OF,[...h[2]||(h[2]=[dt("path",{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"},null,-1),dt("line",{x1:"12",y1:"9",x2:"12",y2:"13"},null,-1),dt("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"},null,-1)])])):e.type==="error"?(Wt(),oe("svg",DF,[...h[3]||(h[3]=[dt("circle",{cx:"12",cy:"12",r:"10"},null,-1),dt("line",{x1:"15",y1:"9",x2:"9",y2:"15"},null,-1),dt("line",{x1:"9",y1:"9",x2:"15",y2:"15"},null,-1)])])):Ma("",!0)],!0),dt("span",BF,Rr(e.message),1)],6)):Ma("",!0)]),_:3},8,["name"]))}},$F=Ka(NF,[["__scopeId","data-v-a57f5655"]]),Fi={ADD:"add",REMOVE:"remove"},Oa={PROPERTYCHANGE:"propertychange"},Mt={CHANGE:"change",ERROR:"error",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",TOUCHMOVE:"touchmove",WHEEL:"wheel"};class Jd{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function zF(e,t,i){let n,r;i=i||tr;let s=0,o=e.length,a=!1;for(;s<o;)n=s+(o-s>>1),r=+i(e[n],t),r<0?s=n+1:(o=n,a=!r);return a?s:~s}function tr(e,t){return e>t?1:e<t?-1:0}function GF(e,t){return e<t?1:e>t?-1:0}function Qd(e,t,i){if(e[0]<=t)return 0;const n=e.length;if(t<=e[n-1])return n-1;if(typeof i=="function"){for(let r=1;r<n;++r){const s=e[r];if(s===t)return r;if(s<t)return i(t,e[r-1],s)>0?r-1:r}return n-1}if(i>0){for(let r=1;r<n;++r)if(e[r]<t)return r-1;return n-1}if(i<0){for(let r=1;r<n;++r)if(e[r]<=t)return r;return n-1}for(let r=1;r<n;++r){if(e[r]==t)return r;if(e[r]<t)return e[r-1]-t<t-e[r]?r-1:r}return n-1}function WF(e,t,i){for(;t<i;){const n=e[t];e[t]=e[i],e[i]=n,++t,--i}}function kn(e,t){const i=Array.isArray(t)?t:[t],n=i.length;for(let r=0;r<n;r++)e[e.length]=i[r]}function Ms(e,t){const i=e.length;if(i!==t.length)return!1;for(let n=0;n<i;n++)if(e[n]!==t[n])return!1;return!0}function jF(e,t,i){const n=t||tr;return e.every(function(r,s){if(s===0)return!0;const o=n(e[s-1],r);return!(o>0||o===0)})}function yc(){return!0}function tf(){return!1}function _c(){}function aw(e){let t,i,n;return function(){const r=Array.prototype.slice.call(arguments);return(!i||this!==n||!Ms(r,i))&&(n=this,i=r,t=e.apply(this,arguments)),t}}function lw(e){function t(){let i;try{i=e()}catch(n){return Promise.reject(n)}return i instanceof Promise?i:Promise.resolve(i)}return t()}function Xc(e){for(const t in e)delete e[t]}function _o(e){let t;for(t in e)return!1;return!t}class cr{constructor(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}class Kc extends Jd{constructor(t){super(),this.eventTarget_=t,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(t,i){if(!t||!i)return;const n=this.listeners_||(this.listeners_={}),r=n[t]||(n[t]=[]);r.includes(i)||r.push(i)}dispatchEvent(t){const i=typeof t=="string",n=i?t:t.type,r=this.listeners_&&this.listeners_[n];if(!r)return;const s=i?new cr(t):t;s.target||(s.target=this.eventTarget_||this);const o=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});n in o||(o[n]=0,a[n]=0),++o[n];let l;for(let c=0,h=r.length;c<h;++c)if("handleEvent"in r[c]?l=r[c].handleEvent(s):l=r[c].call(this,s),l===!1||s.propagationStopped){l=!1;break}if(--o[n]===0){let c=a[n];for(delete a[n];c--;)this.removeEventListener(n,_c);delete o[n]}return l}disposeInternal(){this.listeners_&&Xc(this.listeners_)}getListeners(t){return this.listeners_&&this.listeners_[t]||void 0}hasListener(t){return this.listeners_?t?t in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(t,i){if(!this.listeners_)return;const n=this.listeners_[t];if(!n)return;const r=n.indexOf(i);r!==-1&&(this.pendingRemovals_&&t in this.pendingRemovals_?(n[r]=_c,++this.pendingRemovals_[t]):(n.splice(r,1),n.length===0&&delete this.listeners_[t]))}}function Yt(e,t,i,n,r){if(r){const o=i;i=function(a){return e.removeEventListener(t,i),o.call(n??this,a)}}else n&&n!==e&&(i=i.bind(n));const s={target:e,type:t,listener:i};return e.addEventListener(t,i),s}function Iu(e,t,i,n){return Yt(e,t,i,n,!0)}function de(e){e&&e.target&&(e.target.removeEventListener(e.type,e.listener),Xc(e))}class Zc extends Kc{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(Mt.CHANGE)}getRevision(){return this.revision_}onInternal(t,i){if(Array.isArray(t)){const n=t.length,r=new Array(n);for(let s=0;s<n;++s)r[s]=Yt(this,t[s],i);return r}return Yt(this,t,i)}onceInternal(t,i){let n;if(Array.isArray(t)){const r=t.length;n=new Array(r);for(let s=0;s<r;++s)n[s]=Iu(this,t[s],i)}else n=Iu(this,t,i);return i.ol_key=n,n}unInternal(t,i){const n=i.ol_key;if(n)xn(n);else if(Array.isArray(t))for(let r=0,s=t.length;r<s;++r)this.removeEventListener(t[r],i);else this.removeEventListener(t,i)}}Zc.prototype.on;Zc.prototype.once;Zc.prototype.un;function xn(e){if(Array.isArray(e))for(let t=0,i=e.length;t<i;++t)de(e[t]);else de(e)}function Gt(){throw new Error("Unimplemented abstract method.")}let HF=0;function Nt(e){return e.ol_uid||(e.ol_uid=String(++HF))}class Nx extends cr{constructor(t,i,n){super(t),this.key=i,this.oldValue=n}}class Dn extends Zc{constructor(t){super(),this.on,this.once,this.un,Nt(this),this.values_=null,t!==void 0&&this.setProperties(t)}get(t){let i;return this.values_&&this.values_.hasOwnProperty(t)&&(i=this.values_[t]),i}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(t,i){let n;n=`change:${t}`,this.hasListener(n)&&this.dispatchEvent(new Nx(n,t,i)),n=Oa.PROPERTYCHANGE,this.hasListener(n)&&this.dispatchEvent(new Nx(n,t,i))}addChangeListener(t,i){this.addEventListener(`change:${t}`,i)}removeChangeListener(t,i){this.removeEventListener(`change:${t}`,i)}set(t,i,n){const r=this.values_||(this.values_={});if(n)r[t]=i;else{const s=r[t];r[t]=i,s!==i&&this.notify(t,s)}}setProperties(t,i){for(const n in t)this.set(n,t[n],i)}applyProperties(t){t.values_&&Object.assign(this.values_||(this.values_={}),t.values_)}unset(t,i){if(this.values_&&t in this.values_){const n=this.values_[t];delete this.values_[t],_o(this.values_)&&(this.values_=null),i||this.notify(t,n)}}}const $x={LENGTH:"length"};class Th extends cr{constructor(t,i,n){super(t),this.element=i,this.index=n}}class nn extends Dn{constructor(t,i){if(super(),this.on,this.once,this.un,i=i||{},this.unique_=!!i.unique,this.array_=t??[],this.unique_)for(let n=1,r=this.array_.length;n<r;++n)this.assertUnique_(this.array_[n],n);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(t){for(let i=0,n=t.length;i<n;++i)this.push(t[i]);return this}forEach(t){const i=this.array_;for(let n=0,r=i.length;n<r;++n)t(i[n],n,i)}getArray(){return this.array_}item(t){return this.array_[t]}getLength(){return this.get($x.LENGTH)}insertAt(t,i){if(t<0||t>this.getLength())throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(i),this.array_.splice(t,0,i),this.updateLength_(),this.dispatchEvent(new Th(Fi.ADD,i,t))}pop(){return this.removeAt(this.getLength()-1)}push(t){const i=this.getLength();return this.insertAt(i,t),this.getLength()}remove(t){const i=this.array_;for(let n=0,r=i.length;n<r;++n)if(i[n]===t)return this.removeAt(n)}removeAt(t){if(t<0||t>=this.getLength())return;const i=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new Th(Fi.REMOVE,i,t)),i}setAt(t,i){const n=this.getLength();if(t>=n){this.insertAt(t,i);return}if(t<0)throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(i,t);const r=this.array_[t];this.array_[t]=i,this.dispatchEvent(new Th(Fi.REMOVE,r,t)),this.dispatchEvent(new Th(Fi.ADD,i,t))}updateLength_(){this.set($x.LENGTH,this.array_.length)}assertUnique_(t,i){const n=this.array_;for(let r=0,s=n.length;r<s;++r)if(n[r]===t&&r!==i)throw new Error("Duplicate item added to a unique collection")}}class ta extends cr{constructor(t,i,n){super(t),this.map=i,this.frameState=n!==void 0?n:null}}class os extends ta{constructor(t,i,n,r,s,o){super(t,i,s),this.originalEvent=n,this.pixel_=null,this.coordinate_=null,this.dragging=r!==void 0?r:!1,this.activePointers=o}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(t){this.pixel_=t}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(t){this.coordinate_=t}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const be={SINGLECLICK:"singleclick",CLICK:Mt.CLICK,DBLCLICK:Mt.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},xo=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",VF=xo.includes("safari")&&!xo.includes("chrom");VF&&(xo.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(xo));const UF=xo.includes("webkit")&&!xo.includes("edge"),cw=xo.includes("macintosh"),hw=typeof devicePixelRatio<"u"?devicePixelRatio:1,rn=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,k0=typeof Image<"u"&&Image.prototype.decode,uw=typeof createImageBitmap=="function",dw=(function(){let e=!1;try{const t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("_",null,t),window.removeEventListener("_",null,t)}catch{}return e})(),Ip={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown"};class qF extends Kc{constructor(t,i){super(t),this.map_=t,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=i===void 0?1:i,this.down_=null;const n=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=n,this.pointerdownListenerKey_=Yt(n,Ip.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=Yt(n,Ip.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(Mt.TOUCHMOVE,this.boundHandleTouchMove_,dw?{passive:!1}:!1)}emulateClick_(t){let i=new os(be.CLICK,this.map_,t);this.dispatchEvent(i),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,i=new os(be.DBLCLICK,this.map_,t),this.dispatchEvent(i)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const n=new os(be.SINGLECLICK,this.map_,t);this.dispatchEvent(n)},250)}updateActivePointers_(t){const i=t,n=i.pointerId;if(i.type==be.POINTERUP||i.type==be.POINTERCANCEL){delete this.trackedTouches_[n];for(const r in this.trackedTouches_)if(this.trackedTouches_[r].target!==i.target){delete this.trackedTouches_[r];break}}else(i.type==be.POINTERDOWN||i.type==be.POINTERMOVE)&&(this.trackedTouches_[n]=i);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(t){this.updateActivePointers_(t);const i=new os(be.POINTERUP,this.map_,t,void 0,void 0,this.activePointers_);this.dispatchEvent(i),this.emulateClicks_&&!i.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(t)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(de),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(t){return t.button===0}handlePointerDown_(t){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(t);const i=new os(be.POINTERDOWN,this.map_,t,void 0,void 0,this.activePointers_);if(this.dispatchEvent(i),this.down_=new PointerEvent(t.type,t),Object.defineProperty(this.down_,"target",{writable:!1,value:t.target}),this.dragListenerKeys_.length===0){const n=this.map_.getOwnerDocument();this.dragListenerKeys_.push(Yt(n,be.POINTERMOVE,this.handlePointerMove_,this),Yt(n,be.POINTERUP,this.handlePointerUp_,this),Yt(this.element_,be.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==n&&this.dragListenerKeys_.push(Yt(this.element_.getRootNode(),be.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(t){if(this.isMoving_(t)){this.updateActivePointers_(t),this.dragging_=!0;const i=new os(be.POINTERDRAG,this.map_,t,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(i)}}relayMoveEvent_(t){this.originalPointerMoveEvent_=t;const i=!!(this.down_&&this.isMoving_(t));this.dispatchEvent(new os(be.POINTERMOVE,this.map_,t,i))}handleTouchMove_(t){const i=this.originalPointerMoveEvent_;(!i||i.defaultPrevented)&&(typeof t.cancelable!="boolean"||t.cancelable===!0)&&t.preventDefault()}isMoving_(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(de(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(Mt.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(de(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(de),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const kr={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},ri={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},ct={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function Zt(e,t){if(!e)throw new Error(t)}const Pu=1/0;class YF{constructor(t,i){this.priorityFunction_=t,this.keyFunction_=i,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,Xc(this.queuedElements_)}dequeue(){const t=this.elements_,i=this.priorities_,n=t[0];t.length==1?(t.length=0,i.length=0):(t[0]=t.pop(),i[0]=i.pop(),this.siftUp_(0));const r=this.keyFunction_(n);return delete this.queuedElements_[r],n}enqueue(t){Zt(!(this.keyFunction_(t)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const i=this.priorityFunction_(t);return i!=Pu?(this.elements_.push(t),this.priorities_.push(i),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(t){return t*2+1}getRightChildIndex_(t){return t*2+2}getParentIndex_(t){return t-1>>1}heapify_(){let t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)}isEmpty(){return this.elements_.length===0}isKeyQueued(t){return t in this.queuedElements_}isQueued(t){return this.isKeyQueued(this.keyFunction_(t))}siftUp_(t){const i=this.elements_,n=this.priorities_,r=i.length,s=i[t],o=n[t],a=t;for(;t<r>>1;){const l=this.getLeftChildIndex_(t),c=this.getRightChildIndex_(t),h=c<r&&n[c]<n[l]?c:l;i[t]=i[h],n[t]=n[h],t=h}i[t]=s,n[t]=o,this.siftDown_(a,t)}siftDown_(t,i){const n=this.elements_,r=this.priorities_,s=n[i],o=r[i];for(;i>t;){const a=this.getParentIndex_(i);if(r[a]>o)n[i]=n[a],r[i]=r[a],i=a;else break}n[i]=s,r[i]=o}reprioritize(){const t=this.priorityFunction_,i=this.elements_,n=this.priorities_;let r=0;const s=i.length;let o,a,l;for(a=0;a<s;++a)o=i[a],l=t(o),l==Pu?delete this.queuedElements_[this.keyFunction_(o)]:(n[r]=l,i[r++]=o);i.length=r,n.length=r,this.heapify_()}}class XF extends YF{constructor(t,i){super(n=>t.apply(null,n),n=>n[0].getKey()),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=i,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(t){const i=super.enqueue(t);return i&&t[0].addEventListener(Mt.CHANGE,this.boundHandleTileChange_),i}getTilesLoading(){return this.tilesLoading_}handleTileChange(t){const i=t.target,n=i.getState();if(n===ct.LOADED||n===ct.ERROR||n===ct.EMPTY){n!==ct.ERROR&&i.removeEventListener(Mt.CHANGE,this.boundHandleTileChange_);const r=i.getKey();r in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[r],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(t,i){let n=0;for(;this.tilesLoading_<t&&n<i&&this.getCount()>0;){const r=this.dequeue()[0],s=r.getKey();r.getState()===ct.IDLE&&!(s in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[s]=!0,++this.tilesLoading_,++n,r.load())}}}function KF(e,t,i,n,r){if(!e||!(i in e.wantedTiles)||!e.wantedTiles[i][t.getKey()])return Pu;const s=e.viewState.center,o=n[0]-s[0],a=n[1]-s[1];return 65536*Math.log(r)+Math.sqrt(o*o+a*a)/r}const xe={ANIMATING:0,INTERACTING:1},gn={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};function Ce(e,t,i){return Math.min(Math.max(e,t),i)}function ZF(e,t,i,n,r,s){const o=r-i,a=s-n;if(o!==0||a!==0){const l=((e-i)*o+(t-n)*a)/(o*o+a*a);l>1?(i=r,n=s):l>0&&(i+=o*l,n+=a*l)}return fo(e,t,i,n)}function fo(e,t,i,n){const r=i-e,s=n-t;return r*r+s*s}function JF(e){const t=e.length;for(let n=0;n<t;n++){let r=n,s=Math.abs(e[n][n]);for(let a=n+1;a<t;a++){const l=Math.abs(e[a][n]);l>s&&(s=l,r=a)}if(s===0)return null;const o=e[r];e[r]=e[n],e[n]=o;for(let a=n+1;a<t;a++){const l=-e[a][n]/e[n][n];for(let c=n;c<t+1;c++)n==c?e[a][c]=0:e[a][c]+=l*e[n][c]}}const i=new Array(t);for(let n=t-1;n>=0;n--){i[n]=e[n][t]/e[n][n];for(let r=n-1;r>=0;r--)e[r][t]-=e[r][n]*i[n]}return i}function Fu(e){return e*180/Math.PI}function er(e){return e*Math.PI/180}function go(e,t){const i=e%t;return i*t<0?i+t:i}function Vi(e,t,i){return e+i*(t-e)}function Jc(e,t){const i=Math.pow(10,t);return Math.round(e*i)/i}function zx(e,t){return Math.round(Jc(e,t))}function oa(e,t){return Math.floor(Jc(e,t))}function gs(e,t){return Math.ceil(Jc(e,t))}function Pp(e,t,i){if(e>=t&&e<i)return e;const n=i-t;return((e-t)%n+n)%n+t}function Gx(e,t,i){return(function(n,r,s,o,a){if(!n)return;if(!r&&!t)return n;const l=t?0:s[0]*r,c=t?0:s[1]*r,h=a?a[0]:0,u=a?a[1]:0;let d=e[0]+l/2+h,f=e[2]-l/2+h,g=e[1]+c/2+u,p=e[3]-c/2+u;d>f&&(d=(f+d)/2,f=d),g>p&&(g=(p+g)/2,p=g);let m=Ce(n[0],d,f),y=Ce(n[1],g,p);if(o&&i&&r){const _=30*r;m+=-_*Math.log(1+Math.max(0,d-n[0])/_)+_*Math.log(1+Math.max(0,n[0]-f)/_),y+=-_*Math.log(1+Math.max(0,g-n[1])/_)+_*Math.log(1+Math.max(0,n[1]-p)/_)}return[m,y]})}function QF(e){return e}const Ue={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function Ou(e){const t=ki();for(let i=0,n=e.length;i<n;++i)tc(t,e[i]);return t}function tO(e,t,i){const n=Math.min.apply(null,e),r=Math.min.apply(null,t),s=Math.max.apply(null,e),o=Math.max.apply(null,t);return zr(n,r,s,o,i)}function Rn(e,t,i){return i?(i[0]=e[0]-t,i[1]=e[1]-t,i[2]=e[2]+t,i[3]=e[3]+t,i):[e[0]-t,e[1]-t,e[2]+t,e[3]+t]}function fw(e,t){return t?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t):e.slice()}function Za(e,t,i){let n,r;return t<e[0]?n=e[0]-t:e[2]<t?n=t-e[2]:n=0,i<e[1]?r=e[1]-i:e[3]<i?r=i-e[3]:r=0,n*n+r*r}function Co(e,t){return R0(e,t[0],t[1])}function Kn(e,t){return e[0]<=t[0]&&t[2]<=e[2]&&e[1]<=t[1]&&t[3]<=e[3]}function R0(e,t,i){return e[0]<=t&&t<=e[2]&&e[1]<=i&&i<=e[3]}function Fp(e,t){const i=e[0],n=e[1],r=e[2],s=e[3],o=t[0],a=t[1];let l=Ue.UNKNOWN;return o<i?l=l|Ue.LEFT:o>r&&(l=l|Ue.RIGHT),a<n?l=l|Ue.BELOW:a>s&&(l=l|Ue.ABOVE),l===Ue.UNKNOWN&&(l=Ue.INTERSECTING),l}function ki(){return[1/0,1/0,-1/0,-1/0]}function zr(e,t,i,n,r){return r?(r[0]=e,r[1]=t,r[2]=i,r[3]=n,r):[e,t,i,n]}function Qc(e){return zr(1/0,1/0,-1/0,-1/0,e)}function A0(e,t){const i=e[0],n=e[1];return zr(i,n,i,n,t)}function L0(e,t,i,n,r){const s=Qc(r);return pw(s,e,t,i,n)}function bo(e,t){return e[0]==t[0]&&e[2]==t[2]&&e[1]==t[1]&&e[3]==t[3]}function gw(e,t){return t[0]<e[0]&&(e[0]=t[0]),t[2]>e[2]&&(e[2]=t[2]),t[1]<e[1]&&(e[1]=t[1]),t[3]>e[3]&&(e[3]=t[3]),e}function tc(e,t){t[0]<e[0]&&(e[0]=t[0]),t[0]>e[2]&&(e[2]=t[0]),t[1]<e[1]&&(e[1]=t[1]),t[1]>e[3]&&(e[3]=t[1])}function pw(e,t,i,n,r){for(;i<n;i+=r)eO(e,t[i],t[i+1]);return e}function eO(e,t,i){e[0]=Math.min(e[0],t),e[1]=Math.min(e[1],i),e[2]=Math.max(e[2],t),e[3]=Math.max(e[3],i)}function mw(e,t){let i;return i=t(ef(e)),i||(i=t(nf(e)),i)||(i=t(rf(e)),i)||(i=t(Is(e)),i)?i:!1}function Op(e){let t=0;return Io(e)||(t=qt(e)*ke(e)),t}function ef(e){return[e[0],e[1]]}function nf(e){return[e[2],e[1]]}function hn(e){return[(e[0]+e[2])/2,(e[1]+e[3])/2]}function iO(e,t){let i;if(t==="bottom-left")i=ef(e);else if(t==="bottom-right")i=nf(e);else if(t==="top-left")i=Is(e);else if(t==="top-right")i=rf(e);else throw new Error("Invalid corner");return i}function xc(e,t,i,n,r){const[s,o,a,l,c,h,u,d]=yw(e,t,i,n);return zr(Math.min(s,a,c,u),Math.min(o,l,h,d),Math.max(s,a,c,u),Math.max(o,l,h,d),r)}function yw(e,t,i,n){const r=t*n[0]/2,s=t*n[1]/2,o=Math.cos(i),a=Math.sin(i),l=r*o,c=r*a,h=s*o,u=s*a,d=e[0],f=e[1];return[d-l+u,f-c-h,d-l-u,f-c+h,d+l-u,f+c+h,d+l+u,f+c-h,d-l+u,f-c-h]}function ke(e){return e[3]-e[1]}function An(e,t,i){const n=i||ki();return we(e,t)?(e[0]>t[0]?n[0]=e[0]:n[0]=t[0],e[1]>t[1]?n[1]=e[1]:n[1]=t[1],e[2]<t[2]?n[2]=e[2]:n[2]=t[2],e[3]<t[3]?n[3]=e[3]:n[3]=t[3]):Qc(n),n}function Is(e){return[e[0],e[3]]}function rf(e){return[e[2],e[3]]}function qt(e){return e[2]-e[0]}function we(e,t){return e[0]<=t[2]&&e[2]>=t[0]&&e[1]<=t[3]&&e[3]>=t[1]}function Io(e){return e[2]<e[0]||e[3]<e[1]}function nO(e,t){return t?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t):e}function rO(e,t,i){let n=!1;const r=Fp(e,t),s=Fp(e,i);if(r===Ue.INTERSECTING||s===Ue.INTERSECTING)n=!0;else{const o=e[0],a=e[1],l=e[2],c=e[3],h=t[0],u=t[1],d=i[0],f=i[1],g=(f-u)/(d-h);let p,m;s&Ue.ABOVE&&!(r&Ue.ABOVE)&&(p=d-(f-c)/g,n=p>=o&&p<=l),!n&&s&Ue.RIGHT&&!(r&Ue.RIGHT)&&(m=f-(d-l)*g,n=m>=a&&m<=c),!n&&s&Ue.BELOW&&!(r&Ue.BELOW)&&(p=d-(f-a)/g,n=p>=o&&p<=l),!n&&s&Ue.LEFT&&!(r&Ue.LEFT)&&(m=f-(d-o)*g,n=m>=a&&m<=c)}return n}function sO(e,t,i,n){if(Io(e))return Qc(i);let r=[];if(n>1){const a=e[2]-e[0],l=e[3]-e[1];for(let c=0;c<n;++c)r.push(e[0]+a*c/n,e[1],e[2],e[1]+l*c/n,e[2]-a*c/n,e[3],e[0],e[3]-l*c/n)}else r=[e[0],e[1],e[2],e[1],e[2],e[3],e[0],e[3]];t(r,r,2);const s=[],o=[];for(let a=0,l=r.length;a<l;a+=2)s.push(r[a]),o.push(r[a+1]);return tO(s,o,i)}function _w(e,t){const i=t.getExtent(),n=hn(e);if(t.canWrapX()&&(n[0]<i[0]||n[0]>=i[2])){const r=qt(i),o=Math.floor((n[0]-i[0])/r)*r;e[0]-=o,e[2]-=o}return e}function xw(e,t,i){if(t.canWrapX()){const n=t.getExtent();if(!isFinite(e[0])||!isFinite(e[2]))return[[n[0],e[1],n[2],e[3]]];_w(e,t);const r=qt(n);if(qt(e)>r&&!i)return[[n[0],e[1],n[2],e[3]]];if(e[0]<n[0])return[[e[0]+r,e[1],n[2],e[3]],[n[0],e[1],e[2],e[3]]];if(e[2]>n[2])return[[e[0],e[1],n[2],e[3]],[n[0],e[1],e[2]-r,e[3]]]}return[e]}function M0(e,t){const i=(""+e).split("."),n=(""+t).split(".");for(let r=0;r<Math.max(i.length,n.length);r++){const s=parseInt(i[r]||"0",10),o=parseInt(n[r]||"0",10);if(s>o)return 1;if(o>s)return-1}return 0}function Cw(e,t){return e[0]+=+t[0],e[1]+=+t[1],e}function Du(e,t){let i=!0;for(let n=e.length-1;n>=0;--n)if(e[n]!=t[n]){i=!1;break}return i}function I0(e,t){const i=Math.cos(t),n=Math.sin(t),r=e[0]*i-e[1]*n,s=e[1]*i+e[0]*n;return e[0]=r,e[1]=s,e}function bw(e,t){return e[0]*=t,e[1]*=t,e}function P0(e,t){if(t.canWrapX()){const i=qt(t.getExtent()),n=oO(e,t,i);n&&(e[0]-=n*i)}return e}function oO(e,t,i){const n=t.getExtent();let r=0;return t.canWrapX()&&(e[0]<n[0]||e[0]>n[2])&&(i=i||qt(n),r=Math.floor((e[0]-n[0])/i)),r}function vw(e){return Math.pow(e,3)}function Ja(e){return 1-vw(1-e)}function aO(e){return 3*e*e-2*e*e*e}function lO(e){return e}const ww=63710088e-1;function Wx(e,t,i){i=i||ww;const n=er(e[1]),r=er(t[1]),s=(r-n)/2,o=er(t[0]-e[0])/2,a=Math.sin(s)*Math.sin(s)+Math.sin(o)*Math.sin(o)*Math.cos(n)*Math.cos(r);return 2*i*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}function cO(e,t,i,n){n=n||ww;const r=er(e[1]),s=er(e[0]),o=t/n,a=Math.asin(Math.sin(r)*Math.cos(o)+Math.cos(r)*Math.sin(o)*Math.cos(i)),l=s+Math.atan2(Math.sin(i)*Math.sin(o)*Math.cos(r),Math.cos(o)-Math.sin(r)*Math.sin(a));return[Fu(l),Fu(a)]}function Sw(...e){console.warn(...e)}const F0={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class sf{constructor(t){this.code_=t.code,this.units_=t.units,this.extent_=t.extent!==void 0?t.extent:null,this.worldExtent_=t.worldExtent!==void 0?t.worldExtent:null,this.axisOrientation_=t.axisOrientation!==void 0?t.axisOrientation:"enu",this.global_=t.global!==void 0?t.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||F0[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(t){this.global_=t,this.canWrapX_=!!(t&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(t){this.defaultTileGrid_=t}setExtent(t){this.extent_=t,this.canWrapX_=!!(this.global_&&t)}setWorldExtent(t){this.worldExtent_=t}setGetPointResolution(t){this.getPointResolutionFunc_=t}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const th=6378137,aa=Math.PI*th,hO=[-aa,-aa,aa,aa],uO=[-180,-85,180,85],Eh=th*Math.log(Math.tan(Math.PI/2));class Go extends sf{constructor(t){super({code:t,units:"m",extent:hO,global:!0,worldExtent:uO,getPointResolution:function(i,n){return i/Math.cosh(n[1]/th)}})}}const jx=[new Go("EPSG:3857"),new Go("EPSG:102100"),new Go("EPSG:102113"),new Go("EPSG:900913"),new Go("http://www.opengis.net/def/crs/EPSG/0/3857"),new Go("http://www.opengis.net/gml/srs/epsg.xml#3857")];function dO(e,t,i,n){const r=e.length;i=i>1?i:2,n=n??i,t===void 0&&(i>2?t=e.slice():t=new Array(r));for(let s=0;s<r;s+=n){t[s]=aa*e[s]/180;let o=th*Math.log(Math.tan(Math.PI*(+e[s+1]+90)/360));o>Eh?o=Eh:o<-Eh&&(o=-Eh),t[s+1]=o}return t}function fO(e,t,i,n){const r=e.length;i=i>1?i:2,n=n??i,t===void 0&&(i>2?t=e.slice():t=new Array(r));for(let s=0;s<r;s+=n)t[s]=180*e[s]/aa,t[s+1]=360*Math.atan(Math.exp(e[s+1]/th))/Math.PI-90;return t}const gO=6378137,Hx=[-180,-90,180,90],pO=Math.PI*gO/180;class js extends sf{constructor(t,i){super({code:t,units:"degrees",extent:Hx,axisOrientation:i,global:!0,metersPerUnit:pO,worldExtent:Hx})}}const Vx=[new js("CRS:84"),new js("EPSG:4326","neu"),new js("urn:ogc:def:crs:OGC:1.3:CRS84"),new js("urn:ogc:def:crs:OGC:2:84"),new js("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new js("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new js("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let Dp={};function mO(e){return Dp[e]||Dp[e.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function yO(e,t){Dp[e]=t}let ma={};function Cc(e,t,i){const n=e.getCode(),r=t.getCode();n in ma||(ma[n]={}),ma[n][r]=i}function xg(e,t){return e in ma&&t in ma[e]?ma[e][t]:null}const Bu=.9996,ln=.00669438,of=ln*ln,af=of*ln,eo=ln/(1-ln),Ux=Math.sqrt(1-ln),Da=(1-Ux)/(1+Ux),Tw=Da*Da,O0=Tw*Da,D0=O0*Da,Ew=D0*Da,kw=1-ln/4-3*of/64-5*af/256,_O=3*ln/8+3*of/32+45*af/1024,xO=15*of/256+45*af/1024,CO=35*af/3072,bO=3/2*Da-27/32*O0+269/512*Ew,vO=21/16*Tw-55/32*D0,wO=151/96*O0-417/128*Ew,SO=1097/512*D0,Nu=6378137;function TO(e,t,i){const n=e-5e5,o=(i.north?t:t-1e7)/Bu/(Nu*kw),a=o+bO*Math.sin(2*o)+vO*Math.sin(4*o)+wO*Math.sin(6*o)+SO*Math.sin(8*o),l=Math.sin(a),c=l*l,h=Math.cos(a),u=l/h,d=u*u,f=d*d,g=1-ln*c,p=Math.sqrt(1-ln*c),m=Nu/p,y=(1-ln)/g,_=eo*h**2,C=_*_,b=n/(m*Bu),v=b*b,S=v*b,w=S*b,L=w*b,A=L*b,B=a-u/y*(v/2-w/24*(5+3*d+10*_-4*C-9*eo))+A/720*(61+90*d+298*_+45*f-252*eo-3*C);let O=(b-S/6*(1+2*d+_)+L/120*(5-2*_+28*d-3*C+8*eo+24*f))/h;return O=Pp(O+er(Rw(i.number)),-Math.PI,Math.PI),[Fu(O),Fu(B)]}const qx=-80,Yx=84,EO=-180,kO=180;function RO(e,t,i){e=Pp(e,EO,kO),t<qx?t=qx:t>Yx&&(t=Yx);const n=er(t),r=Math.sin(n),s=Math.cos(n),o=r/s,a=o*o,l=a*a,c=er(e),h=Rw(i.number),u=er(h),d=Nu/Math.sqrt(1-ln*r**2),f=eo*s**2,g=s*Pp(c-u,-Math.PI,Math.PI),p=g*g,m=p*g,y=m*g,_=y*g,C=_*g,b=Nu*(kw*n-_O*Math.sin(2*n)+xO*Math.sin(4*n)-CO*Math.sin(6*n)),v=Bu*d*(g+m/6*(1-a+f)+_/120*(5-18*a+l+72*f-58*eo))+5e5;let S=Bu*(b+d*o*(p/2+y/24*(5-a+9*f+4*f**2)+C/720*(61-58*a+l+600*f-330*eo)));return i.north||(S+=1e7),[v,S]}function Rw(e){return(e-1)*6-180+3}const AO=[/^EPSG:(\d+)$/,/^urn:ogc:def:crs:EPSG::(\d+)$/,/^http:\/\/www\.opengis\.net\/def\/crs\/EPSG\/0\/(\d+)$/];function Aw(e){let t=0;for(const r of AO){const s=e.match(r);if(s){t=parseInt(s[1]);break}}if(!t)return null;let i=0,n=!1;return t>32700&&t<32761?i=t-32700:t>32600&&t<32661&&(n=!0,i=t-32600),i?{number:i,north:n}:null}function Xx(e,t){return function(i,n,r,s){const o=i.length;r=r>1?r:2,s=s??r,n||(r>2?n=i.slice():n=new Array(o));for(let a=0;a<o;a+=s){const l=i[a],c=i[a+1],h=e(l,c,t);n[a]=h[0],n[a+1]=h[1]}return n}}function LO(e){return Aw(e)?new sf({code:e,units:"m"}):null}function MO(e){const t=Aw(e.getCode());return t?{forward:Xx(RO,t),inverse:Xx(TO,t)}:null}const IO=[MO],PO=[LO];let Bp=!0;function Lw(e){Bp=!1}function B0(e,t){if(t!==void 0){for(let i=0,n=e.length;i<n;++i)t[i]=e[i];t=t}else t=e.slice();return t}function Np(e){yO(e.getCode(),e),Cc(e,e,B0)}function FO(e){e.forEach(Np)}function ae(e){if(typeof e!="string")return e;const t=mO(e);if(t)return t;for(const i of PO){const n=i(e);if(n)return n}return null}function Kx(e,t,i,n){e=ae(e);let r;const s=e.getPointResolutionFunc();if(s)r=s(t,i);else{const o=e.getUnits();if(o=="degrees"&&!n||n=="degrees")r=t;else{const a=lf(e,ae("EPSG:4326"));if(!a&&o!=="degrees")r=t*e.getMetersPerUnit();else{let c=[i[0]-t/2,i[1],i[0]+t/2,i[1],i[0],i[1]-t/2,i[0],i[1]+t/2];c=a(c,c,2);const h=Wx(c.slice(0,2),c.slice(2,4)),u=Wx(c.slice(4,6),c.slice(6,8));r=(h+u)/2}const l=e.getMetersPerUnit();l!==void 0&&(r/=l)}}return r}function Zx(e){FO(e),e.forEach(function(t){e.forEach(function(i){t!==i&&Cc(t,i,B0)})})}function OO(e,t,i,n){e.forEach(function(r){t.forEach(function(s){Cc(r,s,i),Cc(s,r,n)})})}function N0(e,t){return e?typeof e=="string"?ae(e):e:ae(t)}function DO(e){return(function(t,i,n,r){const s=t.length;n=n!==void 0?n:2,r=r??n,i=i!==void 0?i:new Array(s);for(let o=0;o<s;o+=r){const a=e(t.slice(o,o+n)),l=a.length;for(let c=0,h=r;c<h;++c)i[o+c]=c>=l?t[o+c]:a[c]}return i})}function kh(e,t){return Lw(),Qa(e,"EPSG:4326","EPSG:3857")}function bi(e,t){if(e===t)return!0;const i=e.getUnits()===t.getUnits();return(e.getCode()===t.getCode()||lf(e,t)===B0)&&i}function lf(e,t){const i=e.getCode(),n=t.getCode();let r=xg(i,n);if(r)return r;let s=null,o=null;for(const l of IO)s||(s=l(e)),o||(o=l(t));if(!s&&!o)return null;const a="EPSG:4326";if(o)if(s)r=Cg(s.inverse,o.forward);else{const l=xg(i,a);l&&(r=Cg(l,o.forward))}else{const l=xg(a,n);l&&(r=Cg(s.inverse,l))}return r&&(Np(e),Np(t),Cc(e,t,r)),r}function Cg(e,t){return function(i,n,r,s){return n=e(i,n,r,s),t(n,n,r,s)}}function rr(e,t){const i=ae(e),n=ae(t);return lf(i,n)}function Qa(e,t,i){const n=rr(t,i);if(!n){const r=ae(t).getCode(),s=ae(i).getCode();throw new Error(`No transform available between ${r} and ${s}`)}return n(e,void 0,e.length)}function ec(e,t,i,n){const r=rr(t,i);return sO(e,r,void 0,n)}let BO=null;function NO(){return BO}function $p(e,t){return e}function wr(e,t){return Bp&&!Du(e,[0,0])&&e[0]>=-180&&e[0]<=180&&e[1]>=-90&&e[1]<=90&&(Bp=!1,Sw("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),e}function $0(e,t){return e}function Zn(e,t){return e}function $O(){Zx(jx),Zx(Vx),OO(Vx,jx,dO,fO)}$O();const Mw=new Array(6);function Yi(){return[1,0,0,1,0,0]}function Jx(e){return G0(e,1,0,0,1,0,0)}function z0(e,t){const i=e[0],n=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=t[0],c=t[1],h=t[2],u=t[3],d=t[4],f=t[5];return e[0]=i*l+r*c,e[1]=n*l+s*c,e[2]=i*h+r*u,e[3]=n*h+s*u,e[4]=i*d+r*f+o,e[5]=n*d+s*f+a,e}function G0(e,t,i,n,r,s,o){return e[0]=t,e[1]=i,e[2]=n,e[3]=r,e[4]=s,e[5]=o,e}function zO(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function Fe(e,t){const i=t[0],n=t[1];return t[0]=e[0]*i+e[2]*n+e[4],t[1]=e[1]*i+e[3]*n+e[5],t}function su(e,t,i){return z0(e,G0(Mw,t,0,0,i,0,0))}function GO(e,t,i){return z0(e,G0(Mw,1,0,0,1,t,i))}function sr(e,t,i,n,r,s,o,a){const l=Math.sin(s),c=Math.cos(s);return e[0]=n*c,e[1]=r*l,e[2]=-n*l,e[3]=r*c,e[4]=o*n*c-a*n*l+t,e[5]=o*r*l+a*r*c+i,e}function Iw(e,t){const i=WO(t);Zt(i!==0,"Transformation matrix cannot be inverted");const n=t[0],r=t[1],s=t[2],o=t[3],a=t[4],l=t[5];return e[0]=o/i,e[1]=-r/i,e[2]=-s/i,e[3]=n/i,e[4]=(s*l-o*a)/i,e[5]=-(n*l-r*a)/i,e}function WO(e){return e[0]*e[3]-e[1]*e[2]}const jO=[1e5,1e5,1e5,1e5,2,2];function HO(e){return"matrix("+e.join(", ")+")"}function zp(e){return e.substring(7,e.length-1).split(",").map(parseFloat)}function VO(e,t){const i=zp(e),n=zp(t);for(let r=0;r<6;++r)if(Math.round((i[r]-n[r])*jO[r])!==0)return!1;return!0}function vs(e,t,i,n,r,s,o){s=s||[],o=o||2;let a=0;for(let l=t;l<i;l+=n){const c=e[l],h=e[l+1];s[a++]=r[0]*c+r[2]*h+r[4],s[a++]=r[1]*c+r[3]*h+r[5];for(let u=2;u<o;u++)s[a++]=e[l+u]}return s&&s.length!=a&&(s.length=a),s}function Pw(e,t,i,n,r,s,o){o=o||[];const a=Math.cos(r),l=Math.sin(r),c=s[0],h=s[1];let u=0;for(let d=t;d<i;d+=n){const f=e[d]-c,g=e[d+1]-h;o[u++]=c+f*a-g*l,o[u++]=h+f*l+g*a;for(let p=d+2;p<d+n;++p)o[u++]=e[p]}return o&&o.length!=u&&(o.length=u),o}function UO(e,t,i,n,r,s,o,a){a=a||[];const l=o[0],c=o[1];let h=0;for(let u=t;u<i;u+=n){const d=e[u]-l,f=e[u+1]-c;a[h++]=l+r*d,a[h++]=c+s*f;for(let g=u+2;g<u+n;++g)a[h++]=e[g]}return a&&a.length!=h&&(a.length=h),a}function qO(e,t,i,n,r,s,o){o=o||[];let a=0;for(let l=t;l<i;l+=n){o[a++]=e[l]+r,o[a++]=e[l+1]+s;for(let c=l+2;c<l+n;++c)o[a++]=e[c]}return o&&o.length!=a&&(o.length=a),o}const Qx=Yi(),YO=[NaN,NaN];class Gp extends Dn{constructor(){super(),this.extent_=ki(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=aw((t,i,n)=>{if(!n)return this.getSimplifiedGeometry(i);const r=this.clone();return r.applyTransform(n),r.getSimplifiedGeometry(i)})}simplifyTransformed(t,i){return this.simplifyTransformedInternal(this.getRevision(),t,i)}clone(){return Gt()}closestPointXY(t,i,n,r){return Gt()}containsXY(t,i){return this.closestPointXY(t,i,YO,Number.MIN_VALUE)===0}getClosestPoint(t,i){return i=i||[NaN,NaN],this.closestPointXY(t[0],t[1],i,1/0),i}intersectsCoordinate(t){return this.containsXY(t[0],t[1])}computeExtent(t){return Gt()}getExtent(t){if(this.extentRevision_!=this.getRevision()){const i=this.computeExtent(this.extent_);(isNaN(i[0])||isNaN(i[1]))&&Qc(i),this.extentRevision_=this.getRevision()}return nO(this.extent_,t)}rotate(t,i){Gt()}scale(t,i,n){Gt()}simplify(t){return this.getSimplifiedGeometry(t*t)}getSimplifiedGeometry(t){return Gt()}getType(){return Gt()}applyTransform(t){Gt()}intersectsExtent(t){return Gt()}translate(t,i){Gt()}transform(t,i){const n=ae(t),r=n.getUnits()=="tile-pixels"?function(s,o,a){const l=n.getExtent(),c=n.getWorldExtent(),h=ke(c)/ke(l);sr(Qx,c[0],c[3],h,-h,0,0,0);const u=vs(s,0,s.length,a,Qx,o),d=rr(n,i);return d?d(u,u,a):u}:rr(n,i);return this.applyTransform(r),this}}class Ps extends Gp{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(t){return L0(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinates(){return Gt()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const i=this.getSimplifiedGeometryInternal(t);return i.getFlatCoordinates().length<this.flatCoordinates.length?i:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}getSimplifiedGeometryInternal(t){return this}getStride(){return this.stride}setFlatCoordinates(t,i){this.stride=tC(t),this.layout=t,this.flatCoordinates=i}setCoordinates(t,i){Gt()}setLayout(t,i,n){let r;if(t)r=tC(t);else{for(let s=0;s<n;++s){if(i.length===0){this.layout="XY",this.stride=2;return}i=i[0]}r=i.length,t=XO(r)}this.layout=t,this.stride=r}applyTransform(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.layout.startsWith("XYZ")?3:2,this.stride),this.changed())}rotate(t,i){const n=this.getFlatCoordinates();if(n){const r=this.getStride();Pw(n,0,n.length,r,t,i,n),this.changed()}}scale(t,i,n){i===void 0&&(i=t),n||(n=hn(this.getExtent()));const r=this.getFlatCoordinates();if(r){const s=this.getStride();UO(r,0,r.length,s,t,i,n,r),this.changed()}}translate(t,i){const n=this.getFlatCoordinates();if(n){const r=this.getStride();qO(n,0,n.length,r,t,i,n),this.changed()}}}function XO(e){let t;return e==2?t="XY":e==3?t="XYZ":e==4&&(t="XYZM"),t}function tC(e){let t;return e=="XY"?t=2:e=="XYZ"||e=="XYM"?t=3:e=="XYZM"&&(t=4),t}function KO(e,t,i){const n=e.getFlatCoordinates();if(!n)return null;const r=e.getStride();return vs(n,0,n.length,r,t,i)}function Fw(e,t,i,n){let r=0;const s=e[i-n],o=e[i-n+1];let a=0,l=0;for(;t<i;t+=n){const c=e[t]-s,h=e[t+1]-o;r+=l*c-a*h,a=c,l=h}return r/2}function Ow(e,t,i,n){let r=0;for(let s=0,o=i.length;s<o;++s){const a=i[s];r+=Fw(e,t,a,n),t=a}return r}function ZO(e,t,i,n){let r=0;for(let s=0,o=i.length;s<o;++s){const a=i[s];r+=Ow(e,t,a,n),t=a[a.length-1]}return r}function eC(e,t,i,n,r,s,o){const a=e[t],l=e[t+1],c=e[i]-a,h=e[i+1]-l;let u;if(c===0&&h===0)u=t;else{const d=((r-a)*c+(s-l)*h)/(c*c+h*h);if(d>1)u=i;else if(d>0){for(let f=0;f<n;++f)o[f]=Vi(e[t+f],e[i+f],d);o.length=n;return}else u=t}for(let d=0;d<n;++d)o[d]=e[u+d];o.length=n}function W0(e,t,i,n,r){let s=e[t],o=e[t+1];for(t+=n;t<i;t+=n){const a=e[t],l=e[t+1],c=fo(s,o,a,l);c>r&&(r=c),s=a,o=l}return r}function j0(e,t,i,n,r){for(let s=0,o=i.length;s<o;++s){const a=i[s];r=W0(e,t,a,n,r),t=a}return r}function JO(e,t,i,n,r){for(let s=0,o=i.length;s<o;++s){const a=i[s];r=j0(e,t,a,n,r),t=a[a.length-1]}return r}function H0(e,t,i,n,r,s,o,a,l,c,h){if(t==i)return c;let u,d;if(r===0){if(d=fo(o,a,e[t],e[t+1]),d<c){for(u=0;u<n;++u)l[u]=e[t+u];return l.length=n,d}return c}h=h||[NaN,NaN];let f=t+n;for(;f<i;)if(eC(e,f-n,f,n,o,a,h),d=fo(o,a,h[0],h[1]),d<c){for(c=d,u=0;u<n;++u)l[u]=h[u];l.length=n,f+=n}else f+=n*Math.max((Math.sqrt(d)-Math.sqrt(c))/r|0,1);if(s&&(eC(e,i-n,t,n,o,a,h),d=fo(o,a,h[0],h[1]),d<c)){for(c=d,u=0;u<n;++u)l[u]=h[u];l.length=n}return c}function V0(e,t,i,n,r,s,o,a,l,c,h){h=h||[NaN,NaN];for(let u=0,d=i.length;u<d;++u){const f=i[u];c=H0(e,t,f,n,r,s,o,a,l,c,h),t=f}return c}function QO(e,t,i,n,r,s,o,a,l,c,h){h=h||[NaN,NaN];for(let u=0,d=i.length;u<d;++u){const f=i[u];c=V0(e,t,f,n,r,s,o,a,l,c,h),t=f[f.length-1]}return c}function tD(e,t,i,n){for(let r=0,s=i.length;r<s;++r)e[t++]=i[r];return t}function cf(e,t,i,n){for(let r=0,s=i.length;r<s;++r){const o=i[r];for(let a=0;a<n;++a)e[t++]=o[a]}return t}function U0(e,t,i,n,r){r=r||[];let s=0;for(let o=0,a=i.length;o<a;++o){const l=cf(e,t,i[o],n);r[s++]=l,t=l}return r.length=s,r}function eD(e,t,i,n,r){r=r||[];let s=0;for(let o=0,a=i.length;o<a;++o){const l=U0(e,t,i[o],n,r[s]);l.length===0&&(l[0]=t),r[s++]=l,t=l[l.length-1]}return r.length=s,r}function ps(e,t,i,n,r){r=r!==void 0?r:[];let s=0;for(let o=t;o<i;o+=n)r[s++]=e.slice(o,o+n);return r.length=s,r}function bc(e,t,i,n,r){r=r!==void 0?r:[];let s=0;for(let o=0,a=i.length;o<a;++o){const l=i[o];r[s++]=ps(e,t,l,n,r[s]),t=l}return r.length=s,r}function Wp(e,t,i,n,r){r=r!==void 0?r:[];let s=0;for(let o=0,a=i.length;o<a;++o){const l=i[o];r[s++]=l.length===1&&l[0]===t?[]:bc(e,t,l,n,r[s]),t=l[l.length-1]}return r.length=s,r}function hf(e,t,i,n,r,s,o){const a=(i-t)/n;if(a<3){for(;t<i;t+=n)s[o++]=e[t],s[o++]=e[t+1];return o}const l=new Array(a);l[0]=1,l[a-1]=1;const c=[t,i-n];let h=0;for(;c.length>0;){const u=c.pop(),d=c.pop();let f=0;const g=e[d],p=e[d+1],m=e[u],y=e[u+1];for(let _=d+n;_<u;_+=n){const C=e[_],b=e[_+1],v=ZF(C,b,g,p,m,y);v>f&&(h=_,f=v)}f>r&&(l[(h-t)/n]=1,d+n<h&&c.push(d,h),h+n<u&&c.push(h,u))}for(let u=0;u<a;++u)l[u]&&(s[o++]=e[t+u*n],s[o++]=e[t+u*n+1]);return o}function Dw(e,t,i,n,r,s,o,a){for(let l=0,c=i.length;l<c;++l){const h=i[l];o=hf(e,t,h,n,r,s,o),a.push(o),t=h}return o}function qs(e,t){return t*Math.round(e/t)}function iD(e,t,i,n,r,s,o){if(t==i)return o;let a=qs(e[t],r),l=qs(e[t+1],r);t+=n,s[o++]=a,s[o++]=l;let c,h;do if(c=qs(e[t],r),h=qs(e[t+1],r),t+=n,t==i)return s[o++]=c,s[o++]=h,o;while(c==a&&h==l);for(;t<i;){const u=qs(e[t],r),d=qs(e[t+1],r);if(t+=n,u==c&&d==h)continue;const f=c-a,g=h-l,p=u-a,m=d-l;if(f*m==g*p&&(f<0&&p<f||f==p||f>0&&p>f)&&(g<0&&m<g||g==m||g>0&&m>g)){c=u,h=d;continue}s[o++]=c,s[o++]=h,a=c,l=h,c=u,h=d}return s[o++]=c,s[o++]=h,o}function q0(e,t,i,n,r,s,o,a){for(let l=0,c=i.length;l<c;++l){const h=i[l];o=iD(e,t,h,n,r,s,o),a.push(o),t=h}return o}function nD(e,t,i,n,r,s,o,a){for(let l=0,c=i.length;l<c;++l){const h=i[l],u=[];o=q0(e,t,h,n,r,s,o,u),a.push(u),t=h[h.length-1]}return o}class vc extends Ps{constructor(t,i){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,i!==void 0&&!Array.isArray(t[0])?this.setFlatCoordinates(i,t):this.setCoordinates(t,i)}clone(){return new vc(this.flatCoordinates.slice(),this.layout)}closestPointXY(t,i,n,r){return r<Za(this.getExtent(),t,i)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(W0(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),H0(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,i,n,r))}getArea(){return Fw(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return ps(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(t){const i=[];return i.length=hf(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i,0),new vc(i,"XY")}getType(){return"LinearRing"}intersectsExtent(t){return!1}setCoordinates(t,i){this.setLayout(i,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=cf(this.flatCoordinates,0,t,this.stride),this.changed()}}class or extends Ps{constructor(t,i){super(),this.setCoordinates(t,i)}clone(){const t=new or(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,i,n,r){const s=this.flatCoordinates,o=fo(t,i,s[0],s[1]);if(o<r){const a=this.stride;for(let l=0;l<a;++l)n[l]=s[l];return n.length=a,o}return r}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(t){return A0(this.flatCoordinates,t)}getType(){return"Point"}intersectsExtent(t){return R0(t,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(t,i){this.setLayout(i,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=tD(this.flatCoordinates,0,t,this.stride),this.changed()}}function rD(e,t,i,n,r){return!mw(r,function(o){return!io(e,t,i,n,o[0],o[1])})}function io(e,t,i,n,r,s){let o=0,a=e[i-n],l=e[i-n+1];for(;t<i;t+=n){const c=e[t],h=e[t+1];l<=s?h>s&&(c-a)*(s-l)-(r-a)*(h-l)>0&&o++:h<=s&&(c-a)*(s-l)-(r-a)*(h-l)<0&&o--,a=c,l=h}return o!==0}function Y0(e,t,i,n,r,s){if(i.length===0||!io(e,t,i[0],n,r,s))return!1;for(let o=1,a=i.length;o<a;++o)if(io(e,i[o-1],i[o],n,r,s))return!1;return!0}function sD(e,t,i,n,r,s){if(i.length===0)return!1;for(let o=0,a=i.length;o<a;++o){const l=i[o];if(Y0(e,t,l,n,r,s))return!0;t=l[l.length-1]}return!1}function X0(e,t,i,n,r,s,o){let a,l,c,h,u,d,f;const g=r[s+1],p=[];for(let _=0,C=i.length;_<C;++_){const b=i[_];for(h=e[b-n],d=e[b-n+1],a=t;a<b;a+=n)u=e[a],f=e[a+1],(g<=d&&f<=g||d<=g&&g<=f)&&(c=(g-d)/(f-d)*(u-h)+h,p.push(c)),h=u,d=f}let m=NaN,y=-1/0;for(p.sort(tr),h=p[0],a=1,l=p.length;a<l;++a){u=p[a];const _=Math.abs(u-h);_>y&&(c=(h+u)/2,Y0(e,t,i,n,c,g)&&(m=c,y=_)),h=u}return isNaN(m)&&(m=r[s]),o?(o.push(m,g,y),o):[m,g,y]}function Bw(e,t,i,n,r){let s=[];for(let o=0,a=i.length;o<a;++o){const l=i[o];s=X0(e,t,l,n,r,2*o,s),t=l[l.length-1]}return s}function Nw(e,t,i,n,r){let s;for(t+=n;t<i;t+=n)if(s=r(e.slice(t-n,t),e.slice(t,t+n)),s)return s;return!1}function uf(e,t,i,n,r,s){return s=s??pw(ki(),e,t,i,n),we(r,s)?s[0]>=r[0]&&s[2]<=r[2]||s[1]>=r[1]&&s[3]<=r[3]?!0:Nw(e,t,i,n,function(o,a){return rO(r,o,a)}):!1}function oD(e,t,i,n,r){for(let s=0,o=i.length;s<o;++s){if(uf(e,t,i[s],n,r))return!0;t=i[s]}return!1}function $w(e,t,i,n,r){return!!(uf(e,t,i,n,r)||io(e,t,i,n,r[0],r[1])||io(e,t,i,n,r[0],r[3])||io(e,t,i,n,r[2],r[1])||io(e,t,i,n,r[2],r[3]))}function zw(e,t,i,n,r){if(!$w(e,t,i[0],n,r))return!1;if(i.length===1)return!0;for(let s=1,o=i.length;s<o;++s)if(rD(e,i[s-1],i[s],n,r)&&!uf(e,i[s-1],i[s],n,r))return!1;return!0}function aD(e,t,i,n,r){for(let s=0,o=i.length;s<o;++s){const a=i[s];if(zw(e,t,a,n,r))return!0;t=a[a.length-1]}return!1}function lD(e,t,i,n){for(;t<i-n;){for(let r=0;r<n;++r){const s=e[t+r];e[t+r]=e[i-n+r],e[i-n+r]=s}t+=n,i-=n}}function K0(e,t,i,n){let r=0,s=e[i-n],o=e[i-n+1];for(;t<i;t+=n){const a=e[t],l=e[t+1];r+=(a-s)*(l+o),s=a,o=l}return r===0?void 0:r>0}function Gw(e,t,i,n,r){r=r!==void 0?r:!1;for(let s=0,o=i.length;s<o;++s){const a=i[s],l=K0(e,t,a,n);if(s===0){if(r&&l||!r&&!l)return!1}else if(r&&!l||!r&&l)return!1;t=a}return!0}function cD(e,t,i,n,r){for(let s=0,o=i.length;s<o;++s){const a=i[s];if(!Gw(e,t,a,n,r))return!1;a.length&&(t=a[a.length-1])}return!0}function jp(e,t,i,n,r){r=r!==void 0?r:!1;for(let s=0,o=i.length;s<o;++s){const a=i[s],l=K0(e,t,a,n);(s===0?r&&l||!r&&!l:r&&!l||!r&&l)&&lD(e,t,a,n),t=a}return t}function iC(e,t,i,n,r){for(let s=0,o=i.length;s<o;++s)t=jp(e,t,i[s],n,r);return t}function Ww(e,t){const i=[];let n=0,r=0,s;for(let o=0,a=t.length;o<a;++o){const l=t[o],c=K0(e,n,l,2);if(s===void 0&&(s=c),c===s)i.push(t.slice(r,o+1));else{if(i.length===0)continue;i[i.length-1].push(t[r])}r=o+1,n=l}return i}class Gr extends Ps{constructor(t,i,n){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,i!==void 0&&n?(this.setFlatCoordinates(i,t),this.ends_=n):this.setCoordinates(t,i)}appendLinearRing(t){this.flatCoordinates?kn(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new Gr(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,i,n,r){return r<Za(this.getExtent(),t,i)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(j0(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),V0(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,i,n,r))}containsXY(t,i){return Y0(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,i)}getArea(){return Ow(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(t){let i;return t!==void 0?(i=this.getOrientedFlatCoordinates().slice(),jp(i,0,this.ends_,this.stride,t)):i=this.flatCoordinates,bc(i,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const t=hn(this.getExtent());this.flatInteriorPoint_=X0(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new or(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(t){return t<0||this.ends_.length<=t?null:new vc(this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLinearRings(){const t=this.layout,i=this.flatCoordinates,n=this.ends_,r=[];let s=0;for(let o=0,a=n.length;o<a;++o){const l=n[o],c=new vc(i.slice(s,l),t);r.push(c),s=l}return r}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;Gw(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=jp(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const i=[],n=[];return i.length=q0(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),i,0,n),new Gr(i,"XY",n)}getType(){return"Polygon"}intersectsExtent(t){return zw(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)}setCoordinates(t,i){this.setLayout(i,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const n=U0(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=n.length===0?0:n[n.length-1],this.changed()}}function hD(e,t,i,n){i=i||32;const r=[];for(let s=0;s<i;++s)kn(r,cO(e,t,2*Math.PI*s/i,n));return r.push(r[0],r[1]),new Gr(r,"XY",[r.length])}function nC(e){if(Io(e))throw new Error("Cannot create polygon from empty extent");const t=e[0],i=e[1],n=e[2],r=e[3],s=[t,i,t,r,n,r,n,i,t,i];return new Gr(s,"XY",[s.length])}function Z0(e,t,i,n){const r=qt(t)/i[0],s=ke(t)/i[1];return n?Math.min(e,Math.max(r,s)):Math.min(e,Math.min(r,s))}function J0(e,t,i){let n=Math.min(e,t);const r=50;return n*=Math.log(1+r*Math.max(0,e/t-1))/r+1,i&&(n=Math.max(n,i),n/=Math.log(1+r*Math.max(0,i/e-1))/r+1),Ce(n,i/2,t*2)}function uD(e,t,i,n){return t=t!==void 0?t:!0,(function(r,s,o,a){if(r!==void 0){const l=e[0],c=e[e.length-1],h=i?Z0(l,i,o,n):l;if(a)return t?J0(r,h,c):Ce(r,c,h);const u=Math.min(h,r),d=Math.floor(Qd(e,u,s));return e[d]>h&&d<e.length-1?e[d+1]:e[d]}})}function dD(e,t,i,n,r,s){return n=n!==void 0?n:!0,i=i!==void 0?i:0,(function(o,a,l,c){if(o!==void 0){const h=r?Z0(t,r,l,s):t;if(c)return n?J0(o,h,i):Ce(o,i,h);const u=1e-9,d=Math.ceil(Math.log(t/h)/Math.log(e)-u),f=-a*(.5-u)+.5,g=Math.min(h,o),p=Math.floor(Math.log(t/g)/Math.log(e)+f),m=Math.max(d,p),y=t/Math.pow(e,m);return Ce(y,i,h)}})}function rC(e,t,i,n,r){return i=i!==void 0?i:!0,(function(s,o,a,l){if(s!==void 0){const c=n?Z0(e,n,a,r):e;return!i||!l?Ce(s,t,c):J0(s,c,t)}})}function Q0(e){if(e!==void 0)return 0}function sC(e){if(e!==void 0)return e}function fD(e){const t=2*Math.PI/e;return(function(i,n){if(n)return i;if(i!==void 0)return i=Math.floor(i/t+.5)*t,i})}function gD(e){const t=er(5);return(function(i,n){return n||i===void 0?i:Math.abs(i)<=t?0:i})}const jw=42,ty=256,bg=0;class Xn extends Dn{constructor(t){super(),this.on,this.once,this.un,t=Object.assign({},t),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=N0(t.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,t.projection&&Lw(),t.center&&(t.center=wr(t.center,this.projection_)),t.extent&&(t.extent=Zn(t.extent,this.projection_)),this.applyOptions_(t)}applyOptions_(t){const i=Object.assign({},t);for(const a in gn)delete i[a];this.setProperties(i,!0);const n=mD(t);this.maxResolution_=n.maxResolution,this.minResolution_=n.minResolution,this.zoomFactor_=n.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=n.minZoom;const r=pD(t),s=n.constraint,o=yD(t);this.constraints_={center:r,resolution:s,rotation:o},this.setRotation(t.rotation!==void 0?t.rotation:0),this.setCenterInternal(t.center!==void 0?t.center:null),t.resolution!==void 0?this.setResolution(t.resolution):t.zoom!==void 0&&this.setZoom(t.zoom)}get padding(){return this.padding_}set padding(t){let i=this.padding_;this.padding_=t;const n=this.getCenterInternal();if(n){const r=t||[0,0,0,0];i=i||[0,0,0,0];const s=this.getResolution(),o=s/2*(r[3]-i[3]+i[1]-r[1]),a=s/2*(r[0]-i[0]+i[2]-r[2]);this.setCenterInternal([n[0]+o,n[1]-a])}}getUpdatedOptions_(t){const i=this.getProperties();return i.resolution!==void 0?i.resolution=this.getResolution():i.zoom=this.getZoom(),i.center=this.getCenterInternal(),i.rotation=this.getRotation(),Object.assign({},i,t)}animate(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const i=new Array(arguments.length);for(let n=0;n<i.length;++n){let r=arguments[n];r.center&&(r=Object.assign({},r),r.center=wr(r.center,this.getProjection())),r.anchor&&(r=Object.assign({},r),r.anchor=wr(r.anchor,this.getProjection())),i[n]=r}this.animateInternal.apply(this,i)}animateInternal(t){let i=arguments.length,n;i>1&&typeof arguments[i-1]=="function"&&(n=arguments[i-1],--i);let r=0;for(;r<i&&!this.isDef();++r){const h=arguments[r];h.center&&this.setCenterInternal(h.center),h.zoom!==void 0?this.setZoom(h.zoom):h.resolution&&this.setResolution(h.resolution),h.rotation!==void 0&&this.setRotation(h.rotation)}if(r===i){n&&Rh(n,!0);return}let s=Date.now(),o=this.targetCenter_.slice(),a=this.targetResolution_,l=this.targetRotation_;const c=[];for(;r<i;++r){const h=arguments[r],u={start:s,complete:!1,anchor:h.anchor,duration:h.duration!==void 0?h.duration:1e3,easing:h.easing||aO,callback:n};if(h.center&&(u.sourceCenter=o,u.targetCenter=h.center.slice(),o=u.targetCenter),h.zoom!==void 0?(u.sourceResolution=a,u.targetResolution=this.getResolutionForZoom(h.zoom),a=u.targetResolution):h.resolution&&(u.sourceResolution=a,u.targetResolution=h.resolution,a=u.targetResolution),h.rotation!==void 0){u.sourceRotation=l;const d=go(h.rotation-l+Math.PI,2*Math.PI)-Math.PI;u.targetRotation=l+d,l=u.targetRotation}_D(u)?u.complete=!0:s+=u.duration,c.push(u)}this.animations_.push(c),this.setHint(xe.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[xe.ANIMATING]>0}getInteracting(){return this.hints_[xe.INTERACTING]>0}cancelAnimations(){this.setHint(xe.ANIMATING,-this.hints_[xe.ANIMATING]);let t;for(let i=0,n=this.animations_.length;i<n;++i){const r=this.animations_[i];if(r[0].callback&&Rh(r[0].callback,!1),!t)for(let s=0,o=r.length;s<o;++s){const a=r[s];if(!a.complete){t=a.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const t=Date.now();let i=!1;for(let n=this.animations_.length-1;n>=0;--n){const r=this.animations_[n];let s=!0;for(let o=0,a=r.length;o<a;++o){const l=r[o];if(l.complete)continue;const c=t-l.start;let h=l.duration>0?c/l.duration:1;h>=1?(l.complete=!0,h=1):s=!1;const u=l.easing(h);if(l.sourceCenter){const d=l.sourceCenter[0],f=l.sourceCenter[1],g=l.targetCenter[0],p=l.targetCenter[1];this.nextCenter_=l.targetCenter;const m=d+u*(g-d),y=f+u*(p-f);this.targetCenter_=[m,y]}if(l.sourceResolution&&l.targetResolution){const d=u===1?l.targetResolution:l.sourceResolution+u*(l.targetResolution-l.sourceResolution);if(l.anchor){const f=this.getViewportSize_(this.getRotation()),g=this.constraints_.resolution(d,0,f,!0);this.targetCenter_=this.calculateCenterZoom(g,l.anchor)}this.nextResolution_=l.targetResolution,this.targetResolution_=d,this.applyTargetState_(!0)}if(l.sourceRotation!==void 0&&l.targetRotation!==void 0){const d=u===1?go(l.targetRotation+Math.PI,2*Math.PI)-Math.PI:l.sourceRotation+u*(l.targetRotation-l.sourceRotation);if(l.anchor){const f=this.constraints_.rotation(d,!0);this.targetCenter_=this.calculateCenterRotate(f,l.anchor)}this.nextRotation_=l.targetRotation,this.targetRotation_=d}if(this.applyTargetState_(!0),i=!0,!l.complete)break}if(s){this.animations_[n]=null,this.setHint(xe.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const o=r[0].callback;o&&Rh(o,!0)}}this.animations_=this.animations_.filter(Boolean),i&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(t,i){let n;const r=this.getCenterInternal();return r!==void 0&&(n=[r[0]-i[0],r[1]-i[1]],I0(n,t-this.getRotation()),Cw(n,i)),n}calculateCenterZoom(t,i){let n;const r=this.getCenterInternal(),s=this.getResolution();if(r!==void 0&&s!==void 0){const o=i[0]-t*(i[0]-r[0])/s,a=i[1]-t*(i[1]-r[1])/s;n=[o,a]}return n}getViewportSize_(t){const i=this.viewportSize_;if(t){const n=i[0],r=i[1];return[Math.abs(n*Math.cos(t))+Math.abs(r*Math.sin(t)),Math.abs(n*Math.sin(t))+Math.abs(r*Math.cos(t))]}return i}setViewportSize(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const t=this.getCenterInternal();return t&&$p(t,this.getProjection())}getCenterInternal(){return this.get(gn.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(t){return t!==void 0?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()}calculateExtent(t){const i=this.calculateExtentInternal(t);return $0(i,this.getProjection())}calculateExtentInternal(t){t=t||this.getViewportSizeMinusPadding_();const i=this.getCenterInternal();Zt(i,"The view center is not defined");const n=this.getResolution();Zt(n!==void 0,"The view resolution is not defined");const r=this.getRotation();return Zt(r!==void 0,"The view rotation is not defined"),xc(i,n,r,t)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))}setConstrainResolution(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))}getProjection(){return this.projection_}getResolution(){return this.get(gn.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(t,i){return this.getResolutionForExtentInternal(Zn(t,this.getProjection()),i)}getResolutionForExtentInternal(t,i){i=i||this.getViewportSizeMinusPadding_();const n=qt(t)/i[0],r=ke(t)/i[1];return Math.max(n,r)}getResolutionForValueFunction(t){t=t||2;const i=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,r=Math.log(i/n)/Math.log(t);return(function(s){return i/Math.pow(t,s*r)})}getRotation(){return this.get(gn.ROTATION)}getValueForResolutionFunction(t){const i=Math.log(t||2),n=this.getConstrainedResolution(this.maxResolution_),r=this.minResolution_,s=Math.log(n/r)/i;return(function(o){return Math.log(n/o)/i/s})}getViewportSizeMinusPadding_(t){let i=this.getViewportSize_(t);const n=this.padding_;return n&&(i=[i[0]-n[1]-n[3],i[1]-n[0]-n[2]]),i}getState(){const t=this.getProjection(),i=this.getResolution(),n=this.getRotation();let r=this.getCenterInternal();const s=this.padding_;if(s){const o=this.getViewportSizeMinusPadding_();r=vg(r,this.getViewportSize_(),[o[0]/2+s[3],o[1]/2+s[0]],i,n)}return{center:r.slice(0),projection:t!==void 0?t:null,resolution:i,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:n,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let t;const i=this.getResolution();return i!==void 0&&(t=this.getZoomForResolution(i)),t}getZoomForResolution(t){let i=this.minZoom_||0,n,r;if(this.resolutions_){const s=Qd(this.resolutions_,t,1);i=s,n=this.resolutions_[s],s==this.resolutions_.length-1?r=2:r=n/this.resolutions_[s+1]}else n=this.maxResolution_,r=this.zoomFactor_;return i+Math.log(n/t)/Math.log(r)}getResolutionForZoom(t){if(this.resolutions_?.length){if(this.resolutions_.length===1)return this.resolutions_[0];const i=Ce(Math.floor(t),0,this.resolutions_.length-2),n=this.resolutions_[i]/this.resolutions_[i+1];return this.resolutions_[i]/Math.pow(n,Ce(t-i,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)}fit(t,i){let n;if(Zt(Array.isArray(t)||typeof t.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(t)){Zt(!Io(t),"Cannot fit empty extent provided as `geometry`");const r=Zn(t,this.getProjection());n=nC(r)}else if(t.getType()==="Circle"){const r=Zn(t.getExtent(),this.getProjection());n=nC(r),n.rotate(this.getRotation(),hn(r))}else n=t;this.fitInternal(n,i)}rotatedExtentForGeometry(t){const i=this.getRotation(),n=Math.cos(i),r=Math.sin(-i),s=t.getFlatCoordinates(),o=t.getStride();let a=1/0,l=1/0,c=-1/0,h=-1/0;for(let u=0,d=s.length;u<d;u+=o){const f=s[u]*n-s[u+1]*r,g=s[u]*r+s[u+1]*n;a=Math.min(a,f),l=Math.min(l,g),c=Math.max(c,f),h=Math.max(h,g)}return[a,l,c,h]}fitInternal(t,i){i=i||{};let n=i.size;n||(n=this.getViewportSizeMinusPadding_());const r=i.padding!==void 0?i.padding:[0,0,0,0],s=i.nearest!==void 0?i.nearest:!1;let o;i.minResolution!==void 0?o=i.minResolution:i.maxZoom!==void 0?o=this.getResolutionForZoom(i.maxZoom):o=0;const a=this.rotatedExtentForGeometry(t);let l=this.getResolutionForExtentInternal(a,[n[0]-r[1]-r[3],n[1]-r[0]-r[2]]);l=isNaN(l)?o:Math.max(l,o),l=this.getConstrainedResolution(l,s?0:1);const c=this.getRotation(),h=Math.sin(c),u=Math.cos(c),d=hn(a);d[0]+=(r[1]-r[3])/2*l,d[1]+=(r[0]-r[2])/2*l;const f=d[0]*u-d[1]*h,g=d[1]*u+d[0]*h,p=this.getConstrainedCenter([f,g],l),m=i.callback?i.callback:_c;i.duration!==void 0?this.animateInternal({resolution:l,center:p,duration:i.duration,easing:i.easing},m):(this.targetResolution_=l,this.targetCenter_=p,this.applyTargetState_(!1,!0),Rh(m,!0))}centerOn(t,i,n){this.centerOnInternal(wr(t,this.getProjection()),i,n)}centerOnInternal(t,i,n){this.setCenterInternal(vg(t,i,n,this.getResolution(),this.getRotation()))}calculateCenterShift(t,i,n,r){let s;const o=this.padding_;if(o&&t){const a=this.getViewportSizeMinusPadding_(-n),l=vg(t,r,[a[0]/2+o[3],a[1]/2+o[0]],i,n);s=[t[0]-l[0],t[1]-l[1]]}return s}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(t){const i=$p(this.targetCenter_,this.getProjection());this.setCenter([i[0]+t[0],i[1]+t[1]])}adjustCenterInternal(t){const i=this.targetCenter_;this.setCenterInternal([i[0]+t[0],i[1]+t[1]])}adjustResolution(t,i){i=i&&wr(i,this.getProjection()),this.adjustResolutionInternal(t,i)}adjustResolutionInternal(t,i){const n=this.getAnimating()||this.getInteracting(),r=this.getViewportSize_(this.getRotation()),s=this.constraints_.resolution(this.targetResolution_*t,0,r,n);i&&(this.targetCenter_=this.calculateCenterZoom(s,i)),this.targetResolution_*=t,this.applyTargetState_()}adjustZoom(t,i){this.adjustResolution(Math.pow(this.zoomFactor_,-t),i)}adjustRotation(t,i){i&&(i=wr(i,this.getProjection())),this.adjustRotationInternal(t,i)}adjustRotationInternal(t,i){const n=this.getAnimating()||this.getInteracting(),r=this.constraints_.rotation(this.targetRotation_+t,n);i&&(this.targetCenter_=this.calculateCenterRotate(r,i)),this.targetRotation_+=t,this.applyTargetState_()}setCenter(t){this.setCenterInternal(t&&wr(t,this.getProjection()))}setCenterInternal(t){this.targetCenter_=t,this.applyTargetState_()}setHint(t,i){return this.hints_[t]+=i,this.changed(),this.hints_[t]}setResolution(t){this.targetResolution_=t,this.applyTargetState_()}setRotation(t){this.targetRotation_=t,this.applyTargetState_()}setZoom(t){this.setResolution(this.getResolutionForZoom(t))}applyTargetState_(t,i){const n=this.getAnimating()||this.getInteracting()||i,r=this.constraints_.rotation(this.targetRotation_,n),s=this.getViewportSize_(r),o=this.constraints_.resolution(this.targetResolution_,0,s,n),a=this.constraints_.center(this.targetCenter_,o,s,n,this.calculateCenterShift(this.targetCenter_,o,r,s));this.get(gn.ROTATION)!==r&&this.set(gn.ROTATION,r),this.get(gn.RESOLUTION)!==o&&(this.set(gn.RESOLUTION,o),this.set("zoom",this.getZoom(),!0)),(!a||!this.get(gn.CENTER)||!Du(this.get(gn.CENTER),a))&&this.set(gn.CENTER,a),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(t,i,n){t=t!==void 0?t:200;const r=i||0,s=this.constraints_.rotation(this.targetRotation_),o=this.getViewportSize_(s),a=this.constraints_.resolution(this.targetResolution_,r,o),l=this.constraints_.center(this.targetCenter_,a,o,!1,this.calculateCenterShift(this.targetCenter_,a,s,o));if(t===0&&!this.cancelAnchor_){this.targetResolution_=a,this.targetRotation_=s,this.targetCenter_=l,this.applyTargetState_();return}n=n||(t===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==a||this.getRotation()!==s||!this.getCenterInternal()||!Du(this.getCenterInternal(),l))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:s,center:l,resolution:a,duration:t,easing:Ja,anchor:n}))}beginInteraction(){this.resolveConstraints(0),this.setHint(xe.INTERACTING,1)}endInteraction(t,i,n){n=n&&wr(n,this.getProjection()),this.endInteractionInternal(t,i,n)}endInteractionInternal(t,i,n){this.getInteracting()&&(this.setHint(xe.INTERACTING,-1),this.resolveConstraints(t,i,n))}getConstrainedCenter(t,i){const n=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,i||this.getResolution(),n)}getConstrainedZoom(t,i){const n=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(n,i))}getConstrainedResolution(t,i){i=i||0;const n=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,i,n)}}function Rh(e,t){setTimeout(function(){e(t)},0)}function pD(e){if(e.extent!==void 0){const i=e.smoothExtentConstraint!==void 0?e.smoothExtentConstraint:!0;return Gx(e.extent,e.constrainOnlyCenter,i)}const t=N0(e.projection,"EPSG:3857");if(e.multiWorld!==!0&&t.isGlobal()){const i=t.getExtent().slice();return i[0]=-1/0,i[2]=1/0,Gx(i,!1,!1)}return QF}function mD(e){let t,i,n,o=e.minZoom!==void 0?e.minZoom:bg,a=e.maxZoom!==void 0?e.maxZoom:28;const l=e.zoomFactor!==void 0?e.zoomFactor:2,c=e.multiWorld!==void 0?e.multiWorld:!1,h=e.smoothResolutionConstraint!==void 0?e.smoothResolutionConstraint:!0,u=e.showFullExtent!==void 0?e.showFullExtent:!1,d=N0(e.projection,"EPSG:3857"),f=d.getExtent();let g=e.constrainOnlyCenter,p=e.extent;if(!c&&!p&&d.isGlobal()&&(g=!1,p=f),e.resolutions!==void 0){const m=e.resolutions;i=m[o],n=m[a]!==void 0?m[a]:m[m.length-1],e.constrainResolution?t=uD(m,h,!g&&p,u):t=rC(i,n,h,!g&&p,u)}else{const y=(f?Math.max(qt(f),ke(f)):360*F0.degrees/d.getMetersPerUnit())/ty/Math.pow(2,bg),_=y/Math.pow(2,28-bg);i=e.maxResolution,i!==void 0?o=0:i=y/Math.pow(l,o),n=e.minResolution,n===void 0&&(e.maxZoom!==void 0?e.maxResolution!==void 0?n=i/Math.pow(l,a):n=y/Math.pow(l,a):n=_),a=o+Math.floor(Math.log(i/n)/Math.log(l)),n=i/Math.pow(l,a-o),e.constrainResolution?t=dD(l,i,n,h,!g&&p,u):t=rC(i,n,h,!g&&p,u)}return{constraint:t,maxResolution:i,minResolution:n,minZoom:o,zoomFactor:l}}function yD(e){if(e.enableRotation!==void 0?e.enableRotation:!0){const i=e.constrainRotation;return i===void 0||i===!0?gD():i===!1?sC:typeof i=="number"?fD(i):sC}return Q0}function _D(e){return!(e.sourceCenter&&e.targetCenter&&!Du(e.sourceCenter,e.targetCenter)||e.sourceResolution!==e.targetResolution||e.sourceRotation!==e.targetRotation)}function vg(e,t,i,n,r){const s=Math.cos(-r);let o=Math.sin(-r),a=e[0]*s-e[1]*o,l=e[1]*s+e[0]*o;a+=(t[0]/2-i[0])*n,l+=(i[1]-t[1]/2)*n,o=-o;const c=a*s-l*o,h=l*s+a*o;return[c,h]}const Ah="ol-hidden",xD="ol-selectable",df="ol-unselectable",ey="ol-control",oC="ol-collapsed",CD=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z0-9]+?)\\s*$`].join(""),"i"),aC=["style","variant","weight","size","lineHeight","family"],Hp={normal:400,bold:700},Vp=function(e){const t=e.match(CD);if(!t)return null;const i={lineHeight:"normal",size:"1.2em",style:"normal",weight:"400",variant:"normal"};for(let n=0,r=aC.length;n<r;++n){const s=t[n+1];s!==void 0&&(i[aC[n]]=typeof s=="string"?s.trim():s)}return isNaN(Number(i.weight))&&i.weight in Hp&&(i.weight=Hp[i.weight]),i.families=i.family.split(/,\s?/).map(n=>n.trim().replace(/^['"]|['"]$/g,"")),i};function De(e,t,i,n){let r;return i&&i.length?r=i.shift():rn?r=new class extends OffscreenCanvas{style={}}(e??300,t??150):r=document.createElement("canvas"),e&&(r.width=e),t&&(r.height=t),r.getContext("2d",n)}let wg;function $u(){return wg||(wg=De(1,1)),wg}function eh(e){const t=e.canvas;t.width=1,t.height=1,e.clearRect(0,0,1,1)}function bD(e){let t=e.offsetWidth;const i=getComputedStyle(e);return t+=parseInt(i.marginLeft,10)+parseInt(i.marginRight,10),t}function vD(e){let t=e.offsetHeight;const i=getComputedStyle(e);return t+=parseInt(i.marginTop,10)+parseInt(i.marginBottom,10),t}function lC(e,t){const i=t.parentNode;i&&i.replaceChild(e,t)}function Hw(e){for(;e.lastChild;)e.lastChild.remove()}function wD(e,t){const i=e.childNodes;for(let n=0;;++n){const r=i[n],s=t[n];if(!r&&!s)break;if(r!==s){if(!r){e.appendChild(s);continue}if(!s){e.removeChild(r),--n;continue}e.insertBefore(s,r)}}}function Vw(){return new Proxy({childNodes:[],appendChild:function(t){return this.childNodes.push(t),t},remove:function(){},removeChild:function(t){const i=this.childNodes.indexOf(t);if(i===-1)throw new Error("Node to remove was not found");return this.childNodes.splice(i,1),t},insertBefore:function(t,i){const n=this.childNodes.indexOf(i);if(n===-1)throw new Error("Reference node not found");return this.childNodes.splice(n,0,t),t},style:{}},{get(t,i,n){return i==="firstElementChild"?t.childNodes.length>0?t.childNodes[0]:null:Reflect.get(t,i,n)}})}function ms(e){return typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas}class iy extends Dn{constructor(t){super();const i=t.element;i&&!t.target&&!i.style.pointerEvents&&(i.style.pointerEvents="auto"),this.element=i||null,this.target_=null,this.map_=null,this.listenerKeys=[],t.render&&(this.render=t.render),t.target&&this.setTarget(t.target)}disposeInternal(){this.element?.remove(),super.disposeInternal()}getMap(){return this.map_}setMap(t){this.map_&&this.element?.remove();for(let i=0,n=this.listenerKeys.length;i<n;++i)de(this.listenerKeys[i]);if(this.listenerKeys.length=0,this.map_=t,t){const i=this.target_??t.getOverlayContainerStopEvent();this.element&&i.appendChild(this.element),this.render!==_c&&this.listenerKeys.push(Yt(t,kr.POSTRENDER,this.render,this)),t.render()}}render(t){}setTarget(t){this.target_=typeof t=="string"?document.getElementById(t):t}}class SD extends iy{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=t.collapsed!==void 0?t.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=t.collapsible!==void 0,this.collapsible_=t.collapsible!==void 0?t.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.attributions_=t.attributions;const i=t.className!==void 0?t.className:"ol-attribution",n=t.tipLabel!==void 0?t.tipLabel:"Attributions",r=t.expandClassName!==void 0?t.expandClassName:i+"-expand",s=t.collapseLabel!==void 0?t.collapseLabel:"",o=t.collapseClassName!==void 0?t.collapseClassName:i+"-collapse";typeof s=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=s,this.collapseLabel_.className=o):this.collapseLabel_=s;const a=t.label!==void 0?t.label:"i";typeof a=="string"?(this.label_=document.createElement("span"),this.label_.textContent=a,this.label_.className=r):this.label_=a;const l=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=n,this.toggleButton_.appendChild(l),this.toggleButton_.addEventListener(Mt.CLICK,this.handleClick_.bind(this),!1);const c=i+" "+df+" "+ey+(this.collapsed_&&this.collapsible_?" "+oC:"")+(this.collapsible_?"":" ol-uncollapsible"),h=this.element;h.className=c,h.appendChild(this.toggleButton_),h.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(t){const i=this.getMap().getAllLayers(),n=new Set(i.flatMap(r=>r.getAttributions(t)));if(this.attributions_!==void 0&&(Array.isArray(this.attributions_)?this.attributions_.forEach(r=>n.add(r)):n.add(this.attributions_)),!this.overrideCollapsible_){const r=!i.some(s=>s.getSource()?.getAttributionsCollapsible()===!1);this.setCollapsible(r)}return Array.from(n)}async updateElement_(t){if(!t){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const i=await Promise.all(this.collectSourceAttributions_(t).map(r=>lw(()=>r))),n=i.length>0;if(this.renderedVisible_!=n&&(this.element.style.display=n?"":"none",this.renderedVisible_=n),!Ms(i,this.renderedAttributions_)){Hw(this.ulElement_);for(let r=0,s=i.length;r<s;++r){const o=document.createElement("li");o.innerHTML=i[r],this.ulElement_.appendChild(o)}this.renderedAttributions_=i}}handleClick_(t){t.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(oC),this.collapsed_?lC(this.collapseLabel_,this.label_):lC(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(t){this.userCollapsed_=t,!(!this.collapsible_||this.collapsed_===t)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(t){this.updateElement_(t.frameState)}}class TD extends iy{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target});const i=t.className!==void 0?t.className:"ol-rotate",n=t.label!==void 0?t.label:"",r=t.compassClassName!==void 0?t.compassClassName:"ol-compass";this.label_=null,typeof n=="string"?(this.label_=document.createElement("span"),this.label_.className=r,this.label_.textContent=n):(this.label_=n,this.label_.classList.add(r));const s=t.tipLabel?t.tipLabel:"Reset rotation",o=document.createElement("button");o.className=i+"-reset",o.setAttribute("type","button"),o.title=s,o.appendChild(this.label_),o.addEventListener(Mt.CLICK,this.handleClick_.bind(this),!1);const a=i+" "+df+" "+ey,l=this.element;l.className=a,l.appendChild(o),this.callResetNorth_=t.resetNorth?t.resetNorth:void 0,this.duration_=t.duration!==void 0?t.duration:250,this.autoHide_=t.autoHide!==void 0?t.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(Ah)}handleClick_(t){t.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const i=this.getMap().getView();if(!i)return;const n=i.getRotation();n!==void 0&&(this.duration_>0&&n%(2*Math.PI)!==0?i.animate({rotation:0,duration:this.duration_,easing:Ja}):i.setRotation(0))}render(t){const i=t.frameState;if(!i)return;const n=i.viewState.rotation;if(n!=this.rotation_){const r="rotate("+n+"rad)";if(this.autoHide_){const s=this.element.classList.contains(Ah);!s&&n===0?this.element.classList.add(Ah):s&&n!==0&&this.element.classList.remove(Ah)}this.label_.style.transform=r}this.rotation_=n}}class ED extends iy{constructor(t){t=t||{},super({element:document.createElement("div"),target:t.target});const i=t.className!==void 0?t.className:"ol-zoom",n=t.delta!==void 0?t.delta:1,r=t.zoomInClassName!==void 0?t.zoomInClassName:i+"-in",s=t.zoomOutClassName!==void 0?t.zoomOutClassName:i+"-out",o=t.zoomInLabel!==void 0?t.zoomInLabel:"+",a=t.zoomOutLabel!==void 0?t.zoomOutLabel:"",l=t.zoomInTipLabel!==void 0?t.zoomInTipLabel:"Zoom in",c=t.zoomOutTipLabel!==void 0?t.zoomOutTipLabel:"Zoom out",h=document.createElement("button");h.className=r,h.setAttribute("type","button"),h.title=l,h.appendChild(typeof o=="string"?document.createTextNode(o):o),h.addEventListener(Mt.CLICK,this.handleClick_.bind(this,n),!1);const u=document.createElement("button");u.className=s,u.setAttribute("type","button"),u.title=c,u.appendChild(typeof a=="string"?document.createTextNode(a):a),u.addEventListener(Mt.CLICK,this.handleClick_.bind(this,-n),!1);const d=i+" "+df+" "+ey,f=this.element;f.className=d,f.appendChild(h),f.appendChild(u),this.duration_=t.duration!==void 0?t.duration:250}handleClick_(t,i){i.preventDefault(),this.zoomByDelta_(t)}zoomByDelta_(t){const n=this.getMap().getView();if(!n)return;const r=n.getZoom();if(r!==void 0){const s=n.getConstrainedZoom(r+t);this.duration_>0?(n.getAnimating()&&n.cancelAnimations(),n.animate({zoom:s,duration:this.duration_,easing:Ja})):n.setZoom(s)}}}function kD(e){e=e||{};const t=new nn;return(e.zoom===void 0||e.zoom)&&t.push(new ED(e.zoomOptions)),(e.rotate===void 0||e.rotate)&&t.push(new TD(e.rotateOptions)),(e.attribution===void 0||e.attribution)&&t.push(new SD(e.attributionOptions)),t}class RD{constructor(t,i,n){this.decay_=t,this.minVelocity_=i,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(t,i){this.points_.push(t,i,Date.now())}end(){if(this.points_.length<6)return!1;const t=Date.now()-this.delay_,i=this.points_.length-3;if(this.points_[i+2]<t)return!1;let n=i-3;for(;n>0&&this.points_[n+2]>t;)n-=3;const r=this.points_[i+2]-this.points_[n+2];if(r<1e3/60)return!1;const s=this.points_[i]-this.points_[n],o=this.points_[i+1]-this.points_[n+1];return this.angle_=Math.atan2(o,s),this.initialVelocity_=Math.sqrt(s*s+o*o)/r,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}const cC={ACTIVE:"active"};class ih extends Dn{constructor(t){super(),this.on,this.once,this.un,t&&t.handleEvent&&(this.handleEvent=t.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(cC.ACTIVE)}getMap(){return this.map_}handleEvent(t){return!0}setActive(t){this.set(cC.ACTIVE,t)}setMap(t){this.map_=t}}function AD(e,t,i){const n=e.getCenterInternal();if(n){const r=[n[0]+t[0],n[1]+t[1]];e.animateInternal({duration:i!==void 0?i:250,easing:lO,center:e.getConstrainedCenter(r)})}}function ny(e,t,i,n){const r=e.getZoom();if(r===void 0)return;const s=e.getConstrainedZoom(r+t),o=e.getResolutionForZoom(s);e.getAnimating()&&e.cancelAnimations(),e.animate({resolution:o,anchor:i,duration:n!==void 0?n:250,easing:Ja})}class LD extends ih{constructor(t){super(),t=t||{},this.delta_=t.delta?t.delta:1,this.duration_=t.duration!==void 0?t.duration:250}handleEvent(t){let i=!1;if(t.type==be.DBLCLICK){const n=t.originalEvent,r=t.map,s=t.coordinate,o=n.shiftKey?-this.delta_:this.delta_,a=r.getView();ny(a,o,s,this.duration_),n.preventDefault(),i=!0}return!i}}function Up(e){const t=arguments;return function(i){let n=!0;for(let r=0,s=t.length;r<s&&(n=n&&t[r](i),!!n);++r);return n}}const MD=function(e){const t=e.originalEvent;return t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},ID=function(e){const t=e.map.getTargetElement(),i=t.getRootNode(),n=e.map.getOwnerDocument().activeElement;return i instanceof ShadowRoot?i.host.contains(n):t.contains(n)},Uw=function(e){const t=e.map.getTargetElement(),i=t.getRootNode();return(i instanceof ShadowRoot?i.host:t).hasAttribute("tabindex")?ID(e):!0},PD=yc,qw=function(e){const t=e.originalEvent;return"pointerId"in t&&t.button==0&&!(UF&&cw&&t.ctrlKey)},Yw=function(e){const t=e.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey},FD=function(e){const t=e.originalEvent;return cw?t.metaKey:t.ctrlKey},OD=function(e){const t=e.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},Xw=function(e){const t=e.originalEvent,i=t.target.tagName;return i!=="INPUT"&&i!=="SELECT"&&i!=="TEXTAREA"&&!t.target.isContentEditable},Sg=function(e){const t=e.originalEvent;return"pointerId"in t&&t.pointerType=="mouse"},DD=function(e){const t=e.originalEvent;return"pointerId"in t&&t.isPrimary&&t.button===0};class nh extends ih{constructor(t){t=t||{},super(t),t.handleDownEvent&&(this.handleDownEvent=t.handleDownEvent),t.handleDragEvent&&(this.handleDragEvent=t.handleDragEvent),t.handleMoveEvent&&(this.handleMoveEvent=t.handleMoveEvent),t.handleUpEvent&&(this.handleUpEvent=t.handleUpEvent),t.stopDown&&(this.stopDown=t.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(t){return!1}handleDragEvent(t){}handleEvent(t){if(!t.originalEvent)return!0;let i=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==be.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==be.POINTERUP){const n=this.handleUpEvent(t);this.handlingDownUpSequence=n&&this.targetPointers.length>0}}else if(t.type==be.POINTERDOWN){const n=this.handleDownEvent(t);this.handlingDownUpSequence=n,i=this.stopDown(n)}else t.type==be.POINTERMOVE&&this.handleMoveEvent(t);return!i}handleMoveEvent(t){}handleUpEvent(t){return!1}stopDown(t){return t}updateTrackedPointers_(t){t.activePointers&&(this.targetPointers=t.activePointers)}}function ry(e){const t=e.length;let i=0,n=0;for(let r=0;r<t;r++)i+=e[r].clientX,n+=e[r].clientY;return{clientX:i/t,clientY:n/t}}class BD extends nh{constructor(t){super({stopDown:tf}),t=t||{},this.kinetic_=t.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const i=t.condition?t.condition:Up(Yw,DD);this.condition_=t.onFocusOnly?Up(Uw,i):i,this.noKinetic_=!1}handleDragEvent(t){const i=t.map;this.panning_||(this.panning_=!0,i.getView().beginInteraction());const n=this.targetPointers,r=i.getEventPixel(ry(n));if(n.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(r[0],r[1]),this.lastCentroid){const s=[this.lastCentroid[0]-r[0],r[1]-this.lastCentroid[1]],a=t.map.getView();bw(s,a.getResolution()),I0(s,a.getRotation()),a.adjustCenterInternal(s)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=r,this.lastPointersCount_=n.length,t.originalEvent.preventDefault()}handleUpEvent(t){const i=t.map,n=i.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const r=this.kinetic_.getDistance(),s=this.kinetic_.getAngle(),o=n.getCenterInternal(),a=i.getPixelFromCoordinateInternal(o),l=i.getCoordinateFromPixelInternal([a[0]-r*Math.cos(s),a[1]-r*Math.sin(s)]);n.animateInternal({center:n.getConstrainedCenter(l),duration:500,easing:Ja})}return this.panning_&&(this.panning_=!1,n.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(t){if(this.targetPointers.length>0&&this.condition_(t)){const n=t.map.getView();return this.lastCentroid=null,n.getAnimating()&&n.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}class ND extends nh{constructor(t){t=t||{},super({stopDown:tf}),this.condition_=t.condition?t.condition:MD,this.lastAngle_=void 0,this.duration_=t.duration!==void 0?t.duration:250}handleDragEvent(t){if(!Sg(t))return;const i=t.map,n=i.getView();if(n.getConstraints().rotation===Q0)return;const r=i.getSize(),s=t.pixel,o=Math.atan2(r[1]/2-s[1],s[0]-r[0]/2);if(this.lastAngle_!==void 0){const a=o-this.lastAngle_;n.adjustRotationInternal(-a)}this.lastAngle_=o}handleUpEvent(t){return Sg(t)?(t.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(t){return Sg(t)&&qw(t)&&this.condition_(t)?(t.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class $D extends Jd{constructor(t){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+t,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const t=this.startPixel_,i=this.endPixel_,n="px",r=this.element_.style;r.left=Math.min(t[0],i[0])+n,r.top=Math.min(t[1],i[1])+n,r.width=Math.abs(i[0]-t[0])+n,r.height=Math.abs(i[1]-t[1])+n}setMap(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const i=this.element_.style;i.left="inherit",i.top="inherit",i.width="inherit",i.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(t,i){this.startPixel_=t,this.endPixel_=i,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const t=this.startPixel_,i=this.endPixel_,r=[t,[t[0],i[1]],i,[i[0],t[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);r[4]=r[0].slice(),this.geometry_?this.geometry_.setCoordinates([r]):this.geometry_=new Gr([r])}getGeometry(){return this.geometry_}}const Wo={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class dl extends cr{constructor(t,i,n){super(t),this.coordinate=i,this.mapBrowserEvent=n}}class zD extends nh{constructor(t){super(),this.on,this.once,this.un,t=t??{},this.box_=new $D(t.className||"ol-dragbox"),this.minArea_=t.minArea??64,t.onBoxEnd&&(this.onBoxEnd=t.onBoxEnd),this.startPixel_=null,this.condition_=t.condition??qw,this.boxEndCondition_=t.boxEndCondition??this.defaultBoxEndCondition}defaultBoxEndCondition(t,i,n){const r=n[0]-i[0],s=n[1]-i[1];return r*r+s*s>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(t){this.startPixel_&&(this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new dl(Wo.BOXDRAG,t.coordinate,t)))}handleUpEvent(t){if(!this.startPixel_)return!1;const i=this.boxEndCondition_(t,this.startPixel_,t.pixel);return i&&this.onBoxEnd(t),this.dispatchEvent(new dl(i?Wo.BOXEND:Wo.BOXCANCEL,t.coordinate,t)),this.box_.setMap(null),this.startPixel_=null,!1}handleDownEvent(t){return this.condition_(t)?(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new dl(Wo.BOXSTART,t.coordinate,t)),!0):!1}onBoxEnd(t){}setActive(t){t||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new dl(Wo.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setActive(t)}setMap(t){this.getMap()&&(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new dl(Wo.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setMap(t)}}class GD extends zD{constructor(t){t=t||{};const i=t.condition?t.condition:OD;super({condition:i,className:t.className||"ol-dragzoom",minArea:t.minArea}),this.duration_=t.duration!==void 0?t.duration:200,this.out_=t.out!==void 0?t.out:!1}onBoxEnd(t){const n=this.getMap().getView();let r=this.getGeometry();if(this.out_){const s=n.rotatedExtentForGeometry(r),o=n.getResolutionForExtentInternal(s),a=n.getResolution()/o;r=r.clone(),r.scale(a*a)}n.fitInternal(r,{duration:this.duration_,easing:Ja})}}const Hs={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class WD extends ih{constructor(t){super(),t=t||{},this.defaultCondition_=function(i){return Yw(i)&&Xw(i)},this.condition_=t.condition!==void 0?t.condition:this.defaultCondition_,this.duration_=t.duration!==void 0?t.duration:100,this.pixelDelta_=t.pixelDelta!==void 0?t.pixelDelta:128}handleEvent(t){let i=!1;if(t.type==Mt.KEYDOWN){const n=t.originalEvent,r=n.key;if(this.condition_(t)&&(r==Hs.DOWN||r==Hs.LEFT||r==Hs.RIGHT||r==Hs.UP)){const o=t.map.getView(),a=o.getResolution()*this.pixelDelta_;let l=0,c=0;r==Hs.DOWN?c=-a:r==Hs.LEFT?l=-a:r==Hs.RIGHT?l=a:c=a;const h=[l,c];I0(h,o.getRotation()),AD(o,h,this.duration_),n.preventDefault(),i=!0}}return!i}}class jD extends ih{constructor(t){super(),t=t||{},this.condition_=t.condition?t.condition:function(i){return!FD(i)&&Xw(i)},this.delta_=t.delta?t.delta:1,this.duration_=t.duration!==void 0?t.duration:100}handleEvent(t){let i=!1;if(t.type==Mt.KEYDOWN||t.type==Mt.KEYPRESS){const n=t.originalEvent,r=n.key;if(this.condition_(t)&&(r==="+"||r==="-")){const s=t.map,o=r==="+"?this.delta_:-this.delta_,a=s.getView();ny(a,o,void 0,this.duration_),n.preventDefault(),i=!0}}return!i}}const HD=40,VD=300;class UD extends ih{constructor(t){t=t||{},super(t),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=t.maxDelta!==void 0?t.maxDelta:1,this.duration_=t.duration!==void 0?t.duration:250,this.timeout_=t.timeout!==void 0?t.timeout:80,this.useAnchor_=t.useAnchor!==void 0?t.useAnchor:!0,this.constrainResolution_=t.constrainResolution!==void 0?t.constrainResolution:!1;const i=t.condition?t.condition:PD;this.condition_=t.onFocusOnly?Up(Uw,i):i,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const t=this.getMap();if(!t)return;t.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_?t.getCoordinateFromPixel(this.lastAnchor_):null)}handleEvent(t){if(!this.condition_(t)||t.type!==Mt.WHEEL)return!0;const n=t.map,r=t.originalEvent;r.preventDefault(),this.useAnchor_&&(this.lastAnchor_=t.pixel);let s=r.deltaY;switch(r.deltaMode){case WheelEvent.DOM_DELTA_LINE:s*=HD;break;case WheelEvent.DOM_DELTA_PAGE:s*=VD;break}if(s===0)return!1;this.lastDelta_=s;const o=Date.now();this.startTime_===void 0&&(this.startTime_=o),(!this.mode_||o-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(s)<4?"trackpad":"wheel");const a=n.getView();if(this.mode_==="trackpad"&&!(a.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(a.getAnimating()&&a.cancelAnimations(),a.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),a.adjustZoom(-s/this.deltaPerZoom_,this.lastAnchor_?n.getCoordinateFromPixel(this.lastAnchor_):null),this.startTime_=o,!1;this.totalDelta_+=s;const l=Math.max(this.timeout_-(o-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,n),l),!1}handleWheelZoom_(t){const i=t.getView();i.getAnimating()&&i.cancelAnimations();let n=-Ce(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(i.getConstrainResolution()||this.constrainResolution_)&&(n=n?n>0?1:-1:0),ny(i,n,this.lastAnchor_?t.getCoordinateFromPixel(this.lastAnchor_):null,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(t){this.useAnchor_=t,t||(this.lastAnchor_=null)}}class qD extends nh{constructor(t){t=t||{};const i=t;i.stopDown||(i.stopDown=tf),super(i),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=t.threshold!==void 0?t.threshold:.3,this.duration_=t.duration!==void 0?t.duration:250}handleDragEvent(t){let i=0;const n=this.targetPointers[0],r=this.targetPointers[1],s=Math.atan2(r.clientY-n.clientY,r.clientX-n.clientX);if(this.lastAngle_!==void 0){const l=s-this.lastAngle_;this.rotationDelta_+=l,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),i=l}this.lastAngle_=s;const o=t.map,a=o.getView();a.getConstraints().rotation!==Q0&&(this.anchor_=o.getCoordinateFromPixelInternal(o.getEventPixel(ry(this.targetPointers))),this.rotating_&&(o.render(),a.adjustRotationInternal(i,this.anchor_)))}handleUpEvent(t){return this.targetPointers.length<2?(t.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(t){if(this.targetPointers.length>=2){const i=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||i.getView().beginInteraction(),!0}return!1}}class YD extends nh{constructor(t){t=t||{};const i=t;i.stopDown||(i.stopDown=tf),super(i),this.anchor_=null,this.duration_=t.duration!==void 0?t.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(t){let i=1;const n=this.targetPointers[0],r=this.targetPointers[1],s=n.clientX-r.clientX,o=n.clientY-r.clientY,a=Math.sqrt(s*s+o*o);this.lastDistance_!==void 0&&(i=this.lastDistance_/a),this.lastDistance_=a;const l=t.map,c=l.getView();i!=1&&(this.lastScaleDelta_=i),this.anchor_=l.getCoordinateFromPixelInternal(l.getEventPixel(ry(this.targetPointers))),l.render(),c.adjustResolutionInternal(i,this.anchor_)}handleUpEvent(t){if(this.targetPointers.length<2){const n=t.map.getView(),r=this.lastScaleDelta_>1?1:-1;return n.endInteraction(this.duration_,r),!1}return!0}handleDownEvent(t){if(this.targetPointers.length>=2){const i=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||i.getView().beginInteraction(),!0}return!1}}function XD(e){e=e||{};const t=new nn,i=new RD(-.005,.05,100);return(e.altShiftDragRotate===void 0||e.altShiftDragRotate)&&t.push(new ND),(e.doubleClickZoom===void 0||e.doubleClickZoom)&&t.push(new LD({delta:e.zoomDelta,duration:e.zoomDuration})),(e.dragPan===void 0||e.dragPan)&&t.push(new BD({onFocusOnly:e.onFocusOnly,kinetic:i})),(e.pinchRotate===void 0||e.pinchRotate)&&t.push(new qD),(e.pinchZoom===void 0||e.pinchZoom)&&t.push(new YD({duration:e.zoomDuration})),(e.keyboard===void 0||e.keyboard)&&(t.push(new WD),t.push(new jD({delta:e.zoomDelta,duration:e.zoomDuration}))),(e.mouseWheelZoom===void 0||e.mouseWheelZoom)&&t.push(new UD({onFocusOnly:e.onFocusOnly,duration:e.zoomDuration})),(e.shiftDragZoom===void 0||e.shiftDragZoom)&&t.push(new GD({duration:e.zoomDuration})),t}const se={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class Kw extends Dn{constructor(t){super(),this.on,this.once,this.un,this.background_=t.background;const i=Object.assign({},t);typeof t.properties=="object"&&(delete i.properties,Object.assign(i,t.properties)),i[se.OPACITY]=t.opacity!==void 0?t.opacity:1,Zt(typeof i[se.OPACITY]=="number","Layer opacity must be a number"),i[se.VISIBLE]=t.visible!==void 0?t.visible:!0,i[se.Z_INDEX]=t.zIndex,i[se.MAX_RESOLUTION]=t.maxResolution!==void 0?t.maxResolution:1/0,i[se.MIN_RESOLUTION]=t.minResolution!==void 0?t.minResolution:0,i[se.MIN_ZOOM]=t.minZoom!==void 0?t.minZoom:-1/0,i[se.MAX_ZOOM]=t.maxZoom!==void 0?t.maxZoom:1/0,this.className_=i.className!==void 0?i.className:"ol-layer",delete i.className,this.setProperties(i),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(t){const i=this.state_||{layer:this,managed:t===void 0?!0:t},n=this.getZIndex();return i.opacity=Ce(Math.round(this.getOpacity()*100)/100,0,1),i.visible=this.getVisible(),i.extent=this.getExtent(),i.zIndex=n===void 0&&!i.managed?1/0:n,i.maxResolution=this.getMaxResolution(),i.minResolution=Math.max(this.getMinResolution(),0),i.minZoom=this.getMinZoom(),i.maxZoom=this.getMaxZoom(),this.state_=i,i}getLayersArray(t){return Gt()}getLayerStatesArray(t){return Gt()}getExtent(){return this.get(se.EXTENT)}getMaxResolution(){return this.get(se.MAX_RESOLUTION)}getMinResolution(){return this.get(se.MIN_RESOLUTION)}getMinZoom(){return this.get(se.MIN_ZOOM)}getMaxZoom(){return this.get(se.MAX_ZOOM)}getOpacity(){return this.get(se.OPACITY)}getSourceState(){return Gt()}getVisible(){return this.get(se.VISIBLE)}getZIndex(){return this.get(se.Z_INDEX)}setBackground(t){this.background_=t,this.changed()}setExtent(t){this.set(se.EXTENT,t)}setMaxResolution(t){this.set(se.MAX_RESOLUTION,t)}setMinResolution(t){this.set(se.MIN_RESOLUTION,t)}setMaxZoom(t){this.set(se.MAX_ZOOM,t)}setMinZoom(t){this.set(se.MIN_ZOOM,t)}setOpacity(t){Zt(typeof t=="number","Layer opacity must be a number"),this.set(se.OPACITY,t)}setVisible(t){this.set(se.VISIBLE,t)}setZIndex(t){this.set(se.Z_INDEX,t)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}const ts={ADDLAYER:"addlayer",REMOVELAYER:"removelayer"};class ds extends cr{constructor(t,i){super(t),this.layer=i}}const Tg={LAYERS:"layers"};class Wr extends Kw{constructor(t){t=t||{};const i=Object.assign({},t);delete i.layers;let n=t.layers;super(i),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(Tg.LAYERS,this.handleLayersChanged_),n?Array.isArray(n)?n=new nn(n.slice(),{unique:!0}):Zt(typeof n.getArray=="function","Expected `layers` to be an array or a `Collection`"):n=new nn(void 0,{unique:!0}),this.setLayers(n)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(de),this.layersListenerKeys_.length=0;const t=this.getLayers();this.layersListenerKeys_.push(Yt(t,Fi.ADD,this.handleLayersAdd_,this),Yt(t,Fi.REMOVE,this.handleLayersRemove_,this));for(const n in this.listenerKeys_)this.listenerKeys_[n].forEach(de);Xc(this.listenerKeys_);const i=t.getArray();for(let n=0,r=i.length;n<r;n++){const s=i[n];this.registerLayerListeners_(s),this.dispatchEvent(new ds(ts.ADDLAYER,s))}this.changed()}registerLayerListeners_(t){const i=[Yt(t,Oa.PROPERTYCHANGE,this.handleLayerChange_,this),Yt(t,Mt.CHANGE,this.handleLayerChange_,this)];t instanceof Wr&&i.push(Yt(t,ts.ADDLAYER,this.handleLayerGroupAdd_,this),Yt(t,ts.REMOVELAYER,this.handleLayerGroupRemove_,this)),this.listenerKeys_[Nt(t)]=i}handleLayerGroupAdd_(t){this.dispatchEvent(new ds(ts.ADDLAYER,t.layer))}handleLayerGroupRemove_(t){this.dispatchEvent(new ds(ts.REMOVELAYER,t.layer))}handleLayersAdd_(t){const i=t.element;this.registerLayerListeners_(i),this.dispatchEvent(new ds(ts.ADDLAYER,i)),this.changed()}handleLayersRemove_(t){const i=t.element,n=Nt(i);this.listenerKeys_[n].forEach(de),delete this.listenerKeys_[n],this.dispatchEvent(new ds(ts.REMOVELAYER,i)),this.changed()}getLayers(){return this.get(Tg.LAYERS)}setLayers(t){const i=this.getLayers();if(i){const n=i.getArray();for(let r=0,s=n.length;r<s;++r)this.dispatchEvent(new ds(ts.REMOVELAYER,n[r]))}this.set(Tg.LAYERS,t)}getLayersArray(t){return t=t!==void 0?t:[],this.getLayers().forEach(function(i){i.getLayersArray(t)}),t}getLayerStatesArray(t){const i=t!==void 0?t:[],n=i.length;this.getLayers().forEach(function(o){o.getLayerStatesArray(i)});const r=this.getLayerState();let s=r.zIndex;!t&&r.zIndex===void 0&&(s=0);for(let o=n,a=i.length;o<a;o++){const l=i[o];l.opacity*=r.opacity,l.visible=l.visible&&r.visible,l.maxResolution=Math.min(l.maxResolution,r.maxResolution),l.minResolution=Math.max(l.minResolution,r.minResolution),l.minZoom=Math.max(l.minZoom,r.minZoom),l.maxZoom=Math.min(l.maxZoom,r.maxZoom),r.extent!==void 0&&(l.extent!==void 0?l.extent=An(l.extent,r.extent):l.extent=r.extent),l.zIndex===void 0&&(l.zIndex=s)}return i}getSourceState(){return"ready"}}const sn={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"};class tl extends Kw{constructor(t){const i=Object.assign({},t);delete i.source,super(i),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,t.render&&(this.render=t.render),t.map&&this.setMap(t.map),this.addChangeListener(se.SOURCE,this.handleSourcePropertyChange_);const n=t.source?t.source:null;this.setSource(n)}getLayersArray(t){return t=t||[],t.push(this),t}getLayerStatesArray(t){return t=t||[],t.push(this.getLayerState()),t}getSource(){return this.get(se.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const t=this.getSource();return t?t.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(de(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const t=this.getSource();t&&(this.sourceChangeKey_=Yt(t,Mt.CHANGE,this.handleSourceChange_,this),t.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(t){return this.renderer_?this.renderer_.getFeatures(t):Promise.resolve([])}getData(t){return!this.renderer_||!this.rendered?null:this.renderer_.getData(t)}isVisible(t){let i;const n=this.getMapInternal();!t&&n&&(t=n.getView()),t instanceof Xn?i={viewState:t.getState(),extent:t.calculateExtent()}:i=t,!i.layerStatesArray&&n&&(i.layerStatesArray=n.getLayerGroup().getLayerStatesArray());let r;if(i.layerStatesArray){if(r=i.layerStatesArray.find(o=>o.layer===this),!r)return!1}else r=this.getLayerState();const s=this.getExtent();return sy(r,i.viewState)&&(!s||we(s,i.extent))}getAttributions(t){if(!this.isVisible(t))return[];const i=this.getSource()?.getAttributions();if(!i)return[];const n=t instanceof Xn?t.getViewStateAndExtent():t;let r=i(n);return Array.isArray(r)||(r=[r]),r}render(t,i){const n=this.getRenderer();return n.prepareFrame(t)?(this.rendered=!0,n.renderFrame(t,i)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(t,i){}renderDeferred(t){const i=this.getRenderer();i&&i.renderDeferred(t)}setMapInternal(t){t||this.unrender(),this.set(se.MAP,t)}getMapInternal(){return this.get(se.MAP)}setMap(t){this.mapPrecomposeKey_&&(de(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(de(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=Yt(t,sn.PRECOMPOSE,this.handlePrecompose_,this),this.mapRenderKey_=Yt(this,Mt.CHANGE,t.render,t),this.changed())}handlePrecompose_(t){const i=t.frameState.layerStatesArray,n=this.getLayerState(!1);Zt(!i.some(r=>r.layer===n.layer),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),i.push(n)}setSource(t){this.set(se.SOURCE,t)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}clearRenderer(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_)}disposeInternal(){this.clearRenderer(),this.setSource(null),super.disposeInternal()}}function sy(e,t){if(!e.visible)return!1;const i=t.resolution;if(i<e.minResolution||i>=e.maxResolution)return!1;const n=t.zoom;return n>e.minZoom&&n<=e.maxZoom}function Zw(e,t,i=0,n=e.length-1,r=KD){for(;n>i;){if(n-i>600){const l=n-i+1,c=t-i+1,h=Math.log(l),u=.5*Math.exp(2*h/3),d=.5*Math.sqrt(h*u*(l-u)/l)*(c-l/2<0?-1:1),f=Math.max(i,Math.floor(t-c*u/l+d)),g=Math.min(n,Math.floor(t+(l-c)*u/l+d));Zw(e,t,f,g,r)}const s=e[t];let o=i,a=n;for(fl(e,i,t),r(e[n],s)>0&&fl(e,i,n);o<a;){for(fl(e,o,a),o++,a--;r(e[o],s)<0;)o++;for(;r(e[a],s)>0;)a--}r(e[i],s)===0?fl(e,i,a):(a++,fl(e,a,n)),a<=t&&(i=a+1),t<=a&&(n=a-1)}}function fl(e,t,i){const n=e[t];e[t]=e[i],e[i]=n}function KD(e,t){return e<t?-1:e>t?1:0}let Jw=class{constructor(t=9){this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(t){let i=this.data;const n=[];if(!Mh(t,i))return n;const r=this.toBBox,s=[];for(;i;){for(let o=0;o<i.children.length;o++){const a=i.children[o],l=i.leaf?r(a):a;Mh(t,l)&&(i.leaf?n.push(a):kg(t,l)?this._all(a,n):s.push(a))}i=s.pop()}return n}collides(t){let i=this.data;if(!Mh(t,i))return!1;const n=[];for(;i;){for(let r=0;r<i.children.length;r++){const s=i.children[r],o=i.leaf?this.toBBox(s):s;if(Mh(t,o)){if(i.leaf||kg(t,o))return!0;n.push(s)}}i=n.pop()}return!1}load(t){if(!(t&&t.length))return this;if(t.length<this._minEntries){for(let n=0;n<t.length;n++)this.insert(t[n]);return this}let i=this._build(t.slice(),0,t.length-1,0);if(!this.data.children.length)this.data=i;else if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){const n=this.data;this.data=i,i=n}this._insert(i,this.data.height-i.height-1,!0)}return this}insert(t){return t&&this._insert(t,this.data.height-1),this}clear(){return this.data=ea([]),this}remove(t,i){if(!t)return this;let n=this.data;const r=this.toBBox(t),s=[],o=[];let a,l,c;for(;n||s.length;){if(n||(n=s.pop(),l=s[s.length-1],a=o.pop(),c=!0),n.leaf){const h=ZD(t,n.children,i);if(h!==-1)return n.children.splice(h,1),s.push(n),this._condense(s),this}!c&&!n.leaf&&kg(n,r)?(s.push(n),o.push(a),a=0,l=n,n=n.children[0]):l?(a++,n=l.children[a],c=!1):n=null}return this}toBBox(t){return t}compareMinX(t,i){return t.minX-i.minX}compareMinY(t,i){return t.minY-i.minY}toJSON(){return this.data}fromJSON(t){return this.data=t,this}_all(t,i){const n=[];for(;t;)t.leaf?i.push(...t.children):n.push(...t.children),t=n.pop();return i}_build(t,i,n,r){const s=n-i+1;let o=this._maxEntries,a;if(s<=o)return a=ea(t.slice(i,n+1)),jo(a,this.toBBox),a;r||(r=Math.ceil(Math.log(s)/Math.log(o)),o=Math.ceil(s/Math.pow(o,r-1))),a=ea([]),a.leaf=!1,a.height=r;const l=Math.ceil(s/o),c=l*Math.ceil(Math.sqrt(o));hC(t,i,n,c,this.compareMinX);for(let h=i;h<=n;h+=c){const u=Math.min(h+c-1,n);hC(t,h,u,l,this.compareMinY);for(let d=h;d<=u;d+=l){const f=Math.min(d+l-1,u);a.children.push(this._build(t,d,f,r-1))}}return jo(a,this.toBBox),a}_chooseSubtree(t,i,n,r){for(;r.push(i),!(i.leaf||r.length-1===n);){let s=1/0,o=1/0,a;for(let l=0;l<i.children.length;l++){const c=i.children[l],h=Eg(c),u=tB(t,c)-h;u<o?(o=u,s=h<s?h:s,a=c):u===o&&h<s&&(s=h,a=c)}i=a||i.children[0]}return i}_insert(t,i,n){const r=n?t:this.toBBox(t),s=[],o=this._chooseSubtree(r,this.data,i,s);for(o.children.push(t),Pl(o,r);i>=0&&s[i].children.length>this._maxEntries;)this._split(s,i),i--;this._adjustParentBBoxes(r,s,i)}_split(t,i){const n=t[i],r=n.children.length,s=this._minEntries;this._chooseSplitAxis(n,s,r);const o=this._chooseSplitIndex(n,s,r),a=ea(n.children.splice(o,n.children.length-o));a.height=n.height,a.leaf=n.leaf,jo(n,this.toBBox),jo(a,this.toBBox),i?t[i-1].children.push(a):this._splitRoot(n,a)}_splitRoot(t,i){this.data=ea([t,i]),this.data.height=t.height+1,this.data.leaf=!1,jo(this.data,this.toBBox)}_chooseSplitIndex(t,i,n){let r,s=1/0,o=1/0;for(let a=i;a<=n-i;a++){const l=Il(t,0,a,this.toBBox),c=Il(t,a,n,this.toBBox),h=eB(l,c),u=Eg(l)+Eg(c);h<s?(s=h,r=a,o=u<o?u:o):h===s&&u<o&&(o=u,r=a)}return r||n-i}_chooseSplitAxis(t,i,n){const r=t.leaf?this.compareMinX:JD,s=t.leaf?this.compareMinY:QD,o=this._allDistMargin(t,i,n,r),a=this._allDistMargin(t,i,n,s);o<a&&t.children.sort(r)}_allDistMargin(t,i,n,r){t.children.sort(r);const s=this.toBBox,o=Il(t,0,i,s),a=Il(t,n-i,n,s);let l=Lh(o)+Lh(a);for(let c=i;c<n-i;c++){const h=t.children[c];Pl(o,t.leaf?s(h):h),l+=Lh(o)}for(let c=n-i-1;c>=i;c--){const h=t.children[c];Pl(a,t.leaf?s(h):h),l+=Lh(a)}return l}_adjustParentBBoxes(t,i,n){for(let r=n;r>=0;r--)Pl(i[r],t)}_condense(t){for(let i=t.length-1,n;i>=0;i--)t[i].children.length===0?i>0?(n=t[i-1].children,n.splice(n.indexOf(t[i]),1)):this.clear():jo(t[i],this.toBBox)}};function ZD(e,t,i){if(!i)return t.indexOf(e);for(let n=0;n<t.length;n++)if(i(e,t[n]))return n;return-1}function jo(e,t){Il(e,0,e.children.length,t,e)}function Il(e,t,i,n,r){r||(r=ea(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(let s=t;s<i;s++){const o=e.children[s];Pl(r,e.leaf?n(o):o)}return r}function Pl(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function JD(e,t){return e.minX-t.minX}function QD(e,t){return e.minY-t.minY}function Eg(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function Lh(e){return e.maxX-e.minX+(e.maxY-e.minY)}function tB(e,t){return(Math.max(t.maxX,e.maxX)-Math.min(t.minX,e.minX))*(Math.max(t.maxY,e.maxY)-Math.min(t.minY,e.minY))}function eB(e,t){const i=Math.max(e.minX,t.minX),n=Math.max(e.minY,t.minY),r=Math.min(e.maxX,t.maxX),s=Math.min(e.maxY,t.maxY);return Math.max(0,r-i)*Math.max(0,s-n)}function kg(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function Mh(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function ea(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function hC(e,t,i,n,r){const s=[t,i];for(;s.length;){if(i=s.pop(),t=s.pop(),i-t<=n)continue;const o=t+Math.ceil((i-t)/n/2)*n;Zw(e,o,t,i,r),s.push(t,o,o,i)}}const oy=[NaN,NaN,NaN,0];let Rg;function iB(){return Rg||(Rg=De(1,1,void 0,{willReadFrequently:!0,desynchronized:!0})),Rg}const nB=/^rgba?\(\s*(\d+%?)\s+(\d+%?)\s+(\d+%?)(?:\s*\/\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,rB=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,sB=/^rgba?\(\s*(\d+%)\s*,\s*(\d+%)\s*,\s*(\d+%)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,oB=/^#([\da-f]{3,4}|[\da-f]{6}|[\da-f]{8})$/i;function Ih(e,t){return e.endsWith("%")?Number(e.substring(0,e.length-1))/t:Number(e)}function ic(e){throw new Error('failed to parse "'+e+'" as color')}function Qw(e){if(e.toLowerCase().startsWith("rgb")){const s=e.match(rB)||e.match(nB)||e.match(sB);if(s){const o=s[4],a=100/255;return[Ce(Ih(s[1],a)+.5|0,0,255),Ce(Ih(s[2],a)+.5|0,0,255),Ce(Ih(s[3],a)+.5|0,0,255),o!==void 0?Ce(Ih(o,100),0,1):1]}ic(e)}if(e.startsWith("#")){if(oB.test(e)){const s=e.substring(1),o=s.length<=4?1:2,a=[0,0,0,255];for(let l=0,c=s.length;l<c;l+=o){let h=parseInt(s.substring(l,l+o),16);o===1&&(h+=h<<4),a[l/o]=h}return a[3]=a[3]/255,a}ic(e)}const t=iB();t.fillStyle="#abcdef";let i=t.fillStyle;t.fillStyle=e,t.fillStyle===i&&(t.fillStyle="#fedcba",i=t.fillStyle,t.fillStyle=e,t.fillStyle===i&&ic(e));const n=t.fillStyle;if(n.startsWith("#")||n.startsWith("rgba"))return Qw(n);t.clearRect(0,0,1,1),t.fillRect(0,0,1,1);const r=Array.from(t.getImageData(0,0,1,1).data);return r[3]=Jc(r[3]/255,3),r}function aB(e){return typeof e=="string"?e:ly(e)}const lB=1024,gl={};let Ag=0;function cB(e){if(e.length===4)return e;const t=e.slice();return t[3]=1,t}function Lg(e){return e>.0031308?Math.pow(e,1/2.4)*269.025-14.025:e*3294.6}function Mg(e){return e>.2068965?Math.pow(e,3):(e-4/29)*(108/841)}function Ig(e){return e>10.314724?Math.pow((e+14.025)/269.025,2.4):e/3294.6}function Pg(e){return e>.0088564?Math.pow(e,1/3):e/(108/841)+4/29}function uC(e){const t=Ig(e[0]),i=Ig(e[1]),n=Ig(e[2]),r=Pg(t*.222488403+i*.716873169+n*.06060791),s=500*(Pg(t*.452247074+i*.399439023+n*.148375274)-r),o=200*(r-Pg(t*.016863605+i*.117638439+n*.865350722)),a=Math.atan2(o,s)*(180/Math.PI);return[116*r-16,Math.sqrt(s*s+o*o),a<0?a+360:a,e[3]]}function hB(e){const t=(e[0]+16)/116,i=e[1],n=e[2]*Math.PI/180,r=Mg(t),s=Mg(t+i/500*Math.cos(n)),o=Mg(t-i/200*Math.sin(n)),a=Lg(s*3.021973625-r*1.617392459-o*.404875592),l=Lg(s*-.943766287+r*1.916279586+o*.027607165),c=Lg(s*.069407491-r*.22898585+o*1.159737864);return[Ce(a+.5|0,0,255),Ce(l+.5|0,0,255),Ce(c+.5|0,0,255),e[3]]}function ay(e){if(e==="none")return oy;if(gl.hasOwnProperty(e))return gl[e];if(Ag>=lB){let i=0;for(const n in gl)(i++&3)===0&&(delete gl[n],--Ag)}const t=Qw(e);t.length!==4&&ic(e);for(const i of t)isNaN(i)&&ic(e);return gl[e]=t,++Ag,t}function Ba(e){return Array.isArray(e)?e:ay(e)}function ly(e){let t=e[0];t!=(t|0)&&(t=t+.5|0);let i=e[1];i!=(i|0)&&(i=i+.5|0);let n=e[2];n!=(n|0)&&(n=n+.5|0);const r=e[3]===void 0?1:Math.round(e[3]*1e3)/1e3;return"rgba("+t+","+i+","+n+","+r+")"}function dC(e){return e[0]>0&&e[1]>0}function uB(e,t,i){return i===void 0&&(i=[0,0]),i[0]=e[0]*t+.5|0,i[1]=e[1]*t+.5|0,i}function ci(e,t){return Array.isArray(e)?e:(t===void 0?t=[e,e]:(t[0]=e,t[1]=e),t)}let Po=0;const vi=1<<Po++,Ut=1<<Po++,Oi=1<<Po++,Cn=1<<Po++,vo=1<<Po++,Fl=1<<Po++,Ph=Math.pow(2,Po)-1,cy={[vi]:"boolean",[Ut]:"number",[Oi]:"string",[Cn]:"color",[vo]:"number[]",[Fl]:"size"},dB=Object.keys(cy).map(Number).sort(tr);function fB(e){return e in cy}function Ol(e){const t=[];for(const i of dB)Dl(e,i)&&t.push(cy[i]);return t.length===0?"untyped":t.length<3?t.join(" or "):t.slice(0,-1).join(", ")+", or "+t[t.length-1]}function Dl(e,t){return(e&t)===t}function es(e,t){return e===t}class ze{constructor(t,i){if(!fB(t))throw new Error(`literal expressions must have a specific type, got ${Ol(t)}`);this.type=t,this.value=i}}class gB{constructor(t,i,...n){this.type=t,this.operator=i,this.args=n}}function tS(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1,mapState:!1}}function ei(e,t,i){switch(typeof e){case"boolean":{if(es(t,Oi))return new ze(Oi,e?"true":"false");if(!Dl(t,vi))throw new Error(`got a boolean, but expected ${Ol(t)}`);return new ze(vi,e)}case"number":{if(es(t,Fl))return new ze(Fl,ci(e));if(es(t,vi))return new ze(vi,!!e);if(es(t,Oi))return new ze(Oi,e.toString());if(!Dl(t,Ut))throw new Error(`got a number, but expected ${Ol(t)}`);return new ze(Ut,e)}case"string":{if(es(t,Cn))return new ze(Cn,ay(e));if(es(t,vi))return new ze(vi,!!e);if(!Dl(t,Oi))throw new Error(`got a string, but expected ${Ol(t)}`);return new ze(Oi,e)}}if(!Array.isArray(e))throw new Error("expression must be an array or a primitive value");if(e.length===0)throw new Error("empty expression");if(typeof e[0]=="string")return TB(e,t,i);for(const n of e)if(typeof n!="number")throw new Error("expected an array of numbers");if(es(t,Fl)){if(e.length!==2)throw new Error(`expected an array of two values for a size, got ${e.length}`);return new ze(Fl,e)}if(es(t,Cn)){if(e.length===3)return new ze(Cn,[...e,1]);if(e.length===4)return new ze(Cn,e);throw new Error(`expected an array of 3 or 4 values for a color, got ${e.length}`)}if(!Dl(t,vo))throw new Error(`got an array of numbers, but expected ${Ol(t)}`);return new ze(vo,e)}const q={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",LineMetric:"line-metric",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string",Has:"has"},pB={[q.Get]:Pt(zt(1,1/0),fC),[q.Var]:Pt(zt(1,1),mB),[q.Has]:Pt(zt(1,1/0),fC),[q.Id]:Pt(yB,Ho),[q.Concat]:Pt(zt(2,1/0),Qt(Oi)),[q.GeometryType]:Pt(_B,Ho),[q.LineMetric]:Pt(Ho),[q.Resolution]:Pt(Fg,Ho),[q.Zoom]:Pt(Fg,Ho),[q.Time]:Pt(Fg,Ho),[q.Any]:Pt(zt(2,1/0),Qt(vi)),[q.All]:Pt(zt(2,1/0),Qt(vi)),[q.Not]:Pt(zt(1,1),Qt(vi)),[q.Equal]:Pt(zt(2,2),Qt(Ph)),[q.NotEqual]:Pt(zt(2,2),Qt(Ph)),[q.GreaterThan]:Pt(zt(2,2),Qt(Ut)),[q.GreaterThanOrEqualTo]:Pt(zt(2,2),Qt(Ut)),[q.LessThan]:Pt(zt(2,2),Qt(Ut)),[q.LessThanOrEqualTo]:Pt(zt(2,2),Qt(Ut)),[q.Multiply]:Pt(zt(2,1/0),gC),[q.Coalesce]:Pt(zt(2,1/0),gC),[q.Divide]:Pt(zt(2,2),Qt(Ut)),[q.Add]:Pt(zt(2,1/0),Qt(Ut)),[q.Subtract]:Pt(zt(2,2),Qt(Ut)),[q.Clamp]:Pt(zt(3,3),Qt(Ut)),[q.Mod]:Pt(zt(2,2),Qt(Ut)),[q.Pow]:Pt(zt(2,2),Qt(Ut)),[q.Abs]:Pt(zt(1,1),Qt(Ut)),[q.Floor]:Pt(zt(1,1),Qt(Ut)),[q.Ceil]:Pt(zt(1,1),Qt(Ut)),[q.Round]:Pt(zt(1,1),Qt(Ut)),[q.Sin]:Pt(zt(1,1),Qt(Ut)),[q.Cos]:Pt(zt(1,1),Qt(Ut)),[q.Atan]:Pt(zt(1,2),Qt(Ut)),[q.Sqrt]:Pt(zt(1,1),Qt(Ut)),[q.Match]:Pt(zt(4,1/0),pC,CB),[q.Between]:Pt(zt(3,3),Qt(Ut)),[q.Interpolate]:Pt(zt(6,1/0),pC,bB),[q.Case]:Pt(zt(3,1/0),xB,vB),[q.In]:Pt(zt(2,2),wB),[q.Number]:Pt(zt(1,1/0),Qt(Ph)),[q.String]:Pt(zt(1,1/0),Qt(Ph)),[q.Array]:Pt(zt(1,1/0),Qt(Ut)),[q.Color]:Pt(zt(1,4),Qt(Ut)),[q.Band]:Pt(zt(1,3),Qt(Ut)),[q.Palette]:Pt(zt(2,2),SB),[q.ToString]:Pt(zt(1,1),Qt(vi|Ut|Oi|Cn))};function fC(e,t,i){const n=e.length-1,r=new Array(n);for(let s=0;s<n;++s){const o=e[s+1];switch(typeof o){case"number":{r[s]=new ze(Ut,o);break}case"string":{r[s]=new ze(Oi,o);break}default:throw new Error(`expected a string key or numeric array index for a get operation, got ${o}`)}s===0&&i.properties.add(String(o))}return r}function mB(e,t,i){const n=e[1];if(typeof n!="string")throw new Error("expected a string argument for var operation");return i.variables.add(n),[new ze(Oi,n)]}function yB(e,t,i){i.featureId=!0}function _B(e,t,i){i.geometryType=!0}function Fg(e,t,i){i.mapState=!0}function Ho(e,t,i){const n=e[0];if(e.length!==1)throw new Error(`expected no arguments for ${n} operation`);return[]}function zt(e,t){return function(i,n,r){const s=i[0],o=i.length-1;if(e===t){if(o!==e){const a=e===1?"":"s";throw new Error(`expected ${e} argument${a} for ${s}, got ${o}`)}}else if(o<e||o>t){const a=t===1/0?`${e} or more`:`${e} to ${t}`;throw new Error(`expected ${a} arguments for ${s}, got ${o}`)}}}function gC(e,t,i){const n=e.length-1,r=new Array(n);for(let s=0;s<n;++s){const o=ei(e[s+1],t,i);r[s]=o}return r}function Qt(e){return function(t,i,n){const r=t.length-1,s=new Array(r);for(let o=0;o<r;++o){const a=ei(t[o+1],e,n);s[o]=a}return s}}function xB(e,t,i){const n=e[0],r=e.length-1;if(r%2===0)throw new Error(`expected an odd number of arguments for ${n}, got ${r} instead`)}function pC(e,t,i){const n=e[0],r=e.length-1;if(r%2===1)throw new Error(`expected an even number of arguments for operation ${n}, got ${r} instead`)}function CB(e,t,i){const n=e.length-1,r=Oi|Ut|vi,s=ei(e[1],r,i),o=ei(e[e.length-1],t,i),a=new Array(n-2);for(let l=0;l<n-2;l+=2){try{const c=ei(e[l+2],s.type,i);a[l]=c}catch(c){throw new Error(`failed to parse argument ${l+1} of match expression: ${c.message}`)}try{const c=ei(e[l+3],o.type,i);a[l+1]=c}catch(c){throw new Error(`failed to parse argument ${l+2} of match expression: ${c.message}`)}}return[s,...a,o]}function bB(e,t,i){const n=e[1];let r;switch(n[0]){case"linear":r=1;break;case"exponential":const l=n[1];if(typeof l!="number"||l<=0)throw new Error(`expected a number base for exponential interpolation, got ${JSON.stringify(l)} instead`);r=l;break;default:throw new Error(`invalid interpolation type: ${JSON.stringify(n)}`)}const s=new ze(Ut,r);let o;try{o=ei(e[2],Ut,i)}catch(l){throw new Error(`failed to parse argument 1 in interpolate expression: ${l.message}`)}const a=new Array(e.length-3);for(let l=0;l<a.length;l+=2){try{const c=ei(e[l+3],Ut,i);a[l]=c}catch(c){throw new Error(`failed to parse argument ${l+2} for interpolate expression: ${c.message}`)}try{const c=ei(e[l+4],t,i);a[l+1]=c}catch(c){throw new Error(`failed to parse argument ${l+3} for interpolate expression: ${c.message}`)}}return[s,o,...a]}function vB(e,t,i){const n=ei(e[e.length-1],t,i),r=new Array(e.length-1);for(let s=0;s<r.length-1;s+=2){try{const o=ei(e[s+1],vi,i);r[s]=o}catch(o){throw new Error(`failed to parse argument ${s} of case expression: ${o.message}`)}try{const o=ei(e[s+2],n.type,i);r[s+1]=o}catch(o){throw new Error(`failed to parse argument ${s+1} of case expression: ${o.message}`)}}return r[r.length-1]=n,r}function wB(e,t,i){let n=e[2];if(!Array.isArray(n))throw new Error('the second argument for the "in" operator must be an array');let r;if(typeof n[0]=="string"){if(n[0]!=="literal")throw new Error('for the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions');if(!Array.isArray(n[1]))throw new Error('failed to parse "in" expression: the literal operator must be followed by an array');n=n[1],r=Oi}else r=Ut;const s=new Array(n.length);for(let a=0;a<s.length;a++)try{const l=ei(n[a],r,i);s[a]=l}catch(l){throw new Error(`failed to parse haystack item ${a} for "in" expression: ${l.message}`)}return[ei(e[1],r,i),...s]}function SB(e,t,i){let n;try{n=ei(e[1],Ut,i)}catch(o){throw new Error(`failed to parse first argument in palette expression: ${o.message}`)}const r=e[2];if(!Array.isArray(r))throw new Error("the second argument of palette must be an array");const s=new Array(r.length);for(let o=0;o<s.length;o++){let a;try{a=ei(r[o],Cn,i)}catch(l){throw new Error(`failed to parse color at index ${o} in palette expression: ${l.message}`)}if(!(a instanceof ze))throw new Error(`the palette color at index ${o} must be a literal value`);s[o]=a}return[n,...s]}function Pt(...e){return function(t,i,n){const r=t[0];let s;for(let o=0;o<e.length;o++){const a=e[o](t,i,n);if(o==e.length-1){if(!a)throw new Error("expected last argument validator to return the parsed args");s=a}}return new gB(i,r,...s)}}function TB(e,t,i){const n=e[0],r=pB[n];if(!r)throw new Error(`unknown operator: ${n}`);return r(e,t,i)}function eS(e){if(!e)return"";const t=e.getType();switch(t){case"Point":case"LineString":case"Polygon":return t;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return t.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return eS(e.getGeometries()[0]);default:return""}}function iS(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function Yr(e,t,i){const n=ei(e,t,i);return On(n)}function On(e,t){if(e instanceof ze){if(e.type===Cn&&typeof e.value=="string"){const n=ay(e.value);return function(){return n}}return function(){return e.value}}const i=e.operator;switch(i){case q.Number:case q.String:case q.Coalesce:return EB(e);case q.Get:case q.Var:case q.Has:return kB(e);case q.Id:return n=>n.featureId;case q.GeometryType:return n=>n.geometryType;case q.Concat:{const n=e.args.map(r=>On(r));return r=>"".concat(...n.map(s=>s(r).toString()))}case q.Resolution:return n=>n.resolution;case q.Any:case q.All:case q.Between:case q.In:case q.Not:return AB(e);case q.Equal:case q.NotEqual:case q.LessThan:case q.LessThanOrEqualTo:case q.GreaterThan:case q.GreaterThanOrEqualTo:return RB(e);case q.Multiply:case q.Divide:case q.Add:case q.Subtract:case q.Clamp:case q.Mod:case q.Pow:case q.Abs:case q.Floor:case q.Ceil:case q.Round:case q.Sin:case q.Cos:case q.Atan:case q.Sqrt:return LB(e);case q.Case:return MB(e);case q.Match:return IB(e);case q.Interpolate:return PB(e);case q.ToString:return FB(e);default:throw new Error(`Unsupported operator ${i}`)}}function EB(e,t){const i=e.operator,n=e.args.length,r=new Array(n);for(let s=0;s<n;++s)r[s]=On(e.args[s]);switch(i){case q.Coalesce:return s=>{for(let o=0;o<n;++o){const a=r[o](s);if(typeof a<"u"&&a!==null)return a}throw new Error("Expected one of the values to be non-null")};case q.Number:case q.String:return s=>{for(let o=0;o<n;++o){const a=r[o](s);if(typeof a===i)return a}throw new Error(`Expected one of the values to be a ${i}`)};default:throw new Error(`Unsupported assertion operator ${i}`)}}function kB(e,t){const n=e.args[0].value;switch(e.operator){case q.Get:return r=>{const s=e.args;let o=r.properties[n];for(let a=1,l=s.length;a<l;++a){const h=s[a].value;o=o[h]}return o};case q.Var:return r=>r.variables[n];case q.Has:return r=>{const s=e.args;if(!(n in r.properties))return!1;let o=r.properties[n];for(let a=1,l=s.length;a<l;++a){const h=s[a].value;if(!o||!Object.hasOwn(o,h))return!1;o=o[h]}return!0};default:throw new Error(`Unsupported accessor operator ${e.operator}`)}}function RB(e,t){const i=e.operator,n=On(e.args[0]),r=On(e.args[1]);switch(i){case q.Equal:return s=>n(s)===r(s);case q.NotEqual:return s=>n(s)!==r(s);case q.LessThan:return s=>n(s)<r(s);case q.LessThanOrEqualTo:return s=>n(s)<=r(s);case q.GreaterThan:return s=>n(s)>r(s);case q.GreaterThanOrEqualTo:return s=>n(s)>=r(s);default:throw new Error(`Unsupported comparison operator ${i}`)}}function AB(e,t){const i=e.operator,n=e.args.length,r=new Array(n);for(let s=0;s<n;++s)r[s]=On(e.args[s]);switch(i){case q.Any:return s=>{for(let o=0;o<n;++o)if(r[o](s))return!0;return!1};case q.All:return s=>{for(let o=0;o<n;++o)if(!r[o](s))return!1;return!0};case q.Between:return s=>{const o=r[0](s),a=r[1](s),l=r[2](s);return o>=a&&o<=l};case q.In:return s=>{const o=r[0](s);for(let a=1;a<n;++a)if(o===r[a](s))return!0;return!1};case q.Not:return s=>!r[0](s);default:throw new Error(`Unsupported logical operator ${i}`)}}function LB(e,t){const i=e.operator,n=e.args.length,r=new Array(n);for(let s=0;s<n;++s)r[s]=On(e.args[s]);switch(i){case q.Multiply:return s=>{let o=1;for(let a=0;a<n;++a)o*=r[a](s);return o};case q.Divide:return s=>r[0](s)/r[1](s);case q.Add:return s=>{let o=0;for(let a=0;a<n;++a)o+=r[a](s);return o};case q.Subtract:return s=>r[0](s)-r[1](s);case q.Clamp:return s=>{const o=r[0](s),a=r[1](s);if(o<a)return a;const l=r[2](s);return o>l?l:o};case q.Mod:return s=>r[0](s)%r[1](s);case q.Pow:return s=>Math.pow(r[0](s),r[1](s));case q.Abs:return s=>Math.abs(r[0](s));case q.Floor:return s=>Math.floor(r[0](s));case q.Ceil:return s=>Math.ceil(r[0](s));case q.Round:return s=>Math.round(r[0](s));case q.Sin:return s=>Math.sin(r[0](s));case q.Cos:return s=>Math.cos(r[0](s));case q.Atan:return n===2?s=>Math.atan2(r[0](s),r[1](s)):s=>Math.atan(r[0](s));case q.Sqrt:return s=>Math.sqrt(r[0](s));default:throw new Error(`Unsupported numeric operator ${i}`)}}function MB(e,t){const i=e.args.length,n=new Array(i);for(let r=0;r<i;++r)n[r]=On(e.args[r]);return r=>{for(let s=0;s<i-1;s+=2)if(n[s](r))return n[s+1](r);return n[i-1](r)}}function IB(e,t){const i=e.args.length,n=new Array(i);for(let r=0;r<i;++r)n[r]=On(e.args[r]);return r=>{const s=n[0](r);for(let o=1;o<i-1;o+=2)if(s===n[o](r))return n[o+1](r);return n[i-1](r)}}function PB(e,t){const i=e.args.length,n=new Array(i);for(let r=0;r<i;++r)n[r]=On(e.args[r]);return r=>{const s=n[0](r),o=n[1](r);let a,l;for(let c=2;c<i;c+=2){const h=n[c](r);let u=n[c+1](r);const d=Array.isArray(u);if(d&&(u=cB(u)),h>=o)return c===2?u:d?OB(s,o,a,l,h,u):Bl(s,o,a,l,h,u);a=h,l=u}return l}}function FB(e,t){const i=e.operator,n=e.args.length,r=new Array(n);for(let s=0;s<n;++s)r[s]=On(e.args[s]);if(i===q.ToString)return s=>{const o=r[0](s);return e.args[0].type===Cn?ly(o):o.toString()};throw new Error(`Unsupported convert operator ${i}`)}function Bl(e,t,i,n,r,s){const o=r-i;if(o===0)return n;const a=t-i,l=e===1?a/o:(Math.pow(e,a)-1)/(Math.pow(e,o)-1);return n+l*(s-n)}function OB(e,t,i,n,r,s){if(r-i===0)return n;const a=uC(n),l=uC(s);let c=l[2]-a[2];c>180?c-=360:c<-180&&(c+=360);const h=[Bl(e,t,i,a[0],r,l[0]),Bl(e,t,i,a[1],r,l[1]),a[2]+Bl(e,t,i,0,r,c),Bl(e,t,i,n[3],r,s[3])];return hB(h)}const bt={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class hy extends Kc{constructor(t,i,n,r){super(),this.extent=t,this.pixelRatio_=n,this.resolution=i,this.state=typeof r=="function"?bt.IDLE:r,this.image_=null,this.loader=typeof r=="function"?r:null}changed(){this.dispatchEvent(Mt.CHANGE)}getExtent(){return this.extent}getImage(){return this.image_}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){if(this.state==bt.IDLE&&this.loader){this.state=bt.LOADING,this.changed();const t=this.getResolution(),i=Array.isArray(t)?t[0]:t;lw(()=>this.loader(this.getExtent(),i,this.getPixelRatio())).then(n=>{"image"in n&&(this.image_=n.image),"extent"in n&&(this.extent=n.extent),"resolution"in n&&(this.resolution=n.resolution),"pixelRatio"in n&&(this.pixelRatio_=n.pixelRatio),(n instanceof HTMLImageElement||uw&&n instanceof ImageBitmap||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement)&&(this.image_=n),this.state=bt.LOADED}).catch(n=>{this.state=bt.ERROR,console.error(n)}).finally(()=>this.changed())}}setImage(t){this.image_=t}setResolution(t){this.resolution=t}}function DB(e,t,i){const n=e;let r=!0,s=!1,o=!1;const a=[Iu(n,Mt.LOAD,function(){o=!0,s||t()})];return n.src&&k0?(s=!0,n.decode().then(function(){r&&t()}).catch(function(l){r&&(o?t():i())})):a.push(Iu(n,Mt.ERROR,i)),function(){r=!1,a.forEach(de)}}function BB(e,t){return new Promise((i,n)=>{function r(){o(),i(e)}function s(){o(),n(new Error("Image load error"))}function o(){e.removeEventListener("load",r),e.removeEventListener("error",s)}e.addEventListener("load",r),e.addEventListener("error",s)})}function nS(e,t){return t&&(e.src=t),e.src&&k0?new Promise((i,n)=>e.decode().then(()=>i(e)).catch(r=>e.complete&&e.width?i(e):n(r))):BB(e)}function ff(e,t){return t&&(e.src=t),e.src&&k0&&uw?e.decode().then(()=>createImageBitmap(e)).catch(i=>{if(e.complete&&e.width)return e;throw i}):nS(e)}class NB{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=1024}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let t=0;for(const i in this.cache_){const n=this.cache_[i];(t++&3)===0&&!n.hasListener()&&(delete this.cache_[i],delete this.patternCache_[i],--this.cacheSize_)}}}get(t,i,n){const r=Og(t,i,n);return r in this.cache_?this.cache_[r]:null}getPattern(t,i,n){const r=Og(t,i,n);return r in this.patternCache_?this.patternCache_[r]:null}set(t,i,n,r,s){const o=Og(t,i,n),a=o in this.cache_;this.cache_[o]=r,s&&(r.getImageState()===bt.IDLE&&r.load(),r.getImageState()===bt.LOADING?r.ready().then(()=>{this.patternCache_[o]=$u().createPattern(r.getImage(1),"repeat")}):this.patternCache_[o]=$u().createPattern(r.getImage(1),"repeat")),a||++this.cacheSize_}setSize(t){this.maxCacheSize_=t,this.expire()}}function Og(e,t,i){const n=i?Ba(i):"null";return t+":"+e+":"+n}const on=new NB;let pl=null;class rS extends Kc{constructor(t,i,n,r,s){super(),this.hitDetectionImage_=null,this.image_=t,this.crossOrigin_=n,this.canvas_={},this.color_=s,this.imageState_=r===void 0?bt.IDLE:r,this.size_=t&&t.width&&t.height?[t.width,t.height]:null,this.src_=i,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===bt.LOADED){pl||(pl=De(1,1,void 0,{willReadFrequently:!0})),pl.drawImage(this.image_,0,0);try{pl.getImageData(0,0,1,1),this.tainted_=!1}catch{pl=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(Mt.CHANGE)}handleImageError_(){this.imageState_=bt.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=bt.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(t){return this.image_||this.initializeImage_(),this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_}getPixelRatio(t){return this.replaceColor_(t),this.canvas_[t]?t:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const t=this.size_[0],i=this.size_[1],n=De(t,i);n.fillRect(0,0,t,i),this.hitDetectionImage_=n.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===bt.IDLE){this.image_||this.initializeImage_(),this.imageState_=bt.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&nS(this.image_,this.src_).then(t=>{this.image_=t,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(t){if(!this.color_||this.canvas_[t]||this.imageState_!==bt.LOADED)return;const i=this.image_,n=De(Math.ceil(i.width*t),Math.ceil(i.height*t)),r=n.canvas;n.scale(t,t),n.drawImage(i,0,0),n.globalCompositeOperation="multiply",n.fillStyle=aB(this.color_),n.fillRect(0,0,r.width/t,r.height/t),n.globalCompositeOperation="destination-in",n.drawImage(i,0,0),this.canvas_[t]=r}ready(){return this.ready_||(this.ready_=new Promise(t=>{if(this.imageState_===bt.LOADED||this.imageState_===bt.ERROR)t();else{const i=()=>{(this.imageState_===bt.LOADED||this.imageState_===bt.ERROR)&&(this.removeEventListener(Mt.CHANGE,i),t())};this.addEventListener(Mt.CHANGE,i)}})),this.ready_}}function zu(e,t,i,n,r,s){let o=t===void 0?void 0:on.get(t,i,r);return o||(o=new rS(e,e&&"src"in e?e.src||void 0:t,i,n,r),on.set(t,i,r,o,s)),s&&o&&!on.getPattern(t,i,r)&&on.set(t,i,r,o,s),o}function Jn(e){return e?Array.isArray(e)?ly(e):typeof e=="object"&&"src"in e?$B(e):e:null}function $B(e){if(!e.offset||!e.size)return on.getPattern(e.src,"anonymous",e.color);const t=e.src+":"+e.offset,i=on.getPattern(t,void 0,e.color);if(i)return i;const n=on.get(e.src,"anonymous",null);if(n.getImageState()!==bt.LOADED)return null;const r=De(e.size[0],e.size[1]);return r.drawImage(n.getImage(1),e.offset[0],e.offset[1],e.size[0],e.size[1],0,0,e.size[0],e.size[1]),zu(r.canvas,t,void 0,bt.LOADED,e.color,!0),on.getPattern(t,void 0,e.color)}const sS="10px sans-serif",Di="#000",Na="round",Pr=[],Fr=0,$a="round",wc=10,Sc="#000",Tc="center",Gu="middle",no=[0,0,0,0],Ec=1,ia=new Dn;let ml=null,mC;const qp={},zB=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","emoji","math","fangsong"]);function GB(e,t,i){return`${e} ${t} 16px "${i}"`}const WB=(function(){let t,i;async function n(s){await i.ready;const o=await i.load(s);if(o.length===0)return!1;const a=Vp(s),l=a.families[0].toLowerCase(),c=a.weight;return o.some(h=>{const u=h.family.replace(/^['"]|['"]$/g,"").toLowerCase(),d=Hp[h.weight]||h.weight;return u===l&&h.style===a.style&&d==c})}async function r(){await i.ready;let s=!0;const o=ia.getProperties(),a=Object.keys(o).filter(l=>o[l]<100);for(let l=a.length-1;l>=0;--l){const c=a[l];let h=o[c];h<100&&(await n(c)?(Xc(qp),ia.set(c,100)):(h+=10,ia.set(c,h,!0),h<100&&(s=!1)))}t=void 0,s||(t=setTimeout(r,100))}return async function(s){i||(i=rn?self.fonts:document.fonts);const o=Vp(s);if(!o)return;const a=o.families;let l=!1;for(const c of a){if(zB.has(c))continue;const h=GB(o.style,o.weight,c);ia.get(h)===void 0&&(ia.set(h,0,!0),l=!0)}l&&(clearTimeout(t),t=setTimeout(r,100))}})(),jB=(function(){let e;return function(t){let i=qp[t];if(i==null){if(rn){const n=Vp(t),r=oS(t,"g");i=(isNaN(Number(n.lineHeight))?1.2:Number(n.lineHeight))*(r.actualBoundingBoxAscent+r.actualBoundingBoxDescent)}else e||(e=document.createElement("div"),e.innerHTML="M",e.style.minHeight="0",e.style.maxHeight="none",e.style.height="auto",e.style.padding="0",e.style.border="none",e.style.position="absolute",e.style.display="block",e.style.left="-99999px"),e.style.font=t,document.body.appendChild(e),i=e.offsetHeight,document.body.removeChild(e);qp[t]=i}return i}})();function oS(e,t){return ml||(ml=De(1,1)),e!=mC&&(ml.font=e,mC=ml.font),ml.measureText(t)}function aS(e,t){return oS(e,t).width}function yC(e,t,i){if(t in i)return i[t];const n=t.split(`
`).reduce((r,s)=>Math.max(r,aS(e,s)),0);return i[t]=n,n}function HB(e,t){const i=[],n=[],r=[];let s=0,o=0,a=0,l=0;for(let c=0,h=t.length;c<=h;c+=2){const u=t[c];if(u===`
`||c===h){s=Math.max(s,o),r.push(o),o=0,a+=l,l=0;continue}const d=t[c+1]||e.font,f=aS(d,u);i.push(f),o+=f;const g=jB(d);n.push(g),l=Math.max(l,g)}return{width:s,height:a,widths:i,heights:n,lineWidths:r}}function VB(e,t,i,n,r,s,o,a,l,c,h){e.save(),i!==1&&(e.globalAlpha===void 0?e.globalAlpha=u=>u.globalAlpha*=i:e.globalAlpha*=i),t&&e.transform.apply(e,t),n.contextInstructions?(e.translate(l,c),e.scale(h[0],h[1]),UB(n,e)):h[0]<0||h[1]<0?(e.translate(l,c),e.scale(h[0],h[1]),e.drawImage(n,r,s,o,a,0,0,o,a)):e.drawImage(n,r,s,o,a,l,c,o*h[0],a*h[1]),e.restore()}function UB(e,t){const i=e.contextInstructions;for(let n=0,r=i.length;n<r;n+=2)Array.isArray(i[n+1])?t[i[n]].apply(t,i[n+1]):t[i[n]]=i[n+1]}class gf{constructor(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.scaleArray_=ci(t.scale),this.displacement_=t.displacement,this.declutterMode_=t.declutterMode}clone(){const t=this.getScale();return new gf({opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return Gt()}getImage(t){return Gt()}getHitDetectionImage(){return Gt()}getPixelRatio(t){return 1}getImageState(){return Gt()}getImageSize(){return Gt()}getOrigin(){return Gt()}getSize(){return Gt()}setDisplacement(t){this.displacement_=t}setOpacity(t){this.opacity_=t}setRotateWithView(t){this.rotateWithView_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=ci(t)}listenImageChange(t){Gt()}load(){Gt()}unlistenImageChange(t){Gt()}ready(){return Promise.resolve()}}class pf extends gf{constructor(t){super({opacity:1,rotateWithView:t.rotateWithView!==void 0?t.rotateWithView:!1,rotation:t.rotation!==void 0?t.rotation:0,scale:t.scale!==void 0?t.scale:1,displacement:t.displacement!==void 0?t.displacement:[0,0],declutterMode:t.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=t.fill!==void 0?t.fill:null,this.origin_=[0,0],this.points_=t.points,this.radius=t.radius,this.radius2_=t.radius2,this.angle_=t.angle!==void 0?t.angle:0,this.stroke_=t.stroke!==void 0?t.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?bt.LOADING:bt.LOADED,this.imageState_===bt.LOADING&&this.ready().then(()=>this.imageState_=bt.LOADED),this.render()}clone(){const t=this.getScale(),i=new pf({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return i.setOpacity(this.getOpacity()),i}getAnchor(){const t=this.size_,i=this.getDisplacement(),n=this.getScaleArray();return[t[0]/2-i[0]/n[0],t[1]/2+i[1]/n[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(t){this.fill_=t,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(t){const i=this.fill_?.getKey(),n=`${t},${this.angle_},${this.radius},${this.radius2_},${this.points_},${i}`+Object.values(this.renderOptions_).join(",");let r=on.get(n,null,null)?.getImage(1);if(!r){const s=this.renderOptions_,o=Math.ceil(s.size*t),a=De(o,o);this.draw_(s,a,t),r=a.canvas,on.set(n,null,null,new rS(r,void 0,null,bt.LOADED,null))}return r}getPixelRatio(t){return t}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t,this.render()}listenImageChange(t){}load(){}unlistenImageChange(t){}calculateLineJoinSize_(t,i,n){if(i===0||this.points_===1/0||t!=="bevel"&&t!=="miter")return i;let r=this.radius,s=this.radius2_===void 0?r:this.radius2_;if(r<s){const S=r;r=s,s=S}const o=this.radius2_===void 0?this.points_:this.points_*2,a=2*Math.PI/o,l=s*Math.sin(a),c=Math.sqrt(s*s-l*l),h=r-c,u=Math.sqrt(l*l+h*h),d=u/l;if(t==="miter"&&d<=n)return d*i;const f=i/2/d,g=i/2*(h/u),m=Math.sqrt((r+f)*(r+f)+g*g)-r;if(this.radius2_===void 0||t==="bevel")return m*2;const y=r*Math.sin(a),_=Math.sqrt(r*r-y*y),C=s-_,v=Math.sqrt(y*y+C*C)/y;if(v<=n){const S=v*i/2-s-r;return 2*Math.max(m,S)}return m*2}createRenderOptions(){let t=Na,i=$a,n=0,r=null,s=0,o,a=0;this.stroke_&&(o=Jn(this.stroke_.getColor()??Sc),a=this.stroke_.getWidth()??Ec,r=this.stroke_.getLineDash(),s=this.stroke_.getLineDashOffset()??0,i=this.stroke_.getLineJoin()??$a,t=this.stroke_.getLineCap()??Na,n=this.stroke_.getMiterLimit()??wc);const l=this.calculateLineJoinSize_(i,a,n),c=Math.max(this.radius,this.radius2_||0),h=Math.ceil(2*c+l);return{strokeStyle:o,strokeWidth:a,size:h,lineCap:t,lineDash:r,lineDashOffset:s,lineJoin:i,miterLimit:n}}render(){this.renderOptions_=this.createRenderOptions();const t=this.renderOptions_.size;this.hitDetectionCanvas_=null,this.size_=[t,t]}draw_(t,i,n){if(i.scale(n,n),i.translate(t.size/2,t.size/2),this.createPath_(i),this.fill_){let r=this.fill_.getColor();r===null&&(r=Di),i.fillStyle=Jn(r),i.fill()}t.strokeStyle&&(i.strokeStyle=t.strokeStyle,i.lineWidth=t.strokeWidth,t.lineDash&&(i.setLineDash(t.lineDash),i.lineDashOffset=t.lineDashOffset),i.lineCap=t.lineCap,i.lineJoin=t.lineJoin,i.miterLimit=t.miterLimit,i.stroke())}createHitDetectionCanvas_(t){let i;if(this.fill_){let n=this.fill_.getColor(),r=0;typeof n=="string"&&(n=Ba(n)),n===null?r=1:Array.isArray(n)&&(r=n.length===4?n[3]:1),r===0&&(i=De(t.size,t.size),this.drawHitDetectionCanvas_(t,i))}return i?i.canvas:this.getImage(1)}createPath_(t){let i=this.points_;const n=this.radius;if(i===1/0)t.arc(0,0,n,0,2*Math.PI);else{const r=this.radius2_===void 0?n:this.radius2_;this.radius2_!==void 0&&(i*=2);const s=this.angle_-Math.PI/2,o=2*Math.PI/i;for(let a=0;a<i;a++){const l=s+a*o,c=a%2===0?n:r;t.lineTo(c*Math.cos(l),c*Math.sin(l))}t.closePath()}}drawHitDetectionCanvas_(t,i){i.translate(t.size/2,t.size/2),this.createPath_(i),i.fillStyle=Di,i.fill(),t.strokeStyle&&(i.strokeStyle=t.strokeStyle,i.lineWidth=t.strokeWidth,t.lineDash&&(i.setLineDash(t.lineDash),i.lineDashOffset=t.lineDashOffset),i.lineJoin=t.lineJoin,i.miterLimit=t.miterLimit,i.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}class mf extends pf{constructor(t){t=t||{radius:5},super({points:1/0,fill:t.fill,radius:t.radius,stroke:t.stroke,scale:t.scale!==void 0?t.scale:1,rotation:t.rotation!==void 0?t.rotation:0,rotateWithView:t.rotateWithView!==void 0?t.rotateWithView:!1,displacement:t.displacement!==void 0?t.displacement:[0,0],declutterMode:t.declutterMode})}clone(){const t=this.getScale(),i=new mf({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return i.setOpacity(this.getOpacity()),i}setRadius(t){this.radius=t,this.render()}}class Ts{constructor(t){t=t||{},this.patternImage_=null,this.color_=null,t.color!==void 0&&this.setColor(t.color)}clone(){const t=this.getColor();return new Ts({color:Array.isArray(t)?t.slice():t||void 0})}getColor(){return this.color_}setColor(t){if(t!==null&&typeof t=="object"&&"src"in t){const i=zu(null,t.src,"anonymous",void 0,t.offset?null:t.color?t.color:null,!(t.offset&&t.size));i.ready().then(()=>{this.patternImage_=null}),i.getImageState()===bt.IDLE&&i.load(),i.getImageState()===bt.LOADING&&(this.patternImage_=i)}this.color_=t}getKey(){const t=this.getColor();return t?t instanceof CanvasPattern||t instanceof CanvasGradient?Nt(t):typeof t=="object"&&"src"in t?t.src+":"+t.offset:Ba(t).toString():""}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}function _C(e,t,i,n){return i!==void 0&&n!==void 0?[i/e,n/t]:i!==void 0?i/e:n!==void 0?n/t:1}class Es extends gf{constructor(t){t=t||{};const i=t.opacity!==void 0?t.opacity:1,n=t.rotation!==void 0?t.rotation:0,r=t.scale!==void 0?t.scale:1,s=t.rotateWithView!==void 0?t.rotateWithView:!1;super({opacity:i,rotation:n,scale:r,displacement:t.displacement!==void 0?t.displacement:[0,0],rotateWithView:s,declutterMode:t.declutterMode}),this.anchor_=t.anchor!==void 0?t.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=t.anchorOrigin!==void 0?t.anchorOrigin:"top-left",this.anchorXUnits_=t.anchorXUnits!==void 0?t.anchorXUnits:"fraction",this.anchorYUnits_=t.anchorYUnits!==void 0?t.anchorYUnits:"fraction",this.crossOrigin_=t.crossOrigin!==void 0?t.crossOrigin:null;const o=t.img!==void 0?t.img:null;let a=t.src;Zt(!(a!==void 0&&o),"`image` and `src` cannot be provided at the same time"),(a===void 0||a.length===0)&&o&&(a=o.src||Nt(o)),Zt(a!==void 0&&a.length>0,"A defined and non-empty `src` or `image` must be provided"),Zt(!((t.width!==void 0||t.height!==void 0)&&t.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let l;if(t.src!==void 0?l=bt.IDLE:o!==void 0&&("complete"in o?o.complete?l=o.src?bt.LOADED:bt.IDLE:l=bt.LOADING:l=bt.LOADED),this.color_=t.color!==void 0?Ba(t.color):null,this.iconImage_=zu(o,a,this.crossOrigin_,l,this.color_),this.offset_=t.offset!==void 0?t.offset:[0,0],this.offsetOrigin_=t.offsetOrigin!==void 0?t.offsetOrigin:"top-left",this.origin_=null,this.size_=t.size!==void 0?t.size:null,this.initialOptions_,t.width!==void 0||t.height!==void 0){let c,h;if(t.size)[c,h]=t.size;else{const u=this.getImage(1);if(u.width&&u.height)c=u.width,h=u.height;else if(u instanceof HTMLImageElement){this.initialOptions_=t;const d=()=>{if(this.unlistenImageChange(d),!this.initialOptions_)return;const f=this.iconImage_.getSize();this.setScale(_C(f[0],f[1],t.width,t.height))};this.listenImageChange(d);return}}c!==void 0&&this.setScale(_C(c,h,t.width,t.height))}}clone(){let t,i,n;return this.initialOptions_?(i=this.initialOptions_.width,n=this.initialOptions_.height):(t=this.getScale(),t=Array.isArray(t)?t.slice():t),new Es({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:t,width:i,height:n,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let t=this.normalizedAnchor_;if(!t){t=this.anchor_;const r=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!r)return null;t=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(t[0]*=r[0]),this.anchorYUnits_=="fraction"&&(t[1]*=r[1])}if(this.anchorOrigin_!="top-left"){if(!r)return null;t===this.anchor_&&(t=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(t[0]=-t[0]+r[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(t[1]=-t[1]+r[1])}this.normalizedAnchor_=t}const i=this.getDisplacement(),n=this.getScaleArray();return[t[0]-i[0]/n[0],t[1]+i[1]/n[1]]}setAnchor(t){this.anchor_=t,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(t){return this.iconImage_.getImage(t)}getPixelRatio(t){return this.iconImage_.getPixelRatio(t)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let t=this.offset_;if(this.offsetOrigin_!="top-left"){const i=this.getSize(),n=this.iconImage_.getSize();if(!i||!n)return null;t=t.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(t[0]=n[0]-i[0]-t[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(t[1]=n[1]-i[1]-t[1])}return this.origin_=t,this.origin_}getSrc(){return this.iconImage_.getSrc()}setSrc(t){this.iconImage_=zu(null,t,this.crossOrigin_,bt.IDLE,this.color_)}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const t=this.getScaleArray();if(this.size_)return this.size_[0]*t[0];if(this.iconImage_.getImageState()==bt.LOADED)return this.iconImage_.getSize()[0]*t[0]}getHeight(){const t=this.getScaleArray();if(this.size_)return this.size_[1]*t[1];if(this.iconImage_.getImageState()==bt.LOADED)return this.iconImage_.getSize()[1]*t[1]}setScale(t){delete this.initialOptions_,super.setScale(t)}listenImageChange(t){this.iconImage_.addEventListener(Mt.CHANGE,t)}load(){this.iconImage_.load()}unlistenImageChange(t){this.iconImage_.removeEventListener(Mt.CHANGE,t)}ready(){return this.iconImage_.ready()}}class wo{constructor(t){t=t||{},this.color_=t.color!==void 0?t.color:null,this.lineCap_=t.lineCap,this.lineDash_=t.lineDash!==void 0?t.lineDash:null,this.lineDashOffset_=t.lineDashOffset,this.lineJoin_=t.lineJoin,this.miterLimit_=t.miterLimit,this.width_=t.width}clone(){const t=this.getColor();return new wo({color:Array.isArray(t)?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(t){this.color_=t}setLineCap(t){this.lineCap_=t}setLineDash(t){this.lineDash_=t}setLineDashOffset(t){this.lineDashOffset_=t}setLineJoin(t){this.lineJoin_=t}setMiterLimit(t){this.miterLimit_=t}setWidth(t){this.width_=t}}class ir{constructor(t){t=t||{},this.geometry_=null,this.geometryFunction_=xC,t.geometry!==void 0&&this.setGeometry(t.geometry),this.fill_=t.fill!==void 0?t.fill:null,this.image_=t.image!==void 0?t.image:null,this.renderer_=t.renderer!==void 0?t.renderer:null,this.hitDetectionRenderer_=t.hitDetectionRenderer!==void 0?t.hitDetectionRenderer:null,this.stroke_=t.stroke!==void 0?t.stroke:null,this.text_=t.text!==void 0?t.text:null,this.zIndex_=t.zIndex}clone(){let t=this.getGeometry();return t&&typeof t=="object"&&(t=t.clone()),new ir({geometry:t??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(t){this.renderer_=t}setHitDetectionRenderer(t){this.hitDetectionRenderer_=t}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(t){this.fill_=t}getImage(){return this.image_}setImage(t){this.image_=t}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t}getText(){return this.text_}setText(t){this.text_=t}getZIndex(){return this.zIndex_}setGeometry(t){typeof t=="function"?this.geometryFunction_=t:typeof t=="string"?this.geometryFunction_=function(i){return i.get(t)}:t?t!==void 0&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=xC,this.geometry_=t}setZIndex(t){this.zIndex_=t}}function qB(e){let t;if(typeof e=="function")t=e;else{let i;Array.isArray(e)?i=e:(Zt(typeof e.getZIndex=="function","Expected an `Style` or an array of `Style`"),i=[e]),t=function(){return i}}return t}let Dg=null;function lS(e,t){if(!Dg){const i=new Ts({color:"rgba(255,255,255,0.4)"}),n=new wo({color:"#3399CC",width:1.25});Dg=[new ir({image:new mf({fill:i,stroke:n,radius:5}),fill:i,stroke:n})]}return Dg}function xC(e){return e.getGeometry()}const YB="#333";class kc{constructor(t){t=t||{},this.font_=t.font,this.rotation_=t.rotation,this.rotateWithView_=t.rotateWithView,this.keepUpright_=t.keepUpright,this.scale_=t.scale,this.scaleArray_=ci(t.scale!==void 0?t.scale:1),this.text_=t.text,this.textAlign_=t.textAlign,this.justify_=t.justify,this.repeat_=t.repeat,this.textBaseline_=t.textBaseline,this.fill_=t.fill!==void 0?t.fill:new Ts({color:YB}),this.maxAngle_=t.maxAngle!==void 0?t.maxAngle:Math.PI/4,this.placement_=t.placement!==void 0?t.placement:"point",this.overflow_=!!t.overflow,this.stroke_=t.stroke!==void 0?t.stroke:null,this.offsetX_=t.offsetX!==void 0?t.offsetX:0,this.offsetY_=t.offsetY!==void 0?t.offsetY:0,this.backgroundFill_=t.backgroundFill?t.backgroundFill:null,this.backgroundStroke_=t.backgroundStroke?t.backgroundStroke:null,this.padding_=t.padding===void 0?null:t.padding,this.declutterMode_=t.declutterMode}clone(){const t=this.getScale();return new kc({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),keepUpright:this.getKeepUpright(),scale:Array.isArray(t)?t.slice():t,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()instanceof Ts?this.getFill().clone():this.getFill(),stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getKeepUpright(){return this.keepUpright_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(t){this.overflow_=t}setFont(t){this.font_=t}setMaxAngle(t){this.maxAngle_=t}setOffsetX(t){this.offsetX_=t}setOffsetY(t){this.offsetY_=t}setPlacement(t){this.placement_=t}setRepeat(t){this.repeat_=t}setRotateWithView(t){this.rotateWithView_=t}setKeepUpright(t){this.keepUpright_=t}setFill(t){this.fill_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=ci(t!==void 0?t:1)}setStroke(t){this.stroke_=t}setText(t){this.text_=t}setTextAlign(t){this.textAlign_=t}setJustify(t){this.justify_=t}setTextBaseline(t){this.textBaseline_=t}setBackgroundFill(t){this.backgroundFill_=t}setBackgroundStroke(t){this.backgroundStroke_=t}setPadding(t){this.padding_=t}}function XB(e){return!0}function KB(e){const t=tS(),i=ZB(e,t),n=iS();return function(r,s){if(n.properties=r.getPropertiesInternal(),n.resolution=s,t.featureId){const o=r.getId();o!==void 0?n.featureId=o:n.featureId=null}return t.geometryType&&(n.geometryType=eS(r.getGeometry())),i(n)}}function CC(e){const t=tS(),i=e.length,n=new Array(i);for(let o=0;o<i;++o)n[o]=Yp(e[o],t);const r=iS(),s=new Array(i);return function(o,a){if(r.properties=o.getPropertiesInternal(),r.resolution=a,t.featureId){const c=o.getId();c!==void 0?r.featureId=c:r.featureId=null}let l=0;for(let c=0;c<i;++c){const h=n[c](r);h&&(s[l]=h,l+=1)}return s.length=l,s}}function ZB(e,t){const i=e.length,n=new Array(i);for(let r=0;r<i;++r){const s=e[r],o="filter"in s?Yr(s.filter,vi,t):XB;let a;if(Array.isArray(s.style)){const l=s.style.length;a=new Array(l);for(let c=0;c<l;++c)a[c]=Yp(s.style[c],t)}else a=[Yp(s.style,t)];n[r]={filter:o,styles:a}}return function(r){const s=[];let o=!1;for(let a=0;a<i;++a){const l=n[a].filter;if(l(r)&&!(e[a].else&&o)){o=!0;for(const c of n[a].styles){const h=c(r);h&&s.push(h)}}}return s}}function Yp(e,t){const i=Rc(e,"",t),n=Ac(e,"",t),r=JB(e,t),s=QB(e,t),o=$i(e,"z-index",t);if(!i&&!n&&!r&&!s&&!_o(e))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(e));const a=new ir;return function(l){let c=!0;if(i){const h=i(l);h&&(c=!1),a.setFill(h)}if(n){const h=n(l);h&&(c=!1),a.setStroke(h)}if(r){const h=r(l);h&&(c=!1),a.setText(h)}if(s){const h=s(l);h&&(c=!1),a.setImage(h)}return o&&a.setZIndex(o(l)),c?null:a}}function Rc(e,t,i){let n;if(t+"fill-pattern-src"in e)n=n3(e,t+"fill-",i);else{if(e[t+"fill-color"]==="none")return s=>null;n=uy(e,t+"fill-color",i)}if(!n)return null;const r=new Ts;return function(s){const o=n(s);return o===oy?null:(r.setColor(o),r)}}function Ac(e,t,i){const n=$i(e,t+"stroke-width",i),r=uy(e,t+"stroke-color",i);if(!n&&!r)return null;const s=Lr(e,t+"stroke-line-cap",i),o=Lr(e,t+"stroke-line-join",i),a=cS(e,t+"stroke-line-dash",i),l=$i(e,t+"stroke-line-dash-offset",i),c=$i(e,t+"stroke-miter-limit",i),h=new wo;return function(u){if(r){const d=r(u);if(d===oy)return null;h.setColor(d)}if(n&&h.setWidth(n(u)),s){const d=s(u);if(d!=="butt"&&d!=="round"&&d!=="square")throw new Error("Expected butt, round, or square line cap");h.setLineCap(d)}if(o){const d=o(u);if(d!=="bevel"&&d!=="round"&&d!=="miter")throw new Error("Expected bevel, round, or miter line join");h.setLineJoin(d)}return a&&h.setLineDash(a(u)),l&&h.setLineDashOffset(l(u)),c&&h.setMiterLimit(c(u)),h}}function JB(e,t){const i="text-",n=Lr(e,i+"value",t);if(!n)return null;const r=Rc(e,i,t),s=Rc(e,i+"background-",t),o=Ac(e,i,t),a=Ac(e,i+"background-",t),l=Lr(e,i+"font",t),c=$i(e,i+"max-angle",t),h=$i(e,i+"offset-x",t),u=$i(e,i+"offset-y",t),d=ya(e,i+"overflow",t),f=Lr(e,i+"placement",t),g=$i(e,i+"repeat",t),p=yf(e,i+"scale",t),m=ya(e,i+"rotate-with-view",t),y=$i(e,i+"rotation",t),_=Lr(e,i+"align",t),C=Lr(e,i+"justify",t),b=Lr(e,i+"baseline",t),v=ya(e,i+"keep-upright",t),S=cS(e,i+"padding",t),w=_f(e,i+"declutter-mode"),L=new kc({declutterMode:w});return function(A){if(L.setText(n(A)),r&&L.setFill(r(A)),s&&L.setBackgroundFill(s(A)),o&&L.setStroke(o(A)),a&&L.setBackgroundStroke(a(A)),l&&L.setFont(l(A)),c&&L.setMaxAngle(c(A)),h&&L.setOffsetX(h(A)),u&&L.setOffsetY(u(A)),d&&L.setOverflow(d(A)),f){const B=f(A);if(B!=="point"&&B!=="line")throw new Error("Expected point or line for text-placement");L.setPlacement(B)}if(g&&L.setRepeat(g(A)),p&&L.setScale(p(A)),m&&L.setRotateWithView(m(A)),y&&L.setRotation(y(A)),_){const B=_(A);if(B!=="left"&&B!=="center"&&B!=="right"&&B!=="end"&&B!=="start")throw new Error("Expected left, right, center, start, or end for text-align");L.setTextAlign(B)}if(C){const B=C(A);if(B!=="left"&&B!=="right"&&B!=="center")throw new Error("Expected left, right, or center for text-justify");L.setJustify(B)}if(b){const B=b(A);if(B!=="bottom"&&B!=="top"&&B!=="middle"&&B!=="alphabetic"&&B!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");L.setTextBaseline(B)}return S&&L.setPadding(S(A)),v&&L.setKeepUpright(v(A)),L}}function QB(e,t){return"icon-src"in e?t3(e,t):"shape-points"in e?e3(e,t):"circle-radius"in e?i3(e,t):null}function t3(e,t){const i="icon-",n=i+"src",r=hS(e[n],n),s=Wu(e,i+"anchor",t),o=yf(e,i+"scale",t),a=$i(e,i+"opacity",t),l=Wu(e,i+"displacement",t),c=$i(e,i+"rotation",t),h=ya(e,i+"rotate-with-view",t),u=vC(e,i+"anchor-origin"),d=wC(e,i+"anchor-x-units"),f=wC(e,i+"anchor-y-units"),g=a3(e,i+"color"),p=s3(e,i+"cross-origin"),m=o3(e,i+"offset"),y=vC(e,i+"offset-origin"),_=ju(e,i+"width"),C=ju(e,i+"height"),b=r3(e,i+"size"),v=_f(e,i+"declutter-mode"),S=new Es({src:r,anchorOrigin:u,anchorXUnits:d,anchorYUnits:f,color:g,crossOrigin:p,offset:m,offsetOrigin:y,height:C,width:_,size:b,declutterMode:v});return function(w){return a&&S.setOpacity(a(w)),l&&S.setDisplacement(l(w)),c&&S.setRotation(c(w)),h&&S.setRotateWithView(h(w)),o&&S.setScale(o(w)),s&&S.setAnchor(s(w)),S}}function e3(e,t){const i="shape-",n=i+"points",r=i+"radius",s=Xp(e[n],n),o=Xp(e[r],r),a=Rc(e,i,t),l=Ac(e,i,t),c=yf(e,i+"scale",t),h=Wu(e,i+"displacement",t),u=$i(e,i+"rotation",t),d=ya(e,i+"rotate-with-view",t),f=ju(e,i+"radius2"),g=ju(e,i+"angle"),p=_f(e,i+"declutter-mode"),m=new pf({points:s,radius:o,radius2:f,angle:g,declutterMode:p});return function(y){return a&&m.setFill(a(y)),l&&m.setStroke(l(y)),h&&m.setDisplacement(h(y)),u&&m.setRotation(u(y)),d&&m.setRotateWithView(d(y)),c&&m.setScale(c(y)),m}}function i3(e,t){const i="circle-",n=Rc(e,i,t),r=Ac(e,i,t),s=$i(e,i+"radius",t),o=yf(e,i+"scale",t),a=Wu(e,i+"displacement",t),l=$i(e,i+"rotation",t),c=ya(e,i+"rotate-with-view",t),h=_f(e,i+"declutter-mode"),u=new mf({radius:5,declutterMode:h});return function(d){return s&&u.setRadius(s(d)),n&&u.setFill(n(d)),r&&u.setStroke(r(d)),a&&u.setDisplacement(a(d)),l&&u.setRotation(l(d)),c&&u.setRotateWithView(c(d)),o&&u.setScale(o(d)),u}}function $i(e,t,i){if(!(t in e))return;const n=Yr(e[t],Ut,i);return function(r){return Xp(n(r),t)}}function Lr(e,t,i){if(!(t in e))return null;const n=Yr(e[t],Oi,i);return function(r){return hS(n(r),t)}}function n3(e,t,i){const n=Lr(e,t+"pattern-src",i),r=bC(e,t+"pattern-offset",i),s=bC(e,t+"pattern-size",i),o=uy(e,t+"color",i);return function(a){return{src:n(a),offset:r&&r(a),size:s&&s(a),color:o&&o(a)}}}function ya(e,t,i){if(!(t in e))return null;const n=Yr(e[t],vi,i);return function(r){const s=n(r);if(typeof s!="boolean")throw new Error(`Expected a boolean for ${t}`);return s}}function uy(e,t,i){if(!(t in e))return null;const n=Yr(e[t],Cn,i);return function(r){return uS(n(r),t)}}function cS(e,t,i){if(!(t in e))return null;const n=Yr(e[t],vo,i);return function(r){return rh(n(r),t)}}function Wu(e,t,i){if(!(t in e))return null;const n=Yr(e[t],vo,i);return function(r){const s=rh(n(r),t);if(s.length!==2)throw new Error(`Expected two numbers for ${t}`);return s}}function bC(e,t,i){if(!(t in e))return null;const n=Yr(e[t],vo,i);return function(r){return dS(n(r),t)}}function yf(e,t,i){if(!(t in e))return null;const n=Yr(e[t],vo|Ut,i);return function(r){return l3(n(r),t)}}function ju(e,t){const i=e[t];if(i!==void 0){if(typeof i!="number")throw new Error(`Expected a number for ${t}`);return i}}function r3(e,t){const i=e[t];if(i!==void 0){if(typeof i=="number")return ci(i);if(!Array.isArray(i))throw new Error(`Expected a number or size array for ${t}`);if(i.length!==2||typeof i[0]!="number"||typeof i[1]!="number")throw new Error(`Expected a number or size array for ${t}`);return i}}function s3(e,t){const i=e[t];if(i!==void 0){if(typeof i!="string")throw new Error(`Expected a string for ${t}`);return i}}function vC(e,t){const i=e[t];if(i!==void 0){if(i!=="bottom-left"&&i!=="bottom-right"&&i!=="top-left"&&i!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${t}`);return i}}function wC(e,t){const i=e[t];if(i!==void 0){if(i!=="pixels"&&i!=="fraction")throw new Error(`Expected pixels or fraction for ${t}`);return i}}function o3(e,t){const i=e[t];if(i!==void 0)return rh(i,t)}function _f(e,t){const i=e[t];if(i!==void 0){if(typeof i!="string")throw new Error(`Expected a string for ${t}`);if(i!=="declutter"&&i!=="obstacle"&&i!=="none")throw new Error(`Expected declutter, obstacle, or none for ${t}`);return i}}function a3(e,t){const i=e[t];if(i!==void 0)return uS(i,t)}function rh(e,t){if(!Array.isArray(e))throw new Error(`Expected an array for ${t}`);const i=e.length;for(let n=0;n<i;++n)if(typeof e[n]!="number")throw new Error(`Expected an array of numbers for ${t}`);return e}function hS(e,t){if(typeof e!="string")throw new Error(`Expected a string for ${t}`);return e}function Xp(e,t){if(typeof e!="number")throw new Error(`Expected a number for ${t}`);return e}function uS(e,t){if(typeof e=="string")return e;const i=rh(e,t),n=i.length;if(n<3||n>4)throw new Error(`Expected a color with 3 or 4 values for ${t}`);return i}function dS(e,t){const i=rh(e,t);if(i.length!==2)throw new Error(`Expected an array of two numbers for ${t}`);return i}function l3(e,t){return typeof e=="number"?e:dS(e,t)}const SC={RENDER_ORDER:"renderOrder"};class xf extends tl{constructor(t){t=t||{};const i=Object.assign({},t);delete i.style,delete i.renderBuffer,delete i.updateWhileAnimating,delete i.updateWhileInteracting,super(i),this.declutter_=t.declutter?String(t.declutter):void 0,this.renderBuffer_=t.renderBuffer!==void 0?t.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(t.style),this.updateWhileAnimating_=t.updateWhileAnimating!==void 0?t.updateWhileAnimating:!1,this.updateWhileInteracting_=t.updateWhileInteracting!==void 0?t.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(t){return super.getFeatures(t)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(SC.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(t,i){const n=this.getDeclutter();n in t.declutter||(t.declutter[n]=new Jw(9)),this.getRenderer().renderDeclutter(t,i)}setRenderOrder(t){this.set(SC.RENDER_ORDER,t)}setStyle(t){this.style_=t===void 0?lS:t;const i=c3(t);this.styleFunction_=t===null?void 0:qB(i),this.changed()}setDeclutter(t){this.declutter_=t?String(t):void 0,this.changed()}}function c3(e){if(e===void 0)return lS;if(!e)return null;if(typeof e=="function"||e instanceof ir)return e;if(!Array.isArray(e))return CC([e]);if(e.length===0)return[];const t=e.length,i=e[0];if(i instanceof ir){const r=new Array(t);for(let s=0;s<t;++s){const o=e[s];if(!(o instanceof ir))throw new Error("Expected a list of style instances");r[s]=o}return r}if("style"in i){const r=new Array(t);for(let s=0;s<t;++s){const o=e[s];if(!("style"in o))throw new Error("Expected a list of rules with a style property");r[s]=o}return KB(r)}return CC(e)}class fS extends cr{constructor(t,i,n,r){super(t),this.inversePixelTransform=i,this.frameState=n,this.context=r}}class h3 extends Jd{constructor(t){super(),this.map_=t}dispatchRenderEvent(t,i){Gt()}calculateMatrices2D(t){const i=t.viewState,n=t.coordinateToPixelTransform,r=t.pixelToCoordinateTransform;sr(n,t.size[0]/2,t.size[1]/2,1/i.resolution,-1/i.resolution,-i.rotation,-i.center[0],-i.center[1]),Iw(r,n)}forEachFeatureAtCoordinate(t,i,n,r,s,o,a,l){let c;const h=i.viewState;function u(b,v,S,w){return s.call(o,v,b?S:null,w)}const d=h.projection,f=P0(t.slice(),d),g=[[0,0]];if(d.canWrapX()&&r){const b=d.getExtent(),v=qt(b);g.push([-v,0],[v,0])}const p=i.layerStatesArray,m=p.length,y=[],_=[];for(let b=0;b<g.length;b++)for(let v=m-1;v>=0;--v){const S=p[v],w=S.layer;if(w.hasRenderer()&&sy(S,h)&&a.call(l,w)){const L=w.getRenderer(),A=w.getSource();if(L&&A){const B=A.getWrapX()?f:t,O=u.bind(null,S.managed);_[0]=B[0]+g[b][0],_[1]=B[1]+g[b][1],c=L.forEachFeatureAtCoordinate(_,i,n,O,y)}if(c)return c}}if(y.length===0)return;const C=1/y.length;return y.forEach((b,v)=>b.distanceSq+=v*C),y.sort((b,v)=>b.distanceSq-v.distanceSq),y.some(b=>c=b.callback(b.feature,b.layer,b.geometry)),c}hasFeatureAtCoordinate(t,i,n,r,s,o){return this.forEachFeatureAtCoordinate(t,i,n,r,yc,this,s,o)!==void 0}getMap(){return this.map_}renderFrame(t){Gt()}scheduleExpireIconCache(t){on.canExpireCache()&&t.postRenderFunctions.push(u3)}}function u3(e,t){on.expire()}class d3 extends h3{constructor(t){super(t),this.fontChangeListenerKey_=Yt(ia,Oa.PROPERTYCHANGE,t.redrawText,t),this.element_=rn?Vw():document.createElement("div");const i=this.element_.style;i.position="absolute",i.width="100%",i.height="100%",i.zIndex="0",this.element_.className=df+" ol-layers";const n=t.getViewport();n&&n.insertBefore(this.element_,n.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(t,i){const n=this.getMap();if(n.hasListener(t)){const r=new fS(t,void 0,i);n.dispatchEvent(r)}}disposeInternal(){de(this.fontChangeListenerKey_),this.element_.remove(),super.disposeInternal()}renderFrame(t){if(!t){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(t),this.dispatchRenderEvent(sn.PRECOMPOSE,t);const i=t.layerStatesArray.sort((c,h)=>c.zIndex-h.zIndex);i.some(c=>c.layer instanceof xf&&c.layer.getDeclutter())&&(t.declutter={});const r=t.viewState;this.children_.length=0;const s=[];let o=null;for(let c=0,h=i.length;c<h;++c){const u=i[c];t.layerIndex=c;const d=u.layer,f=d.getSourceState();if(!sy(u,r)||f!="ready"&&f!="undefined"){d.unrender();continue}const g=d.render(t,o);g&&(g!==o&&(this.children_.push(g),o=g),s.push(u))}this.declutter(t,s),wD(this.element_,this.children_);const l=this.getMap().getTargetElement();if(ms(l)){const c=l.getContext("2d");for(const h of this.children_){const u=h.firstElementChild||h,d=h.style.backgroundColor;if(d&&(!ms(u)||u.width>0)&&(c.fillStyle=d,c.fillRect(0,0,l.width,l.height)),ms(u)&&u.width>0){const f=h.style.opacity||u.style.opacity;c.globalAlpha=f===""?1:Number(f);const g=u.style.transform;if(g)c.setTransform(...zp(g));else{const p=parseFloat(u.style.width)/u.width,m=parseFloat(u.style.height)/u.height;c.setTransform(p,0,0,m,0,0)}c.drawImage(u,0,0)}}c.globalAlpha=1,c.setTransform(1,0,0,1,0,0)}this.dispatchRenderEvent(sn.POSTCOMPOSE,t),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(t)}declutter(t,i){if(t.declutter){for(let n=i.length-1;n>=0;--n){const r=i[n],s=r.layer;s.getDeclutter()&&s.renderDeclutter(t,r)}i.forEach(n=>n.layer.renderDeferred(t))}}}function gS(e){if(e instanceof tl){e.setMapInternal(null);return}e instanceof Wr&&e.getLayers().forEach(gS)}function pS(e,t){if(e instanceof tl){e.setMapInternal(t);return}if(e instanceof Wr){const i=e.getLayers().getArray();for(let n=0,r=i.length;n<r;++n)pS(i[n],t)}}let f3=class extends Dn{constructor(t){super(),t=t||{},this.on,this.once,this.un;const i=g3(t);this.renderComplete_=!1,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=t.maxTilesLoading!==void 0?t.maxTilesLoading:16,this.pixelRatio_=t.pixelRatio!==void 0?t.pixelRatio:hw,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=Yi(),this.pixelToCoordinateTransform_=Yi(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,rn||(this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_)),this.mapBrowserEventHandler_=null,this.moveTolerance_=t.moveTolerance,this.keyboardEventTarget_=i.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,rn||(this.resizeObserver_=new ResizeObserver(()=>this.updateSize())),this.controls=i.controls||(rn?new nn:kD()),this.interactions=i.interactions||(rn?new nn:XD({onFocusOnly:!0})),this.overlays_=i.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new XF(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(ri.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(ri.VIEW,this.handleViewChanged_),this.addChangeListener(ri.SIZE,this.handleSizeChanged_),this.addChangeListener(ri.TARGET,this.handleTargetChanged_),this.setProperties(i.values);const n=this;t.view&&!(t.view instanceof Xn)&&t.view.then(function(r){n.setView(new Xn(r))}),this.controls.addEventListener(Fi.ADD,r=>{r.element.setMap(this)}),this.controls.addEventListener(Fi.REMOVE,r=>{r.element.setMap(null)}),this.interactions.addEventListener(Fi.ADD,r=>{r.element.setMap(this)}),this.interactions.addEventListener(Fi.REMOVE,r=>{r.element.setMap(null)}),this.overlays_.addEventListener(Fi.ADD,r=>{this.addOverlayInternal_(r.element)}),this.overlays_.addEventListener(Fi.REMOVE,r=>{const s=r.element.getId();s!==void 0&&delete this.overlayIdIndex_[s.toString()],r.element.setMap(null)}),this.controls.forEach(r=>{r.setMap(this)}),this.interactions.forEach(r=>{r.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(t){this.getControls().push(t)}addInteraction(t){this.getInteractions().push(t)}addLayer(t){this.getLayerGroup().getLayers().push(t)}handleLayerAdd_(t){pS(t.layer,this)}addOverlay(t){this.getOverlays().push(t)}addOverlayInternal_(t){const i=t.getId();i!==void 0&&(this.overlayIdIndex_[i.toString()]=t),t.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_?.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(t,i,n){if(!this.frameState_||!this.renderer_)return;const r=this.getCoordinateFromPixelInternal(t);n=n!==void 0?n:{};const s=n.hitTolerance!==void 0?n.hitTolerance:0,o=n.layerFilter!==void 0?n.layerFilter:yc,a=n.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(r,this.frameState_,s,a,i,null,o,null)}getFeaturesAtPixel(t,i){const n=[];return this.forEachFeatureAtPixel(t,function(r){n.push(r)},i),n}getAllLayers(){const t=[];function i(n){n.forEach(function(r){r instanceof Wr?i(r.getLayers()):t.push(r)})}return i(this.getLayers()),t}hasFeatureAtPixel(t,i){if(!this.frameState_||!this.renderer_)return!1;const n=this.getCoordinateFromPixelInternal(t);i=i!==void 0?i:{};const r=i.layerFilter!==void 0?i.layerFilter:yc,s=i.hitTolerance!==void 0?i.hitTolerance:0,o=i.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(n,this.frameState_,s,o,r,null)}getEventCoordinate(t){return this.getCoordinateFromPixel(this.getEventPixel(t))}getEventCoordinateInternal(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))}getEventPixel(t){const n=this.viewport_.getBoundingClientRect(),r=this.getSize(),s=n.width/r[0],o=n.height/r[1],a="changedTouches"in t?t.changedTouches[0]:t;return[(a.clientX-n.left)/s,(a.clientY-n.top)/o]}getTarget(){return this.get(ri.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(t){return $p(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())}getCoordinateFromPixelInternal(t){const i=this.frameState_;return i?Fe(i.pixelToCoordinateTransform,t.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(t){const i=this.overlayIdIndex_[t.toString()];return i!==void 0?i:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(ri.LAYERGROUP)}setLayers(t){const i=this.getLayerGroup();if(t instanceof nn){i.setLayers(t);return}const n=i.getLayers();n.clear(),n.extend(t)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const t=this.getLayerGroup().getLayerStatesArray();for(let i=0,n=t.length;i<n;++i){const r=t[i];if(!r.visible)continue;const s=r.layer.getRenderer();if(s&&!s.ready)return!0;const o=r.layer.getSource();if(o&&o.loading)return!0}return!1}getPixelFromCoordinate(t){const i=wr(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(i)}getPixelFromCoordinateInternal(t){const i=this.frameState_;return i?Fe(i.coordinateToPixelTransform,t.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(ri.SIZE)}getView(){return this.get(ri.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const t=this.getTargetElement();return t?t.ownerDocument:document}getTilePriority(t,i,n,r){return KF(this.frameState_,t,i,n,r)}handleBrowserEvent(t,i){i=i||t.type;const n=new os(i,this,t);this.handleMapBrowserEvent(n)}handleMapBrowserEvent(t){if(!this.frameState_)return;const i=t.originalEvent,n=i.type;if(n===Ip.POINTERDOWN||n===Mt.WHEEL||n===Mt.KEYDOWN){const r=this.getOwnerDocument(),s=this.viewport_.getRootNode?this.viewport_.getRootNode():r,o=i.target,a=s instanceof ShadowRoot?s.host===o?s.host.ownerDocument:s:s===r?r.documentElement:s;if(this.overlayContainerStopEvent_.contains(o)||!a.contains(o))return}if(t.frameState=this.frameState_,this.dispatchEvent(t)!==!1){const r=this.getInteractions().getArray().slice();for(let s=r.length-1;s>=0;s--){const o=r[s];if(o.getMap()!==this||!o.getActive()||!this.getTargetElement())continue;if(!o.handleEvent(t)||t.propagationStopped)break}}}handlePostRender(){const t=this.frameState_,i=this.tileQueue_;if(!i.isEmpty()){let r=this.maxTilesLoading_,s=r;if(t){const o=t.viewHints;if(o[xe.ANIMATING]||o[xe.INTERACTING]){const a=Date.now()-t.time>8;r=a?0:8,s=a?0:2}}i.getTilesLoading()<r&&(i.reprioritize(),i.loadMoreTiles(r,s))}t&&this.renderer_&&!t.animate&&(this.renderComplete_?(this.hasListener(sn.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(sn.RENDERCOMPLETE,t),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new ta(kr.LOADEND,this,t)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new ta(kr.LOADSTART,this,t))));const n=this.postRenderFunctions_;if(t)for(let r=0,s=n.length;r<s;++r)n[r](this,t);n.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let n=0,r=this.targetChangeHandlerKeys_.length;n<r;++n)de(this.targetChangeHandlerKeys_[n]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(Mt.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(Mt.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,this.viewport_.remove()}if(this.targetElement_&&!ms(this.targetElement_)){this.resizeObserver_?.unobserve(this.targetElement_);const n=this.targetElement_.getRootNode();n instanceof ShadowRoot&&this.resizeObserver_.unobserve(n.host),this.setSize(void 0)}const t=this.getTarget(),i=typeof t=="string"?document.getElementById(t):t;if(this.targetElement_=i,!i)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{if(ms(i)||i.appendChild(this.viewport_),this.renderer_||(this.renderer_=new d3(this)),!ms(i)){this.mapBrowserEventHandler_=new qF(this,this.moveTolerance_);for(const r in be)this.mapBrowserEventHandler_.addEventListener(be[r],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(Mt.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(Mt.WHEEL,this.boundHandleBrowserEvent_,dw?{passive:!1}:!1);let n;if(this.keyboardEventTarget_)n=this.keyboardEventTarget_;else{const r=i.getRootNode();n=r instanceof ShadowRoot?r.host:i}if(this.targetChangeHandlerKeys_=[Yt(n,Mt.KEYDOWN,this.handleBrowserEvent,this),Yt(n,Mt.KEYPRESS,this.handleBrowserEvent,this)],i instanceof HTMLElement){const r=i.getRootNode();r instanceof ShadowRoot&&this.resizeObserver_.observe(r.host),this.resizeObserver_?.observe(i)}}this.updateSize()}}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(de(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(de(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const t=this.getView();t&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=Yt(t,Oa.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Yt(t,Mt.CHANGE,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(de),this.layerGroupPropertyListenerKeys_=null);const t=this.getLayerGroup();t&&(this.handleLayerAdd_(new ds("addlayer",t)),this.layerGroupPropertyListenerKeys_=[Yt(t,Oa.PROPERTYCHANGE,this.render,this),Yt(t,Mt.CHANGE,this.render,this),Yt(t,"addlayer",this.handleLayerAdd_,this),Yt(t,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){if(!this.frameState_)return;const t=this.frameState_.layerStatesArray;for(let i=0,n=t.length;i<n;++i){const r=t[i].layer;r.hasRenderer()&&r.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(t){return this.getControls().remove(t)}removeInteraction(t){return this.getInteractions().remove(t)}removeLayer(t){return this.getLayerGroup().getLayers().remove(t)}handleLayerRemove_(t){gS(t.layer)}removeOverlay(t){return this.getOverlays().remove(t)}renderFrame_(t){const i=this.getSize(),n=this.getView(),r=this.frameState_;let s=null;if(i!==void 0&&dC(i)&&n&&n.isDef()){const o=n.getHints(this.frameState_?this.frameState_.viewHints:void 0),a=n.getState();if(s={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:xc(a.center,a.resolution,a.rotation,i),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:i,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:a,viewHints:o,wantedTiles:{},mapId:Nt(this),renderTargets:{}},a.nextCenter&&a.nextResolution){const l=isNaN(a.nextRotation)?a.rotation:a.nextRotation;s.nextExtent=xc(a.nextCenter,a.nextResolution,l,i)}}this.frameState_=s,this.renderer_.renderFrame(s),s&&(s.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,s.postRenderFunctions),r&&(!this.previousExtent_||!Io(this.previousExtent_)&&!bo(s.extent,this.previousExtent_))&&(this.dispatchEvent(new ta(kr.MOVESTART,this,r)),this.previousExtent_=Qc(this.previousExtent_)),this.previousExtent_&&!s.viewHints[xe.ANIMATING]&&!s.viewHints[xe.INTERACTING]&&!bo(s.extent,this.previousExtent_)&&(this.dispatchEvent(new ta(kr.MOVEEND,this,s)),fw(s.extent,this.previousExtent_))),this.dispatchEvent(new ta(kr.POSTRENDER,this,s)),this.renderComplete_=(this.hasListener(kr.LOADSTART)||this.hasListener(kr.LOADEND)||this.hasListener(sn.RENDERCOMPLETE))&&!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady(),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(t){const i=this.getLayerGroup();i&&this.handleLayerRemove_(new ds("removelayer",i)),this.set(ri.LAYERGROUP,t)}setSize(t){this.set(ri.SIZE,t)}setTarget(t){this.set(ri.TARGET,t)}setView(t){if(!t||t instanceof Xn){this.set(ri.VIEW,t);return}this.set(ri.VIEW,new Xn);const i=this;t.then(function(n){i.setView(new Xn(n))})}updateSize(){const t=this.getTargetElement();let i;if(t){let r,s;if(ms(t))r=t.width,s=t.height;else{const o=getComputedStyle(t);r=t.offsetWidth-parseFloat(o.borderLeftWidth)-parseFloat(o.paddingLeft)-parseFloat(o.paddingRight)-parseFloat(o.borderRightWidth),s=t.offsetHeight-parseFloat(o.borderTopWidth)-parseFloat(o.paddingTop)-parseFloat(o.paddingBottom)-parseFloat(o.borderBottomWidth)}!isNaN(r)&&!isNaN(s)&&(i=[Math.max(0,r),Math.max(0,s)],!dC(i)&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&&Sw("No map visible because the map container's width or height are 0."))}const n=this.getSize();i&&(!n||!Ms(i,n))&&(this.setSize(i),this.updateViewportSize_(i))}updateViewportSize_(t){const i=this.getView();i&&i.setViewportSize(t)}};function g3(e){let t=null;e.keyboardEventTarget!==void 0&&(t=typeof e.keyboardEventTarget=="string"?document.getElementById(e.keyboardEventTarget):e.keyboardEventTarget);const i={},n=e.layers&&typeof e.layers.getLayers=="function"?e.layers:new Wr({layers:e.layers});i[ri.LAYERGROUP]=n,i[ri.TARGET]=e.target,i[ri.VIEW]=e.view instanceof Xn?e.view:new Xn;let r;e.controls!==void 0&&(Array.isArray(e.controls)?r=new nn(e.controls.slice()):(Zt(typeof e.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),r=e.controls));let s;e.interactions!==void 0&&(Array.isArray(e.interactions)?s=new nn(e.interactions.slice()):(Zt(typeof e.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),s=e.interactions));let o;return e.overlays!==void 0?Array.isArray(e.overlays)?o=new nn(e.overlays.slice()):(Zt(typeof e.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),o=e.overlays):o=new nn,{controls:r,interactions:s,keyboardEventTarget:t,overlays:o,values:i}}class sh extends Kc{constructor(t,i,n){super(),n=n||{},this.tileCoord=t,this.state=i,this.key="",this.transition_=n.transition===void 0?250:n.transition,this.transitionStarts_={},this.interpolate=!!n.interpolate}changed(){this.dispatchEvent(Mt.CHANGE)}release(){this.setState(ct.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(t){if(this.state!==ct.EMPTY){if(this.state!==ct.ERROR&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()}}load(){Gt()}getAlpha(t,i){if(!this.transition_)return 1;let n=this.transitionStarts_[t];if(!n)n=i,this.transitionStarts_[t]=n;else if(n===-1)return 1;const r=i-n+1e3/60;return r>=this.transition_?1:vw(r/this.transition_)}inTransition(t){return this.transition_?this.transitionStarts_[t]!==-1:!1}endTransition(t){this.transition_&&(this.transitionStarts_[t]=-1)}disposeInternal(){this.release(),super.disposeInternal()}}function Kp(e){return e instanceof Image||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageBitmap?e:null}const p3=new Error("disposed"),m3=[256,256];class TC extends sh{constructor(t){const i=ct.IDLE;super(t.tileCoord,i,{transition:t.transition,interpolate:t.interpolate}),this.loader_=t.loader,this.data_=null,this.error_=null,this.size_=t.size||null,this.controller_=t.controller||null}getSize(){if(this.size_)return this.size_;const t=Kp(this.data_);return t?[t.width,t.height]:m3}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==ct.IDLE&&this.state!==ct.ERROR)return;this.state=ct.LOADING,this.changed();const t=this;this.loader_().then(function(i){t.data_=i,t.state=ct.LOADED,t.changed()}).catch(function(i){t.error_=i,t.state=ct.ERROR,t.changed()})}disposeInternal(){this.controller_&&(this.controller_.abort(p3),this.controller_=null),super.disposeInternal()}}class mS extends sh{constructor(t,i,n,r,s,o){super(t,i,o),this.crossOrigin_=r,this.src_=n,this.key=n,this.image_,rn?this.image_=new OffscreenCanvas(1,1):(this.image_=new Image,r!==null&&(this.image_.crossOrigin=r)),this.unlisten_=null,this.tileLoadFunction_=s}getImage(){return this.image_}setImage(t){this.image_=t,this.state=ct.LOADED,this.unlistenImage_(),this.changed()}getCrossOrigin(){return this.crossOrigin_}handleImageError_(){this.state=ct.ERROR,this.unlistenImage_(),this.image_=y3(),this.changed()}handleImageLoad_(){if(rn)this.state=ct.LOADED;else{const t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=ct.LOADED:this.state=ct.EMPTY}this.unlistenImage_(),this.changed()}load(){this.state==ct.ERROR&&(this.state=ct.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==ct.IDLE&&(this.state=ct.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=DB(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}disposeInternal(){this.unlistenImage_(),this.image_=null,super.disposeInternal()}}function y3(){const e=De(1,1);return e.fillStyle="rgba(0,0,0,0)",e.fillRect(0,0,1,1),e.canvas}class dy{constructor(t,i,n,r){this.minX=t,this.maxX=i,this.minY=n,this.maxY=r}contains(t){return this.containsXY(t[1],t[2])}containsTileRange(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY}containsXY(t,i){return this.minX<=t&&t<=this.maxX&&this.minY<=i&&i<=this.maxY}equals(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY}extend(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY}}function Vo(e,t,i,n,r){return r!==void 0?(r.minX=e,r.maxX=t,r.minY=i,r.maxY=n,r):new dy(e,t,i,n)}let Bg;const _a=[];function EC(e,t,i,n,r){e.beginPath(),e.moveTo(0,0),e.lineTo(t,i),e.lineTo(n,r),e.closePath(),e.save(),e.clip(),e.fillRect(0,0,Math.max(t,n)+1,Math.max(i,r)),e.restore()}function Ng(e,t){return Math.abs(e[t*4]-210)>2||Math.abs(e[t*4+3]-.75*255)>2}function _3(){if(Bg===void 0){const e=De(6,6,_a);e.globalCompositeOperation="lighter",e.fillStyle="rgba(210, 0, 0, 0.75)",EC(e,4,5,4,0),EC(e,4,5,0,5);const t=e.getImageData(0,0,3,3).data;Bg=Ng(t,0)||Ng(t,4)||Ng(t,8),eh(e),_a.push(e.canvas)}return Bg}function Lc(e,t,i,n){const r=Qa(i,t,e);let s=Kx(t,n,i);const o=t.getMetersPerUnit();o!==void 0&&(s*=o);const a=e.getMetersPerUnit();a!==void 0&&(s/=a);const l=e.getExtent();if(!l||Co(l,r)){const c=Kx(e,s,r)/s;isFinite(c)&&c>0&&(s/=c)}return s}function x3(e,t,i,n){const r=hn(i);let s=Lc(e,t,r,n);return(!isFinite(s)||s<=0)&&mw(i,function(o){return s=Lc(e,t,o,n),isFinite(s)&&s>0}),s}function yS(e,t,i,n,r,s,o,a,l,c,h,u,d,f){const g=De(Math.round(i*e),Math.round(i*t),_a);if(u||(g.imageSmoothingEnabled=!1),l.length===0)return g.canvas;g.scale(i,i);function p(v){return Math.round(v*i)/i}g.globalCompositeOperation="lighter";const m=ki();l.forEach(function(v,S,w){gw(m,v.extent)});let y;const _=i/n,C=(u?1:1+Math.pow(2,-24))/_;if(!d||l.length!==1||c!==0){if(y=De(Math.round(qt(m)*_),Math.round(ke(m)*_),_a),u||(y.imageSmoothingEnabled=!1),r&&f){const v=(r[0]-m[0])*_,S=-(r[3]-m[3])*_,w=qt(r)*_,L=ke(r)*_;y.rect(v,S,w,L),y.clip()}l.forEach(function(v,S,w){if(v.image.width>0&&v.image.height>0){if(v.clipExtent){y.save();const F=(v.clipExtent[0]-m[0])*_,R=-(v.clipExtent[3]-m[3])*_,T=qt(v.clipExtent)*_,P=ke(v.clipExtent)*_;y.rect(u?F:Math.round(F),u?R:Math.round(R),u?T:Math.round(F+T)-Math.round(F),u?P:Math.round(R+P)-Math.round(R)),y.clip()}const L=(v.extent[0]-m[0])*_,A=-(v.extent[3]-m[3])*_,B=qt(v.extent)*_,O=ke(v.extent)*_;y.drawImage(v.image,c,c,v.image.width-2*c,v.image.height-2*c,u?L:Math.round(L),u?A:Math.round(A),u?B:Math.round(L+B)-Math.round(L),u?O:Math.round(A+O)-Math.round(A)),v.clipExtent&&y.restore()}})}const b=Is(o);return a.getTriangles().forEach(function(v,S,w){const L=v.source,A=v.target;let B=L[0][0],O=L[0][1],F=L[1][0],R=L[1][1],T=L[2][0],P=L[2][1];const E=p((A[0][0]-b[0])/s),D=p(-(A[0][1]-b[1])/s),M=p((A[1][0]-b[0])/s),j=p(-(A[1][1]-b[1])/s),Y=p((A[2][0]-b[0])/s),K=p(-(A[2][1]-b[1])/s),G=B,Q=O;B=0,O=0,F-=G,R-=Q,T-=G,P-=Q;const ut=[[F,R,0,0,M-E],[T,P,0,0,Y-E],[0,0,F,R,j-D],[0,0,T,P,K-D]],at=JF(ut);if(!at)return;if(g.save(),g.beginPath(),_3()||!u){g.moveTo(M,j);const W=4,et=E-M,J=D-j;for(let it=0;it<W;it++)g.lineTo(M+p((it+1)*et/W),j+p(it*J/(W-1))),it!=W-1&&g.lineTo(M+p((it+1)*et/W),j+p((it+1)*J/(W-1)));g.lineTo(Y,K)}else g.moveTo(M,j),g.lineTo(E,D),g.lineTo(Y,K);g.clip(),g.transform(at[0],at[2],at[1],at[3],E,D),g.translate(m[0]-G,m[3]-Q);let It;if(y)It=y.canvas,g.scale(C,-C);else{const W=l[0],et=W.extent;It=W.image,g.scale(qt(et)/It.width,-ke(et)/It.height)}g.drawImage(It,0,0),g.restore()}),y&&(eh(y),_a.push(y.canvas)),h&&(g.save(),g.globalCompositeOperation="source-over",g.strokeStyle="black",g.lineWidth=1,a.getTriangles().forEach(function(v,S,w){const L=v.target,A=(L[0][0]-b[0])/s,B=-(L[0][1]-b[1])/s,O=(L[1][0]-b[0])/s,F=-(L[1][1]-b[1])/s,R=(L[2][0]-b[0])/s,T=-(L[2][1]-b[1])/s;g.beginPath(),g.moveTo(O,F),g.lineTo(A,B),g.lineTo(R,T),g.closePath(),g.stroke()}),g.restore()),g.canvas}const C3=10,kC=.25;class _S{constructor(t,i,n,r,s,o,a){this.sourceProj_=t,this.targetProj_=i;let l={};const c=a?DO(C=>Fe(a,Qa(C,this.targetProj_,this.sourceProj_))):rr(this.targetProj_,this.sourceProj_);this.transformInv_=function(C){const b=C[0]+"/"+C[1];return l[b]||(l[b]=c(C)),l[b]},this.maxSourceExtent_=r,this.errorThresholdSquared_=s*s,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!r&&!!this.sourceProj_.getExtent()&&qt(r)>=qt(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?qt(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?qt(this.targetProj_.getExtent()):null;const h=Is(n),u=rf(n),d=nf(n),f=ef(n),g=this.transformInv_(h),p=this.transformInv_(u),m=this.transformInv_(d),y=this.transformInv_(f),_=C3+(o?Math.max(0,Math.ceil(Math.log2(Op(n)/(o*o*256*256)))):0);if(this.addQuad_(h,u,d,f,g,p,m,y,_),this.wrapsXInSource_){let C=1/0;this.triangles_.forEach(function(b,v,S){C=Math.min(C,b.source[0][0],b.source[1][0],b.source[2][0])}),this.triangles_.forEach(b=>{if(Math.max(b.source[0][0],b.source[1][0],b.source[2][0])-C>this.sourceWorldWidth_/2){const v=[[b.source[0][0],b.source[0][1]],[b.source[1][0],b.source[1][1]],[b.source[2][0],b.source[2][1]]];v[0][0]-C>this.sourceWorldWidth_/2&&(v[0][0]-=this.sourceWorldWidth_),v[1][0]-C>this.sourceWorldWidth_/2&&(v[1][0]-=this.sourceWorldWidth_),v[2][0]-C>this.sourceWorldWidth_/2&&(v[2][0]-=this.sourceWorldWidth_);const S=Math.min(v[0][0],v[1][0],v[2][0]);Math.max(v[0][0],v[1][0],v[2][0])-S<this.sourceWorldWidth_/2&&(b.source=v)}})}l={}}addTriangle_(t,i,n,r,s,o){this.triangles_.push({source:[r,s,o],target:[t,i,n]})}addQuad_(t,i,n,r,s,o,a,l,c){const h=Ou([s,o,a,l]),u=this.sourceWorldWidth_?qt(h)/this.sourceWorldWidth_:null,d=this.sourceWorldWidth_,f=this.sourceProj_.canWrapX()&&u>.5&&u<1;let g=!1;if(c>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const m=Ou([t,i,n,r]);g=qt(m)/this.targetWorldWidth_>kC||g}!f&&this.sourceProj_.isGlobal()&&u&&(g=u>kC||g)}if(!g&&this.maxSourceExtent_&&isFinite(h[0])&&isFinite(h[1])&&isFinite(h[2])&&isFinite(h[3])&&!we(h,this.maxSourceExtent_))return;let p=0;if(!g&&(!isFinite(s[0])||!isFinite(s[1])||!isFinite(o[0])||!isFinite(o[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(l[0])||!isFinite(l[1]))){if(c>0)g=!0;else if(p=(!isFinite(s[0])||!isFinite(s[1])?8:0)+(!isFinite(o[0])||!isFinite(o[1])?4:0)+(!isFinite(a[0])||!isFinite(a[1])?2:0)+(!isFinite(l[0])||!isFinite(l[1])?1:0),p!=1&&p!=2&&p!=4&&p!=8)return}if(c>0){if(!g){const m=[(t[0]+n[0])/2,(t[1]+n[1])/2],y=this.transformInv_(m);let _;f?_=(go(s[0],d)+go(a[0],d))/2-go(y[0],d):_=(s[0]+a[0])/2-y[0];const C=(s[1]+a[1])/2-y[1];g=_*_+C*C>this.errorThresholdSquared_}if(g){if(Math.abs(t[0]-n[0])<=Math.abs(t[1]-n[1])){const m=[(i[0]+n[0])/2,(i[1]+n[1])/2],y=this.transformInv_(m),_=[(r[0]+t[0])/2,(r[1]+t[1])/2],C=this.transformInv_(_);this.addQuad_(t,i,m,_,s,o,y,C,c-1),this.addQuad_(_,m,n,r,C,y,a,l,c-1)}else{const m=[(t[0]+i[0])/2,(t[1]+i[1])/2],y=this.transformInv_(m),_=[(n[0]+r[0])/2,(n[1]+r[1])/2],C=this.transformInv_(_);this.addQuad_(t,m,_,r,s,y,C,l,c-1),this.addQuad_(m,i,n,_,y,o,a,C,c-1)}return}}if(f){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}(p&11)==0&&this.addTriangle_(t,n,r,s,a,l),(p&14)==0&&this.addTriangle_(t,n,i,s,a,o),p&&((p&13)==0&&this.addTriangle_(i,r,t,o,l,s),(p&7)==0&&this.addTriangle_(i,r,n,o,l,a))}calculateSourceExtent(){const t=ki();return this.triangles_.forEach(function(i,n,r){const s=i.source;tc(t,s[0]),tc(t,s[1]),tc(t,s[2])}),t}getTriangles(){return this.triangles_}}const xS=.5;class CS extends sh{constructor(t,i,n,r,s,o,a,l,c,h,u,d){super(s,ct.IDLE,d),this.renderEdges_=u!==void 0?u:!1,this.pixelRatio_=a,this.gutter_=l,this.canvas_=null,this.sourceTileGrid_=i,this.targetTileGrid_=r,this.wrappedTileCoord_=o||s,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=t.canWrapX()?t.getExtent():void 0;const f=r.getTileCoordExtent(this.wrappedTileCoord_),g=this.targetTileGrid_.getExtent();let p=this.sourceTileGrid_.getExtent();const m=g?An(f,g):f;if(Op(m)===0){this.state=ct.EMPTY;return}const y=t.getExtent();y&&(p?p=An(p,y):p=y);const _=r.getResolution(this.wrappedTileCoord_[0]),C=x3(t,n,m,_);if(!isFinite(C)||C<=0){this.state=ct.EMPTY;return}const b=h!==void 0?h:xS;if(this.triangulation_=new _S(t,n,m,p,C*b,_),this.triangulation_.getTriangles().length===0){this.state=ct.EMPTY;return}this.sourceZ_=i.getZForResolution(C);let v=this.triangulation_.calculateSourceExtent();if(p&&(t.canWrapX()?(v[1]=Ce(v[1],p[1],p[3]),v[3]=Ce(v[3],p[1],p[3])):v=An(v,p)),!Op(v))this.state=ct.EMPTY;else{let S=0,w=0;t.canWrapX()&&(S=qt(y),w=Math.floor((v[0]-y[0])/S)),xw(v.slice(),t,!0).forEach(A=>{const B=i.getTileRangeForExtentAndZ(A,this.sourceZ_);for(let O=B.minX;O<=B.maxX;O++)for(let F=B.minY;F<=B.maxY;F++){const R=c(this.sourceZ_,O,F,a);if(R){const T=w*S;this.sourceTiles_.push({tile:R,offset:T})}}++w}),this.sourceTiles_.length===0&&(this.state=ct.EMPTY)}}getImage(){return this.canvas_}reproject_(){const t=[];if(this.sourceTiles_.forEach(i=>{const n=i.tile;if(n&&n.getState()==ct.LOADED){const r=this.sourceTileGrid_.getTileCoordExtent(n.tileCoord);r[0]+=i.offset,r[2]+=i.offset;const s=this.clipExtent_?.slice();s&&(s[0]+=i.offset,s[2]+=i.offset),t.push({extent:r,clipExtent:s,image:n.getImage()})}}),this.sourceTiles_.length=0,t.length===0)this.state=ct.ERROR;else{const i=this.wrappedTileCoord_[0],n=this.targetTileGrid_.getTileSize(i),r=typeof n=="number"?n:n[0],s=typeof n=="number"?n:n[1],o=this.targetTileGrid_.getResolution(i),a=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=yS(r,s,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),o,l,this.triangulation_,t,this.gutter_,this.renderEdges_,this.interpolate),this.state=ct.LOADED}this.changed()}load(){if(this.state==ct.IDLE){this.state=ct.LOADING,this.changed();let t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:i})=>{const n=i.getState();if(n==ct.IDLE||n==ct.LOADING){t++;const r=Yt(i,Mt.CHANGE,s=>{const o=i.getState();(o==ct.LOADED||o==ct.ERROR||o==ct.EMPTY)&&(de(r),t--,t===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(r)}}),t===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:i},n,r){i.getState()==ct.IDLE&&i.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(de),this.sourcesListenerKeys_=null}release(){this.canvas_&&(eh(this.canvas_.getContext("2d")),_a.push(this.canvas_),this.canvas_=null),super.release()}}class Hu{constructor(t){this.highWaterMark=t!==void 0?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}deleteOldest(){const t=this.pop();t instanceof Jd&&t.dispose()}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(t){for(;this.canExpireCache();)this.deleteOldest()}clear(){for(;this.oldest_;)this.deleteOldest()}containsKey(t){return this.entries_.hasOwnProperty(t)}forEach(t){let i=this.oldest_;for(;i;)t(i.value_,i.key_,this),i=i.newer}get(t,i){const n=this.entries_[t];return Zt(n!==void 0,"Tried to get a value for a key that does not exist in the cache"),n===this.newest_||(n===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(n.newer.older=n.older,n.older.newer=n.newer),n.newer=null,n.older=this.newest_,this.newest_.newer=n,this.newest_=n),n.value_}remove(t){const i=this.entries_[t];return Zt(i!==void 0,"Tried to get a value for a key that does not exist in the cache"),i===this.newest_?(this.newest_=i.older,this.newest_&&(this.newest_.newer=null)):i===this.oldest_?(this.oldest_=i.newer,this.oldest_&&(this.oldest_.older=null)):(i.newer.older=i.older,i.older.newer=i.newer),delete this.entries_[t],--this.count_,i.value_}getCount(){return this.count_}getKeys(){const t=new Array(this.count_);let i=0,n;for(n=this.newest_;n;n=n.older)t[i++]=n.key_;return t}getValues(){const t=new Array(this.count_);let i=0,n;for(n=this.newest_;n;n=n.older)t[i++]=n.value_;return t}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(t){return this.entries_[t]?.value_}pop(){const t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_}replace(t,i){this.get(t),this.entries_[t].value_=i}set(t,i){Zt(!(t in this.entries_),"Tried to set a value for a key that is used already");const n={key_:t,newer:null,older:this.newest_,value_:i};this.newest_?this.newest_.newer=n:this.oldest_=n,this.newest_=n,this.entries_[t]=n,++this.count_}setSize(t){this.highWaterMark=t}}function Vu(e,t,i,n){return n!==void 0?(n[0]=e,n[1]=t,n[2]=i,n):[e,t,i]}function b3(e,t,i){return e+"/"+t+"/"+i}function ou(e,t,i,n,r){return`${Nt(e)},${t},${b3(i,n,r)}`}function bS(e){return v3(e[0],e[1],e[2])}function v3(e,t,i){return(t<<e)+i}function w3(e,t){const i=e[0],n=e[1],r=e[2];if(t.getMinZoom()>i||i>t.getMaxZoom())return!1;const s=t.getFullTileRange(i);return s?s.containsXY(n,r):!0}class fy{constructor(){this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy($u(),{get:(t,i)=>{if(typeof $u()[i]=="function")return this.push_(i),this.pushMethodArgs_},set:(t,i,n)=>(this.push_(i,n),!0)})}push_(...t){const i=this.instructions_,n=this.zIndex+this.offset_;i[n]||(i[n]=[]),i[n].push(...t)}pushMethodArgs_=(...t)=>(this.push_(t),this);pushFunction(t){this.push_(t)}getContext(){return this.context_}draw(t){this.instructions_.forEach(i=>{for(let n=0,r=i.length;n<r;++n){const s=i[n];if(typeof s=="function"){s(t);continue}const o=i[++n];if(typeof t[s]=="function")t[s](...o);else{if(typeof o=="function"){t[s]=o(t);continue}t[s]=o}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}const S3=5;class T3 extends Zc{constructor(t){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=t,this.staleKeys_=new Array,this.maxStaleKeys=S3}getStaleKeys(){return this.staleKeys_}prependStaleKey(t){this.staleKeys_.unshift(t),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(t){return Gt()}getData(t){return null}prepareFrame(t){return Gt()}renderFrame(t,i){return Gt()}forEachFeatureAtCoordinate(t,i,n,r,s){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(t){const i=t.target;(i.getState()===bt.LOADED||i.getState()===bt.ERROR)&&this.renderIfReadyAndVisible()}loadImage(t){let i=t.getState();return i!=bt.LOADED&&i!=bt.ERROR&&t.addEventListener(Mt.CHANGE,this.boundHandleImageChange_),i==bt.IDLE&&(t.load(),i=t.getState()),i==bt.LOADED}renderIfReadyAndVisible(){const t=this.getLayer();t&&t.getVisible()&&t.getSourceState()==="ready"&&t.changed()}renderDeferred(t){}disposeInternal(){delete this.layer_,super.disposeInternal()}}const RC=[];let na=null;function E3(){na=De(1,1,void 0,{willReadFrequently:!0})}class gy extends T3{constructor(t){super(t),this.container=null,this.renderedResolution,this.tempTransform=Yi(),this.pixelTransform=Yi(),this.inversePixelTransform=Yi(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(t,i,n){na||E3(),na.clearRect(0,0,1,1);let r;try{na.drawImage(t,i,n,1,1,0,0,1,1),r=na.getImageData(0,0,1,1).data}catch{return na=null,null}return r}getBackground(t){let n=this.getLayer().getBackground();return typeof n=="function"&&(n=n(t.viewState.resolution)),n||void 0}useContainer(t,i,n){const r=this.getLayer().getClassName();let s,o;if(t&&t.className===r&&(!n||t&&t.style.backgroundColor&&Ms(Ba(t.style.backgroundColor),Ba(n)))){const a=t.firstElementChild;ms(a)&&(o=a.getContext("2d"))}if(o&&VO(o.canvas.style.transform,i)?(this.container=t,this.context=o,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){s=rn?Vw():document.createElement("div"),s.className=r;let a=s.style;a.position="absolute",a.width="100%",a.height="100%",o=De();const l=o.canvas;s.appendChild(l),a=l.style,a.position="absolute",a.left="0",a.transformOrigin="top left",this.container=s,this.context=o}!this.containerReused&&n&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=n)}clipUnrotated(t,i,n){const r=Is(n),s=rf(n),o=nf(n),a=ef(n);Fe(i.coordinateToPixelTransform,r),Fe(i.coordinateToPixelTransform,s),Fe(i.coordinateToPixelTransform,o),Fe(i.coordinateToPixelTransform,a);const l=this.inversePixelTransform;Fe(l,r),Fe(l,s),Fe(l,o),Fe(l,a),t.save(),t.beginPath(),t.moveTo(Math.round(r[0]),Math.round(r[1])),t.lineTo(Math.round(s[0]),Math.round(s[1])),t.lineTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(a[0]),Math.round(a[1])),t.clip()}prepareContainer(t,i){const n=t.extent,r=t.viewState.resolution,s=t.viewState.rotation,o=t.pixelRatio,a=Math.round(qt(n)/r*o),l=Math.round(ke(n)/r*o);sr(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/o,1/o,s,-a/2,-l/2),Iw(this.inversePixelTransform,this.pixelTransform);const c=HO(this.pixelTransform);if(this.useContainer(i,c,this.getBackground(t)),!this.containerReused){const h=this.context.canvas;h.width!=a||h.height!=l?(h.width=a,h.height=l):this.context.clearRect(0,0,a,l),c!==h.style.transform&&(h.style.transform=c)}}dispatchRenderEvent_(t,i,n){const r=this.getLayer();if(r.hasListener(t)){const s=new fS(t,this.inversePixelTransform,n,i);r.dispatchEvent(s)}}preRender(t,i){this.frameState=i,!i.declutter&&this.dispatchRenderEvent_(sn.PRERENDER,t,i)}postRender(t,i){i.declutter||this.dispatchRenderEvent_(sn.POSTRENDER,t,i)}renderDeferredInternal(t){}getRenderContext(t){return t.declutter&&!this.deferredContext_&&(this.deferredContext_=new fy),t.declutter?this.deferredContext_.getContext():this.context}renderDeferred(t){t.declutter&&(this.dispatchRenderEvent_(sn.PRERENDER,this.context,t),t.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(t),this.dispatchRenderEvent_(sn.POSTRENDER,this.context,t))}getRenderTransform(t,i,n,r,s,o,a){const l=s/2,c=o/2,h=r/i,u=-h,d=-t[0]+a,f=-t[1];return sr(this.tempTransform,l,c,h,u,-n,d,f)}disposeInternal(){delete this.frameState,super.disposeInternal()}}function $g(e,t,i){if(!(i in e))return e[i]=new Set([t]),!0;const n=e[i],r=n.has(t);return r||n.add(t),!r}function k3(e,t,i){const n=e[i];return n?n.delete(t):!1}function AC(e,t){const i=e.layerStatesArray[e.layerIndex];i.extent&&(t=An(t,Zn(i.extent,e.viewState.projection)));const n=i.layer.getRenderSource();if(!n.getWrapX()){const r=n.getTileGridForProjection(e.viewState.projection).getExtent();r&&(t=An(t,r))}return t}class vS extends gy{constructor(t,i){super(t),i=i||{},this.extentChanged=!0,this.renderComplete=!1,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedTiles=[],this.renderedSourceKey_,this.renderedSourceRevision_,this.tempExtent=ki(),this.tempTileRange_=new dy(0,0,0,0),this.tempTileCoord_=Vu(0,0,0);const n=i.cacheSize!==void 0?i.cacheSize:512;this.tileCache_=new Hu(n),this.sourceTileCache_=null,this.maxStaleKeys=n*.5}getTileCache(){return this.tileCache_}getSourceTileCache(){return this.sourceTileCache_||(this.sourceTileCache_=new Hu(512)),this.sourceTileCache_}getOrCreateTile(t,i,n,r){const s=this.tileCache_,a=this.getLayer().getSource(),l=ou(a,a.getKey(),t,i,n);let c;if(s.containsKey(l))c=s.get(l);else{const h=r.viewState.projection,u=a.getProjection();if(c=a.getTile(t,i,n,r.pixelRatio,h,!u||bi(u,h)?void 0:this.getSourceTileCache()),!c)return null;s.set(l,c)}return c}getTile(t,i,n,r){const s=this.getOrCreateTile(t,i,n,r);return s||null}getData(t){const i=this.frameState;if(!i)return null;const n=this.getLayer(),r=Fe(i.pixelToCoordinateTransform,t.slice()),s=n.getExtent();if(s&&!Co(s,r))return null;const o=i.viewState,a=n.getRenderSource(),l=a.getTileGridForProjection(o.projection),c=a.getTilePixelRatio(i.pixelRatio);for(let h=l.getZForResolution(o.resolution);h>=l.getMinZoom();--h){const u=l.getTileCoordForCoordAndZ(r,h),d=this.getTile(h,u[1],u[2],i);if(!d||d.getState()!==ct.LOADED)continue;const f=l.getOrigin(h),g=ci(l.getTileSize(h)),p=l.getResolution(h);let m;if(d instanceof mS||d instanceof CS)m=d.getImage();else if(d instanceof TC){if(m=Kp(d.getData()),!m)continue}else continue;const y=Math.floor(c*((r[0]-f[0])/p-u[1]*g[0])),_=Math.floor(c*((f[1]-r[1])/p-u[2]*g[1])),C=Math.round(c*a.getGutterForProjection(o.projection));return this.getImageData(m,y+C,_+C)}return null}prepareFrame(t){this.renderedProjection?t.viewState.projection!==this.renderedProjection&&(this.tileCache_.clear(),this.renderedProjection=t.viewState.projection):this.renderedProjection=t.viewState.projection;const i=this.getLayer().getSource();if(!i)return!1;const n=i.getRevision();return this.renderedSourceRevision_?this.renderedSourceRevision_!==n&&(this.renderedSourceRevision_=n,this.renderedSourceKey_===i.getKey()&&(this.tileCache_.clear(),this.sourceTileCache_?.clear())):this.renderedSourceRevision_=n,!0}enqueueTilesForNextExtent(){return!0}enqueueTiles(t,i,n,r,s){const o=t.viewState,a=this.getLayer(),l=a.getRenderSource(),c=l.getTileGridForProjection(o.projection),h=Nt(l);h in t.wantedTiles||(t.wantedTiles[h]={});const u=t.wantedTiles[h],d=a.getMapInternal(),f=Math.max(n-s,c.getMinZoom(),c.getZForResolution(Math.min(a.getMaxResolution(),d?d.getView().getResolutionForZoom(Math.max(a.getMinZoom(),0)):c.getResolution(0)),l.zDirection)),g=o.rotation,p=g?yw(o.center,o.resolution,g,t.size):void 0;for(let m=n;m>=f;--m){const y=c.getTileRangeForExtentAndZ(i,m,this.tempTileRange_),_=c.getResolution(m);for(let C=y.minX;C<=y.maxX;++C)for(let b=y.minY;b<=y.maxY;++b){if(g&&!c.tileCoordIntersectsViewport([m,C,b],p))continue;const v=this.getTile(m,C,b,t);if(!v||!$g(r,v,m))continue;const w=v.getKey();if(u[w]=!0,v.getState()===ct.IDLE&&!t.tileQueue.isKeyQueued(w)){const L=Vu(m,C,b,this.tempTileCoord_);t.tileQueue.enqueue([v,h,c.getTileCoordCenter(L),_])}}}}findStaleTile_(t,i){const n=this.tileCache_,r=t[0],s=t[1],o=t[2],a=this.getStaleKeys();for(let l=0;l<a.length;++l){const c=ou(this.getLayer().getSource(),a[l],r,s,o);if(n.containsKey(c)){const h=n.peek(c);if(h.getState()===ct.LOADED)return h.endTransition(Nt(this)),$g(i,h,r),!0}}return!1}findAltTiles_(t,i,n,r){const s=t.getTileRangeForTileCoordAndZ(i,n,this.tempTileRange_);if(!s)return!1;let o=!0;const a=this.tileCache_,l=this.getLayer().getRenderSource(),c=l.getKey();for(let h=s.minX;h<=s.maxX;++h)for(let u=s.minY;u<=s.maxY;++u){const d=ou(l,c,n,h,u);let f=!1;if(a.containsKey(d)){const g=a.peek(d);g.getState()===ct.LOADED&&($g(r,g,n),f=!0)}f||(o=!1)}return o}renderFrame(t,i){this.renderComplete=!0;const n=t.layerStatesArray[t.layerIndex],r=t.viewState,s=r.projection,o=r.resolution,a=r.center,l=t.pixelRatio,c=this.getLayer(),h=c.getSource(),u=h.getTileGridForProjection(s),d=u.getZForResolution(o,h.zDirection),f=u.getResolution(d),g=h.getKey();this.renderedSourceKey_?this.renderedSourceKey_!==g&&(this.prependStaleKey(this.renderedSourceKey_),this.renderedSourceKey_=g):this.renderedSourceKey_=g;let p=t.extent;const m=h.getTilePixelRatio(l);this.prepareContainer(t,i);const y=this.context.canvas.width,_=this.context.canvas.height,C=n.extent&&Zn(n.extent);C&&(p=An(p,Zn(n.extent)));const b=f*y/2/m,v=f*_/2/m,S=[a[0]-b,a[1]-v,a[0]+b,a[1]+v],w={};this.renderedTiles.length=0;const L=c.getPreload();if(t.nextExtent&&this.enqueueTilesForNextExtent()){const M=u.getZForResolution(r.nextResolution,h.zDirection),j=AC(t,t.nextExtent);this.enqueueTiles(t,j,M,w,L)}const A=AC(t,p);if(this.enqueueTiles(t,A,d,w,0),L>0&&setTimeout(()=>{this.enqueueTiles(t,A,d-1,w,L-1)},0),!(d in w))return this.container;const B=Nt(this),O=t.time;for(const M of w[d]){const j=M.getState();if(j===ct.EMPTY)continue;const Y=M.tileCoord;if(j===ct.LOADED&&M.getAlpha(B,O)===1){M.endTransition(B);continue}if(j!==ct.ERROR&&(this.renderComplete=!1),this.findStaleTile_(Y,w)){k3(w,M,d),t.animate=!0;continue}if(this.findAltTiles_(u,Y,d+1,w))continue;const Q=u.getMinZoom();for(let ut=d-1;ut>=Q&&!this.findAltTiles_(u,Y,ut,w);--ut);}const F=f/o*l/m,R=this.getRenderContext(t);sr(this.tempTransform,y/2,_/2,F,F,0,-y/2,-_/2),n.extent&&this.clipUnrotated(R,t,C),h.getInterpolate()||(R.imageSmoothingEnabled=!1),this.preRender(R,t);const T=Object.keys(w).map(Number);T.sort(tr);let P;const E=[],D=[];for(let M=T.length-1;M>=0;--M){const j=T[M],Y=h.getTilePixelSize(j,l,s),G=u.getResolution(j)/f,Q=Y[0]*G*F,ut=Y[1]*G*F,at=u.getTileCoordForCoordAndZ(Is(S),j),It=u.getTileCoordExtent(at),W=Fe(this.tempTransform,[m*(It[0]-S[0])/f,m*(S[3]-It[3])/f]),et=m*h.getGutterForProjection(s);for(const J of w[j]){if(J.getState()!==ct.LOADED)continue;const it=J.tileCoord,Rt=at[1]-it[1],k=Math.round(W[0]-(Rt-1)*Q),I=at[2]-it[2],$=Math.round(W[1]-(I-1)*ut),H=Math.round(W[0]-Rt*Q),U=Math.round(W[1]-I*ut),V=k-H,ot=$-U,st=T.length===1;let tt=!1;P=[H,U,H+V,U,H+V,U+ot,H,U+ot];for(let Z=0,Ct=E.length;Z<Ct;++Z)if(!st&&j<D[Z]){const nt=E[Z];we([H,U,H+V,U+ot],[nt[0],nt[3],nt[4],nt[7]])&&(tt||(R.save(),tt=!0),R.beginPath(),R.moveTo(P[0],P[1]),R.lineTo(P[2],P[3]),R.lineTo(P[4],P[5]),R.lineTo(P[6],P[7]),R.moveTo(nt[6],nt[7]),R.lineTo(nt[4],nt[5]),R.lineTo(nt[2],nt[3]),R.lineTo(nt[0],nt[1]),R.clip())}E.push(P),D.push(j),this.drawTile(J,t,H,U,V,ot,et,st),tt&&R.restore(),this.renderedTiles.unshift(J),this.updateUsedTiles(t.usedTiles,h,J)}}if(this.renderedResolution=f,this.extentChanged=!this.renderedExtent_||!bo(this.renderedExtent_,S),this.renderedExtent_=S,this.renderedPixelRatio=l,this.postRender(this.context,t),n.extent&&R.restore(),R.imageSmoothingEnabled=!0,this.renderComplete){const M=(j,Y)=>{const K=Nt(h),G=Y.wantedTiles[K],Q=G?Object.keys(G).length:0;this.updateCacheSize(Q),this.tileCache_.expireCache(),this.sourceTileCache_?.expireCache()};t.postRenderFunctions.push(M)}return this.container}updateCacheSize(t){this.tileCache_.highWaterMark=Math.max(this.tileCache_.highWaterMark,t*2)}drawTile(t,i,n,r,s,o,a,l){let c;if(t instanceof TC){if(c=Kp(t.getData()),!c)throw new Error("Rendering array data is not yet supported")}else c=this.getTileImage(t);if(!c)return;const h=this.getRenderContext(i),u=Nt(this),d=i.layerStatesArray[i.layerIndex],f=d.opacity*(l?t.getAlpha(u,i.time):1),g=f!==h.globalAlpha;g&&(h.save(),h.globalAlpha=f),h.drawImage(c,a,a,c.width-2*a,c.height-2*a,n,r,s,o),g&&h.restore(),f!==d.opacity?i.animate=!0:l&&t.endTransition(u)}getImage(){const t=this.context;return t?t.canvas:null}getTileImage(t){return t.getImage()}updateUsedTiles(t,i,n){const r=Nt(i);r in t||(t[r]={}),t[r][n.getKey()]=!0}}const ys={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class R3 extends tl{constructor(t){t=t||{};const i=Object.assign({},t),n=t.cacheSize;delete t.cacheSize,delete i.preload,delete i.useInterimTilesOnError,super(i),this.on,this.once,this.un,this.cacheSize_=n,this.setPreload(t.preload!==void 0?t.preload:0),this.setUseInterimTilesOnError(t.useInterimTilesOnError!==void 0?t.useInterimTilesOnError:!0)}getCacheSize(){return this.cacheSize_}getPreload(){return this.get(ys.PRELOAD)}setPreload(t){this.set(ys.PRELOAD,t)}getUseInterimTilesOnError(){return this.get(ys.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(t){this.set(ys.USE_INTERIM_TILES_ON_ERROR,t)}getData(t){return super.getData(t)}}class Zp extends R3{constructor(t){super(t)}createRenderer(){return new vS(this,{cacheSize:this.getCacheSize()})}}const Uo=[0,0,0],is=5;class py{constructor(t){this.minZoom=t.minZoom!==void 0?t.minZoom:0,this.resolutions_=t.resolutions,Zt(jF(this.resolutions_,(r,s)=>s-r),"`resolutions` must be sorted in descending order");let i;if(!t.origins){for(let r=0,s=this.resolutions_.length-1;r<s;++r)if(!i)i=this.resolutions_[r]/this.resolutions_[r+1];else if(this.resolutions_[r]/this.resolutions_[r+1]!==i){i=void 0;break}}this.zoomFactor_=i,this.maxZoom=this.resolutions_.length-1,this.origin_=t.origin!==void 0?t.origin:null,this.origins_=null,t.origins!==void 0&&(this.origins_=t.origins,Zt(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const n=t.extent;n!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=Is(n)),Zt(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,t.tileSizes!==void 0&&(this.tileSizes_=t.tileSizes,Zt(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=t.tileSize!==void 0?t.tileSize:this.tileSizes_?null:ty,Zt(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=n!==void 0?n:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],t.sizes!==void 0?this.fullTileRanges_=t.sizes.map((r,s)=>{const o=new dy(Math.min(0,r[0]),Math.max(r[0]-1,-1),Math.min(0,r[1]),Math.max(r[1]-1,-1));if(n){const a=this.getTileRangeForExtentAndZ(n,s);o.minX=Math.max(a.minX,o.minX),o.maxX=Math.min(a.maxX,o.maxX),o.minY=Math.max(a.minY,o.minY),o.maxY=Math.min(a.maxY,o.maxY)}return o}):n&&this.calculateTileRanges_(n)}forEachTileCoord(t,i,n){const r=this.getTileRangeForExtentAndZ(t,i);for(let s=r.minX,o=r.maxX;s<=o;++s)for(let a=r.minY,l=r.maxY;a<=l;++a)n([i,s,a])}forEachTileCoordParentTileRange(t,i,n,r){let s,o,a,l=null,c=t[0]-1;for(this.zoomFactor_===2?(o=t[1],a=t[2]):l=this.getTileCoordExtent(t,r);c>=this.minZoom;){if(o!==void 0&&a!==void 0?(o=Math.floor(o/2),a=Math.floor(a/2),s=Vo(o,o,a,a,n)):s=this.getTileRangeForExtentAndZ(l,c,n),i(c,s))return!0;--c}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(t){return this.origin_?this.origin_:this.origins_[t]}getResolution(t){return this.resolutions_[t]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(t,i,n){if(t[0]<this.maxZoom){if(this.zoomFactor_===2){const s=t[1]*2,o=t[2]*2;return Vo(s,s+1,o,o+1,i)}const r=this.getTileCoordExtent(t,n||this.tmpExtent_);return this.getTileRangeForExtentAndZ(r,t[0]+1,i)}return null}getTileRangeForTileCoordAndZ(t,i,n){if(i>this.maxZoom||i<this.minZoom)return null;const r=t[0],s=t[1],o=t[2];if(i===r)return Vo(s,o,s,o,n);if(this.zoomFactor_){const l=Math.pow(this.zoomFactor_,i-r),c=Math.floor(s*l),h=Math.floor(o*l);if(i<r)return Vo(c,c,h,h,n);const u=Math.floor(l*(s+1))-1,d=Math.floor(l*(o+1))-1;return Vo(c,u,h,d,n)}const a=this.getTileCoordExtent(t,this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,i,n)}getTileRangeForExtentAndZ(t,i,n){this.getTileCoordForXYAndZ_(t[0],t[3],i,!1,Uo);const r=Uo[1],s=Uo[2];this.getTileCoordForXYAndZ_(t[2],t[1],i,!0,Uo);const o=Uo[1],a=Uo[2];return Vo(r,o,s,a,n)}getTileCoordCenter(t){const i=this.getOrigin(t[0]),n=this.getResolution(t[0]),r=ci(this.getTileSize(t[0]),this.tmpSize_);return[i[0]+(t[1]+.5)*r[0]*n,i[1]-(t[2]+.5)*r[1]*n]}getTileCoordExtent(t,i){const n=this.getOrigin(t[0]),r=this.getResolution(t[0]),s=ci(this.getTileSize(t[0]),this.tmpSize_),o=n[0]+t[1]*s[0]*r,a=n[1]-(t[2]+1)*s[1]*r,l=o+s[0]*r,c=a+s[1]*r;return zr(o,a,l,c,i)}getTileCoordForCoordAndResolution(t,i,n){return this.getTileCoordForXYAndResolution_(t[0],t[1],i,!1,n)}getTileCoordForXYAndResolution_(t,i,n,r,s){const o=this.getZForResolution(n),a=n/this.getResolution(o),l=this.getOrigin(o),c=ci(this.getTileSize(o),this.tmpSize_);let h=a*(t-l[0])/n/c[0],u=a*(l[1]-i)/n/c[1];return r?(h=gs(h,is)-1,u=gs(u,is)-1):(h=oa(h,is),u=oa(u,is)),Vu(o,h,u,s)}getTileCoordForXYAndZ_(t,i,n,r,s){const o=this.getOrigin(n),a=this.getResolution(n),l=ci(this.getTileSize(n),this.tmpSize_);let c=(t-o[0])/a/l[0],h=(o[1]-i)/a/l[1];return r?(c=gs(c,is)-1,h=gs(h,is)-1):(c=oa(c,is),h=oa(h,is)),Vu(n,c,h,s)}getTileCoordForCoordAndZ(t,i,n){return this.getTileCoordForXYAndZ_(t[0],t[1],i,!1,n)}getTileCoordResolution(t){return this.resolutions_[t[0]]}getTileSize(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]}getFullTileRange(t){return this.fullTileRanges_?this.fullTileRanges_[t]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,t):null}getZForResolution(t,i){const n=Qd(this.resolutions_,t,i||0);return Ce(n,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(t,i){return $w(i,0,i.length,2,this.getTileCoordExtent(t))}calculateTileRanges_(t){const i=this.resolutions_.length,n=new Array(i);for(let r=this.minZoom;r<i;++r)n[r]=this.getTileRangeForExtentAndZ(t,r);this.fullTileRanges_=n}}function Cf(e){let t=e.getDefaultTileGrid();return t||(t=M3(e),e.setDefaultTileGrid(t)),t}function A3(e,t,i){const n=t[0],r=e.getTileCoordCenter(t),s=bf(i);if(!Co(s,r)){const o=qt(s),a=Math.ceil((s[0]-r[0])/o);return r[0]+=o*a,e.getTileCoordForCoordAndZ(r,n)}return t}function L3(e,t,i,n){n=n!==void 0?n:"top-left";const r=SS(e,t,i);return new py({extent:e,origin:iO(e,n),resolutions:r,tileSize:i})}function wS(e){const t=e||{},i=t.extent||ae("EPSG:3857").getExtent(),n={extent:i,minZoom:t.minZoom,tileSize:t.tileSize,resolutions:SS(i,t.maxZoom,t.tileSize,t.maxResolution)};return new py(n)}function SS(e,t,i,n){t=t!==void 0?t:jw,i=ci(i!==void 0?i:ty);const r=ke(e),s=qt(e);n=n>0?n:Math.max(s/i[0],r/i[1]);const o=t+1,a=new Array(o);for(let l=0;l<o;++l)a[l]=n/Math.pow(2,l);return a}function M3(e,t,i,n){const r=bf(e);return L3(r,t,i,n)}function bf(e){e=ae(e);let t=e.getExtent();if(!t){const i=180*F0.degrees/e.getMetersPerUnit();t=zr(-i,-i,i,i)}return t}function my(e,t){const i=[];Object.keys(t).forEach(function(r){t[r]!==null&&t[r]!==void 0&&i.push(r+"="+encodeURIComponent(t[r]))});const n=i.join("&");return e=e.replace(/[?&]$/,""),e+=e.includes("?")?"&":"?",e+n}const I3=/\{z\}/g,P3=/\{x\}/g,F3=/\{y\}/g,O3=/\{-y\}/g;function D3(e,t,i,n,r){return e.replace(I3,t.toString()).replace(P3,i.toString()).replace(F3,n.toString()).replace(O3,function(){if(r===void 0)throw new Error("If the URL template has a {-y} placeholder, the grid extent must be known");return(r-n).toString()})}function B3(e){const t=[];let i=/\{([a-z])-([a-z])\}/.exec(e);if(i){const n=i[1].charCodeAt(0),r=i[2].charCodeAt(0);let s;for(s=n;s<=r;++s)t.push(e.replace(i[0],String.fromCharCode(s)));return t}if(i=/\{(\d+)-(\d+)\}/.exec(e),i){const n=parseInt(i[2],10);for(let r=parseInt(i[1],10);r<=n;r++)t.push(e.replace(i[0],r.toString()));return t}return t.push(e),t}function N3(e,t){return(function(i,n,r){if(!i)return;let s;const o=i[0];if(t){const a=t.getFullTileRange(o);a&&(s=a.getHeight()-1)}return D3(e,o,i[1],i[2],s)})}function TS(e,t){const i=e.length,n=new Array(i);for(let r=0;r<i;++r)n[r]=N3(e[r],t);return $3(n)}function $3(e){return e.length===1?e[0]:(function(t,i,n){if(!t)return;const r=bS(t),s=go(r,e.length);return e[s](t,i,n)})}class yy extends Dn{constructor(t){super(),this.projection=ae(t.projection),this.attributions_=LC(t.attributions),this.attributionsCollapsible_=t.attributionsCollapsible??!0,this.loading=!1,this.state_=t.state!==void 0?t.state:"ready",this.wrapX_=t.wrapX!==void 0?t.wrapX:!1,this.interpolate_=!!t.interpolate,this.viewResolver=null,this.viewRejector=null;const i=this;this.viewPromise_=new Promise(function(n,r){i.viewResolver=n,i.viewRejector=r})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(t){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(t){this.attributions_=LC(t),this.changed()}setState(t){this.state_=t,this.changed()}}function LC(e){return e?typeof e=="function"?e:(Array.isArray(e)||(e=[e]),t=>e):null}class z3 extends yy{constructor(t){super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,projection:t.projection,state:t.state,wrapX:t.wrapX,interpolate:t.interpolate}),this.on,this.once,this.un,this.tilePixelRatio_=t.tilePixelRatio!==void 0?t.tilePixelRatio:1,this.tileGrid=t.tileGrid!==void 0?t.tileGrid:null;const i=[256,256];this.tileGrid&&ci(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),i),this.tmpSize=[0,0],this.key_=t.key||Nt(this),this.tileOptions={transition:t.transition,interpolate:t.interpolate},this.zDirection=t.zDirection?t.zDirection:0}getGutterForProjection(t){return 0}getKey(){return this.key_}setKey(t){this.key_!==t&&(this.key_=t,this.changed())}getResolutions(t){const i=t?this.getTileGridForProjection(t):this.tileGrid;return i?i.getResolutions():null}getTile(t,i,n,r,s,o){return Gt()}getTileGrid(){return this.tileGrid}getTileGridForProjection(t){return this.tileGrid?this.tileGrid:Cf(t)}getTilePixelRatio(t){return this.tilePixelRatio_}getTilePixelSize(t,i,n){const r=this.getTileGridForProjection(n),s=this.getTilePixelRatio(i),o=ci(r.getTileSize(t),this.tmpSize);return s==1?o:uB(o,s,this.tmpSize)}getTileCoordForTileUrlFunction(t,i){const n=i!==void 0?i:this.getProjection(),r=i!==void 0?this.getTileGridForProjection(n):this.tileGrid||this.getTileGridForProjection(n);return this.getWrapX()&&n.isGlobal()&&(t=A3(r,t,n)),w3(t,r)?t:null}clear(){}refresh(){this.clear(),super.refresh()}}class G3 extends cr{constructor(t,i){super(t),this.tile=i}}const zg={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};class vf extends z3{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===vf.prototype.tileUrlFunction,this.tileLoadFunction=t.tileLoadFunction,t.tileUrlFunction&&(this.tileUrlFunction=t.tileUrlFunction),this.urls=null,t.urls?this.setUrls(t.urls):t.url&&this.setUrl(t.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(t){const i=t.target,n=Nt(i),r=i.getState();let s;r==ct.LOADING?(this.tileLoadingKeys_[n]=!0,s=zg.TILELOADSTART):n in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[n],s=r==ct.ERROR?zg.TILELOADERROR:r==ct.LOADED?zg.TILELOADEND:void 0),s!=null&&this.dispatchEvent(new G3(s,i))}setTileLoadFunction(t){this.tileLoadFunction=t,this.changed()}setTileUrlFunction(t,i){this.tileUrlFunction=t,typeof i<"u"?this.setKey(i):this.changed()}setUrl(t){const i=B3(t);this.urls=i,this.setUrls(i)}setUrls(t){this.urls=t;const i=t.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(TS(t,this.tileGrid),i):this.setKey(i)}tileUrlFunction(t,i,n){}}class _y extends vf{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:W3,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate!==void 0?t.interpolate:!0,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.crossOrigin=t.crossOrigin!==void 0?t.crossOrigin:null,this.tileClass=t.tileClass!==void 0?t.tileClass:mS,this.tileGridForProjection={},this.reprojectionErrorThreshold_=t.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}getGutterForProjection(t){return this.getProjection()&&t&&!bi(this.getProjection(),t)?0:this.getGutter()}getGutter(){return 0}getKey(){let t=super.getKey();return this.getInterpolate()||(t+=":disable-interpolation"),t}getTileGridForProjection(t){const i=this.getProjection();if(this.tileGrid&&(!i||bi(i,t)))return this.tileGrid;const n=Nt(t);return n in this.tileGridForProjection||(this.tileGridForProjection[n]=Cf(t)),this.tileGridForProjection[n]}createTile_(t,i,n,r,s,o){const a=[t,i,n],l=this.getTileCoordForTileUrlFunction(a,s),c=l?this.tileUrlFunction(l,r,s):void 0,h=new this.tileClass(a,c!==void 0?ct.IDLE:ct.EMPTY,c!==void 0?c:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return h.key=o,h.addEventListener(Mt.CHANGE,this.handleTileChange.bind(this)),h}getTile(t,i,n,r,s,o){const a=this.getProjection();if(!a||!s||bi(a,s))return this.getTileInternal(t,i,n,r,a||s);const l=[t,i,n],c=this.getKey(),h=this.getTileGridForProjection(a),u=this.getTileGridForProjection(s),d=this.getTileCoordForTileUrlFunction(l,s),f=new CS(a,h,s,u,l,d,this.getTilePixelRatio(r),this.getGutter(),(g,p,m,y)=>this.getTileInternal(g,p,m,y,a,o),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return f.key=c,f}getTileInternal(t,i,n,r,s,o){const a=this.getKey(),l=ou(this,a,t,i,n);if(o&&o.containsKey(l))return o.get(l);const c=this.createTile_(t,i,n,r,s,a);return o?.set(l,c),c}setRenderReprojectionEdges(t){this.renderReprojectionEdges_!=t&&(this.renderReprojectionEdges_=t,this.changed())}setTileGridForProjection(t,i){const n=ae(t);if(n){const r=Nt(n);r in this.tileGridForProjection||(this.tileGridForProjection[r]=i)}}}function W3(e,t){if(rn){const i=e.getCrossOrigin();let n="same-origin",r="same-origin";i==="anonymous"||i===""?(n="cors",r="omit"):i==="use-credentials"&&(n="cors",r="include"),fetch(t,{mode:n,credentials:r}).then(s=>{if(!s.ok)throw new Error(`HTTP ${s.status}`);return s.blob()}).then(s=>createImageBitmap(s)).then(s=>{const o=e.getImage();o.width=s.width,o.height=s.height,o.getContext("2d").drawImage(s,0,0),s.close?.(),o.dispatchEvent(new Event("load"))}).catch(()=>{e.getImage().dispatchEvent(new Event("error"))});return}e.getImage().src=t}class MC extends _y{constructor(t){t=t||{};const i=t.projection!==void 0?t.projection:"EPSG:3857",n=t.tileGrid!==void 0?t.tileGrid:wS({extent:bf(i),maxResolution:t.maxResolution,maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:t.tileSize});super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,projection:i,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileGrid:n,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX!==void 0?t.wrapX:!0,transition:t.transition,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.gutter_=t.gutter!==void 0?t.gutter:0}getGutter(){return this.gutter_}}class ES{drawCustom(t,i,n,r,s){}drawGeometry(t){}setStyle(t){}drawCircle(t,i,n){}drawFeature(t,i,n){}drawGeometryCollection(t,i,n){}drawLineString(t,i,n){}drawMultiLineString(t,i,n){}drawMultiPoint(t,i,n){}drawMultiPolygon(t,i,n){}drawPoint(t,i,n){}drawPolygon(t,i,n){}drawText(t,i,n){}setFillStrokeStyle(t,i){}setImageStyle(t,i){}setTextStyle(t,i){}}const Et={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},Fh=[Et.FILL],_s=[Et.STROKE],ro=[Et.BEGIN_PATH],IC=[Et.CLOSE_PATH];class oh extends ES{constructor(t,i,n,r){super(),this.tolerance=t,this.maxExtent=i,this.pixelRatio=r,this.maxLineWidth=0,this.resolution=n,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(t){const i=this.pixelRatio;return i==1?t:t.map(function(n){return n*i})}appendFlatPointCoordinates(t,i){const n=this.getBufferedMaxExtent(),r=this.tmpCoordinate_,s=this.coordinates;let o=s.length;for(let a=0,l=t.length;a<l;a+=i)r[0]=t[a],r[1]=t[a+1],Co(n,r)&&(s[o++]=r[0],s[o++]=r[1]);return o}appendFlatLineCoordinates(t,i,n,r,s,o){const a=this.coordinates;let l=a.length;const c=this.getBufferedMaxExtent();o&&(i+=r);let h=t[i],u=t[i+1];const d=this.tmpCoordinate_;let f=!0,g,p,m;for(g=i+r;g<n;g+=r)d[0]=t[g],d[1]=t[g+1],m=Fp(c,d),m!==p?(f&&(a[l++]=h,a[l++]=u,f=!1),a[l++]=d[0],a[l++]=d[1]):m===Ue.INTERSECTING?(a[l++]=d[0],a[l++]=d[1],f=!1):f=!0,h=d[0],u=d[1],p=m;return(s&&f||g===i+r)&&(a[l++]=h,a[l++]=u),l}drawCustomCoordinates_(t,i,n,r,s){for(let o=0,a=n.length;o<a;++o){const l=n[o],c=this.appendFlatLineCoordinates(t,i,l,r,!1,!1);s.push(c),i=l}return i}drawCustom(t,i,n,r,s){this.beginGeometry(t,i,s);const o=t.getType(),a=t.getStride(),l=this.coordinates.length;let c,h,u,d,f;switch(o){case"MultiPolygon":c=t.getOrientedFlatCoordinates(),d=[];const g=t.getEndss();f=0;for(let p=0,m=g.length;p<m;++p){const y=[];f=this.drawCustomCoordinates_(c,f,g[p],a,y),d.push(y)}this.instructions.push([Et.CUSTOM,l,d,t,n,Wp,s]),this.hitDetectionInstructions.push([Et.CUSTOM,l,d,t,r||n,Wp,s]);break;case"Polygon":case"MultiLineString":u=[],c=o=="Polygon"?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),f=this.drawCustomCoordinates_(c,0,t.getEnds(),a,u),this.instructions.push([Et.CUSTOM,l,u,t,n,bc,s]),this.hitDetectionInstructions.push([Et.CUSTOM,l,u,t,r||n,bc,s]);break;case"LineString":case"Circle":c=t.getFlatCoordinates(),h=this.appendFlatLineCoordinates(c,0,c.length,a,!1,!1),this.instructions.push([Et.CUSTOM,l,h,t,n,ps,s]),this.hitDetectionInstructions.push([Et.CUSTOM,l,h,t,r||n,ps,s]);break;case"MultiPoint":c=t.getFlatCoordinates(),h=this.appendFlatPointCoordinates(c,a),h>l&&(this.instructions.push([Et.CUSTOM,l,h,t,n,ps,s]),this.hitDetectionInstructions.push([Et.CUSTOM,l,h,t,r||n,ps,s]));break;case"Point":c=t.getFlatCoordinates(),this.coordinates.push(c[0],c[1]),h=this.coordinates.length,this.instructions.push([Et.CUSTOM,l,h,t,n,void 0,s]),this.hitDetectionInstructions.push([Et.CUSTOM,l,h,t,r||n,void 0,s]);break}this.endGeometry(i)}beginGeometry(t,i,n){this.beginGeometryInstruction1_=[Et.BEGIN_GEOMETRY,i,0,t,n],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[Et.BEGIN_GEOMETRY,i,0,t,n],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const t=this.hitDetectionInstructions;t.reverse();let i;const n=t.length;let r,s,o=-1;for(i=0;i<n;++i)r=t[i],s=r[0],s==Et.END_GEOMETRY?o=i:s==Et.BEGIN_GEOMETRY&&(r[2]=i,WF(this.hitDetectionInstructions,o,i),o=-1)}fillStyleToState(t,i={}){if(t){const n=t.getColor();i.fillPatternScale=n&&typeof n=="object"&&"src"in n?this.pixelRatio:1,i.fillStyle=Jn(n||Di)}else i.fillStyle=void 0;return i}strokeStyleToState(t,i={}){if(t){const n=t.getColor();i.strokeStyle=Jn(n||Sc);const r=t.getLineCap();i.lineCap=r!==void 0?r:Na;const s=t.getLineDash();i.lineDash=s?s.slice():Pr;const o=t.getLineDashOffset();i.lineDashOffset=o||Fr;const a=t.getLineJoin();i.lineJoin=a!==void 0?a:$a;const l=t.getWidth();i.lineWidth=l!==void 0?l:Ec;const c=t.getMiterLimit();i.miterLimit=c!==void 0?c:wc,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0;return i}setFillStrokeStyle(t,i){const n=this.state;this.fillStyleToState(t,n),this.strokeStyleToState(i,n)}createFill(t){const i=t.fillStyle,n=[Et.SET_FILL_STYLE,i];return typeof i!="string"&&n.push(t.fillPatternScale),n}applyStroke(t){this.instructions.push(this.createStroke(t))}createStroke(t){return[Et.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,t.lineDash?this.applyPixelRatio(t.lineDash):null,t.lineDashOffset*this.pixelRatio]}updateFillStyle(t,i){const n=t.fillStyle;(typeof n!="string"||t.currentFillStyle!=n)&&(this.instructions.push(i.call(this,t)),t.currentFillStyle=n)}updateStrokeStyle(t,i){const n=t.strokeStyle,r=t.lineCap,s=t.lineDash,o=t.lineDashOffset,a=t.lineJoin,l=t.lineWidth,c=t.miterLimit;(t.currentStrokeStyle!=n||t.currentLineCap!=r||s!=t.currentLineDash&&!Ms(t.currentLineDash,s)||t.currentLineDashOffset!=o||t.currentLineJoin!=a||t.currentLineWidth!=l||t.currentMiterLimit!=c)&&(i.call(this,t),t.currentStrokeStyle=n,t.currentLineCap=r,t.currentLineDash=s,t.currentLineDashOffset=o,t.currentLineJoin=a,t.currentLineWidth=l,t.currentMiterLimit=c)}endGeometry(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const i=[Et.END_GEOMETRY,t];this.instructions.push(i),this.hitDetectionInstructions.push(i)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=fw(this.maxExtent),this.maxLineWidth>0)){const t=this.resolution*(this.maxLineWidth+1)/2;Rn(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class j3 extends oh{constructor(t,i,n,r){super(t,i,n,r),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(t,i,n){if(!this.image_||this.maxExtent&&!Co(this.maxExtent,t.getFlatCoordinates()))return;this.beginGeometry(t,i,n);const r=t.getFlatCoordinates(),s=t.getStride(),o=this.coordinates.length,a=this.appendFlatPointCoordinates(r,s);this.instructions.push([Et.DRAW_IMAGE,o,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Et.DRAW_IMAGE,o,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(i)}drawMultiPoint(t,i,n){if(!this.image_)return;this.beginGeometry(t,i,n);const r=t.getFlatCoordinates(),s=[];for(let l=0,c=r.length;l<c;l+=t.getStride())(!this.maxExtent||Co(this.maxExtent,r.slice(l,l+2)))&&s.push(r[l],r[l+1]);const o=this.coordinates.length,a=this.appendFlatPointCoordinates(s,2);this.instructions.push([Et.DRAW_IMAGE,o,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Et.DRAW_IMAGE,o,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(i)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(t,i){const n=t.getAnchor(),r=t.getSize(),s=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=n[0],this.anchorY_=n[1],this.hitDetectionImage_=t.getHitDetectionImage(),this.image_=t.getImage(this.pixelRatio),this.height_=r[1],this.opacity_=t.getOpacity(),this.originX_=s[0],this.originY_=s[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=r[0],this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=i}}class H3 extends oh{constructor(t,i,n,r){super(t,i,n,r)}drawFlatCoordinates_(t,i,n,r){const s=this.coordinates.length,o=this.appendFlatLineCoordinates(t,i,n,r,!1,!1),a=[Et.MOVE_TO_LINE_TO,s,o];return this.instructions.push(a),this.hitDetectionInstructions.push(a),n}drawLineString(t,i,n){const r=this.state,s=r.strokeStyle,o=r.lineWidth;if(s===void 0||o===void 0)return;this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(t,i,n),this.hitDetectionInstructions.push([Et.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,Pr,Fr],ro);const a=t.getFlatCoordinates(),l=t.getStride();this.drawFlatCoordinates_(a,0,a.length,l),this.hitDetectionInstructions.push(_s),this.endGeometry(i)}drawMultiLineString(t,i,n){const r=this.state,s=r.strokeStyle,o=r.lineWidth;if(s===void 0||o===void 0)return;this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(t,i,n),this.hitDetectionInstructions.push([Et.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,Pr,Fr],ro);const a=t.getEnds(),l=t.getFlatCoordinates(),c=t.getStride();let h=0;for(let u=0,d=a.length;u<d;++u)h=this.drawFlatCoordinates_(l,h,a[u],c);this.hitDetectionInstructions.push(_s),this.endGeometry(i)}finish(){const t=this.state;return t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&this.instructions.push(_s),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(t){t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&(this.instructions.push(_s),t.lastStroke=this.coordinates.length),t.lastStroke=0,super.applyStroke(t),this.instructions.push(ro)}}class PC extends oh{constructor(t,i,n,r){super(t,i,n,r)}drawFlatCoordinatess_(t,i,n,r){const s=this.state,o=s.fillStyle!==void 0,a=s.strokeStyle!==void 0,l=n.length;this.instructions.push(ro),this.hitDetectionInstructions.push(ro);for(let c=0;c<l;++c){const h=n[c],u=this.coordinates.length,d=this.appendFlatLineCoordinates(t,i,h,r,!0,!a),f=[Et.MOVE_TO_LINE_TO,u,d];this.instructions.push(f),this.hitDetectionInstructions.push(f),a&&(this.instructions.push(IC),this.hitDetectionInstructions.push(IC)),i=h}return o&&(this.instructions.push(Fh),this.hitDetectionInstructions.push(Fh)),a&&(this.instructions.push(_s),this.hitDetectionInstructions.push(_s)),i}drawCircle(t,i,n){const r=this.state,s=r.fillStyle,o=r.strokeStyle;if(s===void 0&&o===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,i,n),r.fillStyle!==void 0&&this.hitDetectionInstructions.push([Et.SET_FILL_STYLE,Di]),r.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Et.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,Pr,Fr]);const a=t.getFlatCoordinates(),l=t.getStride(),c=this.coordinates.length;this.appendFlatLineCoordinates(a,0,a.length,l,!1,!1);const h=[Et.CIRCLE,c];this.instructions.push(ro,h),this.hitDetectionInstructions.push(ro,h),r.fillStyle!==void 0&&(this.instructions.push(Fh),this.hitDetectionInstructions.push(Fh)),r.strokeStyle!==void 0&&(this.instructions.push(_s),this.hitDetectionInstructions.push(_s)),this.endGeometry(i)}drawPolygon(t,i,n){const r=this.state,s=r.fillStyle,o=r.strokeStyle;if(s===void 0&&o===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,i,n),r.fillStyle!==void 0&&this.hitDetectionInstructions.push([Et.SET_FILL_STYLE,Di]),r.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Et.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,Pr,Fr]);const a=t.getEnds(),l=t.getOrientedFlatCoordinates(),c=t.getStride();this.drawFlatCoordinatess_(l,0,a,c),this.endGeometry(i)}drawMultiPolygon(t,i,n){const r=this.state,s=r.fillStyle,o=r.strokeStyle;if(s===void 0&&o===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,i,n),r.fillStyle!==void 0&&this.hitDetectionInstructions.push([Et.SET_FILL_STYLE,Di]),r.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Et.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,Pr,Fr]);const a=t.getEndss(),l=t.getOrientedFlatCoordinates(),c=t.getStride();let h=0;for(let u=0,d=a.length;u<d;++u)h=this.drawFlatCoordinatess_(l,h,a[u],c);this.endGeometry(i)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const t=this.tolerance;if(t!==0){const i=this.coordinates;for(let n=0,r=i.length;n<r;++n)i[n]=qs(i[n],t)}return super.finish()}setFillStrokeStyles_(){const t=this.state;this.updateFillStyle(t,this.createFill),this.updateStrokeStyle(t,this.applyStroke)}}function V3(e,t,i,n,r){const s=[];let o=i,a=0,l=t.slice(i,2);for(;a<e&&o+r<n;){const[c,h]=l.slice(-2),u=t[o+r],d=t[o+r+1],f=Math.sqrt((u-c)*(u-c)+(d-h)*(d-h));if(a+=f,a>=e){const g=(e-a+f)/f,p=Vi(c,u,g),m=Vi(h,d,g);l.push(p,m),s.push(l),l=[p,m],a==e&&(o+=r),a=0}else if(a<e)l.push(t[o+r],t[o+r+1]),o+=r;else{const g=f-a,p=Vi(c,u,g/f),m=Vi(h,d,g/f);l.push(p,m),s.push(l),l=[p,m],a=0,o+=r}}return a>0&&s.push(l),s}function U3(e,t,i,n,r){let s=i,o=i,a=0,l=0,c=i,h,u,d,f,g,p,m,y,_,C;for(u=i;u<n;u+=r){const b=t[u],v=t[u+1];g!==void 0&&(_=b-g,C=v-p,f=Math.sqrt(_*_+C*C),m!==void 0&&(l+=d,h=Math.acos((m*_+y*C)/(d*f)),h>e&&(l>a&&(a=l,s=c,o=u),l=0,c=u-r)),d=f,m=_,y=C),g=b,p=v}return l+=f,l>a?[c,u]:[s,o]}const Uu={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class q3 extends oh{constructor(t,i,n,r){super(t,i,n,r),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textKeepUpright_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[Di]={fillStyle:Di},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const t=super.finish();return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t}drawText(t,i,n){const r=this.textFillState_,s=this.textStrokeState_,o=this.textState_;if(this.text_===""||!o||!r&&!s)return;const a=this.coordinates;let l=a.length;const c=t.getType();let h=null,u=t.getStride();if(o.placement==="line"&&(c=="LineString"||c=="MultiLineString"||c=="Polygon"||c=="MultiPolygon")){if(!we(this.maxExtent,t.getExtent()))return;let d;if(h=t.getFlatCoordinates(),c=="LineString")d=[h.length];else if(c=="MultiLineString")d=t.getEnds();else if(c=="Polygon")d=t.getEnds().slice(0,1);else if(c=="MultiPolygon"){const m=t.getEndss();d=[];for(let y=0,_=m.length;y<_;++y)d.push(m[y][0])}this.beginGeometry(t,i,n);const f=o.repeat,g=f?void 0:o.textAlign;let p=0;for(let m=0,y=d.length;m<y;++m){let _;f?_=V3(f*this.resolution,h,p,d[m],u):_=[h.slice(p,d[m])];for(let C=0,b=_.length;C<b;++C){const v=_[C];let S=0,w=v.length;if(g==null){const A=U3(o.maxAngle,v,0,v.length,2);S=A[0],w=A[1]}for(let A=S;A<w;A+=u)a.push(v[A],v[A+1]);const L=a.length;p=d[m],this.drawChars_(l,L),l=L}}this.endGeometry(i)}else{let d=o.overflow?null:[];switch(c){case"Point":case"MultiPoint":h=t.getFlatCoordinates();break;case"LineString":h=t.getFlatMidpoint();break;case"Circle":h=t.getCenter();break;case"MultiLineString":h=t.getFlatMidpoints(),u=2;break;case"Polygon":h=t.getFlatInteriorPoint(),o.overflow||d.push(h[2]/this.resolution),u=3;break;case"MultiPolygon":const b=t.getFlatInteriorPoints();h=[];for(let v=0,S=b.length;v<S;v+=3)o.overflow||d.push(b[v+2]/this.resolution),h.push(b[v],b[v+1]);if(h.length===0)return;u=2;break}const f=this.appendFlatPointCoordinates(h,u);if(f===l)return;if(d&&(f-l)/2!==h.length/u){let b=l/2;d=d.filter((v,S)=>{const w=a[(b+S)*2]===h[S*u]&&a[(b+S)*2+1]===h[S*u+1];return w||--b,w})}this.saveTextStates_();const g=o.backgroundFill?this.createFill(this.fillStyleToState(o.backgroundFill)):null,p=o.backgroundStroke?this.createStroke(this.strokeStyleToState(o.backgroundStroke)):null;this.beginGeometry(t,i,n);let m=o.padding;if(m!=no&&(o.scale[0]<0||o.scale[1]<0)){let b=o.padding[0],v=o.padding[1],S=o.padding[2],w=o.padding[3];o.scale[0]<0&&(v=-v,w=-w),o.scale[1]<0&&(b=-b,S=-S),m=[b,v,S,w]}const y=this.pixelRatio;this.instructions.push([Et.DRAW_IMAGE,l,f,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,m==no?no:m.map(function(b){return b*y}),g,p,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,d]);const _=1/y,C=g?g.slice(0):null;C&&(C[1]=Di),this.hitDetectionInstructions.push([Et.DRAW_IMAGE,l,f,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[_,_],NaN,this.declutterMode_,this.declutterImageWithText_,m,C,p,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?Di:this.fillKey_,this.textOffsetX_,this.textOffsetY_,d]),this.endGeometry(i)}}saveTextStates_(){const t=this.textStrokeState_,i=this.textState_,n=this.textFillState_,r=this.strokeKey_;t&&(r in this.strokeStates||(this.strokeStates[r]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));const s=this.textKey_;s in this.textStates||(this.textStates[s]={font:i.font,textAlign:i.textAlign||Tc,justify:i.justify,textBaseline:i.textBaseline||Gu,scale:i.scale});const o=this.fillKey_;n&&(o in this.fillStates||(this.fillStates[o]={fillStyle:n.fillStyle}))}drawChars_(t,i){const n=this.textStrokeState_,r=this.textState_,s=this.strokeKey_,o=this.textKey_,a=this.fillKey_;this.saveTextStates_();const l=this.pixelRatio,c=Uu[r.textBaseline],h=this.textOffsetY_*l,u=this.text_,d=n?n.lineWidth*Math.abs(r.scale[0])/2:0;this.instructions.push([Et.DRAW_CHARS,t,i,c,r.overflow,a,r.maxAngle,l,h,s,d*l,u,o,1,this.declutterMode_,this.textKeepUpright_]),this.hitDetectionInstructions.push([Et.DRAW_CHARS,t,i,c,r.overflow,a&&Di,r.maxAngle,l,h,s,d*l,u,o,1/l,this.declutterMode_,this.textKeepUpright_])}setTextStyle(t,i){let n,r,s;if(!t)this.text_="";else{const o=t.getFill();o?(r=this.textFillState_,r||(r={},this.textFillState_=r),r.fillStyle=Jn(o.getColor()||Di)):(r=null,this.textFillState_=r);const a=t.getStroke();if(!a)s=null,this.textStrokeState_=s;else{s=this.textStrokeState_,s||(s={},this.textStrokeState_=s);const p=a.getLineDash(),m=a.getLineDashOffset(),y=a.getWidth(),_=a.getMiterLimit();s.lineCap=a.getLineCap()||Na,s.lineDash=p?p.slice():Pr,s.lineDashOffset=m===void 0?Fr:m,s.lineJoin=a.getLineJoin()||$a,s.lineWidth=y===void 0?Ec:y,s.miterLimit=_===void 0?wc:_,s.strokeStyle=Jn(a.getColor()||Sc)}n=this.textState_;const l=t.getFont()||sS;WB(l);const c=t.getScaleArray();n.overflow=t.getOverflow(),n.font=l,n.maxAngle=t.getMaxAngle(),n.placement=t.getPlacement(),n.textAlign=t.getTextAlign(),n.repeat=t.getRepeat(),n.justify=t.getJustify(),n.textBaseline=t.getTextBaseline()||Gu,n.backgroundFill=t.getBackgroundFill(),n.backgroundStroke=t.getBackgroundStroke(),n.padding=t.getPadding()||no,n.scale=c===void 0?[1,1]:c;const h=t.getOffsetX(),u=t.getOffsetY(),d=t.getRotateWithView(),f=t.getKeepUpright(),g=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=h===void 0?0:h,this.textOffsetY_=u===void 0?0:u,this.textRotateWithView_=d===void 0?!1:d,this.textKeepUpright_=f===void 0?!0:f,this.textRotation_=g===void 0?0:g,this.strokeKey_=s?(typeof s.strokeStyle=="string"?s.strokeStyle:Nt(s.strokeStyle))+s.lineCap+s.lineDashOffset+"|"+s.lineWidth+s.lineJoin+s.miterLimit+"["+s.lineDash.join()+"]":"",this.textKey_=n.font+n.scale+(n.textAlign||"?")+(n.repeat||"?")+(n.justify||"?")+(n.textBaseline||"?"),this.fillKey_=r&&r.fillStyle?typeof r.fillStyle=="string"?r.fillStyle:"|"+Nt(r.fillStyle):""}this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=i}}const Y3={Circle:PC,Default:oh,Image:j3,LineString:H3,Polygon:PC,Text:q3};class kS{constructor(t,i,n,r){this.tolerance_=t,this.maxExtent_=i,this.pixelRatio_=r,this.resolution_=n,this.buildersByZIndex_={}}finish(){const t={};for(const i in this.buildersByZIndex_){t[i]=t[i]||{};const n=this.buildersByZIndex_[i];for(const r in n){const s=n[r].finish();t[i][r]=s}}return t}getBuilder(t,i){const n=t!==void 0?t.toString():"0";let r=this.buildersByZIndex_[n];r===void 0&&(r={},this.buildersByZIndex_[n]=r);let s=r[i];if(s===void 0){const o=Y3[i];s=new o(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),r[i]=s}return s}}function xy(e,t,i,n){let r=e[t],s=e[t+1],o=0;for(let a=t+n;a<i;a+=n){const l=e[a],c=e[a+1];o+=Math.sqrt((l-r)*(l-r)+(c-s)*(c-s)),r=l,s=c}return o}function X3(e,t,i,n,r,s,o,a,l,c,h,u,d=!0){let f=e[t],g=e[t+1],p=0,m=0,y=0,_=0;function C(){p=f,m=g,t+=n,f=e[t],g=e[t+1],_+=y,y=Math.sqrt((f-p)*(f-p)+(g-m)*(g-m))}do C();while(t<i-n&&_+y<s);let b=y===0?0:(s-_)/y;const v=Vi(p,f,b),S=Vi(m,g,b),w=t-n,L=_,A=s+a*l(c,r,h);for(;t<i-n&&_+y<A;)C();b=y===0?0:(A-_)/y;const B=Vi(p,f,b),O=Vi(m,g,b);let F=!1;if(d)if(u){const D=[v,S,B,O];Pw(D,0,4,2,u,D,D),F=D[0]>D[2]}else F=v>B;const R=Math.PI,T=[],P=w+n===t;t=w,y=0,_=L,f=e[t],g=e[t+1];let E;if(P){C(),E=Math.atan2(g-m,f-p),F&&(E+=E>0?-R:R);const D=(B+v)/2,M=(O+S)/2;return T[0]=[D,M,(A-s)/2,E,r],T}r=r.replace(/\n/g," ");for(let D=0,M=r.length;D<M;){C();let j=Math.atan2(g-m,f-p);if(F&&(j+=j>0?-R:R),E!==void 0){let at=j-E;if(at+=at>R?-2*R:at<-R?2*R:0,Math.abs(at)>o)return null}E=j;const Y=D;let K=0;for(;D<M;++D){const at=F?M-D-1:D,It=a*l(c,r[at],h);if(t+n<i&&_+y<s+K+It/2)break;K+=It}if(D===Y)continue;const G=F?r.substring(M-Y,M-D):r.substring(Y,D);b=y===0?0:(s+K/2-_)/y;const Q=Vi(p,f,b),ut=Vi(m,g,b);T.push([Q,ut,K/2,j,G]),s+=K}return T}const qo=ki(),ns=[],xr=[],Cr=[],rs=[];function FC(e){return e[3].declutterBox}const OC=new RegExp("[-----]");function Gg(e,t){return t==="start"?t=OC.test(e)?"right":"left":t==="end"&&(t=OC.test(e)?"left":"right"),Uu[t]}function K3(e,t,i){return i>0&&e.push(`
`,""),e.push(t,""),e}function Z3(e,t,i){return i%2===0&&(e+=t),e}class J3{constructor(t,i,n,r,s){this.overlaps=n,this.pixelRatio=i,this.resolution=t,this.alignAndScaleFill_,this.instructions=r.instructions,this.coordinates=r.coordinates,this.coordinateCache_={},this.renderedTransform_=Yi(),this.hitDetectionInstructions=r.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=r.fillStates||{},this.strokeStates=r.strokeStates||{},this.textStates=r.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=s?new fy:null}getZIndexContext(){return this.zIndexContext_}createLabel(t,i,n,r){const s=t+i+n+r;if(this.labels_[s])return this.labels_[s];const o=r?this.strokeStates[r]:null,a=n?this.fillStates[n]:null,l=this.textStates[i],c=this.pixelRatio,h=[l.scale[0]*c,l.scale[1]*c],u=l.justify?Uu[l.justify]:Gg(Array.isArray(t)?t[0]:t,l.textAlign||Tc),d=r&&o.lineWidth?o.lineWidth:0,f=Array.isArray(t)?t:String(t).split(`
`).reduce(K3,[]),{width:g,height:p,widths:m,heights:y,lineWidths:_}=HB(l,f),C=g+d,b=[],v=(C+2)*h[0],S=(p+d)*h[1],w={width:v<0?Math.floor(v):Math.ceil(v),height:S<0?Math.floor(S):Math.ceil(S),contextInstructions:b};(h[0]!=1||h[1]!=1)&&b.push("scale",h),r&&(b.push("strokeStyle",o.strokeStyle),b.push("lineWidth",d),b.push("lineCap",o.lineCap),b.push("lineJoin",o.lineJoin),b.push("miterLimit",o.miterLimit),b.push("setLineDash",[o.lineDash]),b.push("lineDashOffset",o.lineDashOffset)),n&&b.push("fillStyle",a.fillStyle),b.push("textBaseline","middle"),b.push("textAlign","center");const L=.5-u;let A=u*C+L*d;const B=[],O=[];let F=0,R=0,T=0,P=0,E;for(let D=0,M=f.length;D<M;D+=2){const j=f[D];if(j===`
`){R+=F,F=0,A=u*C+L*d,++P;continue}const Y=f[D+1]||l.font;Y!==E&&(r&&B.push("font",Y),n&&O.push("font",Y),E=Y),F=Math.max(F,y[T]);const K=[j,A+L*m[T]+u*(m[T]-_[P]),.5*(d+F)+R];A+=m[T],r&&B.push("strokeText",K),n&&O.push("fillText",K),++T}return Array.prototype.push.apply(b,B),Array.prototype.push.apply(b,O),this.labels_[s]=w,w}replayTextBackground_(t,i,n,r,s,o,a){t.beginPath(),t.moveTo.apply(t,i),t.lineTo.apply(t,n),t.lineTo.apply(t,r),t.lineTo.apply(t,s),t.lineTo.apply(t,i),o&&(this.alignAndScaleFill_=o[2],t.fillStyle=o[1],this.fill_(t)),a&&(this.setStrokeStyle_(t,a),t.stroke())}calculateImageOrLabelDimensions_(t,i,n,r,s,o,a,l,c,h,u,d,f,g,p,m){a*=d[0],l*=d[1];let y=n-a,_=r-l;const C=s+c>t?t-c:s,b=o+h>i?i-h:o,v=g[3]+C*d[0]+g[1],S=g[0]+b*d[1]+g[2],w=y-g[3],L=_-g[0];(p||u!==0)&&(ns[0]=w,rs[0]=w,ns[1]=L,xr[1]=L,xr[0]=w+v,Cr[0]=xr[0],Cr[1]=L+S,rs[1]=Cr[1]);let A;return u!==0?(A=sr(Yi(),n,r,1,1,u,-n,-r),Fe(A,ns),Fe(A,xr),Fe(A,Cr),Fe(A,rs),zr(Math.min(ns[0],xr[0],Cr[0],rs[0]),Math.min(ns[1],xr[1],Cr[1],rs[1]),Math.max(ns[0],xr[0],Cr[0],rs[0]),Math.max(ns[1],xr[1],Cr[1],rs[1]),qo)):zr(Math.min(w,w+v),Math.min(L,L+S),Math.max(w,w+v),Math.max(L,L+S),qo),f&&(y=Math.round(y),_=Math.round(_)),{drawImageX:y,drawImageY:_,drawImageW:C,drawImageH:b,originX:c,originY:h,declutterBox:{minX:qo[0],minY:qo[1],maxX:qo[2],maxY:qo[3],value:m},canvasTransform:A,scale:d}}replayImageOrLabel_(t,i,n,r,s,o,a){const l=!!(o||a),c=r.declutterBox,h=a?a[2]*r.scale[0]/2:0;return c.minX-h<=i[0]&&c.maxX+h>=0&&c.minY-h<=i[1]&&c.maxY+h>=0&&(l&&this.replayTextBackground_(t,ns,xr,Cr,rs,o,a),VB(t,r.canvasTransform,s,n,r.originX,r.originY,r.drawImageW,r.drawImageH,r.drawImageX,r.drawImageY,r.scale)),!0}fill_(t){const i=this.alignAndScaleFill_;if(i){const n=Fe(this.renderedTransform_,[0,0]),r=512*this.pixelRatio;t.save(),t.translate(n[0]%r,n[1]%r),i!==1&&t.scale(i,i),t.rotate(this.viewRotation_)}t.fill(),i&&t.restore()}setStrokeStyle_(t,i){t.strokeStyle=i[1],i[1]&&(t.lineWidth=i[2],t.lineCap=i[3],t.lineJoin=i[4],t.miterLimit=i[5],t.lineDashOffset=i[7],t.setLineDash(i[6]))}drawLabelWithPointPlacement_(t,i,n,r){const s=this.textStates[i],o=this.createLabel(t,i,r,n),a=this.strokeStates[n],l=this.pixelRatio,c=Gg(Array.isArray(t)?t[0]:t,s.textAlign||Tc),h=Uu[s.textBaseline||Gu],u=a&&a.lineWidth?a.lineWidth:0,d=o.width/l-2*s.scale[0],f=c*d+2*(.5-c)*u,g=h*o.height/l+2*(.5-h)*u;return{label:o,anchorX:f,anchorY:g}}execute_(t,i,n,r,s,o,a,l){const c=this.zIndexContext_;let h;this.pixelCoordinates_&&Ms(n,this.renderedTransform_)?h=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),h=vs(this.coordinates,0,this.coordinates.length,2,n,this.pixelCoordinates_),zO(this.renderedTransform_,n));let u=0;const d=r.length;let f=0,g,p,m,y,_,C,b,v,S,w,L,A,B,O=0,F=0;const R=this.coordinateCache_,T=this.viewRotation_,P=Math.round(Math.atan2(-n[1],n[0])*1e12)/1e12,E={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:T},D=this.instructions!=r||this.overlaps?0:200;let M,j,Y,K;for(;u<d;){const G=r[u];switch(G[0]){case Et.BEGIN_GEOMETRY:M=G[1],K=G[3],M.getGeometry()?a!==void 0&&!we(a,K.getExtent())?u=G[2]+1:++u:u=G[2],c&&(c.zIndex=G[4]);break;case Et.BEGIN_PATH:O>D&&(this.fill_(t),O=0),F>D&&(t.stroke(),F=0),!O&&!F&&(t.beginPath(),_=NaN,C=NaN),++u;break;case Et.CIRCLE:f=G[1];const ut=h[f],at=h[f+1],It=h[f+2],W=h[f+3],et=It-ut,J=W-at,it=Math.sqrt(et*et+J*J);t.moveTo(ut+it,at),t.arc(ut,at,it,0,2*Math.PI,!0),++u;break;case Et.CLOSE_PATH:t.closePath(),++u;break;case Et.CUSTOM:f=G[1],g=G[2];const Rt=G[3],k=G[4],I=G[5];E.geometry=Rt,E.feature=M,u in R||(R[u]=[]);const $=R[u];I?I(h,f,g,2,$):($[0]=h[f],$[1]=h[f+1],$.length=2),c&&(c.zIndex=G[6]),k($,E),++u;break;case Et.DRAW_IMAGE:f=G[1],g=G[2],S=G[3],p=G[4],m=G[5];let H=G[6];const U=G[7],V=G[8],ot=G[9],st=G[10];let tt=G[11];const Z=G[12];let Ct=G[13];y=G[14]||"declutter";const nt=G[15];if(!S&&G.length>=20){w=G[19],L=G[20],A=G[21],B=G[22];const Li=this.drawLabelWithPointPlacement_(w,L,A,B);S=Li.label,G[3]=S;const le=G[23];p=(Li.anchorX-le)*this.pixelRatio,G[4]=p;const Be=G[24];m=(Li.anchorY-Be)*this.pixelRatio,G[5]=m,H=S.height,G[6]=H,Ct=S.width,G[13]=Ct}let _t;G.length>25&&(_t=G[25]);let wt,Dt,$t;G.length>17?(wt=G[16],Dt=G[17],$t=G[18]):(wt=no,Dt=null,$t=null),st&&P?tt+=T:!st&&!P&&(tt-=T);let Vt=0;for(;f<g;f+=2){if(_t&&_t[Vt++]<Ct/this.pixelRatio)continue;const Li=this.calculateImageOrLabelDimensions_(S.width,S.height,h[f],h[f+1],Ct,H,p,m,V,ot,tt,Z,s,wt,!!Dt||!!$t,M),le=[t,i,S,Li,U,Dt,$t];if(l){let Be,Zi,mi;if(nt){const ge=g-f;if(!nt[ge]){nt[ge]={args:le,declutterMode:y};continue}const Ye=nt[ge];Be=Ye.args,Zi=Ye.declutterMode,delete nt[ge],mi=FC(Be)}let Wi,Ji;if(Be&&(Zi!=="declutter"||!l.collides(mi))&&(Wi=!0),(y!=="declutter"||!l.collides(Li.declutterBox))&&(Ji=!0),Zi==="declutter"&&y==="declutter"){const ge=Wi&&Ji;Wi=ge,Ji=ge}Wi&&(Zi!=="none"&&l.insert(mi),this.replayImageOrLabel_.apply(this,Be)),Ji&&(y!=="none"&&l.insert(Li.declutterBox),this.replayImageOrLabel_.apply(this,le))}else this.replayImageOrLabel_.apply(this,le)}++u;break;case Et.DRAW_CHARS:const Le=G[1],Me=G[2],Ve=G[3],pi=G[4];B=G[5];const Ki=G[6],Nn=G[7],he=G[8];A=G[9];const Se=G[10];w=G[11],Array.isArray(w)&&(w=w.reduce(Z3,"")),L=G[12];const dr=[G[13],G[13]];y=G[14]||"declutter";const Kr=G[15],al=this.textStates[L],$n=al.font,zn=[al.scale[0]*Nn,al.scale[1]*Nn];let Ns;$n in this.widths_?Ns=this.widths_[$n]:(Ns={},this.widths_[$n]=Ns);const Zr=xy(h,Le,Me,2),_h=Math.abs(zn[0])*yC($n,w,Ns);if(pi||_h<=Zr){const Li=this.textStates[L].textAlign,le=(Zr-_h)*Gg(w,Li),Be=X3(h,Le,Me,2,w,le,Ki,Math.abs(zn[0]),yC,$n,Ns,P?0:this.viewRotation_,Kr);t:if(Be){const Zi=[];let mi,Wi,Ji,ge,Ye;if(A)for(mi=0,Wi=Be.length;mi<Wi;++mi){Ye=Be[mi],Ji=Ye[4],ge=this.createLabel(Ji,L,"",A),p=Ye[2]+(zn[0]<0?-Se:Se),m=Ve*ge.height+(.5-Ve)*2*Se*zn[1]/zn[0]-he;const Ie=this.calculateImageOrLabelDimensions_(ge.width,ge.height,Ye[0],Ye[1],ge.width,ge.height,p,m,0,0,Ye[3],dr,!1,no,!1,M);if(l&&y==="declutter"&&l.collides(Ie.declutterBox))break t;Zi.push([t,i,ge,Ie,1,null,null])}if(B)for(mi=0,Wi=Be.length;mi<Wi;++mi){Ye=Be[mi],Ji=Ye[4],ge=this.createLabel(Ji,L,B,""),p=Ye[2],m=Ve*ge.height-he;const Ie=this.calculateImageOrLabelDimensions_(ge.width,ge.height,Ye[0],Ye[1],ge.width,ge.height,p,m,0,0,Ye[3],dr,!1,no,!1,M);if(l&&y==="declutter"&&l.collides(Ie.declutterBox))break t;Zi.push([t,i,ge,Ie,1,null,null])}l&&y!=="none"&&l.load(Zi.map(FC));for(let Ie=0,fr=Zi.length;Ie<fr;++Ie)this.replayImageOrLabel_.apply(this,Zi[Ie])}}++u;break;case Et.END_GEOMETRY:if(o!==void 0){M=G[1];const Li=o(M,K,y);if(Li)return Li}++u;break;case Et.FILL:D?O++:this.fill_(t),++u;break;case Et.MOVE_TO_LINE_TO:for(f=G[1],g=G[2],j=h[f],Y=h[f+1],t.moveTo(j,Y),_=j+.5|0,C=Y+.5|0,f+=2;f<g;f+=2)j=h[f],Y=h[f+1],b=j+.5|0,v=Y+.5|0,(f==g-2||b!==_||v!==C)&&(t.lineTo(j,Y),_=b,C=v);++u;break;case Et.SET_FILL_STYLE:this.alignAndScaleFill_=G[2],O&&(this.fill_(t),O=0,F&&(t.stroke(),F=0)),t.fillStyle=G[1],++u;break;case Et.SET_STROKE_STYLE:F&&(t.stroke(),F=0),this.setStrokeStyle_(t,G),++u;break;case Et.STROKE:D?F++:t.stroke(),++u;break;default:++u;break}}O&&this.fill_(t),F&&t.stroke()}execute(t,i,n,r,s,o){this.viewRotation_=r,this.execute_(t,i,n,this.instructions,s,void 0,void 0,o)}executeHitDetection(t,i,n,r,s){return this.viewRotation_=n,this.execute_(t,[t.canvas.width,t.canvas.height],i,this.hitDetectionInstructions,!0,r,s)}}const Qs=["Polygon","Circle","LineString","Image","Text","Default"],qu=["Image","Text"],Q3=Qs.filter(e=>!qu.includes(e));class RS{constructor(t,i,n,r,s,o,a){this.maxExtent_=t,this.overlaps_=r,this.pixelRatio_=n,this.resolution_=i,this.renderBuffer_=o,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=Yi(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(s,a)}clip(t,i){const n=this.getClipCoords(i);t.beginPath(),t.moveTo(n[0],n[1]),t.lineTo(n[2],n[3]),t.lineTo(n[4],n[5]),t.lineTo(n[6],n[7]),t.clip()}createExecutors_(t,i){for(const n in t){let r=this.executorsByZIndex_[n];r===void 0&&(r={},this.executorsByZIndex_[n]=r);const s=t[n];for(const o in s){const a=s[o];r[o]=new J3(this.resolution_,this.pixelRatio_,this.overlaps_,a,i)}}}hasExecutors(t){for(const i in this.executorsByZIndex_){const n=this.executorsByZIndex_[i];for(let r=0,s=t.length;r<s;++r)if(t[r]in n)return!0}return!1}forEachFeatureAtCoordinate(t,i,n,r,s,o){r=Math.round(r);const a=r*2+1,l=sr(this.hitDetectionTransform_,r+.5,r+.5,1/i,-1/i,-n,-t[0],-t[1]),c=!this.hitDetectionContext_;c&&(this.hitDetectionContext_=De(a,a));const h=this.hitDetectionContext_;h.canvas.width!==a||h.canvas.height!==a?(h.canvas.width=a,h.canvas.height=a):c||h.clearRect(0,0,a,a);let u;this.renderBuffer_!==void 0&&(u=ki(),tc(u,t),Rn(u,i*(this.renderBuffer_+r),u));const d=tN(r);let f;function g(v,S,w){const L=h.getImageData(0,0,a,a).data;for(let A=0,B=d.length;A<B;A++)if(L[d[A]]>0){if(!o||w==="none"||f!=="Image"&&f!=="Text"||o.includes(v)){const O=(d[A]-3)/4,F=r-O%a,R=r-(O/a|0),T=s(v,S,F*F+R*R);if(T)return T}h.clearRect(0,0,a,a);break}}const p=Object.keys(this.executorsByZIndex_).map(Number);p.sort(tr);let m,y,_,C,b;for(m=p.length-1;m>=0;--m){const v=p[m].toString();for(_=this.executorsByZIndex_[v],y=Qs.length-1;y>=0;--y)if(f=Qs[y],C=_[f],C!==void 0&&(b=C.executeHitDetection(h,l,n,g,u),b))return b}}getClipCoords(t){const i=this.maxExtent_;if(!i)return null;const n=i[0],r=i[1],s=i[2],o=i[3],a=[n,r,n,o,s,o,s,r];return vs(a,0,8,2,t,a),a}isEmpty(){return _o(this.executorsByZIndex_)}execute(t,i,n,r,s,o,a){const l=Object.keys(this.executorsByZIndex_).map(Number);l.sort(a?GF:tr),o=o||Qs;const c=Qs.length;for(let h=0,u=l.length;h<u;++h){const d=l[h].toString(),f=this.executorsByZIndex_[d];for(let g=0,p=o.length;g<p;++g){const m=o[g],y=f[m];if(y!==void 0){const _=a===null?void 0:y.getZIndexContext(),C=_?_.getContext():t,b=this.maxExtent_&&m!=="Image"&&m!=="Text";if(b&&(C.save(),this.clip(C,n)),!_||m==="Text"||m==="Image"?y.execute(C,i,n,r,s,a):_.pushFunction(v=>y.execute(v,i,n,r,s,a)),b&&C.restore(),_){_.offset();const v=l[h]*c+Qs.indexOf(m);this.deferredZIndexContexts_[v]||(this.deferredZIndexContexts_[v]=[]),this.deferredZIndexContexts_[v].push(_)}}}}this.renderedContext_=t}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const t=this.deferredZIndexContexts_,i=Object.keys(t).map(Number).sort(tr);for(let n=0,r=i.length;n<r;++n)t[i[n]].forEach(s=>{s.draw(this.renderedContext_),s.clear()}),t[i[n]].length=0}}const Wg={};function tN(e){if(Wg[e]!==void 0)return Wg[e];const t=e*2+1,i=e*e,n=new Array(i+1);for(let s=0;s<=e;++s)for(let o=0;o<=e;++o){const a=s*s+o*o;if(a>i)break;let l=n[a];l||(l=[],n[a]=l),l.push(((e+s)*t+(e+o))*4+3),s>0&&l.push(((e-s)*t+(e+o))*4+3),o>0&&(l.push(((e+s)*t+(e-o))*4+3),s>0&&l.push(((e-s)*t+(e-o))*4+3))}const r=[];for(let s=0,o=n.length;s<o;++s)n[s]&&r.push(...n[s]);return Wg[e]=r,r}class AS extends ES{constructor(t,i,n,r,s,o,a){super(),this.context_=t,this.pixelRatio_=i,this.extent_=n,this.transform_=r,this.transformRotation_=r?Jc(Math.atan2(r[1],r[0]),10):0,this.viewRotation_=s,this.squaredTolerance_=o,this.userTransform_=a,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=Yi()}drawImages_(t,i,n,r){if(!this.image_)return;const s=vs(t,i,n,r,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.tmpLocalTransform_,l=o.globalAlpha;this.imageOpacity_!=1&&(o.globalAlpha=l*this.imageOpacity_);let c=this.imageRotation_;this.transformRotation_===0&&(c-=this.viewRotation_),this.imageRotateWithView_&&(c+=this.viewRotation_);for(let h=0,u=s.length;h<u;h+=2){const d=s[h]-this.imageAnchorX_,f=s[h+1]-this.imageAnchorY_;if(c!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const g=d+this.imageAnchorX_,p=f+this.imageAnchorY_;sr(a,g,p,1,1,c,-g,-p),o.save(),o.transform.apply(o,a),o.translate(g,p),o.scale(this.imageScale_[0],this.imageScale_[1]),o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),o.restore()}else o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,d,f,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(o.globalAlpha=l)}drawText_(t,i,n,r){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const s=vs(t,i,n,r,this.transform_,this.pixelCoordinates_),o=this.context_;let a=this.textRotation_;for(this.transformRotation_===0&&(a-=this.viewRotation_),this.textRotateWithView_&&(a+=this.viewRotation_);i<n;i+=r){const l=s[i]+this.textOffsetX_,c=s[i+1]+this.textOffsetY_;a!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(o.save(),o.translate(l-this.textOffsetX_,c-this.textOffsetY_),o.rotate(a),o.translate(this.textOffsetX_,this.textOffsetY_),o.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&o.strokeText(this.text_,0,0),this.textFillState_&&o.fillText(this.text_,0,0),o.restore()):(this.textStrokeState_&&o.strokeText(this.text_,l,c),this.textFillState_&&o.fillText(this.text_,l,c))}}moveToLineTo_(t,i,n,r,s){const o=this.context_,a=vs(t,i,n,r,this.transform_,this.pixelCoordinates_);o.moveTo(a[0],a[1]);let l=a.length;s&&(l-=2);for(let c=2;c<l;c+=2)o.lineTo(a[c],a[c+1]);return s&&o.closePath(),n}drawRings_(t,i,n,r){for(let s=0,o=n.length;s<o;++s)i=this.moveToLineTo_(t,i,n[s],r,!0);return i}drawCircle(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!we(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const i=KO(t,this.transform_,this.pixelCoordinates_),n=i[2]-i[0],r=i[3]-i[1],s=Math.sqrt(n*n+r*r),o=this.context_;o.beginPath(),o.arc(i[0],i[1],s,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}this.text_!==""&&this.drawText_(t.getCenter(),0,2,2)}}setStyle(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())}setTransform(t){this.transform_=t}drawGeometry(t){switch(t.getType()){case"Point":this.drawPoint(t);break;case"LineString":this.drawLineString(t);break;case"Polygon":this.drawPolygon(t);break;case"MultiPoint":this.drawMultiPoint(t);break;case"MultiLineString":this.drawMultiLineString(t);break;case"MultiPolygon":this.drawMultiPolygon(t);break;case"GeometryCollection":this.drawGeometryCollection(t);break;case"Circle":this.drawCircle(t);break}}drawFeature(t,i){const n=i.getGeometryFunction()(t);n&&(this.setStyle(i),this.drawGeometry(n))}drawGeometryCollection(t){const i=t.getGeometriesArray();for(let n=0,r=i.length;n<r;++n)this.drawGeometry(i[n])}drawPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const i=t.getFlatCoordinates(),n=t.getStride();this.image_&&this.drawImages_(i,0,i.length,n),this.text_!==""&&this.drawText_(i,0,i.length,n)}drawMultiPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const i=t.getFlatCoordinates(),n=t.getStride();this.image_&&this.drawImages_(i,0,i.length,n),this.text_!==""&&this.drawText_(i,0,i.length,n)}drawLineString(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!we(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const i=this.context_,n=t.getFlatCoordinates();i.beginPath(),this.moveToLineTo_(n,0,n.length,t.getStride(),!1),i.stroke()}if(this.text_!==""){const i=t.getFlatMidpoint();this.drawText_(i,0,2,2)}}}drawMultiLineString(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const i=t.getExtent();if(we(this.extent_,i)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const n=this.context_,r=t.getFlatCoordinates();let s=0;const o=t.getEnds(),a=t.getStride();n.beginPath();for(let l=0,c=o.length;l<c;++l)s=this.moveToLineTo_(r,s,o[l],a,!1);n.stroke()}if(this.text_!==""){const n=t.getFlatMidpoints();this.drawText_(n,0,n.length,2)}}}drawPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!we(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const i=this.context_;i.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&i.fill(),this.strokeState_&&i.stroke()}if(this.text_!==""){const i=t.getFlatInteriorPoint();this.drawText_(i,0,2,2)}}}drawMultiPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!we(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const i=this.context_,n=t.getOrientedFlatCoordinates();let r=0;const s=t.getEndss(),o=t.getStride();i.beginPath();for(let a=0,l=s.length;a<l;++a){const c=s[a];r=this.drawRings_(n,r,c,o)}this.fillState_&&i.fill(),this.strokeState_&&i.stroke()}if(this.text_!==""){const i=t.getFlatInteriorPoints();this.drawText_(i,0,i.length,2)}}}setContextFillState_(t){const i=this.context_,n=this.contextFillState_;n?n.fillStyle!=t.fillStyle&&(n.fillStyle=t.fillStyle,i.fillStyle=t.fillStyle):(i.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})}setContextStrokeState_(t){const i=this.context_,n=this.contextStrokeState_;n?(n.lineCap!=t.lineCap&&(n.lineCap=t.lineCap,i.lineCap=t.lineCap),Ms(n.lineDash,t.lineDash)||i.setLineDash(n.lineDash=t.lineDash),n.lineDashOffset!=t.lineDashOffset&&(n.lineDashOffset=t.lineDashOffset,i.lineDashOffset=t.lineDashOffset),n.lineJoin!=t.lineJoin&&(n.lineJoin=t.lineJoin,i.lineJoin=t.lineJoin),n.lineWidth!=t.lineWidth&&(n.lineWidth=t.lineWidth,i.lineWidth=t.lineWidth),n.miterLimit!=t.miterLimit&&(n.miterLimit=t.miterLimit,i.miterLimit=t.miterLimit),n.strokeStyle!=t.strokeStyle&&(n.strokeStyle=t.strokeStyle,i.strokeStyle=t.strokeStyle)):(i.lineCap=t.lineCap,i.setLineDash(t.lineDash),i.lineDashOffset=t.lineDashOffset,i.lineJoin=t.lineJoin,i.lineWidth=t.lineWidth,i.miterLimit=t.miterLimit,i.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})}setContextTextState_(t){const i=this.context_,n=this.contextTextState_,r=t.textAlign?t.textAlign:Tc;n?(n.font!=t.font&&(n.font=t.font,i.font=t.font),n.textAlign!=r&&(n.textAlign=r,i.textAlign=r),n.textBaseline!=t.textBaseline&&(n.textBaseline=t.textBaseline,i.textBaseline=t.textBaseline)):(i.font=t.font,i.textAlign=r,i.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:r,textBaseline:t.textBaseline})}setFillStrokeStyle(t,i){if(!t)this.fillState_=null;else{const n=t.getColor();this.fillState_={fillStyle:Jn(n||Di)}}if(!i)this.strokeState_=null;else{const n=i.getColor(),r=i.getLineCap(),s=i.getLineDash(),o=i.getLineDashOffset(),a=i.getLineJoin(),l=i.getWidth(),c=i.getMiterLimit(),h=s||Pr;this.strokeState_={lineCap:r!==void 0?r:Na,lineDash:this.pixelRatio_===1?h:h.map(u=>u*this.pixelRatio_),lineDashOffset:(o||Fr)*this.pixelRatio_,lineJoin:a!==void 0?a:$a,lineWidth:(l!==void 0?l:Ec)*this.pixelRatio_,miterLimit:c!==void 0?c:wc,strokeStyle:Jn(n||Sc)}}}setImageStyle(t){let i;if(!t||!(i=t.getSize())){this.image_=null;return}const n=t.getPixelRatio(this.pixelRatio_),r=t.getAnchor(),s=t.getOrigin();this.image_=t.getImage(this.pixelRatio_),this.imageAnchorX_=r[0]*n,this.imageAnchorY_=r[1]*n,this.imageHeight_=i[1]*n,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=s[0],this.imageOriginY_=s[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation();const o=t.getScaleArray();this.imageScale_=[o[0]*this.pixelRatio_/n,o[1]*this.pixelRatio_/n],this.imageWidth_=i[0]*n}setTextStyle(t){if(!t)this.text_="";else{const i=t.getFill();if(!i)this.textFillState_=null;else{const f=i.getColor();this.textFillState_={fillStyle:Jn(f||Di)}}const n=t.getStroke();if(!n)this.textStrokeState_=null;else{const f=n.getColor(),g=n.getLineCap(),p=n.getLineDash(),m=n.getLineDashOffset(),y=n.getLineJoin(),_=n.getWidth(),C=n.getMiterLimit();this.textStrokeState_={lineCap:g!==void 0?g:Na,lineDash:p||Pr,lineDashOffset:m||Fr,lineJoin:y!==void 0?y:$a,lineWidth:_!==void 0?_:Ec,miterLimit:C!==void 0?C:wc,strokeStyle:Jn(f||Sc)}}const r=t.getFont(),s=t.getOffsetX(),o=t.getOffsetY(),a=t.getRotateWithView(),l=t.getRotation(),c=t.getScaleArray(),h=t.getText(),u=t.getTextAlign(),d=t.getTextBaseline();this.textState_={font:r!==void 0?r:sS,textAlign:u!==void 0?u:Tc,textBaseline:d!==void 0?d:Gu},this.text_=h!==void 0?Array.isArray(h)?h.reduce((f,g,p)=>f+=p%2?" ":g,""):h:"",this.textOffsetX_=s!==void 0?this.pixelRatio_*s:0,this.textOffsetY_=o!==void 0?this.pixelRatio_*o:0,this.textRotateWithView_=a!==void 0?a:!1,this.textRotation_=l!==void 0?l:0,this.textScale_=[this.pixelRatio_*c[0],this.pixelRatio_*c[1]]}}}const Ui=.5;function LS(e,t,i,n,r,s,o,a,l){const c=l?$0(r):r,h=e[0]*Ui,u=e[1]*Ui,d=De(h,u);d.imageSmoothingEnabled=!1;const f=d.canvas,g=new AS(d,Ui,r,null,o,a,l?lf(NO(),l):null),p=i.length,m=Math.floor((256*256*256-1)/p),y={};for(let C=1;C<=p;++C){const b=i[C-1],v=b.getStyleFunction()||n;if(!v)continue;let S=v(b,s);if(!S)continue;Array.isArray(S)||(S=[S]);const L=(C*m).toString(16).padStart(7,"#00000");for(let A=0,B=S.length;A<B;++A){const O=S[A],F=O.getGeometryFunction()(b);if(!F||!we(c,F.getExtent()))continue;const R=O.clone(),T=R.getFill();T&&T.setColor(L);const P=R.getStroke();P&&(P.setColor(L),P.setLineDash(null)),R.setText(void 0);const E=O.getImage();if(E){const Y=E.getImageSize();if(!Y)continue;const K=De(Y[0],Y[1],void 0,{alpha:!1}),G=K.canvas;K.fillStyle=L,K.fillRect(0,0,G.width,G.height),R.setImage(new Es({img:G,anchor:E.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:E.getOrigin(),opacity:1,size:E.getSize(),scale:E.getScale(),rotation:E.getRotation(),rotateWithView:E.getRotateWithView()}))}const D=R.getZIndex()||0;let M=y[D];M||(M={},y[D]=M,M.Polygon=[],M.Circle=[],M.LineString=[],M.Point=[]);const j=F.getType();if(j==="GeometryCollection"){const Y=F.getGeometriesArrayRecursive();for(let K=0,G=Y.length;K<G;++K){const Q=Y[K];M[Q.getType().replace("Multi","")].push(Q,R)}}else M[j.replace("Multi","")].push(F,R)}}const _=Object.keys(y).map(Number).sort(tr);for(let C=0,b=_.length;C<b;++C){const v=y[_[C]];for(const S in v){const w=v[S];for(let L=0,A=w.length;L<A;L+=2){g.setStyle(w[L+1]);for(let B=0,O=t.length;B<O;++B)g.setTransform(t[B]),g.drawGeometry(w[L])}}}return d.getImageData(0,0,f.width,f.height)}function MS(e,t,i){const n=[];if(i){const r=Math.floor(Math.round(e[0])*Ui),s=Math.floor(Math.round(e[1])*Ui),o=(Ce(r,0,i.width-1)+Ce(s,0,i.height-1)*i.width)*4,a=i.data[o],l=i.data[o+1],h=i.data[o+2]+256*(l+256*a),u=Math.floor((256*256*256-1)/t.length);h&&h%u===0&&n.push(t[h/u-1])}return n}const eN=.5,IS={Point:cN,LineString:oN,Polygon:uN,MultiPoint:hN,MultiLineString:aN,MultiPolygon:lN,GeometryCollection:sN,Circle:nN};function iN(e,t){return parseInt(Nt(e),10)-parseInt(Nt(t),10)}function Jp(e,t){const i=PS(e,t);return i*i}function PS(e,t){return eN*e/t}function nN(e,t,i,n,r){const s=i.getFill(),o=i.getStroke();if(s||o){const l=e.getBuilder(i.getZIndex(),"Circle");l.setFillStrokeStyle(s,o),l.drawCircle(t,n,r)}const a=i.getText();if(a&&a.getText()){const l=e.getBuilder(i.getZIndex(),"Text");l.setTextStyle(a),l.drawText(t,n)}}function Yu(e,t,i,n,r,s,o,a){const l=[],c=i.getImage();if(c){let d=!0;const f=c.getImageState();f==bt.LOADED||f==bt.ERROR?d=!1:f==bt.IDLE&&c.load(),d&&l.push(c.ready())}const h=i.getFill();h&&h.loading()&&l.push(h.ready());const u=l.length>0;return u&&Promise.all(l).then(()=>r(null)),rN(e,t,i,n,s,o,a),u}function rN(e,t,i,n,r,s,o){const a=i.getGeometryFunction()(t);if(!a)return;const l=a.simplifyTransformed(n,r);if(i.getRenderer())FS(e,l,i,t,o);else{const h=IS[l.getType()];h(e,l,i,t,o,s)}}function FS(e,t,i,n,r){if(t.getType()=="GeometryCollection"){const o=t.getGeometries();for(let a=0,l=o.length;a<l;++a)FS(e,o[a],i,n,r);return}e.getBuilder(i.getZIndex(),"Default").drawCustom(t,n,i.getRenderer(),i.getHitDetectionRenderer(),r)}function sN(e,t,i,n,r,s){const o=t.getGeometriesArray();let a,l;for(a=0,l=o.length;a<l;++a){const c=IS[o[a].getType()];c(e,o[a],i,n,r,s)}}function oN(e,t,i,n,r){const s=i.getStroke();if(s){const a=e.getBuilder(i.getZIndex(),"LineString");a.setFillStrokeStyle(null,s),a.drawLineString(t,n,r)}const o=i.getText();if(o&&o.getText()){const a=e.getBuilder(i.getZIndex(),"Text");a.setTextStyle(o),a.drawText(t,n,r)}}function aN(e,t,i,n,r){const s=i.getStroke();if(s){const a=e.getBuilder(i.getZIndex(),"LineString");a.setFillStrokeStyle(null,s),a.drawMultiLineString(t,n,r)}const o=i.getText();if(o&&o.getText()){const a=e.getBuilder(i.getZIndex(),"Text");a.setTextStyle(o),a.drawText(t,n,r)}}function lN(e,t,i,n,r){const s=i.getFill(),o=i.getStroke();if(o||s){const l=e.getBuilder(i.getZIndex(),"Polygon");l.setFillStrokeStyle(s,o),l.drawMultiPolygon(t,n,r)}const a=i.getText();if(a&&a.getText()){const l=e.getBuilder(i.getZIndex(),"Text");l.setTextStyle(a),l.drawText(t,n,r)}}function cN(e,t,i,n,r,s){const o=i.getImage(),a=i.getText(),l=a&&a.getText(),c=s&&o&&l?{}:void 0;if(o){if(o.getImageState()!=bt.LOADED)return;const h=e.getBuilder(i.getZIndex(),"Image");h.setImageStyle(o,c),h.drawPoint(t,n,r)}if(l){const h=e.getBuilder(i.getZIndex(),"Text");h.setTextStyle(a,c),h.drawText(t,n,r)}}function hN(e,t,i,n,r,s){const o=i.getImage(),a=o&&o.getOpacity()!==0,l=i.getText(),c=l&&l.getText(),h=s&&a&&c?{}:void 0;if(a){if(o.getImageState()!=bt.LOADED)return;const u=e.getBuilder(i.getZIndex(),"Image");u.setImageStyle(o,h),u.drawMultiPoint(t,n,r)}if(c){const u=e.getBuilder(i.getZIndex(),"Text");u.setTextStyle(l,h),u.drawText(t,n,r)}}function uN(e,t,i,n,r){const s=i.getFill(),o=i.getStroke();if(s||o){const l=e.getBuilder(i.getZIndex(),"Polygon");l.setFillStrokeStyle(s,o),l.drawPolygon(t,n,r)}const a=i.getText();if(a&&a.getText()){const l=e.getBuilder(i.getZIndex(),"Text");l.setTextStyle(a),l.drawText(t,n,r)}}class dN extends gy{constructor(t){super(t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=ki(),this.wrappedRenderedExtent_=ki(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.renderedFrameDeclutter_,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(t,i,n){const r=i.extent,s=i.viewState,o=s.center,a=s.resolution,l=s.projection,c=s.rotation,h=l.getExtent(),u=this.getLayer().getSource(),d=this.getLayer().getDeclutter(),f=i.pixelRatio,g=i.viewHints,p=!(g[xe.ANIMATING]||g[xe.INTERACTING]),m=this.context,y=Math.round(qt(r)/a*f),_=Math.round(ke(r)/a*f),C=u.getWrapX()&&l.canWrapX(),b=C?qt(h):null,v=C?Math.ceil((r[2]-h[2])/b)+1:1;let S=C?Math.floor((r[0]-h[0])/b):0;do{let w=this.getRenderTransform(o,a,0,f,y,_,S*b);i.declutter&&(w=w.slice(0)),t.execute(m,[m.canvas.width,m.canvas.height],w,c,p,n===void 0?Qs:n?qu:Q3,n?d&&i.declutter[d]:void 0)}while(++S<v)}setDrawContext_(){this.opacity_!==1&&(this.targetContext_=this.context,this.context=De(this.context.canvas.width,this.context.canvas.height,RC))}resetDrawContext_(){if(this.opacity_!==1&&this.targetContext_){const t=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=t,eh(this.context),RC.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(t){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,t,!0)}renderDeferredInternal(t){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(t,i){const n=t.layerStatesArray[t.layerIndex];this.opacity_=n.opacity;const r=t.viewState;this.prepareContainer(t,i);const s=this.context,o=this.replayGroup_;let a=o&&!o.isEmpty();if(!a&&!(this.getLayer().hasListener(sn.PRERENDER)||this.getLayer().hasListener(sn.POSTRENDER)))return this.container;if(this.setDrawContext_(),this.preRender(s,t),r.projection,this.clipped_=!1,a&&n.extent&&this.clipping){const l=Zn(n.extent);a=we(l,t.extent),this.clipped_=a&&!Kn(l,t.extent),this.clipped_&&this.clipUnrotated(s,t,l)}return a&&this.renderWorlds(o,t,this.getLayer().getDeclutter()?!1:void 0),!t.declutter&&this.clipped_&&s.restore(),this.postRender(s,t),this.renderedRotation_!==r.rotation&&(this.renderedRotation_=r.rotation,this.hitDetectionImageData_=null),t.declutter||this.resetDrawContext_(),this.container}getFeatures(t){return new Promise(i=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const n=this.frameState.size.slice(),r=this.renderedCenter_,s=this.renderedResolution_,o=this.renderedRotation_,a=this.renderedProjection_,l=this.wrappedRenderedExtent_,c=this.getLayer(),h=[],u=n[0]*Ui,d=n[1]*Ui;h.push(this.getRenderTransform(r,s,o,Ui,u,d,0).slice());const f=c.getSource(),g=a.getExtent();if(f.getWrapX()&&a.canWrapX()&&!Kn(g,l)){let p=l[0];const m=qt(g);let y=0,_;for(;p<g[0];)--y,_=m*y,h.push(this.getRenderTransform(r,s,o,Ui,u,d,_).slice()),p+=m;for(y=0,p=l[2];p>g[2];)++y,_=m*y,h.push(this.getRenderTransform(r,s,o,Ui,u,d,_).slice()),p-=m}this.hitDetectionImageData_=LS(n,h,this.renderedFeatures_,c.getStyleFunction(),l,s,o,Jp(s,this.renderedPixelRatio_),null)}i(MS(t,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(t,i,n,r,s){if(!this.replayGroup_)return;const o=i.viewState.resolution,a=i.viewState.rotation,l=this.getLayer(),c={},h=function(d,f,g){const p=Nt(d),m=c[p];if(m){if(m!==!0&&g<m.distanceSq){if(g===0)return c[p]=!0,s.splice(s.lastIndexOf(m),1),r(d,l,f);m.geometry=f,m.distanceSq=g}}else{if(g===0)return c[p]=!0,r(d,l,f);s.push(c[p]={feature:d,layer:l,geometry:f,distanceSq:g,callback:r})}},u=this.getLayer().getDeclutter();return this.replayGroup_.forEachFeatureAtCoordinate(t,o,a,n,h,u?i.declutter?.[u]?.all().map(d=>d.value):null)}handleFontsChanged(){const t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()}handleStyleImageChange_(t){this.renderIfReadyAndVisible()}prepareFrame(t){const i=this.getLayer(),n=i.getSource();if(!n)return!1;const r=t.viewHints[xe.ANIMATING],s=t.viewHints[xe.INTERACTING],o=i.getUpdateWhileAnimating(),a=i.getUpdateWhileInteracting();if(this.ready&&!o&&r||!a&&s)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const l=t.extent,c=t.viewState,h=c.projection,u=c.resolution,d=t.pixelRatio,f=i.getRevision(),g=i.getRenderBuffer();let p=i.getRenderOrder();p===void 0&&(p=iN);const m=c.center.slice(),y=Rn(l,g*u),_=y.slice(),C=[y.slice()],b=h.getExtent();if(n.getWrapX()&&h.canWrapX()&&!Kn(b,t.extent)){const T=qt(b),P=Math.max(qt(y)/2,T);y[0]=b[0]-P,y[2]=b[2]+P,P0(m,h);const E=_w(C[0],h);E[0]<b[0]&&E[2]<b[2]?C.push([E[0]+T,E[1],E[2]+T,E[3]]):E[0]>b[0]&&E[2]>b[2]&&C.push([E[0]-T,E[1],E[2]-T,E[3]])}if(this.ready&&this.renderedResolution_==u&&this.renderedRevision_==f&&this.renderedRenderOrder_==p&&this.renderedFrameDeclutter_===!!t.declutter&&Kn(this.wrappedRenderedExtent_,y))return Ms(this.renderedExtent_,_)||(this.hitDetectionImageData_=null,this.renderedExtent_=_),this.renderedCenter_=m,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const v=new kS(PS(u,d),y,u,d);let S;for(let T=0,P=C.length;T<P;++T)n.loadFeatures(C[T],u,h);const w=Jp(u,d);let L=!0;const A=(T,P)=>{let E;const D=T.getStyleFunction()||i.getStyleFunction();if(D&&(E=D(T,u)),E){const M=this.renderFeature(T,w,E,v,S,this.getLayer().getDeclutter(),P);L=L&&!M}},B=$0(y),O=n.getFeaturesInExtent(B);p&&O.sort(p);for(let T=0,P=O.length;T<P;++T)A(O[T],T);this.renderedFeatures_=O,this.ready=L;const F=v.finish(),R=new RS(y,u,d,n.getOverlaps(),F,i.getRenderBuffer(),!!t.declutter);return this.renderedResolution_=u,this.renderedRevision_=f,this.renderedRenderOrder_=p,this.renderedFrameDeclutter_=!!t.declutter,this.renderedExtent_=_,this.wrappedRenderedExtent_=y,this.renderedCenter_=m,this.renderedProjection_=h,this.renderedPixelRatio_=d,this.replayGroup_=R,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(t,i,n,r,s,o,a){if(!n)return!1;let l=!1;if(Array.isArray(n))for(let c=0,h=n.length;c<h;++c)l=Yu(r,t,n[c],i,this.boundHandleStyleImageChange_,s,o,a)||l;else l=Yu(r,t,n,i,this.boundHandleStyleImageChange_,s,o,a);return l}}class OS extends xf{constructor(t){super(t)}createRenderer(){return new dN(this)}}let fN=!1;function DS(e,t,i,n,r,s,o){const a=new XMLHttpRequest;a.open("GET",typeof e=="function"?e(i,n,r):e,!0),t.getType()=="arraybuffer"&&(a.responseType="arraybuffer"),a.withCredentials=fN,a.onload=function(l){if(!a.status||a.status>=200&&a.status<300){const c=t.getType();try{let h;c=="text"||c=="json"?h=a.responseText:c=="xml"?h=a.responseXML||a.responseText:c=="arraybuffer"&&(h=a.response),h?s(t.readFeatures(h,{extent:i,featureProjection:r}),t.readProjection(h)):o()}catch{o()}}else o()},a.onerror=o,a.send()}function DC(e,t){return function(i,n,r,s,o){DS(e,t,i,n,r,(a,l)=>{this.addFeatures(a),s!==void 0&&s(a)},()=>{this.changed(),o!==void 0&&o()})}}function gN(e,t){return[[-1/0,-1/0,1/0,1/0]]}class ah extends Dn{constructor(t){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),t)if(typeof t.getSimplifiedGeometry=="function"){const i=t;this.setGeometry(i)}else{const i=t;this.setProperties(i)}}clone(){const t=new ah(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());const i=this.getGeometry();i&&t.setGeometry(i.clone());const n=this.getStyle();return n&&t.setStyle(n),t}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(de(this.geometryChangeKey_),this.geometryChangeKey_=null);const t=this.getGeometry();t&&(this.geometryChangeKey_=Yt(t,Mt.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(t){this.set(this.geometryName_,t)}setStyle(t){this.style_=t,this.styleFunction_=t?pN(t):void 0,this.changed()}setId(t){this.id_=t,this.changed()}setGeometryName(t){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=t,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function pN(e){if(typeof e=="function")return e;let t;return Array.isArray(e)?t=e:(Zt(typeof e.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),t=[e]),function(){return t}}function BS(e,t,i,n){const r=[];let s=ki();for(let o=0,a=i.length;o<a;++o){const l=i[o];s=L0(e,t,l[0],n),r.push((s[0]+s[2])/2,(s[1]+s[3])/2),t=l[l.length-1]}return r}function Xu(e,t,i,n,r,s,o){let a,l;const c=(i-t)/n;if(c===1)a=t;else if(c===2)a=t,l=r;else if(c!==0){let h=e[t],u=e[t+1],d=0;const f=[0];for(let m=t+n;m<i;m+=n){const y=e[m],_=e[m+1];d+=Math.sqrt((y-h)*(y-h)+(_-u)*(_-u)),f.push(d),h=y,u=_}const g=r*d,p=zF(f,g);p<0?(l=(g-f[-p-2])/(f[-p-1]-f[-p-2]),a=t+(-p-2)*n):a=t+p*n}o=o>1?o:2,s=s||new Array(o);for(let h=0;h<o;++h)s[h]=a===void 0?NaN:l===void 0?e[a+h]:Vi(e[a+h],e[a+n+h],l);return s}function Qp(e,t,i,n,r,s){if(i==t)return null;let o;if(r<e[t+n-1])return s?(o=e.slice(t,t+n),o[n-1]=r,o):null;if(e[i-1]<r)return s?(o=e.slice(i-n,i),o[n-1]=r,o):null;if(r==e[t+n-1])return e.slice(t,t+n);let a=t/n,l=i/n;for(;a<l;){const d=a+l>>1;r<e[(d+1)*n-1]?l=d:a=d+1}const c=e[a*n-1];if(r==c)return e.slice((a-1)*n,(a-1)*n+n);const h=e[(a+1)*n-1],u=(r-c)/(h-c);o=[];for(let d=0;d<n-1;++d)o.push(Vi(e[(a-1)*n+d],e[a*n+d],u));return o.push(r),o}function mN(e,t,i,n,r,s,o){if(o)return Qp(e,t,i[i.length-1],n,r,s);let a;if(r<e[n-1])return s?(a=e.slice(0,n),a[n-1]=r,a):null;if(e[e.length-1]<r)return s?(a=e.slice(e.length-n),a[n-1]=r,a):null;for(let l=0,c=i.length;l<c;++l){const h=i[l];if(t!=h){if(r<e[t+n-1])return null;if(r<=e[h-1])return Qp(e,t,h,n,r,!1);t=h}}return null}class za extends Ps{constructor(t,i){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,i!==void 0&&!Array.isArray(t[0])?this.setFlatCoordinates(i,t):this.setCoordinates(t,i)}appendCoordinate(t){kn(this.flatCoordinates,t),this.changed()}clone(){const t=new za(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,i,n,r){return r<Za(this.getExtent(),t,i)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(W0(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),H0(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,i,n,r))}forEachSegment(t){return Nw(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinateAtM(t,i){return this.layout!="XYM"&&this.layout!="XYZM"?null:(i=i!==void 0?i:!1,Qp(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i))}getCoordinates(){return ps(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(t,i){return Xu(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i,this.stride)}getLength(){return xy(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(t){const i=[];return i.length=hf(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i,0),new za(i,"XY")}getType(){return"LineString"}intersectsExtent(t){return uf(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,this.getExtent())}setCoordinates(t,i){this.setLayout(i,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=cf(this.flatCoordinates,0,t,this.stride),this.changed()}}class Ku extends Ps{constructor(t,i,n){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(t[0]))this.setCoordinates(t,i);else if(i!==void 0&&n)this.setFlatCoordinates(i,t),this.ends_=n;else{const r=t,s=[],o=[];for(let l=0,c=r.length;l<c;++l){const h=r[l];kn(s,h.getFlatCoordinates()),o.push(s.length)}const a=r.length===0?this.getLayout():r[0].getLayout();this.setFlatCoordinates(a,s),this.ends_=o}}appendLineString(t){kn(this.flatCoordinates,t.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new Ku(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,i,n,r){return r<Za(this.getExtent(),t,i)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(j0(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),V0(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,i,n,r))}getCoordinateAtM(t,i,n){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(i=i!==void 0?i:!1,n=n!==void 0?n:!1,mN(this.flatCoordinates,0,this.ends_,this.stride,t,i,n))}getCoordinates(){return bc(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(t){return t<0||this.ends_.length<=t?null:new za(this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLineStrings(){const t=this.flatCoordinates,i=this.ends_,n=this.layout,r=[];let s=0;for(let o=0,a=i.length;o<a;++o){const l=i[o],c=new za(t.slice(s,l),n);r.push(c),s=l}return r}getLength(){const t=this.ends_;let i=0,n=0;for(let r=0,s=t.length;r<s;++r)n+=xy(this.flatCoordinates,i,t[r],this.stride),i=t[r];return n}getFlatMidpoints(){const t=[],i=this.flatCoordinates;let n=0;const r=this.ends_,s=this.stride;for(let o=0,a=r.length;o<a;++o){const l=r[o],c=Xu(i,n,l,s,.5);kn(t,c),n=l}return t}getSimplifiedGeometryInternal(t){const i=[],n=[];return i.length=Dw(this.flatCoordinates,0,this.ends_,this.stride,t,i,0,n),new Ku(i,"XY",n)}getType(){return"MultiLineString"}intersectsExtent(t){return oD(this.flatCoordinates,0,this.ends_,this.stride,t)}setCoordinates(t,i){this.setLayout(i,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const n=U0(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=n.length===0?0:n[n.length-1],this.changed()}}class wf extends Ps{constructor(t,i){super(),i&&!Array.isArray(t[0])?this.setFlatCoordinates(i,t):this.setCoordinates(t,i)}appendPoint(t){kn(this.flatCoordinates,t.getFlatCoordinates()),this.changed()}clone(){const t=new wf(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,i,n,r){if(r<Za(this.getExtent(),t,i))return r;const s=this.flatCoordinates,o=this.stride;for(let a=0,l=s.length;a<l;a+=o){const c=fo(t,i,s[a],s[a+1]);if(c<r){r=c;for(let h=0;h<o;++h)n[h]=s[a+h];n.length=o}}return r}getCoordinates(){return ps(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(t){const i=this.flatCoordinates.length/this.stride;return t<0||i<=t?null:new or(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)}getPoints(){const t=this.flatCoordinates,i=this.layout,n=this.stride,r=[];for(let s=0,o=t.length;s<o;s+=n){const a=new or(t.slice(s,s+n),i);r.push(a)}return r}getType(){return"MultiPoint"}intersectsExtent(t){const i=this.flatCoordinates,n=this.stride;for(let r=0,s=i.length;r<s;r+=n){const o=i[r],a=i[r+1];if(R0(t,o,a))return!0}return!1}setCoordinates(t,i){this.setLayout(i,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=cf(this.flatCoordinates,0,t,this.stride),this.changed()}}class Zu extends Ps{constructor(t,i,n){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!n&&!Array.isArray(t[0])){const r=t,s=[],o=[];for(let a=0,l=r.length;a<l;++a){const c=r[a],h=s.length,u=c.getEnds();for(let d=0,f=u.length;d<f;++d)u[d]+=h;kn(s,c.getFlatCoordinates()),o.push(u)}i=r.length===0?this.getLayout():r[0].getLayout(),t=s,n=o}i!==void 0&&n?(this.setFlatCoordinates(i,t),this.endss_=n):this.setCoordinates(t,i)}appendPolygon(t){let i;if(!this.flatCoordinates)this.flatCoordinates=t.getFlatCoordinates().slice(),i=t.getEnds().slice(),this.endss_.push();else{const n=this.flatCoordinates.length;kn(this.flatCoordinates,t.getFlatCoordinates()),i=t.getEnds().slice();for(let r=0,s=i.length;r<s;++r)i[r]+=n}this.endss_.push(i),this.changed()}clone(){const t=this.endss_.length,i=new Array(t);for(let r=0;r<t;++r)i[r]=this.endss_[r].slice();const n=new Zu(this.flatCoordinates.slice(),this.layout,i);return n.applyProperties(this),n}closestPointXY(t,i,n,r){return r<Za(this.getExtent(),t,i)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(JO(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),QO(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,i,n,r))}containsXY(t,i){return sD(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,i)}getArea(){return ZO(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(t){let i;return t!==void 0?(i=this.getOrientedFlatCoordinates().slice(),iC(i,0,this.endss_,this.stride,t)):i=this.flatCoordinates,Wp(i,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const t=BS(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=Bw(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new wf(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;cD(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=iC(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const i=[],n=[];return i.length=nD(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),i,0,n),new Zu(i,"XY",n)}getPolygon(t){if(t<0||this.endss_.length<=t)return null;let i;if(t===0)i=0;else{const s=this.endss_[t-1];i=s[s.length-1]}const n=this.endss_[t].slice(),r=n[n.length-1];if(i!==0)for(let s=0,o=n.length;s<o;++s)n[s]-=i;return new Gr(this.flatCoordinates.slice(i,r),this.layout,n)}getPolygons(){const t=this.layout,i=this.flatCoordinates,n=this.endss_,r=[];let s=0;for(let o=0,a=n.length;o<a;++o){const l=n[o].slice(),c=l[l.length-1];if(s!==0)for(let u=0,d=l.length;u<d;++u)l[u]-=s;const h=new Gr(i.slice(s,c),t,l);r.push(h),s=c}return r}getType(){return"MultiPolygon"}intersectsExtent(t){return aD(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)}setCoordinates(t,i){this.setLayout(i,t,3),this.flatCoordinates||(this.flatCoordinates=[]);const n=eD(this.flatCoordinates,0,t,this.stride,this.endss_);if(n.length===0)this.flatCoordinates.length=0;else{const r=n[n.length-1];this.flatCoordinates.length=r.length===0?0:r[r.length-1]}this.changed()}}const BC=Yi();class Bi{constructor(t,i,n,r,s,o){this.styleFunction,this.extent_,this.id_=o,this.type_=t,this.flatCoordinates_=i,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=n||null,this.properties_=s,this.squaredTolerance_,this.stride_=r,this.simplifiedGeometry_}get(t){return this.properties_[t]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?A0(this.flatCoordinates_):L0(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const t=hn(this.getExtent());this.flatInteriorPoints_=X0(this.flatCoordinates_,0,this.ends_,2,t,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const t=Ww(this.flatCoordinates_,this.ends_),i=BS(this.flatCoordinates_,0,t,2);this.flatInteriorPoints_=Bw(this.flatCoordinates_,0,t,2,i)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=Xu(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const t=this.flatCoordinates_;let i=0;const n=this.ends_;for(let r=0,s=n.length;r<s;++r){const o=n[r],a=Xu(t,i,o,2,.5);kn(this.flatMidpoints_,a),i=o}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(t){return this}simplifyTransformed(t,i){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(t){t=ae(t);const i=t.getExtent(),n=t.getWorldExtent();if(i&&n){const r=ke(n)/ke(i);sr(BC,n[0],n[3],r,-r,0,0,0),vs(this.flatCoordinates_,0,this.flatCoordinates_.length,2,BC,this.flatCoordinates_)}}applyTransform(t){t(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){return new Bi(this.type_,this.flatCoordinates_.slice(),this.ends_?.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=aw((t,i)=>{if(t===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),i&&this.simplifiedGeometry_.applyTransform(i);const n=this.simplifiedGeometry_.getFlatCoordinates();let r;switch(this.type_){case"LineString":n.length=hf(n,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,t,n,0),r=[n.length];break;case"MultiLineString":r=[],n.length=Dw(n,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,t,n,0,r);break;case"Polygon":r=[],n.length=q0(n,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(t),n,0,r);break}return r&&(this.simplifiedGeometry_=new Bi(this.type_,n,r,2,this.properties_,this.id_)),this.squaredTolerance_=t,this.simplifiedGeometry_}),this}}Bi.prototype.getFlatCoordinates=Bi.prototype.getOrientedFlatCoordinates;class NC{constructor(t){this.rbush_=new Jw(t),this.items_={}}insert(t,i){const n={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:i};this.rbush_.insert(n),this.items_[Nt(i)]=n}load(t,i){const n=new Array(i.length);for(let r=0,s=i.length;r<s;r++){const o=t[r],a=i[r],l={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:a};n[r]=l,this.items_[Nt(a)]=l}this.rbush_.load(n)}remove(t){const i=Nt(t),n=this.items_[i];return delete this.items_[i],this.rbush_.remove(n)!==null}update(t,i){const n=this.items_[Nt(i)],r=[n.minX,n.minY,n.maxX,n.maxY];bo(r,t)||(this.remove(i),this.insert(t,i))}getAll(){return this.rbush_.all().map(function(i){return i.value})}getInExtent(t){const i={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(i).map(function(r){return r.value})}forEach(t){return this.forEach_(this.getAll(),t)}forEachInExtent(t,i){return this.forEach_(this.getInExtent(t),i)}forEach_(t,i){let n;for(let r=0,s=t.length;r<s;r++)if(n=i(t[r]),n)return n;return n}isEmpty(){return _o(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(t){const i=this.rbush_.toJSON();return zr(i.minX,i.minY,i.maxX,i.maxY,t)}concat(t){this.rbush_.load(t.rbush_.all());for(const i in t.items_)this.items_[i]=t.items_[i]}}const tn={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};class ss extends cr{constructor(t,i,n){super(t),this.feature=i,this.features=n}}class Mc extends yy{constructor(t){t=t||{},super({attributions:t.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:t.wrapX!==void 0?t.wrapX:!0}),this.on,this.once,this.un,this.loader_=_c,this.format_=t.format||null,this.overlaps_=t.overlaps===void 0?!0:t.overlaps,this.url_=t.url,t.loader!==void 0?this.loader_=t.loader:this.url_!==void 0&&(Zt(this.format_,"`format` must be set when `url` is set"),this.loader_=DC(this.url_,this.format_)),this.strategy_=t.strategy!==void 0?t.strategy:gN;const i=t.useSpatialIndex!==void 0?t.useSpatialIndex:!0;this.featuresRtree_=i?new NC:null,this.loadedExtentsRtree_=new NC,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let n,r;Array.isArray(t.features)?r=t.features:t.features&&(n=t.features,r=n.getArray()),!i&&n===void 0&&(n=new nn(r)),r!==void 0&&this.addFeaturesInternal(r),n!==void 0&&this.bindFeaturesCollection_(n)}addFeature(t){this.addFeatureInternal(t),this.changed()}addFeatureInternal(t){const i=Nt(t);if(!this.addToIndex_(i,t)){this.featuresCollection_&&this.featuresCollection_.remove(t);return}this.setupChangeEvents_(i,t);const n=t.getGeometry();if(n){const r=n.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(r,t)}else this.nullGeometryFeatures_[i]=t;this.dispatchEvent(new ss(tn.ADDFEATURE,t))}setupChangeEvents_(t,i){i instanceof Bi||(this.featureChangeKeys_[t]=[Yt(i,Mt.CHANGE,this.handleFeatureChange_,this),Yt(i,Oa.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(t,i){let n=!0;if(i.getId()!==void 0){const r=String(i.getId());if(!(r in this.idIndex_))this.idIndex_[r]=i;else if(i instanceof Bi){const s=this.idIndex_[r];s instanceof Bi?Array.isArray(s)?s.push(i):this.idIndex_[r]=[s,i]:n=!1}else n=!1}return n&&(Zt(!(t in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[t]=i),n}addFeatures(t){this.addFeaturesInternal(t),this.changed()}addFeaturesInternal(t){const i=[],n=[],r=[];for(let s=0,o=t.length;s<o;s++){const a=t[s],l=Nt(a);this.addToIndex_(l,a)&&n.push(a)}for(let s=0,o=n.length;s<o;s++){const a=n[s],l=Nt(a);this.setupChangeEvents_(l,a);const c=a.getGeometry();if(c){const h=c.getExtent();i.push(h),r.push(a)}else this.nullGeometryFeatures_[l]=a}if(this.featuresRtree_&&this.featuresRtree_.load(i,r),this.hasListener(tn.ADDFEATURE))for(let s=0,o=n.length;s<o;s++)this.dispatchEvent(new ss(tn.ADDFEATURE,n[s]))}bindFeaturesCollection_(t){let i=!1;this.addEventListener(tn.ADDFEATURE,function(n){i||(i=!0,t.push(n.feature),i=!1)}),this.addEventListener(tn.REMOVEFEATURE,function(n){i||(i=!0,t.remove(n.feature),i=!1)}),t.addEventListener(Fi.ADD,n=>{i||(i=!0,this.addFeature(n.element),i=!1)}),t.addEventListener(Fi.REMOVE,n=>{i||(i=!0,this.removeFeature(n.element),i=!1)}),this.featuresCollection_=t}clear(t){if(t){for(const n in this.featureChangeKeys_)this.featureChangeKeys_[n].forEach(de);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(n=>{this.removeFeatureInternal(n)});for(const n in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[n])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const i=new ss(tn.CLEAR);this.dispatchEvent(i),this.changed()}forEachFeature(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureAtCoordinateDirect(t,i){const n=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(n,function(r){const s=r.getGeometry();if(s instanceof Bi||s.intersectsCoordinate(t))return i(r)})}forEachFeatureInExtent(t,i){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,i);this.featuresCollection_&&this.featuresCollection_.forEach(i)}forEachFeatureIntersectingExtent(t,i){return this.forEachFeatureInExtent(t,function(n){const r=n.getGeometry();if(r instanceof Bi||r.intersectsExtent(t)){const s=i(n);if(s)return s}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let t;return this.featuresCollection_?t=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(t=this.featuresRtree_.getAll(),_o(this.nullGeometryFeatures_)||kn(t,Object.values(this.nullGeometryFeatures_))),t}getFeaturesAtCoordinate(t){const i=[];return this.forEachFeatureAtCoordinateDirect(t,function(n){i.push(n)}),i}getFeaturesInExtent(t,i){if(this.featuresRtree_){if(!(i&&i.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(t);const r=xw(t,i);return[].concat(...r.map(s=>this.featuresRtree_.getInExtent(s)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(t,i){const n=t[0],r=t[1];let s=null;const o=[NaN,NaN];let a=1/0;const l=[-1/0,-1/0,1/0,1/0];return i=i||yc,this.featuresRtree_.forEachInExtent(l,function(c){if(i(c)){const h=c.getGeometry(),u=a;if(a=h instanceof Bi?0:h.closestPointXY(n,r,o,a),a<u){s=c;const d=Math.sqrt(a);l[0]=n-d,l[1]=r-d,l[2]=n+d,l[3]=r+d}}}),s}getExtent(t){return this.featuresRtree_.getExtent(t)}getFeatureById(t){const i=this.idIndex_[t.toString()];return i!==void 0?i:null}getFeatureByUid(t){const i=this.uidIndex_[t];return i!==void 0?i:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(t){const i=t.target,n=Nt(i),r=i.getGeometry();if(!r)n in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(i),this.nullGeometryFeatures_[n]=i);else{const o=r.getExtent();n in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[n],this.featuresRtree_&&this.featuresRtree_.insert(o,i)):this.featuresRtree_&&this.featuresRtree_.update(o,i)}const s=i.getId();if(s!==void 0){const o=s.toString();this.idIndex_[o]!==i&&(this.removeFromIdIndex_(i),this.idIndex_[o]=i)}else this.removeFromIdIndex_(i),this.uidIndex_[n]=i;this.changed(),this.dispatchEvent(new ss(tn.CHANGEFEATURE,i))}hasFeature(t){const i=t.getId();return i!==void 0?i in this.idIndex_:Nt(t)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&_o(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(t,i,n){const r=this.loadedExtentsRtree_,s=this.strategy_(t,i,n);for(let o=0,a=s.length;o<a;++o){const l=s[o];r.forEachInExtent(l,function(h){return Kn(h.extent,l)})||(++this.loadingExtentsCount_,this.dispatchEvent(new ss(tn.FEATURESLOADSTART)),this.loader_.call(this,l,i,n,h=>{--this.loadingExtentsCount_,this.dispatchEvent(new ss(tn.FEATURESLOADEND,void 0,h))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new ss(tn.FEATURESLOADERROR))}),r.insert(l,{extent:l.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(t){const i=this.loadedExtentsRtree_,n=i.forEachInExtent(t,function(r){if(bo(r.extent,t))return r});n&&i.remove(n)}removeFeatures(t){let i=!1;for(let n=0,r=t.length;n<r;++n)i=this.removeFeatureInternal(t[n])||i;i&&this.changed()}removeFeature(t){if(!t)return;this.removeFeatureInternal(t)&&this.changed()}removeFeatureInternal(t){const i=Nt(t);if(!(i in this.uidIndex_))return!1;i in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[i]:this.featuresRtree_&&this.featuresRtree_.remove(t),this.featureChangeKeys_[i]?.forEach(de),delete this.featureChangeKeys_[i];const r=t.getId();if(r!==void 0){const s=r.toString(),o=this.idIndex_[s];o===t?delete this.idIndex_[s]:Array.isArray(o)&&(o.splice(o.indexOf(t),1),o.length===1&&(this.idIndex_[s]=o[0]))}return delete this.uidIndex_[i],this.hasListener(tn.REMOVEFEATURE)&&this.dispatchEvent(new ss(tn.REMOVEFEATURE,t)),!0}removeFromIdIndex_(t){for(const i in this.idIndex_)if(this.idIndex_[i]===t){delete this.idIndex_[i];break}}setLoader(t){this.loader_=t}setUrl(t){Zt(this.format_,"`format` must be set when `url` is set"),this.url_=t,this.setLoader(DC(t,this.format_))}setOverlaps(t){this.overlaps_=t,this.changed()}}class Cy extends Mc{constructor(t){t=t||{},super({attributions:t.attributions,wrapX:t.wrapX}),this.resolution=void 0,this.distance=t.distance!==void 0?t.distance:20,this.minDistance=t.minDistance||0,this.interpolationRatio=0,this.features=[],this.geometryFunction=t.geometryFunction||function(i){const n=i.getGeometry();return Zt(!n||n.getType()==="Point","The default `geometryFunction` can only handle `Point` or null geometries"),n},this.createCustomCluster_=t.createCluster,this.source=null,this.boundRefresh_=this.refresh.bind(this),this.updateDistance(this.distance,this.minDistance),this.setSource(t.source||null)}clear(t){this.features.length=0,super.clear(t)}getDistance(){return this.distance}getSource(){return this.source}loadFeatures(t,i,n){this.source?.loadFeatures(t,i,n),i!==this.resolution&&(this.resolution=i,this.refresh())}setDistance(t){this.updateDistance(t,this.minDistance)}setMinDistance(t){this.updateDistance(this.distance,t)}getMinDistance(){return this.minDistance}setSource(t){this.source&&this.source.removeEventListener(Mt.CHANGE,this.boundRefresh_),this.source=t,t&&t.addEventListener(Mt.CHANGE,this.boundRefresh_),this.refresh()}refresh(){this.clear(),this.cluster(),this.addFeatures(this.features)}updateDistance(t,i){const n=t===0?0:Math.min(i,t)/t,r=t!==this.distance||this.interpolationRatio!==n;this.distance=t,this.minDistance=i,this.interpolationRatio=n,r&&this.refresh()}cluster(){if(this.resolution===void 0||!this.source)return;const t=ki(),i=this.distance*this.resolution,n=this.source.getFeatures(),r={};for(let s=0,o=n.length;s<o;s++){const a=n[s];if(!(Nt(a)in r)){const l=this.geometryFunction(a);if(l){const c=l.getCoordinates();A0(c,t),Rn(t,i,t);const h=this.source.getFeaturesInExtent(t).filter(function(u){const d=Nt(u);return d in r?!1:(r[d]=!0,!0)});this.features.push(this.createCluster(h,t))}}}}createCluster(t,i){const n=[0,0];for(let a=t.length-1;a>=0;--a){const l=this.geometryFunction(t[a]);l?Cw(n,l.getCoordinates()):t.splice(a,1)}bw(n,1/t.length);const r=hn(i),s=this.interpolationRatio,o=new or([n[0]*(1-s)+r[0]*s,n[1]*(1-s)+r[1]*s]);return this.createCustomCluster_?this.createCustomCluster_(o,t):new ah({geometry:o,features:t})}}function yN(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function tm(e){return Array.isArray(e)?Math.min(...e):e}class _N extends hy{constructor(t,i,n,r,s,o,a){let l=t.getExtent();l&&t.canWrapX()&&(l=l.slice(),l[0]=-1/0,l[2]=1/0);let c=i.getExtent();c&&i.canWrapX()&&(c=c.slice(),c[0]=-1/0,c[2]=1/0);const h=c?An(n,c):n,u=hn(h),d=Lc(t,i,u,r),f=xS,g=new _S(t,i,h,l,d*f,r),p=g.calculateSourceExtent(),m=Io(p)?null:o(p,d,s),y=m?bt.IDLE:bt.EMPTY,_=m?m.getPixelRatio():1;super(n,r,_,y),this.targetProj_=i,this.maxSourceExtent_=l,this.triangulation_=g,this.targetResolution_=r,this.targetExtent_=n,this.sourceImage_=m,this.sourcePixelRatio_=_,this.interpolate_=a,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){this.state==bt.LOADING&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){const t=this.sourceImage_.getState();if(t==bt.LOADED){const i=qt(this.targetExtent_)/this.targetResolution_,n=ke(this.targetExtent_)/this.targetResolution_;this.canvas_=yS(i,n,this.sourcePixelRatio_,tm(this.sourceImage_.getResolution()),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_,!0)}this.state=t,this.changed()}load(){if(this.state==bt.IDLE){this.state=bt.LOADING,this.changed();const t=this.sourceImage_.getState();t==bt.LOADED||t==bt.ERROR?this.reproject_():(this.sourceListenerKey_=Yt(this.sourceImage_,Mt.CHANGE,i=>{const n=this.sourceImage_.getState();(n==bt.LOADED||n==bt.ERROR)&&(this.unlistenSource_(),this.reproject_())}),this.sourceImage_.load())}}unlistenSource_(){de(this.sourceListenerKey_),this.sourceListenerKey_=null}}const xs=4,jg={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"};class xN extends cr{constructor(t,i){super(t),this.image=i}}class NS extends yy{constructor(t){super({attributions:t.attributions,projection:t.projection,state:t.state,interpolate:t.interpolate!==void 0?t.interpolate:!0}),this.on,this.once,this.un,this.loader=t.loader||null,this.resolutions_=t.resolutions!==void 0?t.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0,this.image=null,this.wantedExtent_,this.wantedResolution_,this.static_=t.loader?t.loader.length===0:!1,this.wantedProjection_=null}getResolutions(){return this.resolutions_}setResolutions(t){this.resolutions_=t}findNearestResolution(t){const i=this.getResolutions();if(i){const n=Qd(i,t,0);t=i[n]}return t}getImage(t,i,n,r){const s=this.getProjection();if(!s||!r||bi(s,r))return s&&(r=s),this.getImageInternal(t,i,n,r);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&bi(this.reprojectedImage_.getProjection(),r)&&this.reprojectedImage_.getResolution()==i&&bo(this.reprojectedImage_.getExtent(),t))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new _N(s,r,t,i,n,(o,a,l)=>this.getImageInternal(o,a,l,s),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}getImageInternal(t,i,n,r){if(this.loader){const s=zS(t,i,n,1),o=this.findNearestResolution(i);if(this.image&&(this.static_||this.wantedProjection_===r&&(this.wantedExtent_&&Kn(this.wantedExtent_,s)||Kn(this.image.getExtent(),s))&&(this.wantedResolution_&&tm(this.wantedResolution_)===o||tm(this.image.getResolution())===o)))return this.image;this.wantedProjection_=r,this.wantedExtent_=s,this.wantedResolution_=o,this.image=new hy(s,o,n,this.loader),this.image.addEventListener(Mt.CHANGE,this.handleImageChange.bind(this))}return this.image}handleImageChange(t){const i=t.target;let n;switch(i.getState()){case bt.LOADING:this.loading=!0,n=jg.IMAGELOADSTART;break;case bt.LOADED:this.loading=!1,n=jg.IMAGELOADEND;break;case bt.ERROR:this.loading=!1,n=jg.IMAGELOADERROR;break;default:return}this.hasListener(n)&&this.dispatchEvent(new xN(n,i))}}function $S(e,t){e.getImage().src=t}function zS(e,t,i,n){const r=t/i,s=hn(e),o=gs(qt(e)/r,xs),a=gs(ke(e)/r,xs),l=gs((n-1)*o/2,xs),c=o+2*l,h=gs((n-1)*a/2,xs),u=a+2*h;return xc(s,r,0,[c,u])}function CN(e){const t=e.load||ff,i=e.imageExtent,n=e.crossOrigin??null;return()=>{const r=new Image;return r.crossOrigin=n,t(r,e.url).then(s=>{const o=qt(i)/s.width,a=ke(i)/s.height;return{image:s,extent:i,resolution:o!==a?[o,a]:a,pixelRatio:1}})}}class bN extends NS{constructor(t){const i=t.crossOrigin!==void 0?t.crossOrigin:null,n=t.imageLoadFunction!==void 0?t.imageLoadFunction:$S;super({attributions:t.attributions,interpolate:t.interpolate,projection:ae(t.projection)}),this.url_=t.url,this.imageExtent_=t.imageExtent,this.image=null,this.image=new hy(this.imageExtent_,void 0,1,CN({url:t.url,imageExtent:t.imageExtent,crossOrigin:i,load:(r,s)=>(this.image.setImage(r),n(this.image,s),ff(r))})),this.image.addEventListener(Mt.CHANGE,this.handleImageChange.bind(this))}getImageExtent(){return this.imageExtent_}getImageInternal(t,i,n,r){return we(t,this.image.getExtent())?this.image:null}getUrl(){return this.url_}}const Ju="1.3.0",$C=[101,101];function GS(e,t,i,n,r){r.WIDTH=i[0],r.HEIGHT=i[1];const s=n.getAxisOrientation(),o=M0(r.VERSION,"1.3")>=0;r[o?"CRS":"SRS"]=n.getCode();const a=o&&s.startsWith("ne")?[t[1],t[0],t[3],t[2]]:t;return r.BBOX=a.join(","),my(e,r)}function WS(e,t,i,n,r,s,o){s=Object.assign({REQUEST:"GetMap"},s);const a=t/i,l=[zx(qt(e)/a,xs),zx(ke(e)/a,xs)];if(i!=1)switch(o){case"geoserver":const h=90*i+.5|0;"FORMAT_OPTIONS"in s?s.FORMAT_OPTIONS+=";dpi:"+h:s.FORMAT_OPTIONS="dpi:"+h;break;case"mapserver":s.MAP_RESOLUTION=90*i;break;case"carmentaserver":case"qgis":s.DPI=90*i;break;default:throw new Error("Unknown `serverType` configured")}return GS(r,e,l,n,s)}function Qu(e,t){return Object.assign({REQUEST:t,SERVICE:"WMS",VERSION:Ju,FORMAT:"image/png",STYLES:"",TRANSPARENT:"TRUE"},e)}function vN(e){const t=e.hidpi===void 0?!0:e.hidpi,i=ae(e.projection||"EPSG:3857"),n=e.ratio||1.5,r=e.load||ff,s=e.crossOrigin??null;return(o,a,l)=>{o=zS(o,a,l,n),l!=1&&(!t||e.serverType===void 0)&&(l=1);const c=WS(o,a,l,i,e.url,Qu(e.params,"GetMap"),e.serverType),h=new Image;return h.crossOrigin=s,r(h,c).then(u=>({image:u,extent:o,pixelRatio:l}))}}function wN(e,t,i){if(e.url===void 0)return;const n=ae(e.projection||"EPSG:3857"),r=xc(t,i,0,$C),s={QUERY_LAYERS:e.params.LAYERS,INFO_FORMAT:"application/json"};Object.assign(s,Qu(e.params,"GetFeatureInfo"),e.params);const o=oa((t[0]-r[0])/i,xs),a=oa((r[3]-t[1])/i,xs),l=M0(s.VERSION,"1.3")>=0;return s[l?"I":"X"]=o,s[l?"J":"Y"]=a,GS(e.url,r,$C,n,s)}function SN(e,t){if(e.url===void 0)return;const i={SERVICE:"WMS",VERSION:Ju,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(t!==void 0){const n=ae(e.projection||"EPSG:3857").getMetersPerUnit()||1,r=28e-5;i.SCALE=t*n/r}if(Object.assign(i,e.params),e.params!==void 0&&i.LAYER===void 0){const n=i.LAYERS;if(!(!Array.isArray(n)||n.length!==1))return;i.LAYER=n}return my(e.url,i)}class TN extends NS{constructor(t){t=t||{},super({attributions:t.attributions,interpolate:t.interpolate,projection:t.projection,resolutions:t.resolutions}),this.crossOrigin_=t.crossOrigin!==void 0?t.crossOrigin:null,this.url_=t.url,this.imageLoadFunction_=t.imageLoadFunction!==void 0?t.imageLoadFunction:$S,this.params_=Object.assign({},t.params),this.serverType_=t.serverType,this.hidpi_=t.hidpi!==void 0?t.hidpi:!0,this.renderedRevision_=0,this.ratio_=t.ratio!==void 0?t.ratio:1.5,this.loaderProjection_=null}getFeatureInfoUrl(t,i,n,r){const s=ae(n),o=this.getProjection();o&&o!==s&&(i=Lc(o,s,t,i),t=Qa(t,s,o));const a={url:this.url_,params:{...this.params_,...r},projection:o||s};return wN(a,t,i)}getLegendUrl(t,i){return SN({url:this.url_,params:{...this.params_,...i}},t)}getParams(){return this.params_}getImageInternal(t,i,n,r){return this.url_===void 0?null:((!this.loader||this.loaderProjection_!==r)&&(this.loaderProjection_=r,this.loader=vN({crossOrigin:this.crossOrigin_,params:this.params_,projection:r,serverType:this.serverType_,hidpi:this.hidpi_,url:this.url_,ratio:this.ratio_,load:(s,o)=>(this.image.setImage(s),this.imageLoadFunction_(this.image,o),ff(s))})),super.getImageInternal(t,i,n,r))}getImageLoadFunction(){return this.imageLoadFunction_}getUrl(){return this.url_}setImageLoadFunction(t){this.imageLoadFunction_=t,this.changed()}setUrl(t){t!=this.url_&&(this.url_=t,this.loader=null,this.changed())}setParams(t){this.params_=Object.assign({},t),this.changed()}updateParams(t){Object.assign(this.params_,t),this.changed()}changed(){this.image=null,super.changed()}}const zC=[];class EN extends sh{constructor(t,i,n,r,s){super(t,i,{transition:0}),this.context_=null,this.executorGroups={},this.loadingSourceTiles=0,this.hitDetectionImageData={},this.replayState_={},this.sourceTiles=[],this.errorTileKeys={},this.wantedResolution,this.getSourceTiles=r.bind(void 0,this),this.removeSourceTiles_=s,this.wrappedTileCoord=n}getContext(){return this.context_||(this.context_=De(1,1,zC)),this.context_}hasContext(){return!!this.context_}getImage(){return this.hasContext()?this.getContext().canvas:null}getReplayState(t){const i=Nt(t);return i in this.replayState_||(this.replayState_[i]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.replayState_[i]}load(){this.getSourceTiles()}release(){this.context_&&(eh(this.context_),zC.push(this.context_.canvas),this.context_=null),this.removeSourceTiles_(this),this.sourceTiles.length=0,super.release()}}let kN=class extends sh{constructor(t,i,n,r,s,o){super(t,i,o),this.extent=null,this.format_=r,this.features_=null,this.loader_,this.projection=null,this.resolution,this.tileLoadFunction_=s,this.url_=n,this.key=n}getTileUrl(){return this.url_}getFormat(){return this.format_}getFeatures(){return this.features_}load(){this.state==ct.IDLE&&(this.setState(ct.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))}onLoad(t,i){this.setFeatures(t)}onError(){this.setState(ct.ERROR)}setFeatures(t){this.features_=t,this.setState(ct.LOADED)}setLoader(t){this.loader_=t}};class RN extends vf{constructor(t){const i=t.projection||"EPSG:3857",n=t.extent||bf(i),r=t.tileGrid||wS({extent:n,maxResolution:t.maxResolution,maxZoom:t.maxZoom!==void 0?t.maxZoom:22,minZoom:t.minZoom,tileSize:t.tileSize||512});super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,cacheSize:t.cacheSize,interpolate:!0,projection:i,state:t.state,tileGrid:r,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:AN,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX===void 0?!0:t.wrapX,transition:t.transition,zDirection:t.zDirection===void 0?1:t.zDirection}),this.format_=t.format?t.format:null,this.tileKeysBySourceTileUrl_={},this.sourceTiles_={},this.overlaps_=t.overlaps==null?!0:t.overlaps,this.tileClass=t.tileClass?t.tileClass:kN,this.tileGrids_={}}getOverlaps(){return this.overlaps_}getSourceTiles(t,i,n){if(n.getState()===ct.IDLE){n.setState(ct.LOADING);const r=n.wrappedTileCoord,s=this.getTileGridForProjection(i);let o=s.getTileCoordExtent(r);const a=r[0],l=s.getResolution(a);Rn(o,-l,o);const c=this.projection;i&&this.projection&&!bi(i,c)&&(o=ec(o,i,c));const h=this.tileGrid,u=h.getExtent();u&&An(o,u,o);let d=l;i&&c&&!bi(i,c)&&(d=l/c.getMetersPerUnit()/i.getMetersPerUnit());const f=h.getZForResolution(d,this.zDirection);h.forEachTileCoord(o,f,g=>{const p=this.tileUrlFunction(g,t,i);this.sourceTiles_[p]||(this.sourceTiles_[p]=new this.tileClass(g,p?ct.IDLE:ct.EMPTY,p,this.format_,this.tileLoadFunction));const m=this.sourceTiles_[p];n.sourceTiles.push(m),this.tileKeysBySourceTileUrl_[p]||(this.tileKeysBySourceTileUrl_[p]=[]),this.tileKeysBySourceTileUrl_[p].push(n.getKey());const y=m.getState();if(y<ct.LOADED){const _=C=>{this.handleTileChange(C);const b=m.getState();if(b===ct.LOADED||b===ct.ERROR){const v=m.getKey();v in n.errorTileKeys?m.getState()===ct.LOADED&&delete n.errorTileKeys[v]:n.loadingSourceTiles--,b===ct.ERROR?n.errorTileKeys[v]=!0:m.removeEventListener(Mt.CHANGE,_),n.loadingSourceTiles===0&&n.setState(_o(n.errorTileKeys)?ct.LOADED:ct.ERROR)}};m.addEventListener(Mt.CHANGE,_),n.loadingSourceTiles++}y===ct.IDLE&&(m.extent=h.getTileCoordExtent(g),m.projection=this.projection,m.resolution=h.getResolution(g[0]),m.load())}),n.loadingSourceTiles||n.setState(n.sourceTiles.some(g=>g.getState()===ct.ERROR)?ct.ERROR:ct.LOADED)}return n.sourceTiles}removeSourceTiles(t){const i=t.getKey(),n=t.sourceTiles;for(let r=0,s=n.length;r<s;++r){const o=n[r].getTileUrl();if(!this.tileKeysBySourceTileUrl_[o])return;const a=this.tileKeysBySourceTileUrl_[o].indexOf(i);a!==-1&&(this.tileKeysBySourceTileUrl_[o].splice(a,1),this.tileKeysBySourceTileUrl_[o].length===0&&(delete this.tileKeysBySourceTileUrl_[o],delete this.sourceTiles_[o]))}}getTile(t,i,n,r,s){const o=[t,i,n];let a=this.getTileCoordForTileUrlFunction(o,s);const l=this.getTileGrid().getExtent(),c=this.projection,h=this.getTileGridForProjection(s);if(a&&l){const f=h.getTileCoordExtent(a);Rn(f,-h.getResolution(t),f),we(l,!s||!c||bi(s,c)?f:ec(f,s,c))||(a=null)}let u=!0;if(a!==null){const f=this.tileGrid,g=h.getResolution(t);let p=g;s&&c&&!bi(s,c)&&(p=g/c.getMetersPerUnit()/s.getMetersPerUnit());const m=f.getZForResolution(p,1),y=h.getTileCoordExtent(a);Rn(y,-g,y),f.forEachTileCoord(!s||!c||bi(s,c)?y:ec(y,s,c),m,_=>{u=u&&!this.tileUrlFunction(_,r,c)})}const d=new EN(o,u?ct.EMPTY:ct.IDLE,a,this.getSourceTiles.bind(this,r,s),this.removeSourceTiles.bind(this));return d.key=this.getKey(),d}getTileGridForProjection(t){const i=t.getCode();let n=this.tileGrids_[i];if(!n){const r=this.projection;if(r!==null&&!bi(r,t))return Cf(t);const s=this.tileGrid,o=s.getResolutions().slice(),a=o.map(function(h,u){return s.getOrigin(u)}),l=o.map(function(h,u){return s.getTileSize(u)}),c=jw+1;for(let h=o.length;h<c;++h)o.push(o[h-1]/2),a.push(a[h-1]),l.push(l[h-1]);n=new py({extent:s.getExtent(),origins:a,resolutions:o,tileSizes:l}),this.tileGrids_[i]=n}return n}getTilePixelRatio(t){return t}getTilePixelSize(t,i,n){const r=this.getTileGridForProjection(n),s=ci(r.getTileSize(t),this.tmpSize);return[Math.round(s[0]*i),Math.round(s[1]*i)]}setOverlaps(t){this.overlaps_=t,this.changed()}}function AN(e,t){e.setLoader(function(i,n,r){DS(t,e.getFormat(),i,n,r,e.onLoad.bind(e),e.onError.bind(e))})}class LN extends gy{constructor(t){super(t),this.image=null}getImage(){return this.image?this.image.getImage():null}prepareFrame(t){const i=t.layerStatesArray[t.layerIndex],n=t.pixelRatio,r=t.viewState,s=r.resolution,o=this.getLayer().getSource(),a=t.viewHints;let l=t.extent;if(i.extent!==void 0&&(l=An(l,Zn(i.extent,r.projection))),!a[xe.ANIMATING]&&!a[xe.INTERACTING]&&!Io(l))if(o){const c=r.projection,h=o.getImage(l,s,n,c);h&&(this.loadImage(h)?this.image=h:h.getState()===bt.EMPTY&&(this.image=null))}else this.image=null;return!!this.image}getData(t){const i=this.frameState;if(!i)return null;const n=this.getLayer(),r=Fe(i.pixelToCoordinateTransform,t.slice()),s=n.getExtent();if(s&&!Co(s,r))return null;const o=this.image.getExtent(),a=this.image.getImage(),l=qt(o),c=Math.floor(a.width*((r[0]-o[0])/l));if(c<0||c>=a.width)return null;const h=ke(o),u=Math.floor(a.height*((o[3]-r[1])/h));return u<0||u>=a.height?null:this.getImageData(a,c,u)}renderFrame(t,i){const n=this.image,r=n.getExtent(),s=n.getResolution(),[o,a]=Array.isArray(s)?s:[s,s],l=n.getPixelRatio(),c=t.layerStatesArray[t.layerIndex],h=t.pixelRatio,u=t.viewState,d=u.center,f=u.resolution,g=h*o/(f*l),p=h*a/(f*l);this.prepareContainer(t,i);const m=this.context.canvas.width,y=this.context.canvas.height,_=this.getRenderContext(t);let C=!1,b=!0;if(c.extent){const A=Zn(c.extent,u.projection);b=we(A,t.extent),C=b&&!Kn(A,t.extent),C&&this.clipUnrotated(_,t,A)}const v=n.getImage(),S=sr(this.tempTransform,m/2,y/2,g,p,0,l*(r[0]-d[0])/o,l*(d[1]-r[3])/a);this.renderedResolution=a*h/l;const w=v.width*S[0],L=v.height*S[3];if(this.getLayer().getSource().getInterpolate()||(_.imageSmoothingEnabled=!1),this.preRender(_,t),b&&w>=.5&&L>=.5){const A=S[4],B=S[5],O=c.opacity;O!==1&&(_.save(),_.globalAlpha=O),_.drawImage(v,0,0,+v.width,+v.height,A,B,w,L),O!==1&&_.restore()}return this.postRender(this.context,t),C&&_.restore(),_.imageSmoothingEnabled=!0,this.container}}class MN extends tl{constructor(t){t=t||{},super(t)}}class IN extends MN{constructor(t){super(t)}createRenderer(){return new LN(this)}getData(t){return super.getData(t)}}class PN extends _y{constructor(t){t=t||{};const i=Object.assign({},t.params);super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileClass:t.tileClass,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction,url:t.url,urls:t.urls,wrapX:t.wrapX!==void 0?t.wrapX:!0,transition:t.transition,zDirection:t.zDirection}),this.gutter_=t.gutter!==void 0?t.gutter:0,this.params_=i,this.v13_=!0,this.serverType_=t.serverType,this.hidpi_=t.hidpi!==void 0?t.hidpi:!0,this.tmpExtent_=ki(),this.updateV13_(),this.setKey(this.getKeyForParams_())}getFeatureInfoUrl(t,i,n,r){const s=ae(n),o=this.getProjection()||s;let a=this.getTileGrid();a||(a=this.getTileGridForProjection(o));const l=Qa(t,s,o),c=Lc(o,s,t,i),h=a.getZForResolution(c,this.zDirection),u=a.getResolution(h),d=a.getTileCoordForCoordAndZ(l,h);if(a.getResolutions().length<=d[0])return;let f=a.getTileCoordExtent(d,this.tmpExtent_);const g=this.gutter_;g!==0&&(f=Rn(f,u*g,f));const p={QUERY_LAYERS:this.params_.LAYERS};Object.assign(p,Qu(this.params_,"GetFeatureInfo"),r);const m=Math.floor((l[0]-f[0])/u),y=Math.floor((f[3]-l[1])/u);return p[this.v13_?"I":"X"]=m,p[this.v13_?"J":"Y"]=y,this.getRequestUrl_(d,f,1,o||s,p)}getLegendUrl(t,i){if(this.urls[0]===void 0)return;const n={SERVICE:"WMS",VERSION:Ju,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(i===void 0||i.LAYER===void 0){const r=this.params_.LAYERS;if(!(!Array.isArray(r)||r.length===1))return;n.LAYER=r}if(t!==void 0){const r=this.getProjection()?this.getProjection().getMetersPerUnit():1,s=28e-5;n.SCALE=t*r/s}return Object.assign(n,i),my(this.urls[0],n)}getGutter(){return this.gutter_}getParams(){return this.params_}getRequestUrl_(t,i,n,r,s){const o=this.urls;if(!o)return;let a;if(o.length==1)a=o[0];else{const l=go(bS(t),o.length);a=o[l]}return WS(i,(this.tileGrid||this.getTileGridForProjection(r)).getResolution(t[0]),n,r,a,s,this.serverType_)}getTilePixelRatio(t){return!this.hidpi_||this.serverType_===void 0?1:t}getKeyForParams_(){let t=0;const i=[];for(const n in this.params_)i[t++]=n+"-"+this.params_[n];return i.join("/")}setParams_(t){this.params_=t,this.updateV13_(),this.setKey(this.getKeyForParams_())}setParams(t){this.setParams_(Object.assign({},t))}updateParams(t){this.setParams_(Object.assign(this.params_,t))}updateV13_(){const t=this.params_.VERSION||Ju;this.v13_=M0(t,"1.3")>=0}tileUrlFunction(t,i,n){let r=this.getTileGrid();if(r||(r=this.getTileGridForProjection(n)),r.getResolutions().length<=t[0])return;i!=1&&(!this.hidpi_||this.serverType_===void 0)&&(i=1);const s=r.getResolution(t[0]);let o=r.getTileCoordExtent(t,this.tmpExtent_);const a=this.gutter_;a!==0&&(o=Rn(o,s*a,o));const l=Object.assign({},Qu(this.params_,"GetMap"));return this.getRequestUrl_(t,o,i,n,l)}}const Hg=[{title:"-6",date:"2026-01-23T00:00:00.000Z",location:{address:"",lng:116.3,lat:39.3},tags:["demo","markdown"],id:"hello-world",filename:"hello-world.md",toc:[{level:1,title:"Hello World",id:"hello-world"},{level:2,title:"Introduction",id:"introduction"},{level:2,title:"Features",id:"features"},{level:3,title:"Sub-feature",id:"sub-feature"}],excerpt:"This is a sample post."},{title:"-9",date:"2026-01-22T00:00:00.000Z",location:{address:"",lng:116.9,lat:39.9},tags:["vue","javascript","frontend"],id:"vue3-features",filename:"vue3-features.md",toc:[{level:1,title:" Vue 3 ",id:"-vue-3-"},{level:2,title:"Composition API",id:"composition-api"},{level:3,title:"setup() ",id:"setup-"},{level:3,title:"script setup",id:"script-setup"},{level:2,title:"Teleport",id:"teleport"},{level:2,title:"Fragments",id:"fragments"},{level:2,title:"",id:""},{level:2,title:"",id:""}],excerpt:"Vue 3  Composition API"},{title:"-2",date:"2026-01-20T00:00:00.000Z",location:{address:"",lng:116.1,lat:39.1},tags:["cesium","webgl","3d"],id:"cesium-guide",filename:"cesium-guide.md",toc:[{level:1,title:"Cesium ",id:"cesium-"},{level:2,title:"",id:""},{level:2,title:"",id:""},{level:3,title:"Viewer",id:"viewer"},{level:3,title:"Entity API",id:"entity-api"},{level:2,title:"",id:""},{level:3,title:"flyTo",id:"flyto"},{level:3,title:"setView",id:"setview"},{level:2,title:"",id:""},{level:2,title:"",id:""}],excerpt:"CesiumJS  JavaScript  3D "},{title:"-5",date:"2026-01-18T00:00:00.000Z",location:{address:"",lng:121.47,lat:31.23},tags:["performance","frontend","optimization"],id:"frontend-performance",filename:"frontend-performance.md",toc:[{level:1,title:"",id:""},{level:2,title:"",id:""},{level:3,title:"",id:""},{level:3,title:"",id:""},{level:3,title:"CDN ",id:"cdn-"},{level:2,title:"",id:""},{level:3,title:"",id:""},{level:3,title:"",id:""},{level:2,title:"",id:""},{level:3,title:"",id:""},{level:3,title:" requestAnimationFrame",id:"-requestanimationframe"},{level:2,title:"",id:""},{level:3,title:"",id:""},{level:3,title:" WeakMap  WeakSet",id:"-weakmap--weakset"},{level:2,title:"",id:""},{level:3,title:" Performance API",id:"-performance-api"},{level:3,title:"Lighthouse ",id:"lighthouse-"},{level:2,title:"",id:""}],excerpt:""},{title:"-8",date:"2026-01-17T00:00:00.000Z",location:{address:"",lng:114.05,lat:22.52},tags:["typescript","javascript","programming"],id:"typescript-guide",filename:"typescript-guide.md",toc:[{level:1,title:"TypeScript ",id:"typescript-"},{level:2,title:" TypeScript",id:"-typescript"},{level:3,title:"",id:""},{level:3,title:" IDE ",id:"-ide-"},{level:2,title:"",id:""},{level:3,title:"",id:""},{level:3,title:"",id:""},{level:3,title:"",id:""},{level:3,title:"",id:""},{level:2,title:"",id:""},{level:3,title:"",id:""},{level:3,title:"",id:""},{level:3,title:"",id:""},{level:2,title:"",id:""},{level:3,title:"",id:""},{level:3,title:"",id:""},{level:3,title:"",id:""},{level:2,title:"",id:""},{level:3,title:"",id:""},{level:3,title:"",id:""},{level:2,title:"",id:""},{level:3,title:"",id:""},{level:3,title:"",id:""},{level:2,title:"",id:""},{level:3,title:"Partial",id:"partial"},{level:3,title:"Pick",id:"pick"},{level:3,title:"Omit",id:"omit"},{level:2,title:"",id:""},{level:3,title:"tsconfig.json",id:"tsconfigjson"},{level:2,title:"",id:""},{level:3,title:"1. ",id:"1-"},{level:3,title:"2.  any",id:"2--any"},{level:3,title:"3. ",id:"3-"},{level:3,title:"4.  readonly ",id:"4--readonly-"},{level:2,title:"",id:""}],excerpt:"TypeScript  JavaScript  JavaScript  TypeScript"},{title:"-10",date:"2026-01-16T00:00:00.000Z",location:{address:"",lng:120.15,lat:30.28},tags:["webassembly","rust","performance"],id:"webassembly-guide",filename:"webassembly-guide.md",toc:[{level:1,title:"WebAssembly ",id:"webassembly-"},{level:2,title:" WebAssembly",id:"-webassembly"},{level:3,title:"",id:""},{level:2,title:"",id:""},{level:3,title:" Rust ",id:"-rust-"},{level:3,title:" Wasm ",id:"-wasm-"},{level:3,title:" Cargo.toml",id:"-cargotoml"},{level:3,title:" Rust ",id:"-rust-"},{level:3,title:" Wasm",id:"-wasm"},{level:2,title:" JavaScript  Wasm",id:"-javascript--wasm"},{level:3,title:"",id:""},{level:3,title:"",id:""},{level:2,title:"",id:""},{level:3,title:"JavaScript vs WebAssembly",id:"javascript-vs-webassembly"},{level:2,title:"",id:""},{level:3,title:"1. ",id:"1-"},{level:3,title:"2. ",id:"2-"},{level:3,title:"3. ",id:"3-"},{level:2,title:"",id:""},{level:3,title:"1. ",id:"1-"},{level:3,title:"2. ",id:"2-"},{level:3,title:"3.  SIMD ",id:"3--simd-"},{level:2,title:"",id:""},{level:3,title:"1.  console.log",id:"1--consolelog"},{level:3,title:"2. ",id:"2-"},{level:3,title:"3. ",id:"3-"},{level:2,title:"",id:""},{level:3,title:"1.  Wasm",id:"1--wasm"},{level:3,title:"2. ",id:"2-"},{level:3,title:"3. ",id:"3-"},{level:2,title:"",id:""}],excerpt:"WebAssembly Wasm Web  Web "},{title:"-1",date:"2026-01-16T00:00:00.000Z",location:{address:"",lng:127.15,lat:32.28},tags:["webassembly","rust","performance"],id:"",filename:".md",toc:[{level:1,title:"",id:""},{level:2,title:"",id:""},{level:1,title:"",id:""},{level:1,title:"",id:""}],excerpt:"	..."},{title:"-4",date:"2026-01-15T00:00:00.000Z",location:{address:"",lng:116.2,lat:39.2},tags:["life","cyberpunk","thoughts"],id:"cyberpunk-thoughts",filename:"cyberpunk-thoughts.md",toc:[{level:1,title:"",id:""},{level:2,title:"",id:""},{level:3,title:"",id:""},{level:2,title:"",id:""},{level:2,title:"",id:""},{level:2,title:"",id:""}],excerpt:"2049"},{title:"-7",date:"2026-01-14T00:00:00.000Z",location:{address:"",lng:113.26,lat:23.13},tags:["nodejs","backend","best-practices"],id:"nodejs-best-practices",filename:"nodejs-best-practices.md",toc:[{level:1,title:"Node.js ",id:"nodejs-"},{level:2,title:"",id:""},{level:3,title:"",id:""},{level:3,title:"",id:""},{level:2,title:"",id:""},{level:3,title:"",id:""},{level:3,title:"",id:""},{level:3,title:"",id:""},{level:2,title:"",id:""},{level:3,title:"1.  Helmet",id:"1--helmet"},{level:3,title:"2. CORS ",id:"2-cors-"},{level:3,title:"3. ",id:"3-"},{level:3,title:"4. ",id:"4-"},{level:2,title:"",id:""},{level:3,title:"1. ",id:"1-"},{level:3,title:"2. ",id:"2-"},{level:3,title:"3. ",id:"3-"},{level:3,title:"4. ",id:"4-"},{level:2,title:"",id:""},{level:3,title:" Winston",id:"-winston"},{level:3,title:"",id:""},{level:2,title:"",id:""},{level:3,title:"",id:""},{level:3,title:"",id:""},{level:2,title:"",id:""},{level:3,title:"1.  PM2",id:"1--pm2"},{level:3,title:"2. Docker ",id:"2-docker-"},{level:2,title:"",id:""},{level:3,title:"",id:""},{level:3,title:"",id:""},{level:2,title:"",id:""}],excerpt:"Node.js  Chrome V8  JavaScript  JavaScript  Node.js "},{title:"-3",date:"2026-01-13T00:00:00.000Z",location:{address:"",lng:104.06,lat:30.67},tags:["css","layout","frontend"],id:"css-grid-guide",filename:"css-grid-guide.md",toc:[{level:1,title:"CSS Grid ",id:"css-grid-"},{level:2,title:" CSS Grid",id:"-css-grid"},{level:3,title:"Grid vs Flexbox",id:"grid-vs-flexbox"},{level:2,title:"",id:""},{level:3,title:"",id:""},{level:3,title:"",id:""},{level:2,title:"",id:""},{level:3,title:"grid-template-columns  grid-template-rows",id:"grid-template-columns--grid-template-rows"},{level:3,title:" fr ",id:"-fr-"},{level:3,title:"repeat() ",id:"repeat-"},{level:3,title:"auto-fill  auto-fit",id:"auto-fill--auto-fit"},{level:2,title:"",id:""},{level:3,title:"gap ",id:"gap-"},{level:2,title:"",id:""},{level:3,title:"grid-column  grid-row",id:"grid-column--grid-row"},{level:3,title:"grid-area",id:"grid-area"},{level:2,title:"",id:""},{level:3,title:"justify-items  align-items",id:"justify-items--align-items"},{level:3,title:"justify-content  align-content",id:"justify-content--align-content"},{level:3,title:"place-items  place-content",id:"place-items--place-content"},{level:2,title:"",id:""},{level:3,title:"1. ",id:"1-"},{level:3,title:"2. ",id:"2-"},{level:3,title:"3. ",id:"3-"},{level:3,title:"4. ",id:"4-"},{level:2,title:"",id:""},{level:3,title:"1. ",id:"1-"},{level:3,title:"2. minmax() ",id:"2-minmax-"},{level:3,title:"3. Subgrid",id:"3-subgrid"},{level:3,title:"4. ",id:"4-"},{level:2,title:"",id:""},{level:3,title:"",id:""},{level:3,title:" auto-fit",id:"-auto-fit"},{level:2,title:"",id:""},{level:3,title:"1.  @supports",id:"1--supports"},{level:3,title:"2. ",id:"2-"},{level:2,title:"",id:""},{level:3,title:"1. ",id:"1-"},{level:3,title:"2.  will-change",id:"2--will-change"},{level:3,title:"3. ",id:"3-"},{level:2,title:"",id:""},{level:3,title:"1. ",id:"1-"},{level:3,title:"2. ",id:"2-"},{level:3,title:"3. ",id:"3-"},{level:2,title:"",id:""},{level:3,title:"1.  HTML",id:"1--html"},{level:3,title:"2.  CSS ",id:"2--css-"},{level:3,title:"3. ",id:"3-"},{level:2,title:"",id:""}],excerpt:"CSS Grid  CSS Grid"}],Oh="data:image/svg+xml,%3csvg%20t='1769265490681'%20class='icon'%20viewBox='0%200%201024%201024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20p-id='4195'%20width='50'%20height='50'%3e%3cpath%20d='M788.551%20292.895c-74.801%200-135.633-60.832-135.633-135.605v-156.171h-487.636c-45.595%200-82.548%2036.982-82.548%2082.549v856.719c0%2045.567%2036.955%2082.493%2082.548%2082.493h693.46c45.571%200%2082.523-36.926%2082.523-82.493v-647.493h-152.714zM805.084%20839.116h-586.199v-55.301h586.199v55.301zM805.084%20662.15h-586.199v-55.301h586.199v55.301zM805.084%20485.184h-586.199v-55.301h586.199v55.301z'%20fill='%23E0F2F1'%20p-id='4196'%3e%3c/path%3e%3cpath%20d='M706.002%201.119v156.171c0%2045.567%2036.955%2082.493%2082.549%2082.493h152.714l-235.263-238.662z'%20fill='%23E0F2F1'%20p-id='4197'%3e%3c/path%3e%3c/svg%3e";let Dh,jS;function em(){if(Dh===void 0){const e=document.createElement("canvas");e.setAttribute("style","image-rendering: -moz-crisp-edges; image-rendering: crisp-edges; image-rendering: pixelated;");const t=e.style.imageRendering;Dh=!!t,Dh&&(jS=t)}return Dh}function FN(){return em(),jS||""}function au(e){return e.get("olcs_projection")||e.getProjection()}let ON=0;function Ge(e){return e.olcs_uid||(e.olcs_uid=++ON)}function Vg(e){const t=e,i=t.readyPromise;return i||(t.ready!==void 0?t.ready?Promise.resolve(e):new Promise((n,r)=>{const s=setInterval(()=>{t.ready&&(clearInterval(s),n(e))},20)}):Promise.reject("Not a readyable object"))}function HS(){const e=document.createElement("canvas");return e.width=1,e.height=1,e}class DN{source_;projection_;fallbackProj_;map_;shouldRequestNextLevel;emptyCanvas_=HS();emptyCanvasPromise_=Promise.resolve(this.emptyCanvas_);tilingScheme_;ready_;rectangle_;get ready(){return this.ready_}get rectangle(){return this.rectangle_}get tilingScheme(){return this.tilingScheme_}errorEvent=new Cesium.Event;credit;proxy;get _ready(){return this.ready_}get tileWidth(){const t=this.source_.getTileGrid();if(t){const i=t.getTileSize(0);return Array.isArray(i)?i[0]:i}return 256}get tileHeight(){const t=this.source_.getTileGrid();if(t){const i=t.getTileSize(0);return Array.isArray(i)?i[1]:i}return 256}get maximumLevel(){const t=this.source_.getTileGrid();return t?t.getMaxZoom():18}get minimumLevel(){return 0}get tileDiscardPolicy(){}get hasAlphaChannel(){return!0}pickFeatures(t,i,n,r,s){}constructor(t,i,n){this.source_=i,this.projection_=null,this.ready_=!1,this.fallbackProj_=n||null,this.tilingScheme_=new Cesium.WebMercatorTilingScheme,this.rectangle_=null,this.map_=t,this.shouldRequestNextLevel=!1;const r=this.source_.get("olcs_proxy");r&&(typeof r=="function"?this.proxy={getURL:r}:typeof r=="string"&&(this.proxy=new Cesium.DefaultProxy(r))),this.source_.on("change",s=>{this.handleSourceChanged_()}),this.handleSourceChanged_()}handleSourceChanged_(){if(!this.ready_&&this.source_.getState()=="ready"){this.projection_=au(this.source_)||this.fallbackProj_;const t={numberOfLevelZeroTilesX:1,numberOfLevelZeroTilesY:1};if(this.source_.getTileGrid()!==null&&this.source_.getTileGrid().forEachTileCoord(this.projection_.getExtent(),0,([i,n,r])=>{t.numberOfLevelZeroTilesX=n+1,t.numberOfLevelZeroTilesY=r+1}),this.projection_.getCode()==="EPSG:4326")this.shouldRequestNextLevel=t.numberOfLevelZeroTilesX===1&&t.numberOfLevelZeroTilesY===1,this.tilingScheme_=new Cesium.GeographicTilingScheme(t);else if(this.projection_.getCode()==="EPSG:3857")this.shouldRequestNextLevel=!1,this.tilingScheme_=new Cesium.WebMercatorTilingScheme(t);else return;this.rectangle_=this.tilingScheme_.rectangle,this.ready_=!0}}getTileCredits(t,i,n){const r=this.source_.getAttributions();if(!r)return[];const s=this.map_.getView().calculateExtent(this.map_.getSize()),o=this.map_.getView().getCenter(),a=this.shouldRequestNextLevel?n+1:n;return US(r,a,o,s)}requestImage(t,i,n,r){const s=this.source_.getTileUrlFunction();if(s&&this.projection_){const o=this.shouldRequestNextLevel?n+1:n;let a=s.call(this.source_,[o,t,i],1,this.projection_);return this.proxy&&(a=this.proxy.getURL(a)),a?Cesium.ImageryProvider.loadImage(this,a):this.emptyCanvasPromise_}else return this.emptyCanvasPromise_}}const im=65536*65536,GC=1/im,BN=12,WC=typeof TextDecoder>"u"?null:new TextDecoder("utf-8"),Ug=0,Bh=1,yl=2,Nh=5;class NN{constructor(t=new Uint8Array(16)){this.buf=ArrayBuffer.isView(t)?t:new Uint8Array(t),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(t,i,n=this.length){for(;this.pos<n;){const r=this.readVarint(),s=r>>3,o=this.pos;this.type=r&7,t(s,i,this),this.pos===o&&this.skip(r)}return i}readMessage(t,i){return this.readFields(t,i,this.readVarint()+this.pos)}readFixed32(){const t=this.dataView.getUint32(this.pos,!0);return this.pos+=4,t}readSFixed32(){const t=this.dataView.getInt32(this.pos,!0);return this.pos+=4,t}readFixed64(){const t=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*im;return this.pos+=8,t}readSFixed64(){const t=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*im;return this.pos+=8,t}readFloat(){const t=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,t}readDouble(){const t=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,t}readVarint(t){const i=this.buf;let n,r;return r=i[this.pos++],n=r&127,r<128||(r=i[this.pos++],n|=(r&127)<<7,r<128)||(r=i[this.pos++],n|=(r&127)<<14,r<128)||(r=i[this.pos++],n|=(r&127)<<21,r<128)?n:(r=i[this.pos],n|=(r&15)<<28,$N(n,t,this))}readVarint64(){return this.readVarint(!0)}readSVarint(){const t=this.readVarint();return t%2===1?(t+1)/-2:t/2}readBoolean(){return!!this.readVarint()}readString(){const t=this.readVarint()+this.pos,i=this.pos;return this.pos=t,t-i>=BN&&WC?WC.decode(this.buf.subarray(i,t)):JN(this.buf,i,t)}readBytes(){const t=this.readVarint()+this.pos,i=this.buf.subarray(this.pos,t);return this.pos=t,i}readPackedVarint(t=[],i){const n=this.readPackedEnd();for(;this.pos<n;)t.push(this.readVarint(i));return t}readPackedSVarint(t=[]){const i=this.readPackedEnd();for(;this.pos<i;)t.push(this.readSVarint());return t}readPackedBoolean(t=[]){const i=this.readPackedEnd();for(;this.pos<i;)t.push(this.readBoolean());return t}readPackedFloat(t=[]){const i=this.readPackedEnd();for(;this.pos<i;)t.push(this.readFloat());return t}readPackedDouble(t=[]){const i=this.readPackedEnd();for(;this.pos<i;)t.push(this.readDouble());return t}readPackedFixed32(t=[]){const i=this.readPackedEnd();for(;this.pos<i;)t.push(this.readFixed32());return t}readPackedSFixed32(t=[]){const i=this.readPackedEnd();for(;this.pos<i;)t.push(this.readSFixed32());return t}readPackedFixed64(t=[]){const i=this.readPackedEnd();for(;this.pos<i;)t.push(this.readFixed64());return t}readPackedSFixed64(t=[]){const i=this.readPackedEnd();for(;this.pos<i;)t.push(this.readSFixed64());return t}readPackedEnd(){return this.type===yl?this.readVarint()+this.pos:this.pos+1}skip(t){const i=t&7;if(i===Ug)for(;this.buf[this.pos++]>127;);else if(i===yl)this.pos=this.readVarint()+this.pos;else if(i===Nh)this.pos+=4;else if(i===Bh)this.pos+=8;else throw new Error(`Unimplemented type: ${i}`)}writeTag(t,i){this.writeVarint(t<<3|i)}realloc(t){let i=this.length||16;for(;i<this.pos+t;)i*=2;if(i!==this.length){const n=new Uint8Array(i);n.set(this.buf),this.buf=n,this.dataView=new DataView(n.buffer),this.length=i}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(t){this.realloc(4),this.dataView.setInt32(this.pos,t,!0),this.pos+=4}writeSFixed32(t){this.realloc(4),this.dataView.setInt32(this.pos,t,!0),this.pos+=4}writeFixed64(t){this.realloc(8),this.dataView.setInt32(this.pos,t&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(t*GC),!0),this.pos+=8}writeSFixed64(t){this.realloc(8),this.dataView.setInt32(this.pos,t&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(t*GC),!0),this.pos+=8}writeVarint(t){if(t=+t||0,t>268435455||t<0){zN(t,this);return}this.realloc(4),this.buf[this.pos++]=t&127|(t>127?128:0),!(t<=127)&&(this.buf[this.pos++]=(t>>>=7)&127|(t>127?128:0),!(t<=127)&&(this.buf[this.pos++]=(t>>>=7)&127|(t>127?128:0),!(t<=127)&&(this.buf[this.pos++]=t>>>7&127)))}writeSVarint(t){this.writeVarint(t<0?-t*2-1:t*2)}writeBoolean(t){this.writeVarint(+t)}writeString(t){t=String(t),this.realloc(t.length*4),this.pos++;const i=this.pos;this.pos=QN(this.buf,t,this.pos);const n=this.pos-i;n>=128&&jC(i,n,this),this.pos=i-1,this.writeVarint(n),this.pos+=n}writeFloat(t){this.realloc(4),this.dataView.setFloat32(this.pos,t,!0),this.pos+=4}writeDouble(t){this.realloc(8),this.dataView.setFloat64(this.pos,t,!0),this.pos+=8}writeBytes(t){const i=t.length;this.writeVarint(i),this.realloc(i);for(let n=0;n<i;n++)this.buf[this.pos++]=t[n]}writeRawMessage(t,i){this.pos++;const n=this.pos;t(i,this);const r=this.pos-n;r>=128&&jC(n,r,this),this.pos=n-1,this.writeVarint(r),this.pos+=r}writeMessage(t,i,n){this.writeTag(t,yl),this.writeRawMessage(i,n)}writePackedVarint(t,i){i.length&&this.writeMessage(t,jN,i)}writePackedSVarint(t,i){i.length&&this.writeMessage(t,HN,i)}writePackedBoolean(t,i){i.length&&this.writeMessage(t,qN,i)}writePackedFloat(t,i){i.length&&this.writeMessage(t,VN,i)}writePackedDouble(t,i){i.length&&this.writeMessage(t,UN,i)}writePackedFixed32(t,i){i.length&&this.writeMessage(t,YN,i)}writePackedSFixed32(t,i){i.length&&this.writeMessage(t,XN,i)}writePackedFixed64(t,i){i.length&&this.writeMessage(t,KN,i)}writePackedSFixed64(t,i){i.length&&this.writeMessage(t,ZN,i)}writeBytesField(t,i){this.writeTag(t,yl),this.writeBytes(i)}writeFixed32Field(t,i){this.writeTag(t,Nh),this.writeFixed32(i)}writeSFixed32Field(t,i){this.writeTag(t,Nh),this.writeSFixed32(i)}writeFixed64Field(t,i){this.writeTag(t,Bh),this.writeFixed64(i)}writeSFixed64Field(t,i){this.writeTag(t,Bh),this.writeSFixed64(i)}writeVarintField(t,i){this.writeTag(t,Ug),this.writeVarint(i)}writeSVarintField(t,i){this.writeTag(t,Ug),this.writeSVarint(i)}writeStringField(t,i){this.writeTag(t,yl),this.writeString(i)}writeFloatField(t,i){this.writeTag(t,Nh),this.writeFloat(i)}writeDoubleField(t,i){this.writeTag(t,Bh),this.writeDouble(i)}writeBooleanField(t,i){this.writeVarintField(t,+i)}}function $N(e,t,i){const n=i.buf;let r,s;if(s=n[i.pos++],r=(s&112)>>4,s<128||(s=n[i.pos++],r|=(s&127)<<3,s<128)||(s=n[i.pos++],r|=(s&127)<<10,s<128)||(s=n[i.pos++],r|=(s&127)<<17,s<128)||(s=n[i.pos++],r|=(s&127)<<24,s<128)||(s=n[i.pos++],r|=(s&1)<<31,s<128))return Yo(e,r,t);throw new Error("Expected varint not more than 10 bytes")}function Yo(e,t,i){return i?t*4294967296+(e>>>0):(t>>>0)*4294967296+(e>>>0)}function zN(e,t){let i,n;if(e>=0?(i=e%4294967296|0,n=e/4294967296|0):(i=~(-e%4294967296),n=~(-e/4294967296),i^4294967295?i=i+1|0:(i=0,n=n+1|0)),e>=18446744073709552e3||e<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),GN(i,n,t),WN(n,t)}function GN(e,t,i){i.buf[i.pos++]=e&127|128,e>>>=7,i.buf[i.pos++]=e&127|128,e>>>=7,i.buf[i.pos++]=e&127|128,e>>>=7,i.buf[i.pos++]=e&127|128,e>>>=7,i.buf[i.pos]=e&127}function WN(e,t){const i=(e&7)<<4;t.buf[t.pos++]|=i|((e>>>=3)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127)))))}function jC(e,t,i){const n=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(Math.LN2*7));i.realloc(n);for(let r=i.pos-1;r>=e;r--)i.buf[r+n]=i.buf[r]}function jN(e,t){for(let i=0;i<e.length;i++)t.writeVarint(e[i])}function HN(e,t){for(let i=0;i<e.length;i++)t.writeSVarint(e[i])}function VN(e,t){for(let i=0;i<e.length;i++)t.writeFloat(e[i])}function UN(e,t){for(let i=0;i<e.length;i++)t.writeDouble(e[i])}function qN(e,t){for(let i=0;i<e.length;i++)t.writeBoolean(e[i])}function YN(e,t){for(let i=0;i<e.length;i++)t.writeFixed32(e[i])}function XN(e,t){for(let i=0;i<e.length;i++)t.writeSFixed32(e[i])}function KN(e,t){for(let i=0;i<e.length;i++)t.writeFixed64(e[i])}function ZN(e,t){for(let i=0;i<e.length;i++)t.writeSFixed64(e[i])}function JN(e,t,i){let n="",r=t;for(;r<i;){const s=e[r];let o=null,a=s>239?4:s>223?3:s>191?2:1;if(r+a>i)break;let l,c,h;a===1?s<128&&(o=s):a===2?(l=e[r+1],(l&192)===128&&(o=(s&31)<<6|l&63,o<=127&&(o=null))):a===3?(l=e[r+1],c=e[r+2],(l&192)===128&&(c&192)===128&&(o=(s&15)<<12|(l&63)<<6|c&63,(o<=2047||o>=55296&&o<=57343)&&(o=null))):a===4&&(l=e[r+1],c=e[r+2],h=e[r+3],(l&192)===128&&(c&192)===128&&(h&192)===128&&(o=(s&15)<<18|(l&63)<<12|(c&63)<<6|h&63,(o<=65535||o>=1114112)&&(o=null))),o===null?(o=65533,a=1):o>65535&&(o-=65536,n+=String.fromCharCode(o>>>10&1023|55296),o=56320|o&1023),n+=String.fromCharCode(o),r+=a}return n}function QN(e,t,i){for(let n=0,r,s;n<t.length;n++){if(r=t.charCodeAt(n),r>55295&&r<57344)if(s)if(r<56320){e[i++]=239,e[i++]=191,e[i++]=189,s=r;continue}else r=s-55296<<10|r-56320|65536,s=null;else{r>56319||n+1===t.length?(e[i++]=239,e[i++]=191,e[i++]=189):s=r;continue}else s&&(e[i++]=239,e[i++]=191,e[i++]=189,s=null);r<128?e[i++]=r:(r<2048?e[i++]=r>>6|192:(r<65536?e[i++]=r>>12|224:(e[i++]=r>>18|240,e[i++]=r>>12&63|128),e[i++]=r>>6&63|128),e[i++]=r&63|128)}return i}class t${constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=ah,this.supportedMediaTypes=null}getReadOptions(t,i){if(i){let n=i.dataProjection?ae(i.dataProjection):this.readProjection(t);i.extent&&n&&n.getUnits()==="tile-pixels"&&(n=ae(n),n.setWorldExtent(i.extent)),i={dataProjection:n,featureProjection:i.featureProjection}}return this.adaptOptions(i)}adaptOptions(t){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},t)}getType(){return Gt()}readFeature(t,i){return Gt()}readFeatures(t,i){return Gt()}readGeometry(t,i){return Gt()}readProjection(t){return Gt()}writeFeature(t,i){return Gt()}writeFeatures(t,i){return Gt()}writeGeometry(t,i){return Gt()}}function e$(e,t,i){const n=i?ae(i.featureProjection):null,r=i?ae(i.dataProjection):null;let s=e;if(n&&r&&!bi(n,r)){const o=r,a=n;o.getUnits()==="tile-pixels"?s.transform(o,a):s.applyTransform(rr(o,a))}return s}class i$ extends t${constructor(t){super(),t=t||{},this.dataProjection=new sf({code:"",units:"tile-pixels"}),this.featureClass=t.featureClass?t.featureClass:Bi,this.geometryName_=t.geometryName,this.layerName_=t.layerName?t.layerName:"layer",this.layers_=t.layers?t.layers:null,this.idProperty_=t.idProperty,this.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"]}readRawGeometry_(t,i,n,r){t.pos=i.geometry;const s=t.readVarint()+t.pos;let o=1,a=0,l=0,c=0,h=0,u=0;for(;t.pos<s;){if(!a){const d=t.readVarint();o=d&7,a=d>>3}if(a--,o===1||o===2)l+=t.readSVarint(),c+=t.readSVarint(),o===1&&h>u&&(r.push(h),u=h),n.push(l,c),h+=2;else if(o===7)h>u&&(n.push(n[u],n[u+1]),h+=2);else throw new Error("Invalid command found in the PBF")}h>u&&(r.push(h),u=h)}createFeature_(t,i,n){const r=i.type;if(r===0)return null;let s;const o=i.properties;let a;this.idProperty_?(a=o[this.idProperty_],delete o[this.idProperty_]):a=i.id,o[this.layerName_]=i.layer.name;const l=[],c=[];this.readRawGeometry_(t,i,l,c);const h=a$(r,c.length);if(this.featureClass===Bi)s=new this.featureClass(h,l,c,2,o,a),s.transform(n.dataProjection);else{let u;if(h=="Polygon"){const g=Ww(l,c);u=g.length>1?new Zu(l,"XY",g):new Gr(l,"XY",c)}else u=h==="Point"?new or(l,"XY"):h==="LineString"?new za(l,"XY"):h==="MultiPoint"?new wf(l,"XY"):h==="MultiLineString"?new Ku(l,"XY",c):null;const d=this.featureClass;s=new d,this.geometryName_&&s.setGeometryName(this.geometryName_);const f=e$(u,!1,n);s.setGeometry(f),a!==void 0&&s.setId(a),s.setProperties(o,!0)}return s}getType(){return"arraybuffer"}readFeatures(t,i){const n=this.layers_;i=this.adaptOptions(i);const r=ae(i.dataProjection);r.setWorldExtent(i.extent),i.dataProjection=r;const s=new NN(t),o=s.readFields(n$,{}),a=[];for(const l in o){if(n&&!n.includes(l))continue;const c=o[l],h=c?[0,0,c.extent,c.extent]:null;r.setExtent(h);for(let u=0,d=c.length;u<d;++u){const f=o$(s,c,u),g=this.createFeature_(s,f,i);g!==null&&a.push(g)}}return a}readProjection(t){return this.dataProjection}setLayers(t){this.layers_=t}}function n$(e,t,i){if(e===3){const n={keys:[],values:[],features:[]},r=i.readVarint()+i.pos;i.readFields(r$,n,r),n.length=n.features.length,n.length&&(t[n.name]=n)}}function r$(e,t,i){if(e===15)t.version=i.readVarint();else if(e===1)t.name=i.readString();else if(e===5)t.extent=i.readVarint();else if(e===2)t.features.push(i.pos);else if(e===3)t.keys.push(i.readString());else if(e===4){let n=null;const r=i.readVarint()+i.pos;for(;i.pos<r;)e=i.readVarint()>>3,n=e===1?i.readString():e===2?i.readFloat():e===3?i.readDouble():e===4?i.readVarint64():e===5?i.readVarint():e===6?i.readSVarint():e===7?i.readBoolean():null;t.values.push(n)}}function s$(e,t,i){if(e==1)t.id=i.readVarint();else if(e==2){const n=i.readVarint()+i.pos;for(;i.pos<n;){const r=t.layer.keys[i.readVarint()],s=t.layer.values[i.readVarint()];t.properties[r]=s}}else e==3?t.type=i.readVarint():e==4&&(t.geometry=i.pos)}function o$(e,t,i){e.pos=t.features[i];const n=e.readVarint()+e.pos,r={layer:t,type:0,properties:{}};return e.readFields(s$,r,n),r}function a$(e,t){let i;return e===1?i=t===1?"Point":"MultiPoint":e===2?i=t===1?"LineString":"MultiLineString":e===3&&(i="Polygon"),i}function l$(e,t){const i=e.canvas;t=t||{};const n=t.pixelRatio||hw,r=t.size;r&&(i.width=r[0]*n,i.height=r[1]*n,i.style.width=r[0]+"px",i.style.height=r[1]+"px");const s=[0,0,i.width,i.height],o=su(Yi(),n,n);return new AS(e,n,s,o,0)}const c$=new i$({featureClass:Bi}),h$=[new ir({stroke:new wo({color:"blue",width:2})})];class u${urls;emptyCanvas_=HS();emptyCanvasPromise_=Promise.resolve(this.emptyCanvas_);tilingScheme_=new Cesium.WebMercatorTilingScheme;ready_=!0;rectangle_;tileRectangle_;tileWidth=256;tileHeight=256;maximumLevel=20;minimumLevel_=0;get minimumLevel(){return this.minimumLevel_}featureCache;tileCache;tileFunction_;styleFunction_;projection_=ae("EPSG:3857");get ready(){return this.ready_}get rectangle(){return this.rectangle_}get tilingScheme(){return this.tilingScheme_}errorEvent=new Cesium.Event;credit;getTileCredits(t,i,n){return[]}proxy;get _ready(){return this.ready_}get tileDiscardPolicy(){}get hasAlphaChannel(){return!0}pickFeatures(t,i,n,r,s){}constructor(t){this.urls=t.urls,this.rectangle_=t.rectangle||this.tilingScheme.rectangle,this.credit=t.credit,this.styleFunction_=t.styleFunction||(()=>h$),this.tileRectangle_=new Cesium.Rectangle;const i=t.cacheSize!==void 0?t.cacheSize:50;this.tileCache=new Hu(i),this.featureCache=t.featureCache||new Hu(i),this.minimumLevel_=t.minimumLevel||0;const n=Cf(this.projection_);this.tileFunction_=TS(this.urls,n)}getTileFeatures(t,i,n){const r=this.getCacheKey_(t,i,n);let s;if(this.featureCache.containsKey(r)&&(s=this.featureCache.get(r)),!s){const o=this.getUrl_(t,i,n);if(s=fetch(o).then(a=>a.ok?a:Promise.reject(a)).then(a=>a.arrayBuffer()).then(a=>this.readFeaturesFromBuffer(a)),this.featureCache.set(r,s),this.featureCache.getCount()>2*this.featureCache.highWaterMark)for(;this.featureCache.canExpireCache();)this.featureCache.pop()}return s}readFeaturesFromBuffer(t){const i=c$.readFeatures(t),n=this.tileWidth/4096;return i.forEach(r=>{const s=r.getFlatCoordinates();for(let o=0;o<s.length;++o)s[o]*=n}),i}getUrl_(t,i,n){return this.tileFunction_([t,i,n],1,this.projection_)}getCacheKey_(t,i,n){return`${t}_${i}_${n}`}requestImage(t,i,n,r){if(n<this.minimumLevel_)return this.emptyCanvasPromise_;try{const s=this.getCacheKey_(n,t,i);let o;if(this.tileCache.containsKey(s)&&(o=this.tileCache.get(s)),!o&&(o=this.getTileFeatures(n,t,i).then(a=>{this.tilingScheme.tileXYToNativeRectangle(t,i,n,this.tileRectangle_);const l=(this.tileRectangle_.east-this.tileRectangle_.west)/this.tileWidth;return this.rasterizeFeatures(a,this.styleFunction_,l)}),this.tileCache.set(s,o),this.tileCache.getCount()>2*this.tileCache.highWaterMark))for(;this.tileCache.canExpireCache();)this.tileCache.pop();return o}catch(s){console.trace(s),this.errorEvent.raiseEvent("could not render pbf to tile",s)}}rasterizeFeatures(t,i,n){const r=document.createElement("canvas"),s=l$(r.getContext("2d"),{size:[this.tileWidth,this.tileHeight]});return t.forEach(o=>{const a=i(o,n);a&&(Array.isArray(a)?a.forEach(l=>{s.setStyle(l),s.drawGeometry(o)}):(s.setStyle(a),s.drawGeometry(o)))}),r}}const d$={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"],vector:[]},HC={hybrid:["Image","Text","Default"],vector:["Polygon","Circle","LineString","Image","Text","Default"]};class f$ extends vS{constructor(t,i){super(t,i),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.renderedLayerRevision_,this.renderedPixelToCoordinateTransform_=null,this.renderedRotation_,this.renderedOpacity_=1,this.tmpTransform_=Yi(),this.tileClipContexts_=null}enqueueTilesForNextExtent(){return this.getLayer().getRenderMode()!=="vector"}drawTile(t,i,n,r,s,o,a,l){this.updateExecutorGroup_(t,i.pixelRatio,i.viewState.projection),this.tileImageNeedsRender_(t)&&this.renderTileImage_(t,i),super.drawTile(t,i,n,r,s,o,a,l)}getTile(t,i,n,r){const s=this.getOrCreateTile(t,i,n,r);if(!s)return null;const o=r.viewState,a=o.resolution,l=r.viewHints,c=this.getLayer().getSource(),h=c.getTileGridForProjection(o.projection),u=!(l[xe.ANIMATING]||l[xe.INTERACTING]),d=h.getZForResolution(a,c.zDirection)===t;return u&&d?s.wantedResolution=a:s.wantedResolution||(s.wantedResolution=h.getResolution(t)),s}prepareFrame(t){const i=this.getLayer().getRevision();return this.renderedLayerRevision_!==i&&(this.renderedLayerRevision_=i,this.renderedTiles.length=0),super.prepareFrame(t)}updateExecutorGroup_(t,i,n){const r=this.getLayer(),s=r.getRevision(),o=r.getRenderOrder()||null,a=t.wantedResolution,l=t.getReplayState(r);if(!l.dirty&&l.renderedResolution===a&&l.renderedRevision==s&&l.renderedRenderOrder==o)return;const c=r.getSource(),h=!!r.getDeclutter(),u=c.getTileGrid(),f=c.getTileGridForProjection(n).getTileCoordExtent(t.wrappedTileCoord),g=c.getSourceTiles(i,n,t),p=Nt(r);delete t.hitDetectionImageData[p],t.executorGroups[p]=[],l.dirty=!1;for(let m=0,y=g.length;m<y;++m){const _=g[m];if(_.getState()!=ct.LOADED)continue;const C=c.getProjection(),b=_.tileCoord;let v=u.getTileCoordExtent(b);n&&C&&!bi(n,C)&&(v=ec(v,C,n,32));const S=An(f,v),w=Rn(S,r.getRenderBuffer()*a,this.tempExtent),L=bo(v,S)?null:w,A=new kS(0,S,a,i),B=Jp(a,i),O=function(E,D){let M;const j=E.getStyleFunction()||r.getStyleFunction();if(j&&(M=j(E,a)),M){const Y=this.renderFeature(E,B,M,A,h,D);l.dirty=l.dirty||Y}},F=_.getFeatures();o&&o!==l.renderedRenderOrder&&F.sort(o);for(let E=0,D=F.length;E<D;++E){let M=F[E];n&&_.projection&&!bi(n,_.projection)&&(M=M.clone(),M.getGeometry().applyTransform(rr(_.projection,n))),(!L||we(L,M.getGeometry().getExtent()))&&O.call(this,M,E)}const R=A.finish(),T=r.getRenderMode()!=="vector"&&h&&g.length===1?null:S,P=new RS(T,a,i,c.getOverlaps(),R,r.getRenderBuffer(),!0);t.executorGroups[p].push(P)}l.renderedRevision=s,l.renderedRenderOrder=o,l.renderedResolution=a}forEachFeatureAtCoordinate(t,i,n,r,s){const o=i.viewState.resolution,a=i.viewState.rotation;n=n??0;const l=this.getLayer(),h=l.getSource().getTileGridForProjection(i.viewState.projection),u=Ou([t]);Rn(u,o*n,u);const d={},f=function(C,b,v){let S=C.getId();S===void 0&&(S=Nt(C));const w=d[S];if(w){if(w!==!0&&v<w.distanceSq){if(v===0)return d[S]=!0,s.splice(s.lastIndexOf(w),1),r(C,l,b);w.geometry=b,w.distanceSq=v}}else{if(v===0)return d[S]=!0,r(C,l,b);s.push(d[S]={feature:C,layer:l,geometry:b,distanceSq:v,callback:r})}},g=this.renderedTiles,p=Nt(l),m=l.getDeclutter(),y=m?i.declutter?.[m]?.all().map(C=>C.value):null;let _;t:for(let C=0,b=g.length;C<b;++C){const v=g[C],S=h.getTileCoordExtent(v.wrappedTileCoord);if(!we(S,u))continue;const w=v.executorGroups[p];for(let L=0,A=w.length;L<A;++L)if(_=w[L].forEachFeatureAtCoordinate(t,o,a,n,f,y),_)break t}return _}getFeatures(t){return this.renderedTiles.length===0?Promise.resolve([]):new Promise((i,n)=>{const r=this.getLayer(),s=r.getSource(),o=this.renderedProjection,a=o.getExtent(),l=this.renderedResolution,c=s.getTileGridForProjection(o),h=Fe(this.renderedPixelToCoordinateTransform_,t.slice()),u=c.getTileCoordForCoordAndResolution(h,l).toString(),d=this.renderedTiles.find(C=>C.tileCoord.toString()===u&&C.getState()===ct.LOADED);if(!d||d.loadingSourceTiles>0){i([]);return}s.getWrapX()&&o.canWrapX()&&!Kn(a,c.getTileCoordExtent(d.tileCoord))&&P0(h,o);const f=Nt(r),g=c.getTileCoordExtent(d.wrappedTileCoord),p=Is(g),m=[(h[0]-p[0])/l,(p[1]-h[1])/l],y=d.getSourceTiles().reduce((C,b)=>C.concat(b.getFeatures()),[]);let _=d.hitDetectionImageData[f];if(!_){const C=ci(c.getTileSize(c.getZForResolution(l,s.zDirection))),b=this.renderedRotation_,v=[this.getRenderTransform(c.getTileCoordCenter(d.wrappedTileCoord),l,0,Ui,C[0]*Ui,C[1]*Ui,0)];_=LS(C,v,y,r.getStyleFunction(),c.getTileCoordExtent(d.wrappedTileCoord),d.getReplayState(r).renderedResolution,b),d.hitDetectionImageData[f]=_}i(MS(m,y,_))})}getFeaturesInExtent(t){const i=[],n=this.getTileCache();if(n.getCount()===0)return i;const s=this.getLayer().getSource().getTileGridForProjection(this.frameState.viewState.projection),o=s.getZForResolution(this.renderedResolution),a={};return n.forEach(l=>{if(l.tileCoord[0]!==o||l.getState()!==ct.LOADED)return;const c=l.getSourceTiles();for(let h=0,u=c.length;h<u;++h){const d=c[h],f=d.getKey();if(f in a)continue;a[f]=!0;const g=d.tileCoord;if(we(t,s.getTileCoordExtent(g))){const p=d.getFeatures();if(p)for(let m=0,y=p.length;m<y;++m){const _=p[m],C=_.getGeometry();we(t,C.getExtent())&&i.push(_)}}}}),i}handleFontsChanged(){const t=this.getLayer();t.getVisible()&&this.renderedLayerRevision_!==void 0&&t.changed()}handleStyleImageChange_(t){this.renderIfReadyAndVisible()}renderDeclutter(t,i){const n=this.context,r=n.globalAlpha;n.globalAlpha=i.opacity;const s=t.viewHints,o=!(s[xe.ANIMATING]||s[xe.INTERACTING]),a=[this.context.canvas.width,this.context.canvas.height],l=this.getLayer().getDeclutter(),c=l?t.declutter?.[l]:void 0,h=Nt(this.getLayer()),u=this.renderedTiles;for(let d=0,f=u.length;d<f;++d){const g=u[d],p=g.executorGroups[h];if(p)for(let m=p.length-1;m>=0;--m)p[m].execute(this.context,a,this.getTileRenderTransform(g,t),t.viewState.rotation,o,qu,c)}n.globalAlpha=r}renderDeferredInternal(t){const i=this.renderedTiles,n=Nt(this.getLayer()),r=i.reduce((l,c,h)=>(c.executorGroups[n].forEach(u=>l.push({executorGroup:u,index:h})),l),[]),s=r.map(({executorGroup:l})=>l.getDeferredZIndexContexts()),o={};for(let l=0,c=r.length;l<c;++l){const h=r[l].executorGroup.getDeferredZIndexContexts();for(const u in h)o[u]=!0}Object.keys(o).map(Number).sort(tr).forEach(l=>{s.forEach((c,h)=>{c[l]&&(c[l].forEach(u=>{const{executorGroup:d,index:f}=r[h],g=d.getRenderedContext(),p=g.globalAlpha;g.globalAlpha=this.renderedOpacity_;const m=this.tileClipContexts_[f];m&&m.draw(g),u.draw(g),m&&g.restore(),g.globalAlpha=p,u.clear()}),c[l].length=0)})})}getTileRenderTransform(t,i){const n=i.pixelRatio,r=i.viewState,s=r.center,o=r.resolution,a=r.rotation,l=i.size,c=Math.round(l[0]*n),h=Math.round(l[1]*n),d=this.getLayer().getSource().getTileGridForProjection(i.viewState.projection),f=t.tileCoord,g=d.getTileCoordExtent(t.wrappedTileCoord),p=d.getTileCoordExtent(f,this.tempExtent)[0]-g[0];return z0(su(this.inversePixelTransform.slice(),1/n,1/n),this.getRenderTransform(s,o,a,n,c,h,p))}postRender(t,i){const n=i.viewHints,r=!(n[xe.ANIMATING]||n[xe.INTERACTING]);this.renderedPixelToCoordinateTransform_=i.pixelToCoordinateTransform.slice(),this.renderedRotation_=i.viewState.rotation,this.renderedOpacity_=i.layerStatesArray[i.layerIndex].opacity;const s=this.getLayer(),o=s.getRenderMode(),a=t.globalAlpha;t.globalAlpha=this.renderedOpacity_;const l=s.getDeclutter(),c=l?HC[o].filter(v=>!qu.includes(v)):HC[o],h=i.viewState,u=h.rotation,d=s.getSource(),g=d.getTileGridForProjection(h.projection).getZForResolution(h.resolution,d.zDirection),p=this.renderedTiles,m=[],y=[],_=[],C=Nt(s);let b=!0;for(let v=p.length-1;v>=0;--v){const S=p[v];b=b&&!S.getReplayState(s).dirty;const w=S.executorGroups[C].filter(T=>T.hasExecutors(c));if(w.length===0)continue;const L=this.getTileRenderTransform(S,i),A=S.tileCoord[0];let B=!1;const O=w[0].getClipCoords(L);let F=t,R;if(O){R=new fy,F=R.getContext();for(let T=0,P=m.length;T<P;++T)if(g!==A&&A<y[T]){const E=m[T];we([O[0],O[3],O[4],O[7]],[E[0],E[3],E[4],E[7]])&&(B||(F.save(),B=!0),F.beginPath(),F.moveTo(O[0],O[1]),F.lineTo(O[2],O[3]),F.lineTo(O[4],O[5]),F.lineTo(O[6],O[7]),F.moveTo(E[6],E[7]),F.lineTo(E[4],E[5]),F.lineTo(E[2],E[3]),F.lineTo(E[0],E[1]),F.clip())}m.push(O),y.push(A)}for(let T=0,P=w.length;T<P;++T)w[T].execute(t,[t.canvas.width,t.canvas.height],L,u,r,c,i.declutter?.[l]);B&&(F===t?F.restore():_[v]=R)}t.globalAlpha=a,this.ready=b,this.tileClipContexts_=_,i.declutter||this.renderDeferredInternal(i),super.postRender(t,i)}renderFeature(t,i,n,r,s,o){if(!n)return!1;let a=!1;if(Array.isArray(n))for(let l=0,c=n.length;l<c;++l)a=Yu(r,t,n[l],i,this.boundHandleStyleImageChange_,void 0,s,o)||a;else a=Yu(r,t,n,i,this.boundHandleStyleImageChange_,void 0,s,o);return a}tileImageNeedsRender_(t){const i=this.getLayer();if(i.getRenderMode()==="vector")return!1;const n=t.getReplayState(i),r=i.getRevision(),s=t.wantedResolution;return n.renderedTileResolution!==s||n.renderedTileRevision!==r}renderTileImage_(t,i){const n=this.getLayer(),r=t.getReplayState(n),s=n.getRevision(),o=t.executorGroups[Nt(n)];r.renderedTileRevision=s;const a=t.wrappedTileCoord,l=a[0],c=n.getSource();let h=i.pixelRatio;const d=i.viewState.projection,f=c.getTileGridForProjection(d),g=f.getResolution(t.tileCoord[0]),p=i.pixelRatio/t.wantedResolution*g,m=f.getResolution(l),y=t.getContext();h=Math.round(Math.max(h,p/h));const _=c.getTilePixelSize(l,h,d);y.canvas.width=_[0],y.canvas.height=_[1];const C=h/p;if(C!==1){const w=Jx(this.tmpTransform_);su(w,C,C),y.setTransform.apply(y,w)}const b=f.getTileCoordExtent(a,this.tempExtent),v=p/m,S=Jx(this.tmpTransform_);su(S,v,-v),GO(S,-b[0],-b[3]);for(let w=0,L=o.length;w<L;++w)o[w].execute(y,[y.canvas.width*C,y.canvas.height*C],S,0,!0,d$[n.getRenderMode()],null);r.renderedTileResolution=t.wantedResolution}}class by extends xf{constructor(t){t=t||{};const i=Object.assign({},t);delete i.preload;const n=t.cacheSize===void 0?0:t.cacheSize;delete t.cacheSize,delete i.useInterimTilesOnError,super(i),this.on,this.once,this.un,this.cacheSize_=n;const r=t.renderMode||"hybrid";Zt(r=="hybrid"||r=="vector","`renderMode` must be `'hybrid'` or `'vector'`"),this.renderMode_=r,this.setPreload(t.preload?t.preload:0),this.setUseInterimTilesOnError(t.useInterimTilesOnError!==void 0?t.useInterimTilesOnError:!0),this.getBackground,this.setBackground}createRenderer(){return new f$(this,{cacheSize:this.cacheSize_})}getFeatures(t){return super.getFeatures(t)}getFeaturesInExtent(t){return this.getRenderer().getFeaturesInExtent(t)}getRenderMode(){return this.renderMode_}getPreload(){return this.get(ys.PRELOAD)}getUseInterimTilesOnError(){return this.get(ys.USE_INTERIM_TILES_ON_ERROR)}setPreload(t){this.set(ys.PRELOAD,t)}setUseInterimTilesOnError(t){this.set(ys.USE_INTERIM_TILES_ON_ERROR,t)}}function g$(e,t){const i=e.camera.getPickRay(t);return e.globe.pick(i,e)||e.camera.pickEllipsoid(t)}function p$(e){const t=e.canvas,i=new Cesium.Cartesian2(t.clientWidth/2,t.clientHeight/2);return g$(e,i)}function VS(e,t){if(e&&t){const i=ec(e,t,"EPSG:4326");return Cesium.Rectangle.fromDegrees(i[0],i[1],i[2],i[3])}else return null}function m$(e,t,i,n){const r=t.get("olcs_skip");if(r)return null;let s=null;if(t instanceof TN&&t.getUrl()){const o={olcs_proxy:t.get("olcs_proxy"),olcs_extent:t.get("olcs_extent"),olcs_projection:t.get("olcs_projection"),"olcs.imagesource":t},a=t.getImageLoadFunction(),l=t.get("olcs_tileLoadFunction")||function(h,u){a(h,u)};t=new PN({url:t.getUrl(),attributions:t.getAttributions(),projection:t.getProjection(),tileLoadFunction:l,params:t.getParams()}),t.setProperties(o)}if(t instanceof _y){let o=au(t);if(o||(o=i),qC(o))s=new DN(e,t,i);else return null}else if(t instanceof bN){let o=au(t);if(o||(o=i),qC(o)){const a=Cesium.Rectangle.fromDegrees(t.getImageExtent()[0],t.getImageExtent()[1],t.getImageExtent()[2],t.getImageExtent()[3],new Cesium.Rectangle);s=new Cesium.SingleTileImageryProvider({url:t.getUrl(),rectangle:a})}else return null}else if(t instanceof RN&&n instanceof by){let o=au(t);if(o||(o=i),r===!1){const a=o.getCode().split(":")[1],l=t.urls.map(p=>p.replace(a,"3857")),c=n.getExtent(),h=VS(c,o),u=t.get("olcs_minimumLevel"),d=t.getAttributions(),f=n.getStyleFunction();let g;if(c&&d){const p=hn(c);g=US(d,0,p,c)[0]}return s=new u$({credit:g,rectangle:h,minimumLevel:u,styleFunction:f,urls:l}),s}return null}else return null;return s}function y$(e,t,i){if(!(t instanceof Zp)&&!(t instanceof IN)&&!(t instanceof by))return null;const n=t.getSource();if(!n)return null;let r=n.get("olcs_provider");if(r||(r=m$(e,n,i,t)),!r)return null;const s={},a=t.get("olcs_extent")||t.getExtent();return a&&(s.rectangle=VS(a,i)),new Cesium.ImageryLayer(r,s)}function VC(e,t){let i=1,n=!0;[e.layer].concat(e.parents).forEach(r=>{const s=r.getOpacity();s!==void 0&&(i*=s);const o=r.getVisible();o!==void 0&&(n=n&&o)}),t.alpha=i,t.show=n}function la(e){const t=e;return t.length>2?Cesium.Cartesian3.fromDegrees(t[0],t[1],t[2]):Cesium.Cartesian3.fromDegrees(t[0],t[1])}function qg(e){console.assert(e!==null);const t=la,i=[];for(let n=0;n<e.length;++n)i.push(t(e[n]));return i}function $h(e,t){console.assert(t);const i=ae("EPSG:4326"),n=ae(t);if(n.getCode()!==i.getCode()){const r=e.getProperties();e=e.clone(),e.transform(n,i),e.setProperties(r)}return e}function UC(e){if(e=e||"black",Array.isArray(e))return new Cesium.Color(Cesium.Color.byteToFloat(e[0]),Cesium.Color.byteToFloat(e[1]),Cesium.Color.byteToFloat(e[2]),e[3]);if(typeof e=="string")return Cesium.Color.fromCssColorString(e);if(e instanceof CanvasPattern||e instanceof CanvasGradient){const t=document.createElement("canvas"),i=t.getContext("2d");return t.width=t.height=256,i.fillStyle=e,i.fillRect(0,0,t.width,t.height),new Cesium.ImageMaterialProperty({image:t})}console.assert(!1,"impossible")}function qC(e){const t=e.getCode()==="EPSG:3857",i=e.getCode()==="EPSG:4326";return t||i}function US(e,t,i,n){if(!e)return[];let r=e({viewState:{zoom:t,center:i,projection:void 0,resolution:void 0,rotation:void 0},extent:n});return Array.isArray(r)||(r=[r]),r.map(s=>new Cesium.Credit(s,!0))}function _$(e,t,i,n){const r=i.canvas,o=i.camera.frustum.fovy;console.assert(!isNaN(o));const a=n.getMetersPerUnit(),l=e*r.clientHeight,c=Math.cos(Math.abs(t));return l*a*c/2/Math.tan(o/2)}function x$(e,t,i,n){const r=i.canvas,o=i.camera.frustum.fovy;console.assert(!isNaN(o));const a=n.getMetersPerUnit(),l=2*e*Math.tan(o/2),c=Math.cos(Math.abs(t));return l/a/c/r.clientHeight}class C${ol3d;scene_;canvas_;_boundNotifyRepaintRequired;repaintEventNames_=["mousemove","mousedown","mouseup","touchstart","touchend","touchmove","pointerdown","pointerup","pointermove","wheel"];constructor(t){this.ol3d=t,this.scene_=t.getCesiumScene(),this.canvas_=this.scene_.canvas,this._boundNotifyRepaintRequired=this.notifyRepaintRequired.bind(this),this.enable()}enable(){this.scene_.requestRenderMode=!0,this.scene_.maximumRenderTimeChange=1e3;for(const t of this.repaintEventNames_)this.canvas_.addEventListener(t,this._boundNotifyRepaintRequired,!1);window.addEventListener("resize",this._boundNotifyRepaintRequired,!1),this.ol3d.getOlMap().getLayerGroup().on("change",this._boundNotifyRepaintRequired)}disable(){for(const t of this.repaintEventNames_)this.canvas_.removeEventListener(t,this._boundNotifyRepaintRequired,!1);window.removeEventListener("resize",this._boundNotifyRepaintRequired,!1),this.ol3d.getOlMap().getLayerGroup().un("change",this._boundNotifyRepaintRequired),this.scene_.requestRenderMode=!1}restartRenderLoop(){this.notifyRepaintRequired()}notifyRepaintRequired(){this.scene_.isDestroyed()||this.scene_.requestRender()}}function zh(e){return e*180/Math.PI}function _l(e){return e*Math.PI/180}function Gh(e,t,i){const n=i||e.length;if(t)for(let r=0;r<n;++r)t[r]=e[r];return e}class b${scene_;cam_;map_;view_;viewListenKey_=null;toLonLat_=Gh;fromLonLat_=Gh;tilt_=0;distance_=0;lastCameraViewMatrix_=null;viewUpdateInProgress_=!1;constructor(t,i){this.scene_=t,this.cam_=t.camera,this.map_=i,this.map_.on("change:view",n=>{this.setView_(this.map_.getView())}),this.setView_(this.map_.getView())}destroy(){xn(this.viewListenKey_),this.viewListenKey_=null}setView_(t){if(xn(this.viewListenKey_),this.viewListenKey_=null,this.view_=t,t){const i=rr(t.getProjection(),"EPSG:4326"),n=rr("EPSG:4326",t.getProjection());console.assert(i&&n),this.toLonLat_=i,this.fromLonLat_=n,this.viewListenKey_=t.on("propertychange",r=>this.handleViewChangedEvent_()),this.readFromView()}else this.toLonLat_=Gh,this.fromLonLat_=Gh}handleViewChangedEvent_(){this.viewUpdateInProgress_||this.readFromView()}setHeading(t){this.view_&&this.view_.setRotation(t)}getHeading(){return this.view_?this.view_.getRotation()||0:void 0}setTilt(t){this.tilt_=t,this.updateCamera_()}getTilt(){return this.tilt_}setDistance(t){this.distance_=t,this.updateCamera_(),this.updateView()}getDistance(){return this.distance_}setCenter(t){this.view_&&this.view_.setCenter(t)}getCenter(){if(this.view_)return this.view_.getCenter()}setPosition(t){if(!this.toLonLat_)return;const i=this.toLonLat_(t);console.assert(i);const n=new Cesium.Cartographic(_l(i[0]),_l(i[1]),this.getAltitude());this.cam_.setView({destination:Cesium.Ellipsoid.WGS84.cartographicToCartesian(n)}),this.updateView()}getPosition(){if(!this.fromLonLat_)return;const t=Cesium.Ellipsoid.WGS84.cartesianToCartographic(this.cam_.position),i=this.fromLonLat_([zh(t.longitude),zh(t.latitude)]);return console.assert(i),i}setAltitude(t){const i=Cesium.Ellipsoid.WGS84.cartesianToCartographic(this.cam_.position);i.height=t,this.cam_.position=Cesium.Ellipsoid.WGS84.cartographicToCartesian(i),this.updateView()}getAltitude(){return Cesium.Ellipsoid.WGS84.cartesianToCartographic(this.cam_.position).height}updateCamera_(){if(!this.view_||!this.toLonLat_)return;const t=this.view_.getCenter();if(!t)return;const i=this.toLonLat_(t);console.assert(i);const n=new Cesium.Cartographic(_l(i[0]),_l(i[1]));if(this.scene_.globe){const o=this.scene_.globe.getHeight(n);n.height=o||0}const r=Cesium.Ellipsoid.WGS84.cartographicToCartesian(n),s={pitch:this.tilt_-Cesium.Math.PI_OVER_TWO,heading:-this.view_.getRotation(),roll:void 0};this.cam_.setView({destination:r,orientation:s}),this.cam_.moveBackward(this.distance_),this.checkCameraChange(!0)}readFromView(){if(!this.view_||!this.toLonLat_)return;const t=this.view_.getCenter();if(t==null)return;const i=this.toLonLat_(t);console.assert(i);const n=this.view_.getResolution();this.distance_=this.calcDistanceForResolution(n||0,_l(i[1])),this.updateCamera_()}updateView(){if(!this.view_||!this.fromLonLat_)return;this.viewUpdateInProgress_=!0;const t=Cesium.Ellipsoid.WGS84,i=this.scene_,n=p$(i);let r=n;if(!r){const o=i.globe,a=this.cam_.positionCartographic.clone(),l=o.getHeight(a);a.height=l||0,r=Cesium.Ellipsoid.WGS84.cartographicToCartesian(a)}this.distance_=Cesium.Cartesian3.distance(r,this.cam_.position);const s=t.cartesianToCartographic(r);if(this.view_.setCenter(this.fromLonLat_([zh(s.longitude),zh(s.latitude)])),this.view_.setResolution(this.calcResolutionForDistance(this.distance_,s?s.latitude:0)),n){const o=this.cam_.position,a=new Cesium.Cartesian3;t.geocentricSurfaceNormal(n,a);const l=new Cesium.Cartesian3;Cesium.Cartesian3.subtract(o,n,l),Cesium.Cartesian3.normalize(l,l);const c=this.cam_.up,h=this.cam_.right,u=new Cesium.Cartesian3(-n.y,n.x,0),d=Cesium.Cartesian3.angleBetween(h,u),g=Cesium.Cartesian3.cross(n,c,new Cesium.Cartesian3).z;this.view_.setRotation(g<0?d:-d);const p=Math.acos(Cesium.Cartesian3.dot(a,l));this.tilt_=isNaN(p)?0:p}else this.view_.setRotation(this.cam_.heading),this.tilt_=-this.cam_.pitch+Math.PI/2;setTimeout(()=>this.viewUpdateInProgress_=!1,1e3)}checkCameraChange(t){const i=this.lastCameraViewMatrix_,n=this.cam_.viewMatrix;(!i||!Cesium.Matrix4.equalsEpsilon(i,n,1e-7))&&(this.lastCameraViewMatrix_=n.clone(),t!==!0&&this.updateView())}calcDistanceForResolution(t,i){return _$(t,i,this.scene_,this.view_.getProjection())}calcResolutionForDistance(t,i){return x$(t,i,this.scene_,this.view_.getProjection())}}class qS{map;view;scene;olLayers;mapLayerGroup;layerMap={};olLayerListenKeys={};olGroupListenKeys_={};constructor(t,i){this.map=t,this.view=t.getView(),this.scene=i,this.olLayers=t.getLayerGroup().getLayers(),this.mapLayerGroup=t.getLayerGroup()}synchronize(){this.destroyAll(),this.addLayers_(this.mapLayerGroup)}orderLayers(){}addLayers_(t){const i=[{layer:t,parents:[]}];for(;i.length>0;){const n=i.splice(0,1)[0],r=n.layer,s=Ge(r).toString();this.olLayerListenKeys[s]=[],console.assert(!this.layerMap[s]);let o=null;if(r instanceof Wr)this.listenForGroupChanges_(r),r!==this.mapLayerGroup&&(o=this.createSingleLayerCounterparts(n)),o||r.getLayers().forEach(a=>{if(a){const l={layer:a,parents:r===this.mapLayerGroup?[]:[n.layer].concat(n.parents)};i.push(l)}});else if(o=this.createSingleLayerCounterparts(n),!o){const a=s,l=n,c=()=>{const h=this.createSingleLayerCounterparts(l);h&&(l.layer.un("change",c),this.addCesiumObjects_(h,a,l.layer),this.orderLayers())};this.olLayerListenKeys[s].push(l.layer.on("change",c))}o&&this.addCesiumObjects_(o,s,r)}this.orderLayers()}addCesiumObjects_(t,i,n){this.layerMap[i]=t,this.olLayerListenKeys[i].push(n.on("change:zIndex",()=>this.orderLayers())),t.forEach(r=>{this.addCesiumObject(r)})}removeAndDestroySingleLayer_(t){const i=Ge(t).toString(),n=this.layerMap[i];return n&&(n.forEach(r=>{this.removeSingleCesiumObject(r,!1),this.destroyCesiumObject(r)}),this.olLayerListenKeys[i].forEach(xn),delete this.olLayerListenKeys[i]),delete this.layerMap[i],!!n}unlistenSingleGroup_(t){if(t===this.mapLayerGroup)return;const i=Ge(t).toString();this.olGroupListenKeys_[i].forEach(r=>{xn(r)}),delete this.olGroupListenKeys_[i],delete this.layerMap[i]}removeLayer_(t){if(t){const i=[t];for(;i.length>0;){const n=i.splice(0,1)[0],r=this.removeAndDestroySingleLayer_(n);n instanceof Wr&&(this.unlistenSingleGroup_(n),r||n.getLayers().forEach(s=>{i.push(s)}))}}}listenForGroupChanges_(t){const i=Ge(t).toString();console.assert(this.olGroupListenKeys_[i]===void 0);const n=[];this.olGroupListenKeys_[i]=n;let r=[];const s=(function(){const o=t.getLayers();o&&(r=[o.on("add",a=>{this.addLayers_(a.element)}),o.on("remove",a=>{this.removeLayer_(a.element)})],n.push(...r))}).bind(this);s(),n.push(t.on("change:layers",o=>{r.forEach(a=>{const l=n.indexOf(a);l>=0&&n.splice(l,1),xn(a)}),s()}))}destroyAll(){this.removeAllCesiumObjects(!0);let t;for(t in this.olGroupListenKeys_)this.olGroupListenKeys_[t].forEach(xn);for(t in this.olLayerListenKeys)this.olLayerListenKeys[t].forEach(xn);this.olGroupListenKeys_={},this.olLayerListenKeys={},this.layerMap={}}}class YS extends qS{cesiumLayers_;ourLayers_;constructor(t,i){super(t,i),this.cesiumLayers_=i.imageryLayers,this.ourLayers_=new Cesium.ImageryLayerCollection}addCesiumObject(t){this.cesiumLayers_.add(t),this.ourLayers_.add(t)}destroyCesiumObject(t){t.destroy()}removeSingleCesiumObject(t,i){this.cesiumLayers_.remove(t,i),this.ourLayers_.remove(t,!1)}removeAllCesiumObjects(t){for(let i=0;i<this.ourLayers_.length;++i)this.cesiumLayers_.remove(this.ourLayers_.get(i),t);this.ourLayers_.removeAll(!1)}convertLayerToCesiumImageries(t,i){const n=y$(this.map,t,i);return n?[n]:null}createSingleLayerCounterparts(t){const i=t.layer,n=Ge(i).toString(),r=this.view.getProjection();console.assert(r);const s=this.convertLayerToCesiumImageries(i,r);if(s){const o=[];if([t.layer].concat(t.parents).forEach(a=>{o.push(a.on(["change:opacity","change:visible"],()=>{console.assert(s);for(let l=0;l<s.length;++l)VC(t,s[l])}))}),i instanceof xf){let a=i.getStyleFunction();o.push(i.on("change",()=>{const l=i.getStyleFunction();if(a!==l){a=l;for(let c=0;c<s.length;++c){const h=s[c];h._imageryCache&&(h._imageryCache={});const u=h.imageryProvider;u&&(u.tileCache?.clear(),u.styleFunction_=l)}this.scene.requestRender()}}))}for(let a=0;a<s.length;++a)VC(t,s[a]);o.push(i.on("change:extent",a=>{for(let l=0;l<s.length;++l)this.cesiumLayers_.remove(s[l],!0),this.ourLayers_.remove(s[l],!1);delete this.layerMap[Ge(i)],this.synchronize()})),o.push(i.on("change",a=>{for(let l=0;l<s.length;++l){const c=this.cesiumLayers_.indexOf(s[l]);c>=0&&(this.cesiumLayers_.remove(s[l],!1),this.cesiumLayers_.add(s[l],c))}})),this.olLayerListenKeys[n].push(...o)}return Array.isArray(s)?s:null}orderLayers(){const t=[],i={},n=[this.mapLayerGroup];for(;n.length>0;){const r=n.splice(0,1)[0];if(t.push(r),i[Ge(r)]=r.getZIndex()||0,r instanceof Wr){const s=r.getLayers();s&&n.unshift(...s.getArray())}}t.sort((r,s)=>i[Ge(r)]-i[Ge(s)]),t.forEach(r=>{const s=Ge(r).toString(),o=this.layerMap[s];o&&o.forEach(a=>{this.raiseToTop(a)})})}raiseToTop(t){this.cesiumLayers_.raiseToTop(t)}}class v${olListenKeys=[];context;rootCollection_;constructor(t,i){const n=new Cesium.BillboardCollection({scene:i}),r=new Cesium.PrimitiveCollection;this.rootCollection_=new Cesium.PrimitiveCollection,this.context={projection:t,billboards:n,featureToCesiumMap:{},primitives:r},this.rootCollection_.add(n),this.rootCollection_.add(r)}destroy(){this.olListenKeys.forEach(xn),this.olListenKeys.length=0}getRootPrimitive(){return this.rootCollection_}}class w${scene;boundOnRemoveOrClearFeatureListener_=this.onRemoveOrClearFeature_.bind(this);defaultBillboardEyeOffset_=new Cesium.Cartesian3(0,0,10);constructor(t){this.scene=t,this.scene=t}onRemoveOrClearFeature_(t){const i=t.target;console.assert(i instanceof Mc);const n=i.olcs_cancellers;if(n){const r=t.feature;if(r){const s=Ge(r),o=n[s];o&&(o(),delete n[s])}else{for(const s in n)n.hasOwnProperty(s)&&n[s]();i.olcs_cancellers={}}}}setReferenceForPicking(t,i,n){n.olLayer=t,n.olFeature=i}createColoredPrimitive(t,i,n,r,s,o){const a=function(d,f){const g=new Cesium.GeometryInstance({geometry:d});return f&&!(f instanceof Cesium.ImageMaterialProperty)&&(g.attributes={color:Cesium.ColorGeometryInstanceAttribute.fromColor(f)}),g},l={flat:!0,renderState:{depthTest:{enabled:!0}}};o!==void 0&&(l.renderState.lineWidth=o);const c=a(r,s),h=this.getHeightReference(t,i,n);let u;if(h===Cesium.HeightReference.CLAMP_TO_GROUND){if(!("createShadowVolume"in c.geometry.constructor))return null;u=new Cesium.GroundPrimitive({geometryInstances:c})}else u=new Cesium.Primitive({geometryInstances:c});if(s instanceof Cesium.ImageMaterialProperty){const d=s.image.getValue().toDataURL();u.appearance=new Cesium.MaterialAppearance({flat:!0,renderState:{depthTest:{enabled:!0}},material:new Cesium.Material({fabric:{type:"Image",uniforms:{image:d}}})})}else u.appearance=new Cesium.MaterialAppearance({...l,material:new Cesium.Material({translucent:s.alpha!==1,fabric:{type:"Color",uniforms:{color:s}}})}),u instanceof Cesium.Primitive&&(i.get("olcs_shadows")||t.get("olcs_shadows"))&&(u.shadows=1);return this.setReferenceForPicking(t,i,u),u}extractColorFromOlStyle(t,i){const n=t.getFill()?.getColor(),r=t.getStroke()?t.getStroke().getColor():null;let s="black";r&&i?s=r:n&&(s=n);const o=UC(s);return"red"in o?o:Cesium.Color.BLACK}extractLineWidthFromOlStyle(t){const i=t.getStroke()?t.getStroke().getWidth():void 0;return i!==void 0?i:1}wrapFillAndOutlineGeometries(t,i,n,r,s,o){const a=this.extractColorFromOlStyle(o,!1),l=this.extractColorFromOlStyle(o,!0),c=new Cesium.PrimitiveCollection;if(o.getFill()){const h=this.createColoredPrimitive(t,i,n,r,a);console.assert(!!h),c.add(h)}if(o.getStroke()&&s){const h=this.extractLineWidthFromOlStyle(o),u=this.createColoredPrimitive(t,i,n,s,l,h);u&&c.add(u)}return c}addTextStyle(t,i,n,r,s){let o;if(s instanceof Cesium.PrimitiveCollection?o=s:(o=new Cesium.PrimitiveCollection,o.add(s)),!r.getText())return o;const a=r.getText(),l=this.olGeometry4326TextPartToCesium(t,i,n,a);return l&&o.add(l),o}csAddBillboard(t,i,n,r,s,o){i.eyeOffset||(i.eyeOffset=this.defaultBillboardEyeOffset_);const a=t.add(i);return this.setReferenceForPicking(n,r,a),a}olCircleGeometryToCesium(t,i,n,r,s){n=$h(n,r),console.assert(n.getType()=="Circle");const o=n.getCenter(),a=o.length==3?o[2]:0,l=o.slice();l[0]+=n.getRadius();const c=la(o),h=la(l),u=Cesium.Cartesian3.distance(c,h),d=new Cesium.CircleGeometry({center:c,radius:u,height:a});let f,g;if(this.getHeightReference(t,i,n)===Cesium.HeightReference.CLAMP_TO_GROUND){const m=this.extractLineWidthFromOlStyle(s);if(m){const y=hD(n.getCenter(),u),_=qg(y.getLinearRing(0).getCoordinates()),C=f=new Cesium.GroundPolylinePrimitive({geometryInstances:new Cesium.GeometryInstance({geometry:new Cesium.GroundPolylineGeometry({positions:_,width:m})}),appearance:new Cesium.PolylineMaterialAppearance({material:this.olStyleToCesium(i,s,!0)}),classificationType:Cesium.ClassificationType.TERRAIN});Vg(f).then(()=>{this.setReferenceForPicking(t,i,C._primitive)})}}else g=new Cesium.CircleOutlineGeometry({center:c,radius:u,extrudedHeight:a,height:a});const p=this.wrapFillAndOutlineGeometries(t,i,n,d,g,s);return f&&p.add(f),this.addTextStyle(t,i,n,s,p)}olLineStringGeometryToCesium(t,i,n,r,s){n=$h(n,r),console.assert(n.getType()=="LineString");const o=qg(n.getCoordinates()),a=this.extractLineWidthFromOlStyle(s);let l;const c=this.getHeightReference(t,i,n),h=new Cesium.PolylineMaterialAppearance({material:this.olStyleToCesium(i,s,!0)});if(c===Cesium.HeightReference.CLAMP_TO_GROUND){const u=new Cesium.GroundPolylineGeometry({positions:o,width:a}),d=l=new Cesium.GroundPolylinePrimitive({appearance:h,geometryInstances:new Cesium.GeometryInstance({geometry:u})});Vg(l).then(()=>{this.setReferenceForPicking(t,i,d._primitive)})}else{const u=new Cesium.PolylineGeometry({positions:o,width:a,vertexFormat:h.vertexFormat});l=new Cesium.Primitive({appearance:h,geometryInstances:new Cesium.GeometryInstance({geometry:u})})}return this.setReferenceForPicking(t,i,l),this.addTextStyle(t,i,n,s,l)}olPolygonGeometryToCesium(t,i,n,r,s){n=$h(n,r),console.assert(n.getType()=="Polygon");const o=this.getHeightReference(t,i,n);let a,l,c;if(n.getCoordinates()[0].length==5&&i.get("olcs_polygon_kind")==="rectangle"){const u=n.getCoordinates()[0],d=Ou(u),f=Cesium.Rectangle.fromDegrees(d[0],d[1],d[2],d[3]);let g=0;if(u[0].length==3)for(let m=0;m<u.length;m++)g=Math.max(g,u[m][2]);const p=i.get("olcs_extruded_height");a=new Cesium.RectangleGeometry({ellipsoid:Cesium.Ellipsoid.WGS84,rectangle:f,height:g,extrudedHeight:p}),l=new Cesium.RectangleOutlineGeometry({ellipsoid:Cesium.Ellipsoid.WGS84,rectangle:f,height:g,extrudedHeight:p})}else{const u=n.getLinearRings(),d={positions:[],holes:[]},f=d;console.assert(u.length>0);for(let p=0;p<u.length;++p){const m=u[p].getCoordinates(),y=qg(m);console.assert(y&&y.length>0),p===0?d.positions=y:d.holes.push({positions:y,holes:[]})}const g=i.get("olcs_extruded_height");if(a=new Cesium.PolygonGeometry({polygonHierarchy:f,perPositionHeight:!0,extrudedHeight:g}),o===Cesium.HeightReference.CLAMP_TO_GROUND){const p=this.extractLineWidthFromOlStyle(s);if(p>0){const m=[d.positions];if(d.holes)for(let C=0;C<d.holes.length;++C)m.push(d.holes[C].positions);const y=new Cesium.PolylineMaterialAppearance({material:this.olStyleToCesium(i,s,!0)}),_=[];for(const C of m){const b=new Cesium.GroundPolylineGeometry({positions:C,width:p});_.push(new Cesium.GeometryInstance({geometry:b}))}c=new Cesium.GroundPolylinePrimitive({appearance:y,geometryInstances:_}),Vg(c).then(()=>{this.setReferenceForPicking(t,i,c._primitive)})}}else l=new Cesium.PolygonOutlineGeometry({polygonHierarchy:d,perPositionHeight:!0,extrudedHeight:g})}const h=this.wrapFillAndOutlineGeometries(t,i,n,a,l,s);return c&&h.add(c),this.addTextStyle(t,i,n,s,h)}getHeightReference(t,i,n){let r=n.get("altitudeMode");r===void 0&&(r=i.get("altitudeMode")),r===void 0&&(r=t.get("altitudeMode"));let s=Cesium.HeightReference.NONE;return r==="clampToGround"?s=Cesium.HeightReference.CLAMP_TO_GROUND:r==="relativeToGround"&&(s=Cesium.HeightReference.RELATIVE_TO_GROUND),s}createBillboardFromImage(t,i,n,r,s,o,a,l){o instanceof Es&&o.load();const c=o.getImage(1),h=function(d){return d.src!=""&&d.naturalHeight!=0&&d.naturalWidth!=0&&d.complete},u=(function(){if(!c||!(c instanceof HTMLCanvasElement||c instanceof Image||c instanceof HTMLImageElement))return;const d=n.getCoordinates(),f=la(d);let g;const p=o.getOpacity();p!==void 0&&(g=new Cesium.Color(1,1,1,p));const m=o.getScale(),y=this.getHeightReference(t,i,n),_={image:c,color:g,scale:Array.isArray(m)?(m[0]+m[1])/2:m,heightReference:y,position:f};if(Object.assign(_,i.get("cesiumOptions")),o instanceof Es){const b=o.getAnchor();if(b){const v=Array.isArray(m)?m[0]:m,S=Array.isArray(m)?m[1]:m;_.pixelOffset=new Cesium.Cartesian2((c.width/2-b[0])*v,(c.height/2-b[1])*S)}}const C=this.csAddBillboard(a,_,t,i,n,s);l&&l(C)}).bind(this);if(c instanceof Image&&!h(c)){let d=!1;const f=t.getSource(),g=function(){d=!0};f.on(["removefeature","clear"],this.boundOnRemoveOrClearFeatureListener_);let p=f.olcs_cancellers;p||(p=f.olcs_cancellers={});const m=Ge(i);p[m]&&p[m](),p[m]=g;const y=function(){c.removeEventListener("load",y),!a.isDestroyed()&&!d&&u()};c.addEventListener("load",y)}else u()}olPointGeometryToCesium(t,i,n,r,s,o,a){console.assert(n.getType()=="Point"),n=$h(n,r);let l=null;const c=s.getImage();if(c){const h=n.get("olcs_model")||i.get("olcs_model");if(h){l=new Cesium.PrimitiveCollection;const u=h(),d=Object.assign({},{scene:this.scene},u.cesiumOptions);if("fromGltf"in Cesium.Model){const f=Cesium.Model.fromGltf(d);l.add(f)}else Cesium.Model.fromGltfAsync(d).then(f=>{l.add(f)});u.debugModelMatrix&&l.add(new Cesium.DebugModelMatrixPrimitive({modelMatrix:u.debugModelMatrix}))}else this.createBillboardFromImage(t,i,n,r,s,c,o,a)}return s.getText()?this.addTextStyle(t,i,n,s,l||new Cesium.Primitive):l}olMultiGeometryToCesium(t,i,n,r,s,o,a){switch(n.getType()){case"MultiPoint":{const l=n.getPoints();if(s.getText()){const c=new Cesium.PrimitiveCollection;return l.forEach(h=>{console.assert(h);const u=this.olPointGeometryToCesium(t,i,h,r,s,o,a);u&&c.add(u)}),c}else return l.forEach(c=>{console.assert(c),this.olPointGeometryToCesium(t,i,c,r,s,o,a)}),null}case"MultiLineString":{const l=n.getLineStrings(),c=new Cesium.PrimitiveCollection;return l.forEach(h=>{const u=this.olLineStringGeometryToCesium(t,i,h,r,s);c.add(u)}),c}case"MultiPolygon":{const l=n.getPolygons(),c=new Cesium.PrimitiveCollection;return l.forEach(h=>{const u=this.olPolygonGeometryToCesium(t,i,h,r,s);c.add(u)}),c}default:console.assert(!1,`Unhandled multi geometry type${n.getType()}`)}}olGeometry4326TextPartToCesium(t,i,n,r){const s=r.getText();if(!s)return null;const o=new Cesium.LabelCollection({scene:this.scene}),a=hn(n.getExtent());if(n instanceof Ps){const g=n.getFirstCoordinate();a[2]=g.length==3?g[2]:0}const l={position:la(a)};l.text=Array.isArray(s)?s.join(" "):s,l.heightReference=this.getHeightReference(t,i,n);const c=r.getOffsetX(),h=r.getOffsetY();if(c!=0||h!=0){const g=new Cesium.Cartesian2(c,h);l.pixelOffset=g}l.font=r.getFont()||"10px sans-serif";let u;r.getFill()&&(l.fillColor=this.extractColorFromOlStyle(r,!1),u=Cesium.LabelStyle.FILL),r.getStroke()&&(l.outlineWidth=this.extractLineWidthFromOlStyle(r),l.outlineColor=this.extractColorFromOlStyle(r,!0),u=Cesium.LabelStyle.OUTLINE),r.getFill()&&r.getStroke()&&(u=Cesium.LabelStyle.FILL_AND_OUTLINE),l.style=u;let d;switch(r.getTextAlign()){case"left":d=Cesium.HorizontalOrigin.LEFT;break;case"right":d=Cesium.HorizontalOrigin.RIGHT;break;default:d=Cesium.HorizontalOrigin.CENTER}if(l.horizontalOrigin=d,r.getTextBaseline()){let g;switch(r.getTextBaseline()){case"top":g=Cesium.VerticalOrigin.TOP;break;case"middle":g=Cesium.VerticalOrigin.CENTER;break;case"bottom":g=Cesium.VerticalOrigin.BOTTOM;break;case"alphabetic":g=Cesium.VerticalOrigin.TOP;break;case"hanging":g=Cesium.VerticalOrigin.BOTTOM;break;default:console.assert(!1,`unhandled baseline ${r.getTextBaseline()}`)}l.verticalOrigin=g}const f=o.add(l);return this.setReferenceForPicking(t,i,f),o}olStyleToCesium(t,i,n){const r=i.getFill(),s=i.getStroke();if(n&&!s||!n&&!r)return null;const o=n?s.getColor():r.getColor(),a=UC(o),l=s.getLineDash();return n&&l?Cesium.Material.fromType("PolylineDash",{dashPattern:S$(l),color:a}):Cesium.Material.fromType("Color",{color:a})}computePlainStyle(t,i,n,r){const s=i.getStyleFunction();let o=null;return s&&(o=s(i,r)),!o&&n&&(o=n(i,r)),o?Array.isArray(o)?o:[o]:null}getGeometryFromFeature(t,i,n){if(n)return n;const r=t.get("olcs_3d_geometry");if(r&&r instanceof Gp)return r;if(i){const s=i.getGeometryFunction()(t);if(s instanceof Gp)return s}return t.getGeometry()}olFeatureToCesium(t,i,n,r,s){const o=this.getGeometryFromFeature(i,n,s);if(!o)return null;const a=r.projection,l=function(c){const h=r.featureToCesiumMap[Ge(i)];h instanceof Array?h.push(c):r.featureToCesiumMap[Ge(i)]=[c]};switch(o.getType()){case"GeometryCollection":const c=new Cesium.PrimitiveCollection;return o.getGeometriesArray().forEach(d=>{if(d){const f=this.olFeatureToCesium(t,i,n,r,d);f&&c.add(f)}}),c;case"Point":const h=r.billboards,u=this.olPointGeometryToCesium(t,i,o,a,n,h,l);return u||null;case"Circle":return this.olCircleGeometryToCesium(t,i,o,a,n);case"LineString":return this.olLineStringGeometryToCesium(t,i,o,a,n);case"Polygon":return this.olPolygonGeometryToCesium(t,i,o,a,n);case"MultiPoint":return this.olMultiGeometryToCesium(t,i,o,a,n,r.billboards,l)||null;case"MultiLineString":return this.olMultiGeometryToCesium(t,i,o,a,n,r.billboards,l)||null;case"MultiPolygon":return this.olMultiGeometryToCesium(t,i,o,a,n,r.billboards,l)||null;case"LinearRing":throw new Error("LinearRing should only be part of polygon.");default:throw new Error(`Ol geom type not handled : ${o.getType()}`)}}olVectorLayerToCesium(t,i,n){const r=i.getProjection(),s=i.getResolution();if(s===void 0||!r)throw console.assert(!1,"View not ready"),new Error("View not ready");let o=t.getSource();o instanceof Cy&&(o=o.getSource()),console.assert(o instanceof Mc);const a=o.getFeatures(),l=new v$(r,this.scene),c=l.context;for(let h=0;h<a.length;++h){const u=a[h];if(!u)continue;const d=t.getStyleFunction(),f=this.computePlainStyle(t,u,d,s);if(!f||!f.length)continue;let g=null;for(let p=0;p<f.length;p++){const m=this.olFeatureToCesium(t,u,f[p],c);if(m){if(!g)g=m;else if(m){let y=0,_;for(;_=m.get(y);)g.add(_),y++}}}g&&(n[Ge(u)]=g,l.getRootPrimitive().add(g))}return l}convert(t,i,n,r){const s=i.getProjection(),o=i.getResolution();if(o==null||!s)return null;const a=t.getStyleFunction(),l=this.computePlainStyle(t,n,a,o);if(!l||!l.length)return null;r.projection=s;let c=null;for(let h=0;h<l.length;h++){const u=this.olFeatureToCesium(t,n,l[h],r);if(!c)c=u;else if(u){let d=0,f;for(;f=u.get(d);)c.add(f),d++}}return c}}function S$(e){e.length<2&&(e=[1,1]);const t=e.length%2===0?e:[...e,...e],n=t.reduce((s,o)=>s+o,0)/16;let r=t.map((s,o)=>{const a=o%2===0?"1":"0";let l=Math.round(s/n);return o===0&&l===0&&(l=1),a.repeat(l)}).join("");return r.length<16?r=r.padEnd(16,"0"):r.length>16&&(r=r.substring(0,16)),r[15]==="1"&&(r=r.substring(0,15)+"0"),console.assert(r.length===16),parseInt(r,2)}class T$ extends qS{converter;csAllPrimitives_;constructor(t,i,n){super(t,i),this.converter=n||new w$(i),this.csAllPrimitives_=new Cesium.PrimitiveCollection,i.primitives.add(this.csAllPrimitives_),this.csAllPrimitives_.destroyPrimitives=!1}addCesiumObject(t){console.assert(t);const i=t.getRootPrimitive();i.counterpart=t,this.csAllPrimitives_.add(t.getRootPrimitive())}destroyCesiumObject(t){t.getRootPrimitive().destroy()}removeSingleCesiumObject(t,i){t.destroy(),this.csAllPrimitives_.destroyPrimitives=i,this.csAllPrimitives_.remove(t.getRootPrimitive()),this.csAllPrimitives_.destroyPrimitives=!1}removeAllCesiumObjects(t){if(this.csAllPrimitives_.destroyPrimitives=t,t)for(let i=0;i<this.csAllPrimitives_.length;++i)this.csAllPrimitives_.get(i).counterpart.destroy();this.csAllPrimitives_.removeAll(),this.csAllPrimitives_.destroyPrimitives=!1}updateLayerVisibility(t,i){let n=!0;[t.layer].concat(t.parents).forEach(r=>{const s=r.getVisible();s!==void 0?n=n&&s:n=!1}),i.show=n}createSingleLayerCounterparts(t){const i=t.layer;if(!(i instanceof OS)||i instanceof by)return null;console.assert(i instanceof tl);let n=i.getSource();if(n instanceof Cy&&(n=n.getSource()),!n)return null;console.assert(n instanceof Mc),console.assert(this.view);const r=this.view,s={},o=this.converter.olVectorLayerToCesium(i,r,s),a=o.getRootPrimitive(),l=o.olListenKeys;[t.layer].concat(t.parents).forEach(u=>{l.push(u.on("change:visible",()=>{this.updateLayerVisibility(t,a)}))}),this.updateLayerVisibility(t,a);const c=u=>{const d=o.context,f=this.converter.convert(i,r,u,d);f&&(s[Ge(u)]=f,a.add(f))},h=u=>{const d=Ge(u),f=o.context,g=f.featureToCesiumMap[d];g&&(delete f.featureToCesiumMap[d],g.forEach(m=>{m instanceof Cesium.Billboard&&f.billboards.remove(m)}));const p=s[d];delete s[d],p&&a.remove(p)};return l.push(n.on("addfeature",u=>{console.assert(u.feature),c(u.feature)})),l.push(n.on("removefeature",u=>{console.assert(u.feature),h(u.feature)})),l.push(n.on("changefeature",u=>{const d=u.feature;console.assert(d),h(d),c(d)})),o?[o]:null}}const ni={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"};class E$ extends Dn{constructor(t){super(),this.on,this.once,this.un,this.options=t,this.id=t.id,this.insertFirst=t.insertFirst!==void 0?t.insertFirst:!0,this.stopEvent=t.stopEvent!==void 0?t.stopEvent:!0,this.element=document.createElement("div"),this.element.className=t.className!==void 0?t.className:"ol-overlay-container "+xD,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=t.autoPan===!0?{}:t.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener(ni.ELEMENT,this.handleElementChanged),this.addChangeListener(ni.MAP,this.handleMapChanged),this.addChangeListener(ni.OFFSET,this.handleOffsetChanged),this.addChangeListener(ni.POSITION,this.handlePositionChanged),this.addChangeListener(ni.POSITIONING,this.handlePositioningChanged),t.element!==void 0&&this.setElement(t.element),this.setOffset(t.offset!==void 0?t.offset:[0,0]),this.setPositioning(t.positioning||"top-left"),t.position!==void 0&&this.setPosition(t.position)}getElement(){return this.get(ni.ELEMENT)}getId(){return this.id}getMap(){return this.get(ni.MAP)||null}getOffset(){return this.get(ni.OFFSET)}getPosition(){return this.get(ni.POSITION)}getPositioning(){return this.get(ni.POSITIONING)}handleElementChanged(){Hw(this.element);const t=this.getElement();t&&this.element.appendChild(t)}handleMapChanged(){this.mapPostrenderListenerKey&&(this.element?.remove(),de(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const t=this.getMap();if(t){this.mapPostrenderListenerKey=Yt(t,kr.POSTRENDER,this.render,this),this.updatePixelPosition();const i=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?i.insertBefore(this.element,i.childNodes[0]||null):i.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(t){this.set(ni.ELEMENT,t)}setMap(t){this.set(ni.MAP,t)}setOffset(t){this.set(ni.OFFSET,t)}setPosition(t){this.set(ni.POSITION,t)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(t){const i=this.getMap();if(!i||!i.getTargetElement()||!this.get(ni.POSITION))return;const n=this.getRect(i.getTargetElement(),i.getSize()),r=this.getElement(),s=this.getRect(r,[bD(r),vD(r)]);t=t||{};const o=t.margin===void 0?20:t.margin;if(!Kn(n,s)){const a=s[0]-n[0],l=n[2]-s[2],c=s[1]-n[1],h=n[3]-s[3],u=[0,0];if(a<0?u[0]=a-o:l<0&&(u[0]=Math.abs(l)+o),c<0?u[1]=c-o:h<0&&(u[1]=Math.abs(h)+o),u[0]!==0||u[1]!==0){const d=i.getView().getCenterInternal(),f=i.getPixelFromCoordinateInternal(d);if(!f)return;const g=[f[0]+u[0],f[1]+u[1]],p=t.animation||{};i.getView().animateInternal({center:i.getCoordinateFromPixelInternal(g),duration:p.duration,easing:p.easing})}}}getRect(t,i){const n=t.getBoundingClientRect(),r=n.left+window.pageXOffset,s=n.top+window.pageYOffset;return[r,s,r+i[0],s+i[1]]}setPositioning(t){this.set(ni.POSITIONING,t)}setVisible(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)}updatePixelPosition(){const t=this.getMap(),i=this.getPosition();if(!t||!t.isRendered()||!i){this.setVisible(!1);return}const n=t.getPixelFromCoordinate(i),r=t.getSize();this.updateRenderedPosition(n,r)}updateRenderedPosition(t,i){const n=this.element.style,r=this.getOffset(),s=this.getPositioning();this.setVisible(!0);const o=`${t[0]+r[0]}px`,a=`${t[1]+r[1]}px`;let l="0%",c="0%";s=="bottom-right"||s=="center-right"||s=="top-right"?l="-100%":(s=="bottom-center"||s=="center-center"||s=="top-center")&&(l="-50%"),s=="bottom-left"||s=="bottom-center"||s=="bottom-right"?c="-100%":(s=="center-left"||s=="center-center"||s=="center-right")&&(c="-50%");const h=`translate(${l}, ${c}) translate(${o}, ${a})`;this.rendered.transform_!=h&&(this.rendered.transform_=h,n.transform=h)}getOptions(){return this.options}}function k$(e){return e&&e.parentNode?e.parentNode.removeChild(e):null}function R$(e){for(;e.lastChild;)e.removeChild(e.lastChild)}function XS(e,t){const i=e.cloneNode();e.nodeName==="CANVAS"&&i.getContext("2d").drawImage(e,0,0),t&&t.appendChild(i),e.nodeType!==Node.TEXT_NODE&&i.addEventListener("click",r=>{e.dispatchEvent(new MouseEvent("click",r)),r.stopPropagation()});const n=e.childNodes;for(let r=0;r<n.length;r++)n[r]&&XS(n[r],i);return i}class A$ extends E${scenePostRenderListenerRemover_=null;scene_;synchronizer_;parent_;positionWGS84_;observer_;attributeObserver_=[];listenerKeys_;constructor(t){const i=t.parent;super(i.getOptions()),this.scene_=t.scene,this.synchronizer_=t.synchronizer,this.parent_=i,this.positionWGS84_=void 0,this.observer_=new MutationObserver(this.handleElementChanged.bind(this)),this.attributeObserver_=[],this.listenerKeys_=[];const n=r=>this.setPropertyFromEvent_(r);this.listenerKeys_.push(this.parent_.on("change:element",n)),this.listenerKeys_.push(this.parent_.on("change:offset",n)),this.listenerKeys_.push(this.parent_.on("change:position",n)),this.listenerKeys_.push(this.parent_.on("change:positioning",n)),this.setProperties(this.parent_.getProperties()),this.handleMapChanged(),this.handleElementChanged(),this.handlePositionChanged()}observeTarget_(t){if(this.observer_){this.observer_.disconnect(),this.observer_.observe(t,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),this.attributeObserver_.forEach(i=>{i.disconnect()}),this.attributeObserver_.length=0;for(let i=0;i<t.childNodes.length;i++){const n=t.childNodes[i];if(n.nodeType===1){const r=new MutationObserver(this.handleElementChanged.bind(this));r.observe(n,{attributes:!0,subtree:!0}),this.attributeObserver_.push(r)}}}}setPropertyFromEvent_(t){t.target&&t.key&&this.set(t.key,t.target.get(t.key))}getScene(){return this.scene_}handleMapChanged(){this.scenePostRenderListenerRemover_&&(this.scenePostRenderListenerRemover_(),k$(this.element)),this.scenePostRenderListenerRemover_=null;const t=this.getScene();if(t){this.scenePostRenderListenerRemover_=t.postRender.addEventListener(this.updatePixelPosition.bind(this)),this.updatePixelPosition();const i=this.stopEvent?this.synchronizer_.getOverlayContainerStopEvent():this.synchronizer_.getOverlayContainer();this.insertFirst?i.insertBefore(this.element,i.childNodes[0]||null):i.appendChild(this.element)}}handlePositionChanged(){if(!this.parent_)return;const t=this.getPosition();if(t){const i=this.parent_.getMap().getView().getProjection();this.positionWGS84_=Qa(t,i,"EPSG:4326")}else this.positionWGS84_=void 0;this.updatePixelPosition()}handleElementChanged(){R$(this.element);const t=this.getElement();if(t&&t.parentNode&&t.parentNode.childNodes)for(const i of Array.from(t.parentNode.childNodes)){const n=XS(i,null);this.element.appendChild(n)}t.parentNode&&this.observeTarget_(t.parentNode)}updatePixelPosition(){const t=this.positionWGS84_;if(!this.scene_||!t){this.setVisible(!1);return}let i=0;if(t.length===2){const u=this.scene_.globe.getHeight(Cesium.Cartographic.fromDegrees(t[0],t[1]));u&&this.scene_.globe.tilesLoaded&&(t[2]=u),u&&(i=u)}else i=t[2];const n=Cesium.Cartesian3.fromDegrees(t[0],t[1],i),r=this.scene_.camera,s=new Cesium.BoundingSphere(new Cesium.Cartesian3,6356752);if(!new Cesium.Occluder(s,r.position).isPointVisible(n)){this.setVisible(!1);return}if(r.frustum.computeCullingVolume(r.position,r.direction,r.up).computeVisibility(new Cesium.BoundingSphere(n))!==1){this.setVisible(!1);return}this.setVisible(!0);const l=this.scene_.cartesianToCanvasCoordinates(n),c=[l.x,l.y],h=[this.scene_.canvas.width,this.scene_.canvas.height];this.updateRenderedPosition(c,h)}destroy(){this.scenePostRenderListenerRemover_&&this.scenePostRenderListenerRemover_(),this.observer_&&this.observer_.disconnect(),xn(this.listenerKeys_),this.listenerKeys_.splice(0),"removeNode"in this.element?this.element.removeNode(!0):this.element.remove(),this.element=null}}class L${map;scene;overlayCollection_;overlayContainerStopEvent_;overlayContainer_;overlayMap_=new Map;overlayEvents=["click","dblclick","mousedown","touchstart","pointerdown","mousewheel","wheel"];listenerKeys_=[];constructor(t,i){this.map=t,this.scene=i,this.map=t,this.overlayCollection_=this.map.getOverlays(),this.scene=i,this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.overlayEvents.forEach(n=>{this.overlayContainerStopEvent_.addEventListener(n,r=>r.stopPropagation())}),this.scene.canvas.parentElement.appendChild(this.overlayContainerStopEvent_),this.overlayContainer_=document.createElement("div"),this.overlayContainer_.className="ol-overlaycontainer",this.scene.canvas.parentElement.appendChild(this.overlayContainer_)}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOverlayContainer(){return this.overlayContainer_}synchronize(){this.destroyAll(),this.overlayCollection_.forEach(t=>{this.addOverlay(t)}),this.listenerKeys_.push(this.overlayCollection_.on("add",t=>this.addOverlay(t.element))),this.listenerKeys_.push(this.overlayCollection_.on("remove",t=>this.removeOverlay(t.element)))}addOverlay(t){if(!t)return;const i=new A$({scene:this.scene,synchronizer:this,parent:t});this.overlayMap_.set(Ge(t),i)}removeOverlay(t){const i=Ge(t),n=this.overlayMap_.get(i);n&&(n.destroy(),this.overlayMap_.delete(i))}destroyAll(){this.overlayMap_.forEach(t=>{t.destroy()}),this.overlayMap_.clear(),xn(this.listenerKeys_),this.listenerKeys_.length=0}}const Yg={DONE:0,PENDING:1,FAILED:2};class vy{autoRenderLoop_=null;map_;time_;to4326Transform_;resolutionScale_=1;canvasClientWidth_=0;canvasClientHeight_=0;resolutionScaleChanged_=!0;container_;isOverMap_;canvas_;enabled_=!1;pausedInteractions_=[];hiddenRootGroup_=null;scene_;camera_;globe_;dataSourceCollection_;dataSourceDisplay_;lastFrameTime_=0;renderId_;targetFrameRate_=Number.POSITIVE_INFINITY;blockCesiumRendering_=!1;warmingUp_=!1;trackedFeature_=null;trackedEntity_=null;entityView_=null;needTrackedEntityUpdate_=!1;boundingSphereScratch_=new Cesium.BoundingSphere;synchronizers_;refresh2DAfterCameraMoveEndOnly=!1;moveEndRemoveCallback_;constructor(t){this.map_=t.map,this.time_=t.time||function(){return Cesium.JulianDate.now()},this.to4326Transform_=rr(this.map_.getView().getProjection(),"EPSG:4326");const i="position:absolute;top:0;left:0;width:100%;height:100%;touch-action:none;";this.container_=document.createElement("DIV");const n=document.createAttribute("style");n.value=`${i}visibility:hidden;`,this.container_.setAttributeNode(n);let r=t.target||this.map_.getViewport();if(typeof r=="string"&&(r=document.getElementById(r)),r.appendChild(this.container_),this.isOverMap_=!t.target,this.isOverMap_&&t.stopOpenLayersEventsPropagation){const h=["click","dblclick","mousedown","touchstart","pointerdown","mousewheel","wheel"];for(let u=0,d=h.length;u<d;++u)this.container_.addEventListener(h[u],f=>f.stopPropagation())}this.canvas_=document.createElement("canvas");const s=document.createAttribute("style");s.value=i,this.canvas_.setAttributeNode(s),em()&&(this.canvas_.style.imageRendering=FN()),this.canvas_.oncontextmenu=function(){return!1},this.canvas_.onselectstart=function(){return!1},this.container_.appendChild(this.canvas_);const o=t.sceneOptions!==void 0?{...t.sceneOptions,canvas:this.canvas_,scene3DOnly:!0}:{canvas:this.canvas_,scene3DOnly:!0};this.scene_=new Cesium.Scene(o);const a=this.scene_.screenSpaceCameraController;Array.isArray(a.tiltEventTypes)?(a.tiltEventTypes.push({eventType:Cesium.CameraEventType.LEFT_DRAG,modifier:Cesium.KeyboardEventModifier.SHIFT}),a.tiltEventTypes.push({eventType:Cesium.CameraEventType.LEFT_DRAG,modifier:Cesium.KeyboardEventModifier.ALT})):console.log("sscc is not an array"),a.enableLook=!1,this.scene_.camera.constrainedAxis=Cesium.Cartesian3.UNIT_Z,this.camera_=new b$(this.scene_,this.map_),this.globe_=new Cesium.Globe(Cesium.Ellipsoid.WGS84),this.globe_.baseColor=Cesium.Color.WHITE,this.scene_.globe=this.globe_,this.scene_.skyAtmosphere=new Cesium.SkyAtmosphere;const l=new Cesium.SingleTileImageryProvider({tileHeight:1,tileWidth:1,url:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=",rectangle:Cesium.Rectangle.fromDegrees(0,0,1,1)});this.globe_.imageryLayers.addImageryProvider(l,0),this.dataSourceCollection_=new Cesium.DataSourceCollection,this.dataSourceDisplay_=new Cesium.DataSourceDisplay({scene:this.scene_,dataSourceCollection:this.dataSourceCollection_}),this.synchronizers_=t.createSynchronizers?t.createSynchronizers(this.map_,this.scene_,this.dataSourceCollection_):[new YS(this.map_,this.scene_),new T$(this.map_,this.scene_),new L$(this.map_,this.scene_)],this.handleResize_();for(let h=this.synchronizers_.length-1;h>=0;--h)this.synchronizers_[h].synchronize();new Cesium.EventHelper().add(this.scene_.postRender,vy.prototype.updateTrackedEntity_,this),this.moveEndRemoveCallback_=this.scene_.camera.moveEnd.addEventListener(()=>{this.refresh2DAfterCameraMoveEndOnly&&this.camera_.checkCameraChange()})}destroy(){cancelAnimationFrame(this.renderId_),this.renderId_=void 0,this.synchronizers_.forEach(t=>t.destroyAll()),this.camera_.destroy(),this.scene_.destroy(),this.scene_._postRender=null,this.moveEndRemoveCallback_(),this.container_.remove()}render_(){this.renderId_!==void 0&&(cancelAnimationFrame(this.renderId_),this.renderId_=void 0),(this.enabled_||this.warmingUp_)&&!this.blockCesiumRendering_&&(this.renderId_=requestAnimationFrame(this.onAnimationFrame_.bind(this)))}onAnimationFrame_(t){this.renderId_=void 0;const i=1e3/this.targetFrameRate_;if(t-this.lastFrameTime_<i){this.render_();return}this.lastFrameTime_=t;const r=this.time_();if(this.scene_.initializeFrame(),this.handleResize_(),this.dataSourceDisplay_.update(r),this.entityView_){const s=this.trackedEntity_;this.dataSourceDisplay_.getBoundingSphere(s,!1,this.boundingSphereScratch_)===Yg.DONE&&(this.boundingSphereScratch_.radius=1,this.entityView_.update(r,this.boundingSphereScratch_))}this.scene_.render(r),this.refresh2DAfterCameraMoveEndOnly||this.camera_.checkCameraChange(),this.render_()}updateTrackedEntity_(){if(!this.needTrackedEntityUpdate_)return;const t=this.trackedEntity_,i=this.scene_,n=this.dataSourceDisplay_.getBoundingSphere(t,!1,this.boundingSphereScratch_);if(n===Yg.PENDING)return;i.screenSpaceCameraController.enableTilt=!1;const r=n!==Yg.FAILED?this.boundingSphereScratch_:void 0;r&&(r.radius=1),this.entityView_=new Cesium.EntityView(t,i,i.mapProjection.ellipsoid),this.entityView_.update(this.time_(),r),this.needTrackedEntityUpdate_=!1}handleResize_(){let t=this.canvas_.clientWidth,i=this.canvas_.clientHeight;if(t===0||i===0||t===this.canvasClientWidth_&&i===this.canvasClientHeight_&&!this.resolutionScaleChanged_)return;let n=this.resolutionScale_;em()||(n*=window.devicePixelRatio||1),this.resolutionScaleChanged_=!1,this.canvasClientWidth_=t,this.canvasClientHeight_=i,t*=n,i*=n,this.canvas_.width=t,this.canvas_.height=i,this.scene_.camera.frustum.aspectRatio=t/i}getCamera(){return this.camera_}getOlMap(){return this.map_}getOlView(){const t=this.map_.getView();return console.assert(t),t}getCesiumScene(){return this.scene_}getDataSources(){return this.dataSourceCollection_}getDataSourceDisplay(){return this.dataSourceDisplay_}getEnabled(){return this.enabled_}setEnabled(t){if(this.enabled_===t)return;this.enabled_=t,this.container_.style.visibility=this.enabled_?"visible":"hidden";let i;if(this.enabled_){if(this.throwOnUnitializedMap_(),this.isOverMap_){i=this.map_.getInteractions(),i.forEach((r,s,o)=>{this.pausedInteractions_.push(r)}),i.clear(),this.map_.addInteraction=r=>this.pausedInteractions_.push(r),this.map_.removeInteraction=r=>{let s=!1;return this.pausedInteractions_=this.pausedInteractions_.filter(o=>{const a=o!==r;return s||(s=a),a}),s?r:void 0};const n=this.map_.getLayerGroup();n.getVisible()&&(this.hiddenRootGroup_=n,this.hiddenRootGroup_.setVisible(!1)),this.map_.getOverlayContainer().classList.add("olcs-hideoverlay")}this.camera_.readFromView(),this.render_()}else this.isOverMap_&&(i=this.map_.getInteractions(),this.pausedInteractions_.forEach(n=>{i.push(n)}),this.pausedInteractions_.length=0,this.map_.addInteraction=n=>this.map_.getInteractions().push(n),this.map_.removeInteraction=n=>this.map_.getInteractions().remove(n),this.map_.getOverlayContainer().classList.remove("olcs-hideoverlay"),this.hiddenRootGroup_&&(this.hiddenRootGroup_.setVisible(!0),this.hiddenRootGroup_=null)),this.camera_.updateView()}warmUp(t,i){if(this.enabled_)return;this.throwOnUnitializedMap_(),this.camera_.readFromView();const n=this.globe_.ellipsoid,r=this.scene_.camera,s=n.cartesianToCartographic(r.position);s.height<t&&(s.height=t,r.position=n.cartographicToCartesian(s)),this.warmingUp_=!0,this.render_(),setTimeout(()=>{this.warmingUp_=!1},i)}setBlockCesiumRendering(t){this.blockCesiumRendering_!==t&&(this.blockCesiumRendering_=t,this.render_())}enableAutoRenderLoop(){this.autoRenderLoop_||(this.autoRenderLoop_=new C$(this))}getAutoRenderLoop(){return this.autoRenderLoop_}setResolutionScale(t){t=Math.max(0,t),t!==this.resolutionScale_&&(this.resolutionScale_=Math.max(0,t),this.resolutionScaleChanged_=!0,this.autoRenderLoop_&&this.autoRenderLoop_.restartRenderLoop())}setTargetFrameRate(t){this.targetFrameRate_!==t&&(this.targetFrameRate_=t,this.render_())}setRefresh2DAfterCameraMoveEndOnly(t){this.refresh2DAfterCameraMoveEndOnly=t}throwOnUnitializedMap_(){const i=this.map_.getView(),n=i.getCenter();if(!i.isDef()||isNaN(n[0])||isNaN(n[1]))throw new Error(`The OpenLayers map is not properly initialized: ${n} / ${i.getResolution()}`)}get trackedFeature(){return this.trackedFeature_}set trackedFeature(t){if(this.trackedFeature_!==t){const i=this.scene_;if(!t||!t.getGeometry()){this.needTrackedEntityUpdate_=!1,i.screenSpaceCameraController.enableTilt=!0,this.trackedEntity_&&this.dataSourceDisplay_.defaultDataSource.entities.remove(this.trackedEntity_),this.trackedEntity_=null,this.trackedFeature_=null,this.entityView_=null,i.camera.lookAtTransform(Cesium.Matrix4.IDENTITY);return}this.trackedFeature_=t,this.needTrackedEntityUpdate_=!0;const n=this.to4326Transform_,r=function(){const o=t.getGeometry();console.assert(o instanceof or);const a=o instanceof or?o.getCoordinates():[],l=n(a,void 0,a.length);return la(l)},s={position:new Cesium.CallbackProperty((o,a)=>r(),!1),point:{pixelSize:1,color:Cesium.Color.TRANSPARENT}};this.trackedEntity_=this.dataSourceDisplay_.defaultDataSource.entities.add(s)}}}const M$=15e3,I$=16,P$={__name:"Map",setup(e){const{isDark:t}=S0(),i={minLon:70,minLat:15,maxLon:140,maxLat:60};(()=>{const R=kh([i.minLon,i.minLat]),T=kh([i.maxLon,i.maxLat]);return[R[0],R[1],T[0],T[1]]})();const{showLoading:n,hideLoading:r}=T0(),s=QP(),o=Je(!1),a=Je("");Je(0);const l=Je(null),c=Je(null);let h=null,u=null,d=!1,f=null,g=null,p=null,m=null,y=null,_=null,C=null,b=[50,50];const v=()=>new Promise(R=>{const T=new Image;T.onload=()=>{C=T,b=[T.naturalWidth||50,T.naturalHeight||50],R()},T.onerror=()=>{R()},T.src=Oh}),S=Cesium.Color.WHITE.withAlpha(.55),w=R=>{if(!R||!u)return;_||(_=new Cesium.CustomDataSource("posts-3d-markers"),u.getDataSources().add(_));const T=new Set;for(let E=0;E<Hg.length;E+=1){const D=Hg[E];if(!D||!D.location||D.location.lng==null||D.location.lat==null)continue;const M=String(D.id||"");if(!M)continue;const j=`post-${M}`;T.add(j);const Y=Number(D.location.lng),K=Number(D.location.lat),G=Cesium.Cartesian3.fromDegrees(Y,K,M$),Q=Cesium.Cartesian3.fromDegrees(Y,K,0);let ut=_.entities.getById(j);ut||(ut=_.entities.add({id:j})),ut.position=new Cesium.ConstantPositionProperty(G),ut.billboard=new Cesium.BillboardGraphics({image:Oh,scale:.5,verticalOrigin:Cesium.VerticalOrigin.CENTER,heightReference:Cesium.HeightReference.NONE,color:t.value?Cesium.Color.WHITE:Cesium.Color.BLACK}),ut.label=new Cesium.LabelGraphics({text:String(D.title||""),font:'bold 12px "PingFang SC", "Microsoft YaHei", sans-serif',fillColor:t.value?Cesium.Color.WHITE:Cesium.Color.BLACK,outlineColor:t.value?Cesium.Color.BLACK:Cesium.Color.WHITE,outlineWidth:4,style:Cesium.LabelStyle.FILL_AND_OUTLINE,verticalOrigin:Cesium.VerticalOrigin.TOP,heightReference:Cesium.HeightReference.NONE,pixelOffset:new Cesium.Cartesian2(0,28)}),ut.polyline=new Cesium.PolylineGraphics({positions:[G,Q],width:1.2,material:new Cesium.PolylineDashMaterialProperty({color:t.value?S:Cesium.Color.BLACK.withAlpha(.55),dashLength:I$}),arcType:Cesium.ArcType.NONE}),ut.properties=new Cesium.PropertyBag({postId:M})}const P=_.entities.values.slice();for(let E=0;E<P.length;E+=1){const D=P[E];D&&typeof D.id=="string"&&!T.has(D.id)&&_.entities.remove(D)}R.requestRender()};let L={};const A=R=>{const T=R.get("features").length;let P=L[T];if(!P){if(T>1)P=new ir({image:new Es({...C?{img:C,imgSize:b}:{src:Oh},scale:.6,anchor:[.5,.5],color:t.value?void 0:"#000000"}),text:new kc({text:T.toString(),fill:new Ts({color:t.value?"#272636":"#ffffff"}),stroke:new wo({color:t.value?"#fff":"#000000",width:2}),font:"bold 15px sans-serif",offsetY:2})});else{const D=R.get("features")[0].get("name");P=new ir({image:new Es({...C?{img:C,imgSize:b}:{src:Oh},scale:.5,anchor:[.5,.5],color:t.value?void 0:"#000000"}),text:new kc({text:D,font:'bold 12px "PingFang SC", "Microsoft YaHei", sans-serif',offsetY:24,fill:new Ts({color:t.value?"#fff":"#000"}),stroke:new wo({color:t.value?"rgba(0,0,0,1)":"rgba(255,255,255,1)",width:4})})})}L[T]=P}return P},B=R=>{if(p&&m&&(p.setVisible(R),m.setVisible(!R),L={},g&&g.changed()),u){const T=u.getCesiumScene?.();if(T){const P=R?Cesium.Color.BLACK:Cesium.Color.WHITE;T.backgroundColor=P,T.globe&&(T.globe.baseColor=P),T.requestRender?.()}}_&&_.entities.values.forEach(P=>{P.billboard&&(P.billboard.color=R?Cesium.Color.WHITE:Cesium.Color.BLACK),P.label&&(R?(P.label.fillColor=Cesium.Color.WHITE,P.label.outlineColor=Cesium.Color.BLACK):(P.label.fillColor=Cesium.Color.BLACK,P.label.outlineColor=Cesium.Color.WHITE)),P.polyline&&(P.polyline.material.color=R?S:Cesium.Color.BLACK.withAlpha(.55))})};Tn(t,R=>{B(R)}),Vd(()=>{sessionStorage.getItem("hasShownMapTip")||setTimeout(()=>{o.value=!0,a.value="...",sessionStorage.setItem("hasShownMapTip","true")},500),n("..."),f=()=>{d||(d=!0,requestAnimationFrame(()=>{d=!1;try{h?.updateSize()}catch{}try{u?.getCesiumScene?.()?.requestRender?.()}catch{}}))},window.addEventListener("resize",f),window.addEventListener("orientationchange",f),setTimeout(async()=>{await v(),O(),F()},100)}),Ud(()=>{if(f&&(window.removeEventListener("resize",f),window.removeEventListener("orientationchange",f),f=null),y){try{y.destroy()}catch(R){console.warn("Cesium handler cleanup warning:",R)}y=null}if(u&&_){try{u.getDataSources().remove(_,!0)}catch(R){console.warn("Cesium posts datasource cleanup warning:",R)}_=null}if(u){try{u.setEnabled(!1)}catch(R){console.warn("OLCesium cleanup warning:",R)}u=null}if(h){try{h.setTarget(null)}catch(R){console.warn("OLMap cleanup warning:",R)}h=null}});const O=()=>{p=new Zp({source:new MC({url:"https://basemaps.cartocdn.com/dark_all/{z}/{x}/{y}.png",crossOrigin:"anonymous"}),visible:t.value,zIndex:0}),m=new Zp({source:new MC({url:"https://basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png",crossOrigin:"anonymous"}),visible:!t.value,zIndex:0});const R=new Mc;Hg.forEach(P=>{if(P.location&&P.location.lng&&P.location.lat){const E=new ah({geometry:new or(kh([P.location.lng,P.location.lat])),name:P.title,id:P.id});R.addFeature(E)}});const T=new Cy({distance:40,source:R});g=new OS({source:T,style:A,zIndex:10}),g.set("olcs_skip",!0),h=new f3({target:l.value,layers:[p,m,g],view:new Xn({center:kh([105,35]),zoom:4}),controls:[]}),h.on("click",P=>{const E=h.forEachFeatureAtPixel(P.pixel,D=>D);if(E){const D=E.get("features");if(D&&D.length>0)if(D.length>1){const M=ki();D.forEach(j=>gw(M,j.getGeometry().getExtent())),h.getView().fit(M,{duration:500,padding:[100,100,100,100]})}else{const j=D[0].get("id");j&&s.push(`/blog/${j}`)}}}),h.on("pointermove",P=>{const E=h.hasFeatureAtPixel(P.pixel),D=h.getTargetElement();D&&(D.style.cursor=E?"pointer":"")}),h.renderSync()},F=()=>{window.Cesium=Cesium,u=new vy({map:h,target:c.value,stopOpenLayersRendering:!1,createSynchronizers:(M,j)=>[new YS(M,j)]});const R=u.getCesiumScene();y=new Cesium.ScreenSpaceEventHandler(R.canvas),y.setInputAction(M=>{const j=R.drillPick(M.endPosition,10);let Y=!1;for(let K=0;K<j.length;K+=1){const Q=j[K]?.id;if(Q&&Q.properties&&Q.properties.postId){Y=!0;break}}c.value.style.cursor=Y?"pointer":""},Cesium.ScreenSpaceEventType.MOUSE_MOVE),y.setInputAction(M=>{const j=R.drillPick(M.position,10);let Y=null;for(let Q=0;Q<j.length;Q+=1){const ut=j[Q]?.id;if(ut&&ut.properties&&ut.properties.postId){Y=ut;break}}if(!Y)return;const K=Cesium.JulianDate.now(),G=Y.properties.postId.getValue(K);G&&s.push(`/blog/${G}`)},Cesium.ScreenSpaceEventType.LEFT_CLICK),R.globe.baseColor=t.value?Cesium.Color.BLACK:Cesium.Color.WHITE,R.backgroundColor=t.value?Cesium.Color.BLACK:Cesium.Color.WHITE,R.highDynamicRangeSupported&&(R.highDynamicRange=!1),R.postProcessStages.fxaa.enabled=!0,R.skyAtmosphere&&(R.skyAtmosphere.show=!1),R.moon&&(R.moon.show=!1),R.fog&&(R.fog.enabled=!1),R.globe.enableLighting=!1,R.globe.showGroundAtmosphere=!1,R.imageryLayers,R.frameState&&R.frameState.creditDisplay&&R.frameState.creditDisplay.container&&(R.frameState.creditDisplay.container.style.display="none"),u.setEnabled(!0);const T=Cesium.Cartesian3.fromDegrees(105,35),P=Cesium.Math.toRadians(0),E=Cesium.Math.toRadians(-30),D=6e6;R.camera.lookAt(T,new Cesium.HeadingPitchRange(P,E,D)),R.camera.lookAtTransform(Cesium.Matrix4.IDENTITY),u.setTargetFrameRate(30),setTimeout(()=>{let M=0;const j=()=>{M+=1,R.requestRender(),w(R),M<8&&setTimeout(j,250)};j()},500),r()};return(R,T)=>(Wt(),oe("div",{class:yo(["digital-twin-home",{"dark-mode":Te(t)}])},[dt("div",{id:"cesium-container",ref_key:"cesiumContainer",ref:c},null,512),dt("div",{id:"ol-container",ref_key:"olContainer",ref:l},null,512),T[1]||(T[1]=Nv('<svg class="split-line-svg" data-v-095edc51><defs data-v-095edc51><linearGradient id="simple-gradient" gradientUnits="userSpaceOnUse" x1="55%" y1="0%" x2="45%" y2="100%" data-v-095edc51><stop offset="0%" style="stop-color:#fff;stop-opacity:0;" data-v-095edc51></stop><stop offset="30%" style="stop-color:var(--accent);stop-opacity:0.1;" data-v-095edc51></stop><stop offset="50%" style="stop-color:var(--accent);stop-opacity:0.5;" data-v-095edc51></stop><stop offset="70%" style="stop-color:var(--accent);stop-opacity:0.1;" data-v-095edc51></stop><stop offset="100%" style="stop-color:#fff;stop-opacity:0;" data-v-095edc51></stop></linearGradient><linearGradient id="simple-gradient-horizontal" gradientUnits="userSpaceOnUse" x1="0%" y1="50%" x2="100%" y2="50%" data-v-095edc51><stop offset="0%" style="stop-color:#fff;stop-opacity:0;" data-v-095edc51></stop><stop offset="30%" style="stop-color:var(--accent);stop-opacity:0.1;" data-v-095edc51></stop><stop offset="50%" style="stop-color:var(--accent);stop-opacity:0.5;" data-v-095edc51></stop><stop offset="70%" style="stop-color:var(--accent);stop-opacity:0.1;" data-v-095edc51></stop><stop offset="100%" style="stop-color:#fff;stop-opacity:0;" data-v-095edc51></stop></linearGradient></defs><line x1="55%" y1="0%" x2="45%" y2="100%" class="split-path-diagonal" data-v-095edc51></line><line x1="0%" y1="50%" x2="100%" y2="50%" class="split-path-horizontal" data-v-095edc51></line></svg>',1)),me($F,{visible:o.value,"onUpdate:visible":T[0]||(T[0]=P=>o.value=P),message:a.value,position:"center",duration:8e3,type:"info"},null,8,["visible","message"])],2))}},F$=Ka(P$,[["__scopeId","data-v-095edc51"]]),O$=[{path:"/",name:"Map",component:F$},{path:"/blog",name:"BlogList",component:()=>Kt(()=>import("./BlogList-DFbr1jIR.js"),__vite__mapDeps([0,1]))},{path:"/blog/:id",name:"BlogPost",component:()=>Kt(()=>import("./BlogPost-DrFKJfBu.js"),__vite__mapDeps([2,3]))},{path:"/about",name:"About",component:()=>Kt(()=>import("./About-BURwbSfg.js"),__vite__mapDeps([4,5]))},{path:"/:pathMatch(.*)*",name:"NotFound",component:()=>Kt(()=>Promise.resolve().then(()=>AF),void 0)}],Sf=JP({history:LP(),routes:O$}),{showLoading:D$,hideLoading:B$}=T0();Sf.beforeEach((e,t,i)=>{e.name!=="Map"&&e.path!==t.path&&D$(),i()});Sf.afterEach(e=>{e.name!=="Map"&&setTimeout(()=>{B$()},300)});var YC={name:"mermaid",version:"11.12.2",description:"Markdown-ish syntax for generating flowcharts, mindmaps, sequence diagrams, class diagrams, gantt charts, git graphs and more.",type:"module",module:"./dist/mermaid.core.mjs",types:"./dist/mermaid.d.ts",exports:{".":{types:"./dist/mermaid.d.ts",import:"./dist/mermaid.core.mjs",default:"./dist/mermaid.core.mjs"},"./*":"./*"},keywords:["diagram","markdown","flowchart","sequence diagram","gantt","class diagram","git graph","mindmap","packet diagram","c4 diagram","er diagram","pie chart","pie diagram","quadrant chart","requirement diagram","graph"],scripts:{clean:"rimraf dist",dev:"pnpm -w dev","docs:code":"typedoc src/defaultConfig.ts src/config.ts src/mermaid.ts && prettier --write ./src/docs/config/setup","docs:build":"rimraf ../../docs && pnpm docs:code && pnpm docs:spellcheck && tsx scripts/docs.cli.mts","docs:verify":"pnpm docs:code && pnpm docs:spellcheck && tsx scripts/docs.cli.mts --verify","docs:pre:vitepress":"pnpm --filter ./src/docs prefetch && rimraf src/vitepress && pnpm docs:code && tsx scripts/docs.cli.mts --vitepress && pnpm --filter ./src/vitepress install --no-frozen-lockfile --ignore-scripts","docs:build:vitepress":"pnpm docs:pre:vitepress && (cd src/vitepress && pnpm run build) && cpy --flat src/docs/landing/ ./src/vitepress/.vitepress/dist/landing","docs:dev":'pnpm docs:pre:vitepress && concurrently "pnpm --filter ./src/vitepress dev" "tsx scripts/docs.cli.mts --watch --vitepress"',"docs:dev:docker":'pnpm docs:pre:vitepress && concurrently "pnpm --filter ./src/vitepress dev:docker" "tsx scripts/docs.cli.mts --watch --vitepress"',"docs:serve":"pnpm docs:build:vitepress && vitepress serve src/vitepress","docs:spellcheck":'cspell "src/docs/**/*.md"',"docs:release-version":"tsx scripts/update-release-version.mts","docs:verify-version":"tsx scripts/update-release-version.mts --verify","types:build-config":"tsx scripts/create-types-from-json-schema.mts","types:verify-config":"tsx scripts/create-types-from-json-schema.mts --verify",checkCircle:"npx madge --circular ./src",prepublishOnly:"pnpm docs:verify-version"},repository:{type:"git",url:"https://github.com/mermaid-js/mermaid"},author:"Knut Sveidqvist",license:"MIT",standard:{ignore:["**/parser/*.js","dist/**/*.js","cypress/**/*.js"],globals:["page"]},dependencies:{"@braintree/sanitize-url":"^7.1.1","@iconify/utils":"^3.0.1","@mermaid-js/parser":"workspace:^","@types/d3":"^7.4.3",cytoscape:"^3.29.3","cytoscape-cose-bilkent":"^4.1.0","cytoscape-fcose":"^2.2.0",d3:"^7.9.0","d3-sankey":"^0.12.3","dagre-d3-es":"7.0.13",dayjs:"^1.11.18",dompurify:"^3.2.5",katex:"^0.16.22",khroma:"^2.1.0","lodash-es":"^4.17.21",marked:"^16.2.1",roughjs:"^4.6.6",stylis:"^4.3.6","ts-dedent":"^2.2.0",uuid:"^11.1.0"},devDependencies:{"@adobe/jsonschema2md":"^8.0.5","@iconify/types":"^2.0.0","@types/cytoscape":"^3.21.9","@types/cytoscape-fcose":"^2.2.4","@types/d3-sankey":"^0.12.4","@types/d3-scale":"^4.0.9","@types/d3-scale-chromatic":"^3.1.0","@types/d3-selection":"^3.0.11","@types/d3-shape":"^3.1.7","@types/jsdom":"^21.1.7","@types/katex":"^0.16.7","@types/lodash-es":"^4.17.12","@types/micromatch":"^4.0.9","@types/stylis":"^4.2.7","@types/uuid":"^10.0.0",ajv:"^8.17.1",canvas:"^3.1.2",chokidar:"3.6.0",concurrently:"^9.1.2","csstree-validator":"^4.0.1",globby:"^14.1.0",jison:"^0.4.18","js-base64":"^3.7.8",jsdom:"^26.1.0","json-schema-to-typescript":"^15.0.4",micromatch:"^4.0.8","path-browserify":"^1.0.1",prettier:"^3.5.3",remark:"^15.0.1","remark-frontmatter":"^5.0.0","remark-gfm":"^4.0.1",rimraf:"^6.0.1","start-server-and-test":"^2.0.13","type-fest":"^4.35.0",typedoc:"^0.28.12","typedoc-plugin-markdown":"^4.8.1",typescript:"~5.7.3","unist-util-flatmap":"^1.0.0","unist-util-visit":"^5.0.0",vitepress:"^1.6.4","vitepress-plugin-search":"1.0.4-alpha.22"},files:["dist/","README.md"],publishConfig:{access:"public"}},lu={exports:{}},N$=lu.exports,XC;function $$(){return XC||(XC=1,(function(e,t){(function(i,n){e.exports=n()})(N$,(function(){var i=1e3,n=6e4,r=36e5,s="millisecond",o="second",a="minute",l="hour",c="day",h="week",u="month",d="quarter",f="year",g="date",p="Invalid Date",m=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,_={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(T){var P=["th","st","nd","rd"],E=T%100;return"["+T+(P[(E-20)%10]||P[E]||P[0])+"]"}},C=function(T,P,E){var D=String(T);return!D||D.length>=P?T:""+Array(P+1-D.length).join(E)+T},b={s:C,z:function(T){var P=-T.utcOffset(),E=Math.abs(P),D=Math.floor(E/60),M=E%60;return(P<=0?"+":"-")+C(D,2,"0")+":"+C(M,2,"0")},m:function T(P,E){if(P.date()<E.date())return-T(E,P);var D=12*(E.year()-P.year())+(E.month()-P.month()),M=P.clone().add(D,u),j=E-M<0,Y=P.clone().add(D+(j?-1:1),u);return+(-(D+(E-M)/(j?M-Y:Y-M))||0)},a:function(T){return T<0?Math.ceil(T)||0:Math.floor(T)},p:function(T){return{M:u,y:f,w:h,d:c,D:g,h:l,m:a,s:o,ms:s,Q:d}[T]||String(T||"").toLowerCase().replace(/s$/,"")},u:function(T){return T===void 0}},v="en",S={};S[v]=_;var w="$isDayjsObject",L=function(T){return T instanceof F||!(!T||!T[w])},A=function T(P,E,D){var M;if(!P)return v;if(typeof P=="string"){var j=P.toLowerCase();S[j]&&(M=j),E&&(S[j]=E,M=j);var Y=P.split("-");if(!M&&Y.length>1)return T(Y[0])}else{var K=P.name;S[K]=P,M=K}return!D&&M&&(v=M),M||!D&&v},B=function(T,P){if(L(T))return T.clone();var E=typeof P=="object"?P:{};return E.date=T,E.args=arguments,new F(E)},O=b;O.l=A,O.i=L,O.w=function(T,P){return B(T,{locale:P.$L,utc:P.$u,x:P.$x,$offset:P.$offset})};var F=(function(){function T(E){this.$L=A(E.locale,null,!0),this.parse(E),this.$x=this.$x||E.x||{},this[w]=!0}var P=T.prototype;return P.parse=function(E){this.$d=(function(D){var M=D.date,j=D.utc;if(M===null)return new Date(NaN);if(O.u(M))return new Date;if(M instanceof Date)return new Date(M);if(typeof M=="string"&&!/Z$/i.test(M)){var Y=M.match(m);if(Y){var K=Y[2]-1||0,G=(Y[7]||"0").substring(0,3);return j?new Date(Date.UTC(Y[1],K,Y[3]||1,Y[4]||0,Y[5]||0,Y[6]||0,G)):new Date(Y[1],K,Y[3]||1,Y[4]||0,Y[5]||0,Y[6]||0,G)}}return new Date(M)})(E),this.init()},P.init=function(){var E=this.$d;this.$y=E.getFullYear(),this.$M=E.getMonth(),this.$D=E.getDate(),this.$W=E.getDay(),this.$H=E.getHours(),this.$m=E.getMinutes(),this.$s=E.getSeconds(),this.$ms=E.getMilliseconds()},P.$utils=function(){return O},P.isValid=function(){return this.$d.toString()!==p},P.isSame=function(E,D){var M=B(E);return this.startOf(D)<=M&&M<=this.endOf(D)},P.isAfter=function(E,D){return B(E)<this.startOf(D)},P.isBefore=function(E,D){return this.endOf(D)<B(E)},P.$g=function(E,D,M){return O.u(E)?this[D]:this.set(M,E)},P.unix=function(){return Math.floor(this.valueOf()/1e3)},P.valueOf=function(){return this.$d.getTime()},P.startOf=function(E,D){var M=this,j=!!O.u(D)||D,Y=O.p(E),K=function(J,it){var Rt=O.w(M.$u?Date.UTC(M.$y,it,J):new Date(M.$y,it,J),M);return j?Rt:Rt.endOf(c)},G=function(J,it){return O.w(M.toDate()[J].apply(M.toDate("s"),(j?[0,0,0,0]:[23,59,59,999]).slice(it)),M)},Q=this.$W,ut=this.$M,at=this.$D,It="set"+(this.$u?"UTC":"");switch(Y){case f:return j?K(1,0):K(31,11);case u:return j?K(1,ut):K(0,ut+1);case h:var W=this.$locale().weekStart||0,et=(Q<W?Q+7:Q)-W;return K(j?at-et:at+(6-et),ut);case c:case g:return G(It+"Hours",0);case l:return G(It+"Minutes",1);case a:return G(It+"Seconds",2);case o:return G(It+"Milliseconds",3);default:return this.clone()}},P.endOf=function(E){return this.startOf(E,!1)},P.$set=function(E,D){var M,j=O.p(E),Y="set"+(this.$u?"UTC":""),K=(M={},M[c]=Y+"Date",M[g]=Y+"Date",M[u]=Y+"Month",M[f]=Y+"FullYear",M[l]=Y+"Hours",M[a]=Y+"Minutes",M[o]=Y+"Seconds",M[s]=Y+"Milliseconds",M)[j],G=j===c?this.$D+(D-this.$W):D;if(j===u||j===f){var Q=this.clone().set(g,1);Q.$d[K](G),Q.init(),this.$d=Q.set(g,Math.min(this.$D,Q.daysInMonth())).$d}else K&&this.$d[K](G);return this.init(),this},P.set=function(E,D){return this.clone().$set(E,D)},P.get=function(E){return this[O.p(E)]()},P.add=function(E,D){var M,j=this;E=Number(E);var Y=O.p(D),K=function(ut){var at=B(j);return O.w(at.date(at.date()+Math.round(ut*E)),j)};if(Y===u)return this.set(u,this.$M+E);if(Y===f)return this.set(f,this.$y+E);if(Y===c)return K(1);if(Y===h)return K(7);var G=(M={},M[a]=n,M[l]=r,M[o]=i,M)[Y]||1,Q=this.$d.getTime()+E*G;return O.w(Q,this)},P.subtract=function(E,D){return this.add(-1*E,D)},P.format=function(E){var D=this,M=this.$locale();if(!this.isValid())return M.invalidDate||p;var j=E||"YYYY-MM-DDTHH:mm:ssZ",Y=O.z(this),K=this.$H,G=this.$m,Q=this.$M,ut=M.weekdays,at=M.months,It=M.meridiem,W=function(it,Rt,k,I){return it&&(it[Rt]||it(D,j))||k[Rt].slice(0,I)},et=function(it){return O.s(K%12||12,it,"0")},J=It||function(it,Rt,k){var I=it<12?"AM":"PM";return k?I.toLowerCase():I};return j.replace(y,(function(it,Rt){return Rt||(function(k){switch(k){case"YY":return String(D.$y).slice(-2);case"YYYY":return O.s(D.$y,4,"0");case"M":return Q+1;case"MM":return O.s(Q+1,2,"0");case"MMM":return W(M.monthsShort,Q,at,3);case"MMMM":return W(at,Q);case"D":return D.$D;case"DD":return O.s(D.$D,2,"0");case"d":return String(D.$W);case"dd":return W(M.weekdaysMin,D.$W,ut,2);case"ddd":return W(M.weekdaysShort,D.$W,ut,3);case"dddd":return ut[D.$W];case"H":return String(K);case"HH":return O.s(K,2,"0");case"h":return et(1);case"hh":return et(2);case"a":return J(K,G,!0);case"A":return J(K,G,!1);case"m":return String(G);case"mm":return O.s(G,2,"0");case"s":return String(D.$s);case"ss":return O.s(D.$s,2,"0");case"SSS":return O.s(D.$ms,3,"0");case"Z":return Y}return null})(it)||Y.replace(":","")}))},P.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},P.diff=function(E,D,M){var j,Y=this,K=O.p(D),G=B(E),Q=(G.utcOffset()-this.utcOffset())*n,ut=this-G,at=function(){return O.m(Y,G)};switch(K){case f:j=at()/12;break;case u:j=at();break;case d:j=at()/3;break;case h:j=(ut-Q)/6048e5;break;case c:j=(ut-Q)/864e5;break;case l:j=ut/r;break;case a:j=ut/n;break;case o:j=ut/i;break;default:j=ut}return M?j:O.a(j)},P.daysInMonth=function(){return this.endOf(u).$D},P.$locale=function(){return S[this.$L]},P.locale=function(E,D){if(!E)return this.$L;var M=this.clone(),j=A(E,D,!0);return j&&(M.$L=j),M},P.clone=function(){return O.w(this.$d,this)},P.toDate=function(){return new Date(this.valueOf())},P.toJSON=function(){return this.isValid()?this.toISOString():null},P.toISOString=function(){return this.$d.toISOString()},P.toString=function(){return this.$d.toUTCString()},T})(),R=F.prototype;return B.prototype=R,[["$ms",s],["$s",o],["$m",a],["$H",l],["$W",c],["$M",u],["$y",f],["$D",g]].forEach((function(T){R[T[1]]=function(P){return this.$g(P,T[0],T[1])}})),B.extend=function(T,P){return T.$i||(T(P,F,B),T.$i=!0),B},B.locale=A,B.isDayjs=L,B.unix=function(T){return B(1e3*T)},B.en=S[v],B.Ls=S,B.p={},B}))})(lu)),lu.exports}var z$=$$();const G$=yN(z$);var KS=Object.defineProperty,x=(e,t)=>KS(e,"name",{value:t,configurable:!0}),W$=(e,t)=>{for(var i in t)KS(e,i,{get:t[i],enumerable:!0})},br={trace:0,debug:1,info:2,warn:3,error:4,fatal:5},X={trace:x((...e)=>{},"trace"),debug:x((...e)=>{},"debug"),info:x((...e)=>{},"info"),warn:x((...e)=>{},"warn"),error:x((...e)=>{},"error"),fatal:x((...e)=>{},"fatal")},wy=x(function(e="fatal"){let t=br.fatal;typeof e=="string"?e.toLowerCase()in br&&(t=br[e]):typeof e=="number"&&(t=e),X.trace=()=>{},X.debug=()=>{},X.info=()=>{},X.warn=()=>{},X.error=()=>{},X.fatal=()=>{},t<=br.fatal&&(X.fatal=console.error?console.error.bind(console,en("FATAL"),"color: orange"):console.log.bind(console,"\x1B[35m",en("FATAL"))),t<=br.error&&(X.error=console.error?console.error.bind(console,en("ERROR"),"color: orange"):console.log.bind(console,"\x1B[31m",en("ERROR"))),t<=br.warn&&(X.warn=console.warn?console.warn.bind(console,en("WARN"),"color: orange"):console.log.bind(console,"\x1B[33m",en("WARN"))),t<=br.info&&(X.info=console.info?console.info.bind(console,en("INFO"),"color: lightblue"):console.log.bind(console,"\x1B[34m",en("INFO"))),t<=br.debug&&(X.debug=console.debug?console.debug.bind(console,en("DEBUG"),"color: lightgreen"):console.log.bind(console,"\x1B[32m",en("DEBUG"))),t<=br.trace&&(X.trace=console.debug?console.debug.bind(console,en("TRACE"),"color: lightgreen"):console.log.bind(console,"\x1B[32m",en("TRACE")))},"setLogLevel"),en=x(e=>`%c${G$().format("ss.SSS")} : ${e} : `,"format");const cu={min:{r:0,g:0,b:0,s:0,l:0,a:0},max:{r:255,g:255,b:255,h:360,s:100,l:100,a:1},clamp:{r:e=>e>=255?255:e<0?0:e,g:e=>e>=255?255:e<0?0:e,b:e=>e>=255?255:e<0?0:e,h:e=>e%360,s:e=>e>=100?100:e<0?0:e,l:e=>e>=100?100:e<0?0:e,a:e=>e>=1?1:e<0?0:e},toLinear:e=>{const t=e/255;return e>.03928?Math.pow((t+.055)/1.055,2.4):t/12.92},hue2rgb:(e,t,i)=>(i<0&&(i+=1),i>1&&(i-=1),i<1/6?e+(t-e)*6*i:i<1/2?t:i<2/3?e+(t-e)*(2/3-i)*6:e),hsl2rgb:({h:e,s:t,l:i},n)=>{if(!t)return i*2.55;e/=360,t/=100,i/=100;const r=i<.5?i*(1+t):i+t-i*t,s=2*i-r;switch(n){case"r":return cu.hue2rgb(s,r,e+1/3)*255;case"g":return cu.hue2rgb(s,r,e)*255;case"b":return cu.hue2rgb(s,r,e-1/3)*255}},rgb2hsl:({r:e,g:t,b:i},n)=>{e/=255,t/=255,i/=255;const r=Math.max(e,t,i),s=Math.min(e,t,i),o=(r+s)/2;if(n==="l")return o*100;if(r===s)return 0;const a=r-s,l=o>.5?a/(2-r-s):a/(r+s);if(n==="s")return l*100;switch(r){case e:return((t-i)/a+(t<i?6:0))*60;case t:return((i-e)/a+2)*60;case i:return((e-t)/a+4)*60;default:return-1}}},j$={clamp:(e,t,i)=>t>i?Math.min(t,Math.max(i,e)):Math.min(i,Math.max(t,e)),round:e=>Math.round(e*1e10)/1e10},H$={dec2hex:e=>{const t=Math.round(e).toString(16);return t.length>1?t:`0${t}`}},Ft={channel:cu,lang:j$,unit:H$},as={};for(let e=0;e<=255;e++)as[e]=Ft.unit.dec2hex(e);const si={ALL:0,RGB:1,HSL:2};class V${constructor(){this.type=si.ALL}get(){return this.type}set(t){if(this.type&&this.type!==t)throw new Error("Cannot change both RGB and HSL channels at the same time");this.type=t}reset(){this.type=si.ALL}is(t){return this.type===t}}class U${constructor(t,i){this.color=i,this.changed=!1,this.data=t,this.type=new V$}set(t,i){return this.color=i,this.changed=!1,this.data=t,this.type.type=si.ALL,this}_ensureHSL(){const t=this.data,{h:i,s:n,l:r}=t;i===void 0&&(t.h=Ft.channel.rgb2hsl(t,"h")),n===void 0&&(t.s=Ft.channel.rgb2hsl(t,"s")),r===void 0&&(t.l=Ft.channel.rgb2hsl(t,"l"))}_ensureRGB(){const t=this.data,{r:i,g:n,b:r}=t;i===void 0&&(t.r=Ft.channel.hsl2rgb(t,"r")),n===void 0&&(t.g=Ft.channel.hsl2rgb(t,"g")),r===void 0&&(t.b=Ft.channel.hsl2rgb(t,"b"))}get r(){const t=this.data,i=t.r;return!this.type.is(si.HSL)&&i!==void 0?i:(this._ensureHSL(),Ft.channel.hsl2rgb(t,"r"))}get g(){const t=this.data,i=t.g;return!this.type.is(si.HSL)&&i!==void 0?i:(this._ensureHSL(),Ft.channel.hsl2rgb(t,"g"))}get b(){const t=this.data,i=t.b;return!this.type.is(si.HSL)&&i!==void 0?i:(this._ensureHSL(),Ft.channel.hsl2rgb(t,"b"))}get h(){const t=this.data,i=t.h;return!this.type.is(si.RGB)&&i!==void 0?i:(this._ensureRGB(),Ft.channel.rgb2hsl(t,"h"))}get s(){const t=this.data,i=t.s;return!this.type.is(si.RGB)&&i!==void 0?i:(this._ensureRGB(),Ft.channel.rgb2hsl(t,"s"))}get l(){const t=this.data,i=t.l;return!this.type.is(si.RGB)&&i!==void 0?i:(this._ensureRGB(),Ft.channel.rgb2hsl(t,"l"))}get a(){return this.data.a}set r(t){this.type.set(si.RGB),this.changed=!0,this.data.r=t}set g(t){this.type.set(si.RGB),this.changed=!0,this.data.g=t}set b(t){this.type.set(si.RGB),this.changed=!0,this.data.b=t}set h(t){this.type.set(si.HSL),this.changed=!0,this.data.h=t}set s(t){this.type.set(si.HSL),this.changed=!0,this.data.s=t}set l(t){this.type.set(si.HSL),this.changed=!0,this.data.l=t}set a(t){this.changed=!0,this.data.a=t}}const Tf=new U$({r:0,g:0,b:0,a:0},"transparent"),xa={re:/^#((?:[a-f0-9]{2}){2,4}|[a-f0-9]{3})$/i,parse:e=>{if(e.charCodeAt(0)!==35)return;const t=e.match(xa.re);if(!t)return;const i=t[1],n=parseInt(i,16),r=i.length,s=r%4===0,o=r>4,a=o?1:17,l=o?8:4,c=s?0:-1,h=o?255:15;return Tf.set({r:(n>>l*(c+3)&h)*a,g:(n>>l*(c+2)&h)*a,b:(n>>l*(c+1)&h)*a,a:s?(n&h)*a/255:1},e)},stringify:e=>{const{r:t,g:i,b:n,a:r}=e;return r<1?`#${as[Math.round(t)]}${as[Math.round(i)]}${as[Math.round(n)]}${as[Math.round(r*255)]}`:`#${as[Math.round(t)]}${as[Math.round(i)]}${as[Math.round(n)]}`}},so={re:/^hsla?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(?:deg|grad|rad|turn)?)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(%)?))?\s*?\)$/i,hueRe:/^(.+?)(deg|grad|rad|turn)$/i,_hue2deg:e=>{const t=e.match(so.hueRe);if(t){const[,i,n]=t;switch(n){case"grad":return Ft.channel.clamp.h(parseFloat(i)*.9);case"rad":return Ft.channel.clamp.h(parseFloat(i)*180/Math.PI);case"turn":return Ft.channel.clamp.h(parseFloat(i)*360)}}return Ft.channel.clamp.h(parseFloat(e))},parse:e=>{const t=e.charCodeAt(0);if(t!==104&&t!==72)return;const i=e.match(so.re);if(!i)return;const[,n,r,s,o,a]=i;return Tf.set({h:so._hue2deg(n),s:Ft.channel.clamp.s(parseFloat(r)),l:Ft.channel.clamp.l(parseFloat(s)),a:o?Ft.channel.clamp.a(a?parseFloat(o)/100:parseFloat(o)):1},e)},stringify:e=>{const{h:t,s:i,l:n,a:r}=e;return r<1?`hsla(${Ft.lang.round(t)}, ${Ft.lang.round(i)}%, ${Ft.lang.round(n)}%, ${r})`:`hsl(${Ft.lang.round(t)}, ${Ft.lang.round(i)}%, ${Ft.lang.round(n)}%)`}},nc={colors:{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyanaqua:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",transparent:"#00000000",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},parse:e=>{e=e.toLowerCase();const t=nc.colors[e];if(t)return xa.parse(t)},stringify:e=>{const t=xa.stringify(e);for(const i in nc.colors)if(nc.colors[i]===t)return i}},Nl={re:/^rgba?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?)))?\s*?\)$/i,parse:e=>{const t=e.charCodeAt(0);if(t!==114&&t!==82)return;const i=e.match(Nl.re);if(!i)return;const[,n,r,s,o,a,l,c,h]=i;return Tf.set({r:Ft.channel.clamp.r(r?parseFloat(n)*2.55:parseFloat(n)),g:Ft.channel.clamp.g(o?parseFloat(s)*2.55:parseFloat(s)),b:Ft.channel.clamp.b(l?parseFloat(a)*2.55:parseFloat(a)),a:c?Ft.channel.clamp.a(h?parseFloat(c)/100:parseFloat(c)):1},e)},stringify:e=>{const{r:t,g:i,b:n,a:r}=e;return r<1?`rgba(${Ft.lang.round(t)}, ${Ft.lang.round(i)}, ${Ft.lang.round(n)}, ${Ft.lang.round(r)})`:`rgb(${Ft.lang.round(t)}, ${Ft.lang.round(i)}, ${Ft.lang.round(n)})`}},ar={format:{keyword:nc,hex:xa,rgb:Nl,rgba:Nl,hsl:so,hsla:so},parse:e=>{if(typeof e!="string")return e;const t=xa.parse(e)||Nl.parse(e)||so.parse(e)||nc.parse(e);if(t)return t;throw new Error(`Unsupported color format: "${e}"`)},stringify:e=>!e.changed&&e.color?e.color:e.type.is(si.HSL)||e.data.r===void 0?so.stringify(e):e.a<1||!Number.isInteger(e.r)||!Number.isInteger(e.g)||!Number.isInteger(e.b)?Nl.stringify(e):xa.stringify(e)},ZS=(e,t)=>{const i=ar.parse(e);for(const n in t)i[n]=Ft.channel.clamp[n](t[n]);return ar.stringify(i)},rc=(e,t,i=0,n=1)=>{if(typeof e!="number")return ZS(e,{a:t});const r=Tf.set({r:Ft.channel.clamp.r(e),g:Ft.channel.clamp.g(t),b:Ft.channel.clamp.b(i),a:Ft.channel.clamp.a(n)});return ar.stringify(r)},q$=e=>{const{r:t,g:i,b:n}=ar.parse(e),r=.2126*Ft.channel.toLinear(t)+.7152*Ft.channel.toLinear(i)+.0722*Ft.channel.toLinear(n);return Ft.lang.round(r)},Y$=e=>q$(e)>=.5,lh=e=>!Y$(e),JS=(e,t,i)=>{const n=ar.parse(e),r=n[t],s=Ft.channel.clamp[t](r+i);return r!==s&&(n[t]=s),ar.stringify(n)},ft=(e,t)=>JS(e,"l",t),Tt=(e,t)=>JS(e,"l",-t),z=(e,t)=>{const i=ar.parse(e),n={};for(const r in t)t[r]&&(n[r]=i[r]+t[r]);return ZS(e,n)},X$=(e,t,i=50)=>{const{r:n,g:r,b:s,a:o}=ar.parse(e),{r:a,g:l,b:c,a:h}=ar.parse(t),u=i/100,d=u*2-1,f=o-h,p=((d*f===-1?d:(d+f)/(1+d*f))+1)/2,m=1-p,y=n*p+a*m,_=r*p+l*m,C=s*p+c*m,b=o*u+h*(1-u);return rc(y,_,C,b)},lt=(e,t=100)=>{const i=ar.parse(e);return i.r=255-i.r,i.g=255-i.g,i.b=255-i.b,X$(i,e,t)};const{entries:QS,setPrototypeOf:KC,isFrozen:K$,getPrototypeOf:Z$,getOwnPropertyDescriptor:J$}=Object;let{freeze:Ri,seal:un,create:nm}=Object,{apply:rm,construct:sm}=typeof Reflect<"u"&&Reflect;Ri||(Ri=function(t){return t});un||(un=function(t){return t});rm||(rm=function(t,i){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];return t.apply(i,r)});sm||(sm=function(t){for(var i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];return new t(...n)});const Wh=Ai(Array.prototype.forEach),Q$=Ai(Array.prototype.lastIndexOf),ZC=Ai(Array.prototype.pop),xl=Ai(Array.prototype.push),t5=Ai(Array.prototype.splice),hu=Ai(String.prototype.toLowerCase),Xg=Ai(String.prototype.toString),Kg=Ai(String.prototype.match),Cl=Ai(String.prototype.replace),e5=Ai(String.prototype.indexOf),i5=Ai(String.prototype.trim),pn=Ai(Object.prototype.hasOwnProperty),yi=Ai(RegExp.prototype.test),bl=n5(TypeError);function Ai(e){return function(t){t instanceof RegExp&&(t.lastIndex=0);for(var i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];return rm(e,t,n)}}function n5(e){return function(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return sm(e,i)}}function jt(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:hu;KC&&KC(e,null);let n=t.length;for(;n--;){let r=t[n];if(typeof r=="string"){const s=i(r);s!==r&&(K$(t)||(t[n]=s),r=s)}e[r]=!0}return e}function r5(e){for(let t=0;t<e.length;t++)pn(e,t)||(e[t]=null);return e}function jn(e){const t=nm(null);for(const[i,n]of QS(e))pn(e,i)&&(Array.isArray(n)?t[i]=r5(n):n&&typeof n=="object"&&n.constructor===Object?t[i]=jn(n):t[i]=n);return t}function vl(e,t){for(;e!==null;){const n=J$(e,t);if(n){if(n.get)return Ai(n.get);if(typeof n.value=="function")return Ai(n.value)}e=Z$(e)}function i(){return null}return i}const JC=Ri(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Zg=Ri(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Jg=Ri(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),s5=Ri(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Qg=Ri(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),o5=Ri(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),QC=Ri(["#text"]),t1=Ri(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),tp=Ri(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),e1=Ri(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),jh=Ri(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),a5=un(/\{\{[\w\W]*|[\w\W]*\}\}/gm),l5=un(/<%[\w\W]*|[\w\W]*%>/gm),c5=un(/\$\{[\w\W]*/gm),h5=un(/^data-[\-\w.\u00B7-\uFFFF]+$/),u5=un(/^aria-[\-\w]+$/),t2=un(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),d5=un(/^(?:\w+script|data):/i),f5=un(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),e2=un(/^html$/i),g5=un(/^[a-z][.\w]*(-[.\w]+)+$/i);var i1=Object.freeze({__proto__:null,ARIA_ATTR:u5,ATTR_WHITESPACE:f5,CUSTOM_ELEMENT:g5,DATA_ATTR:h5,DOCTYPE_NAME:e2,ERB_EXPR:l5,IS_ALLOWED_URI:t2,IS_SCRIPT_OR_DATA:d5,MUSTACHE_EXPR:a5,TMPLIT_EXPR:c5});const wl={element:1,text:3,progressingInstruction:7,comment:8,document:9},p5=function(){return typeof window>"u"?null:window},m5=function(t,i){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let n=null;const r="data-tt-policy-suffix";i&&i.hasAttribute(r)&&(n=i.getAttribute(r));const s="dompurify"+(n?"#"+n:"");try{return t.createPolicy(s,{createHTML(o){return o},createScriptURL(o){return o}})}catch{return console.warn("TrustedTypes policy "+s+" could not be created."),null}},n1=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function i2(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:p5();const t=St=>i2(St);if(t.version="3.3.1",t.removed=[],!e||!e.document||e.document.nodeType!==wl.document||!e.Element)return t.isSupported=!1,t;let{document:i}=e;const n=i,r=n.currentScript,{DocumentFragment:s,HTMLTemplateElement:o,Node:a,Element:l,NodeFilter:c,NamedNodeMap:h=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:u,DOMParser:d,trustedTypes:f}=e,g=l.prototype,p=vl(g,"cloneNode"),m=vl(g,"remove"),y=vl(g,"nextSibling"),_=vl(g,"childNodes"),C=vl(g,"parentNode");if(typeof o=="function"){const St=i.createElement("template");St.content&&St.content.ownerDocument&&(i=St.content.ownerDocument)}let b,v="";const{implementation:S,createNodeIterator:w,createDocumentFragment:L,getElementsByTagName:A}=i,{importNode:B}=n;let O=n1();t.isSupported=typeof QS=="function"&&typeof C=="function"&&S&&S.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:F,ERB_EXPR:R,TMPLIT_EXPR:T,DATA_ATTR:P,ARIA_ATTR:E,IS_SCRIPT_OR_DATA:D,ATTR_WHITESPACE:M,CUSTOM_ELEMENT:j}=i1;let{IS_ALLOWED_URI:Y}=i1,K=null;const G=jt({},[...JC,...Zg,...Jg,...Qg,...QC]);let Q=null;const ut=jt({},[...t1,...tp,...e1,...jh]);let at=Object.seal(nm(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),It=null,W=null;const et=Object.seal(nm(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let J=!0,it=!0,Rt=!1,k=!0,I=!1,$=!0,H=!1,U=!1,V=!1,ot=!1,st=!1,tt=!1,Z=!0,Ct=!1;const nt="user-content-";let _t=!0,wt=!1,Dt={},$t=null;const Vt=jt({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Le=null;const Me=jt({},["audio","video","img","source","image","track"]);let Ve=null;const pi=jt({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Ki="http://www.w3.org/1998/Math/MathML",Nn="http://www.w3.org/2000/svg",he="http://www.w3.org/1999/xhtml";let Se=he,dr=!1,Kr=null;const al=jt({},[Ki,Nn,he],Xg);let $n=jt({},["mi","mo","mn","ms","mtext"]),zn=jt({},["annotation-xml"]);const Ns=jt({},["title","style","font","a","script"]);let Zr=null;const _h=["application/xhtml+xml","text/html"],Li="text/html";let le=null,Be=null;const Zi=i.createElement("form"),mi=function(N){return N instanceof RegExp||N instanceof Function},Wi=function(){let N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Be&&Be===N)){if((!N||typeof N!="object")&&(N={}),N=jn(N),Zr=_h.indexOf(N.PARSER_MEDIA_TYPE)===-1?Li:N.PARSER_MEDIA_TYPE,le=Zr==="application/xhtml+xml"?Xg:hu,K=pn(N,"ALLOWED_TAGS")?jt({},N.ALLOWED_TAGS,le):G,Q=pn(N,"ALLOWED_ATTR")?jt({},N.ALLOWED_ATTR,le):ut,Kr=pn(N,"ALLOWED_NAMESPACES")?jt({},N.ALLOWED_NAMESPACES,Xg):al,Ve=pn(N,"ADD_URI_SAFE_ATTR")?jt(jn(pi),N.ADD_URI_SAFE_ATTR,le):pi,Le=pn(N,"ADD_DATA_URI_TAGS")?jt(jn(Me),N.ADD_DATA_URI_TAGS,le):Me,$t=pn(N,"FORBID_CONTENTS")?jt({},N.FORBID_CONTENTS,le):Vt,It=pn(N,"FORBID_TAGS")?jt({},N.FORBID_TAGS,le):jn({}),W=pn(N,"FORBID_ATTR")?jt({},N.FORBID_ATTR,le):jn({}),Dt=pn(N,"USE_PROFILES")?N.USE_PROFILES:!1,J=N.ALLOW_ARIA_ATTR!==!1,it=N.ALLOW_DATA_ATTR!==!1,Rt=N.ALLOW_UNKNOWN_PROTOCOLS||!1,k=N.ALLOW_SELF_CLOSE_IN_ATTR!==!1,I=N.SAFE_FOR_TEMPLATES||!1,$=N.SAFE_FOR_XML!==!1,H=N.WHOLE_DOCUMENT||!1,ot=N.RETURN_DOM||!1,st=N.RETURN_DOM_FRAGMENT||!1,tt=N.RETURN_TRUSTED_TYPE||!1,V=N.FORCE_BODY||!1,Z=N.SANITIZE_DOM!==!1,Ct=N.SANITIZE_NAMED_PROPS||!1,_t=N.KEEP_CONTENT!==!1,wt=N.IN_PLACE||!1,Y=N.ALLOWED_URI_REGEXP||t2,Se=N.NAMESPACE||he,$n=N.MATHML_TEXT_INTEGRATION_POINTS||$n,zn=N.HTML_INTEGRATION_POINTS||zn,at=N.CUSTOM_ELEMENT_HANDLING||{},N.CUSTOM_ELEMENT_HANDLING&&mi(N.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(at.tagNameCheck=N.CUSTOM_ELEMENT_HANDLING.tagNameCheck),N.CUSTOM_ELEMENT_HANDLING&&mi(N.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(at.attributeNameCheck=N.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),N.CUSTOM_ELEMENT_HANDLING&&typeof N.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(at.allowCustomizedBuiltInElements=N.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),I&&(it=!1),st&&(ot=!0),Dt&&(K=jt({},QC),Q=[],Dt.html===!0&&(jt(K,JC),jt(Q,t1)),Dt.svg===!0&&(jt(K,Zg),jt(Q,tp),jt(Q,jh)),Dt.svgFilters===!0&&(jt(K,Jg),jt(Q,tp),jt(Q,jh)),Dt.mathMl===!0&&(jt(K,Qg),jt(Q,e1),jt(Q,jh))),N.ADD_TAGS&&(typeof N.ADD_TAGS=="function"?et.tagCheck=N.ADD_TAGS:(K===G&&(K=jn(K)),jt(K,N.ADD_TAGS,le))),N.ADD_ATTR&&(typeof N.ADD_ATTR=="function"?et.attributeCheck=N.ADD_ATTR:(Q===ut&&(Q=jn(Q)),jt(Q,N.ADD_ATTR,le))),N.ADD_URI_SAFE_ATTR&&jt(Ve,N.ADD_URI_SAFE_ATTR,le),N.FORBID_CONTENTS&&($t===Vt&&($t=jn($t)),jt($t,N.FORBID_CONTENTS,le)),N.ADD_FORBID_CONTENTS&&($t===Vt&&($t=jn($t)),jt($t,N.ADD_FORBID_CONTENTS,le)),_t&&(K["#text"]=!0),H&&jt(K,["html","head","body"]),K.table&&(jt(K,["tbody"]),delete It.tbody),N.TRUSTED_TYPES_POLICY){if(typeof N.TRUSTED_TYPES_POLICY.createHTML!="function")throw bl('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof N.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw bl('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');b=N.TRUSTED_TYPES_POLICY,v=b.createHTML("")}else b===void 0&&(b=m5(f,r)),b!==null&&typeof v=="string"&&(v=b.createHTML(""));Ri&&Ri(N),Be=N}},Ji=jt({},[...Zg,...Jg,...s5]),ge=jt({},[...Qg,...o5]),Ye=function(N){let rt=C(N);(!rt||!rt.tagName)&&(rt={namespaceURI:Se,tagName:"template"});const xt=hu(N.tagName),ye=hu(rt.tagName);return Kr[N.namespaceURI]?N.namespaceURI===Nn?rt.namespaceURI===he?xt==="svg":rt.namespaceURI===Ki?xt==="svg"&&(ye==="annotation-xml"||$n[ye]):!!Ji[xt]:N.namespaceURI===Ki?rt.namespaceURI===he?xt==="math":rt.namespaceURI===Nn?xt==="math"&&zn[ye]:!!ge[xt]:N.namespaceURI===he?rt.namespaceURI===Nn&&!zn[ye]||rt.namespaceURI===Ki&&!$n[ye]?!1:!ge[xt]&&(Ns[xt]||!Ji[xt]):!!(Zr==="application/xhtml+xml"&&Kr[N.namespaceURI]):!1},Ie=function(N){xl(t.removed,{element:N});try{C(N).removeChild(N)}catch{m(N)}},fr=function(N,rt){try{xl(t.removed,{attribute:rt.getAttributeNode(N),from:rt})}catch{xl(t.removed,{attribute:null,from:rt})}if(rt.removeAttribute(N),N==="is")if(ot||st)try{Ie(rt)}catch{}else try{rt.setAttribute(N,"")}catch{}},E_=function(N){let rt=null,xt=null;if(V)N="<remove></remove>"+N;else{const Pe=Kg(N,/^[\r\n\t ]+/);xt=Pe&&Pe[0]}Zr==="application/xhtml+xml"&&Se===he&&(N='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+N+"</body></html>");const ye=b?b.createHTML(N):N;if(Se===he)try{rt=new d().parseFromString(ye,Zr)}catch{}if(!rt||!rt.documentElement){rt=S.createDocument(Se,"template",null);try{rt.documentElement.innerHTML=dr?v:ye}catch{}}const ii=rt.body||rt.documentElement;return N&&xt&&ii.insertBefore(i.createTextNode(xt),ii.childNodes[0]||null),Se===he?A.call(rt,H?"html":"body")[0]:H?rt.documentElement:ii},k_=function(N){return w.call(N.ownerDocument||N,N,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT|c.SHOW_PROCESSING_INSTRUCTION|c.SHOW_CDATA_SECTION,null)},Qf=function(N){return N instanceof u&&(typeof N.nodeName!="string"||typeof N.textContent!="string"||typeof N.removeChild!="function"||!(N.attributes instanceof h)||typeof N.removeAttribute!="function"||typeof N.setAttribute!="function"||typeof N.namespaceURI!="string"||typeof N.insertBefore!="function"||typeof N.hasChildNodes!="function")},R_=function(N){return typeof a=="function"&&N instanceof a};function gr(St,N,rt){Wh(St,xt=>{xt.call(t,N,rt,Be)})}const A_=function(N){let rt=null;if(gr(O.beforeSanitizeElements,N,null),Qf(N))return Ie(N),!0;const xt=le(N.nodeName);if(gr(O.uponSanitizeElement,N,{tagName:xt,allowedTags:K}),$&&N.hasChildNodes()&&!R_(N.firstElementChild)&&yi(/<[/\w!]/g,N.innerHTML)&&yi(/<[/\w!]/g,N.textContent)||N.nodeType===wl.progressingInstruction||$&&N.nodeType===wl.comment&&yi(/<[/\w]/g,N.data))return Ie(N),!0;if(!(et.tagCheck instanceof Function&&et.tagCheck(xt))&&(!K[xt]||It[xt])){if(!It[xt]&&M_(xt)&&(at.tagNameCheck instanceof RegExp&&yi(at.tagNameCheck,xt)||at.tagNameCheck instanceof Function&&at.tagNameCheck(xt)))return!1;if(_t&&!$t[xt]){const ye=C(N)||N.parentNode,ii=_(N)||N.childNodes;if(ii&&ye){const Pe=ii.length;for(let Mi=Pe-1;Mi>=0;--Mi){const pr=p(ii[Mi],!0);pr.__removalCount=(N.__removalCount||0)+1,ye.insertBefore(pr,y(N))}}}return Ie(N),!0}return N instanceof l&&!Ye(N)||(xt==="noscript"||xt==="noembed"||xt==="noframes")&&yi(/<\/no(script|embed|frames)/i,N.innerHTML)?(Ie(N),!0):(I&&N.nodeType===wl.text&&(rt=N.textContent,Wh([F,R,T],ye=>{rt=Cl(rt,ye," ")}),N.textContent!==rt&&(xl(t.removed,{element:N.cloneNode()}),N.textContent=rt)),gr(O.afterSanitizeElements,N,null),!1)},L_=function(N,rt,xt){if(Z&&(rt==="id"||rt==="name")&&(xt in i||xt in Zi))return!1;if(!(it&&!W[rt]&&yi(P,rt))){if(!(J&&yi(E,rt))){if(!(et.attributeCheck instanceof Function&&et.attributeCheck(rt,N))){if(!Q[rt]||W[rt]){if(!(M_(N)&&(at.tagNameCheck instanceof RegExp&&yi(at.tagNameCheck,N)||at.tagNameCheck instanceof Function&&at.tagNameCheck(N))&&(at.attributeNameCheck instanceof RegExp&&yi(at.attributeNameCheck,rt)||at.attributeNameCheck instanceof Function&&at.attributeNameCheck(rt,N))||rt==="is"&&at.allowCustomizedBuiltInElements&&(at.tagNameCheck instanceof RegExp&&yi(at.tagNameCheck,xt)||at.tagNameCheck instanceof Function&&at.tagNameCheck(xt))))return!1}else if(!Ve[rt]){if(!yi(Y,Cl(xt,M,""))){if(!((rt==="src"||rt==="xlink:href"||rt==="href")&&N!=="script"&&e5(xt,"data:")===0&&Le[N])){if(!(Rt&&!yi(D,Cl(xt,M,"")))){if(xt)return!1}}}}}}}return!0},M_=function(N){return N!=="annotation-xml"&&Kg(N,j)},I_=function(N){gr(O.beforeSanitizeAttributes,N,null);const{attributes:rt}=N;if(!rt||Qf(N))return;const xt={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Q,forceKeepAttr:void 0};let ye=rt.length;for(;ye--;){const ii=rt[ye],{name:Pe,namespaceURI:Mi,value:pr}=ii,$o=le(Pe),tg=pr;let Xe=Pe==="value"?tg:i5(tg);if(xt.attrName=$o,xt.attrValue=Xe,xt.keepAttr=!0,xt.forceKeepAttr=void 0,gr(O.uponSanitizeAttribute,N,xt),Xe=xt.attrValue,Ct&&($o==="id"||$o==="name")&&(fr(Pe,N),Xe=nt+Xe),$&&yi(/((--!?|])>)|<\/(style|title|textarea)/i,Xe)){fr(Pe,N);continue}if($o==="attributename"&&Kg(Xe,"href")){fr(Pe,N);continue}if(xt.forceKeepAttr)continue;if(!xt.keepAttr){fr(Pe,N);continue}if(!k&&yi(/\/>/i,Xe)){fr(Pe,N);continue}I&&Wh([F,R,T],F_=>{Xe=Cl(Xe,F_," ")});const P_=le(N.nodeName);if(!L_(P_,$o,Xe)){fr(Pe,N);continue}if(b&&typeof f=="object"&&typeof f.getAttributeType=="function"&&!Mi)switch(f.getAttributeType(P_,$o)){case"TrustedHTML":{Xe=b.createHTML(Xe);break}case"TrustedScriptURL":{Xe=b.createScriptURL(Xe);break}}if(Xe!==tg)try{Mi?N.setAttributeNS(Mi,Pe,Xe):N.setAttribute(Pe,Xe),Qf(N)?Ie(N):ZC(t.removed)}catch{fr(Pe,N)}}gr(O.afterSanitizeAttributes,N,null)},gL=function St(N){let rt=null;const xt=k_(N);for(gr(O.beforeSanitizeShadowDOM,N,null);rt=xt.nextNode();)gr(O.uponSanitizeShadowNode,rt,null),A_(rt),I_(rt),rt.content instanceof s&&St(rt.content);gr(O.afterSanitizeShadowDOM,N,null)};return t.sanitize=function(St){let N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},rt=null,xt=null,ye=null,ii=null;if(dr=!St,dr&&(St="<!-->"),typeof St!="string"&&!R_(St))if(typeof St.toString=="function"){if(St=St.toString(),typeof St!="string")throw bl("dirty is not a string, aborting")}else throw bl("toString is not a function");if(!t.isSupported)return St;if(U||Wi(N),t.removed=[],typeof St=="string"&&(wt=!1),wt){if(St.nodeName){const pr=le(St.nodeName);if(!K[pr]||It[pr])throw bl("root node is forbidden and cannot be sanitized in-place")}}else if(St instanceof a)rt=E_("<!---->"),xt=rt.ownerDocument.importNode(St,!0),xt.nodeType===wl.element&&xt.nodeName==="BODY"||xt.nodeName==="HTML"?rt=xt:rt.appendChild(xt);else{if(!ot&&!I&&!H&&St.indexOf("<")===-1)return b&&tt?b.createHTML(St):St;if(rt=E_(St),!rt)return ot?null:tt?v:""}rt&&V&&Ie(rt.firstChild);const Pe=k_(wt?St:rt);for(;ye=Pe.nextNode();)A_(ye),I_(ye),ye.content instanceof s&&gL(ye.content);if(wt)return St;if(ot){if(st)for(ii=L.call(rt.ownerDocument);rt.firstChild;)ii.appendChild(rt.firstChild);else ii=rt;return(Q.shadowroot||Q.shadowrootmode)&&(ii=B.call(n,ii,!0)),ii}let Mi=H?rt.outerHTML:rt.innerHTML;return H&&K["!doctype"]&&rt.ownerDocument&&rt.ownerDocument.doctype&&rt.ownerDocument.doctype.name&&yi(e2,rt.ownerDocument.doctype.name)&&(Mi="<!DOCTYPE "+rt.ownerDocument.doctype.name+`>
`+Mi),I&&Wh([F,R,T],pr=>{Mi=Cl(Mi,pr," ")}),b&&tt?b.createHTML(Mi):Mi},t.setConfig=function(){let St=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Wi(St),U=!0},t.clearConfig=function(){Be=null,U=!1},t.isValidAttribute=function(St,N,rt){Be||Wi({});const xt=le(St),ye=le(N);return L_(xt,ye,rt)},t.addHook=function(St,N){typeof N=="function"&&xl(O[St],N)},t.removeHook=function(St,N){if(N!==void 0){const rt=Q$(O[St],N);return rt===-1?void 0:t5(O[St],rt,1)[0]}return ZC(O[St])},t.removeHooks=function(St){O[St]=[]},t.removeAllHooks=function(){O=n1()},t}var Ga=i2(),n2=/^-{3}\s*[\n\r](.*?)[\n\r]-{3}\s*[\n\r]+/s,sc=/%{2}{\s*(?:(\w+)\s*:|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,y5=/\s*%%.*\n/gm,va,r2=(va=class extends Error{constructor(t){super(t),this.name="UnknownDiagramError"}},x(va,"UnknownDiagramError"),va),So={},Sy=x(function(e,t){e=e.replace(n2,"").replace(sc,"").replace(y5,`
`);for(const[i,{detector:n}]of Object.entries(So))if(n(e,t))return i;throw new r2(`No diagram type detected matching given configuration for text: ${e}`)},"detectType"),om=x((...e)=>{for(const{id:t,detector:i,loader:n}of e)s2(t,i,n)},"registerLazyLoadedDiagrams"),s2=x((e,t,i)=>{So[e]&&X.warn(`Detector with key ${e} already exists. Overwriting.`),So[e]={detector:t,loader:i},X.debug(`Detector with key ${e} added${i?" with loader":""}`)},"addDetector"),_5=x(e=>So[e].loader,"getDiagramLoader"),am=x((e,t,{depth:i=2,clobber:n=!1}={})=>{const r={depth:i,clobber:n};return Array.isArray(t)&&!Array.isArray(e)?(t.forEach(s=>am(e,s,r)),e):Array.isArray(t)&&Array.isArray(e)?(t.forEach(s=>{e.includes(s)||e.push(s)}),e):e===void 0||i<=0?e!=null&&typeof e=="object"&&typeof t=="object"?Object.assign(e,t):t:(t!==void 0&&typeof e=="object"&&typeof t=="object"&&Object.keys(t).forEach(s=>{typeof t[s]=="object"&&(e[s]===void 0||typeof e[s]=="object")?(e[s]===void 0&&(e[s]=Array.isArray(t[s])?[]:{}),e[s]=am(e[s],t[s],{depth:i-1,clobber:n})):(n||typeof e[s]!="object"&&typeof t[s]!="object")&&(e[s]=t[s])}),e)},"assignWithDepth"),We=am,Ef="#ffffff",kf="#f2f2f2",Si=x((e,t)=>t?z(e,{s:-40,l:10}):z(e,{s:-40,l:-10}),"mkBorder"),wa,x5=(wa=class{constructor(){this.background="#f4f4f4",this.primaryColor="#fff4dd",this.noteBkgColor="#fff5ad",this.noteTextColor="#333",this.THEME_COLOR_LIMIT=12,this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px"}updateColors(){if(this.primaryTextColor=this.primaryTextColor||(this.darkMode?"#eee":"#333"),this.secondaryColor=this.secondaryColor||z(this.primaryColor,{h:-120}),this.tertiaryColor=this.tertiaryColor||z(this.primaryColor,{h:180,l:5}),this.primaryBorderColor=this.primaryBorderColor||Si(this.primaryColor,this.darkMode),this.secondaryBorderColor=this.secondaryBorderColor||Si(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=this.tertiaryBorderColor||Si(this.tertiaryColor,this.darkMode),this.noteBorderColor=this.noteBorderColor||Si(this.noteBkgColor,this.darkMode),this.noteBkgColor=this.noteBkgColor||"#fff5ad",this.noteTextColor=this.noteTextColor||"#333",this.secondaryTextColor=this.secondaryTextColor||lt(this.secondaryColor),this.tertiaryTextColor=this.tertiaryTextColor||lt(this.tertiaryColor),this.lineColor=this.lineColor||lt(this.background),this.arrowheadColor=this.arrowheadColor||lt(this.background),this.textColor=this.textColor||this.primaryTextColor,this.border2=this.border2||this.tertiaryBorderColor,this.nodeBkg=this.nodeBkg||this.primaryColor,this.mainBkg=this.mainBkg||this.primaryColor,this.nodeBorder=this.nodeBorder||this.primaryBorderColor,this.clusterBkg=this.clusterBkg||this.tertiaryColor,this.clusterBorder=this.clusterBorder||this.tertiaryBorderColor,this.defaultLinkColor=this.defaultLinkColor||this.lineColor,this.titleColor=this.titleColor||this.tertiaryTextColor,this.edgeLabelBackground=this.edgeLabelBackground||(this.darkMode?Tt(this.secondaryColor,30):this.secondaryColor),this.nodeTextColor=this.nodeTextColor||this.primaryTextColor,this.actorBorder=this.actorBorder||this.primaryBorderColor,this.actorBkg=this.actorBkg||this.mainBkg,this.actorTextColor=this.actorTextColor||this.primaryTextColor,this.actorLineColor=this.actorLineColor||this.actorBorder,this.labelBoxBkgColor=this.labelBoxBkgColor||this.actorBkg,this.signalColor=this.signalColor||this.textColor,this.signalTextColor=this.signalTextColor||this.textColor,this.labelBoxBorderColor=this.labelBoxBorderColor||this.actorBorder,this.labelTextColor=this.labelTextColor||this.actorTextColor,this.loopTextColor=this.loopTextColor||this.actorTextColor,this.activationBorderColor=this.activationBorderColor||Tt(this.secondaryColor,10),this.activationBkgColor=this.activationBkgColor||this.secondaryColor,this.sequenceNumberColor=this.sequenceNumberColor||lt(this.lineColor),this.sectionBkgColor=this.sectionBkgColor||this.tertiaryColor,this.altSectionBkgColor=this.altSectionBkgColor||"white",this.sectionBkgColor=this.sectionBkgColor||this.secondaryColor,this.sectionBkgColor2=this.sectionBkgColor2||this.primaryColor,this.excludeBkgColor=this.excludeBkgColor||"#eeeeee",this.taskBorderColor=this.taskBorderColor||this.primaryBorderColor,this.taskBkgColor=this.taskBkgColor||this.primaryColor,this.activeTaskBorderColor=this.activeTaskBorderColor||this.primaryColor,this.activeTaskBkgColor=this.activeTaskBkgColor||ft(this.primaryColor,23),this.gridColor=this.gridColor||"lightgrey",this.doneTaskBkgColor=this.doneTaskBkgColor||"lightgrey",this.doneTaskBorderColor=this.doneTaskBorderColor||"grey",this.critBorderColor=this.critBorderColor||"#ff8888",this.critBkgColor=this.critBkgColor||"red",this.todayLineColor=this.todayLineColor||"red",this.vertLineColor=this.vertLineColor||"navy",this.taskTextColor=this.taskTextColor||this.textColor,this.taskTextOutsideColor=this.taskTextOutsideColor||this.textColor,this.taskTextLightColor=this.taskTextLightColor||this.textColor,this.taskTextColor=this.taskTextColor||this.primaryTextColor,this.taskTextDarkColor=this.taskTextDarkColor||this.textColor,this.taskTextClickableColor=this.taskTextClickableColor||"#003163",this.personBorder=this.personBorder||this.primaryBorderColor,this.personBkg=this.personBkg||this.mainBkg,this.darkMode?(this.rowOdd=this.rowOdd||Tt(this.mainBkg,5)||"#ffffff",this.rowEven=this.rowEven||Tt(this.mainBkg,10)):(this.rowOdd=this.rowOdd||ft(this.mainBkg,75)||"#ffffff",this.rowEven=this.rowEven||ft(this.mainBkg,5)),this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||this.tertiaryColor,this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.specialStateColor=this.lineColor,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||z(this.primaryColor,{h:30}),this.cScale4=this.cScale4||z(this.primaryColor,{h:60}),this.cScale5=this.cScale5||z(this.primaryColor,{h:90}),this.cScale6=this.cScale6||z(this.primaryColor,{h:120}),this.cScale7=this.cScale7||z(this.primaryColor,{h:150}),this.cScale8=this.cScale8||z(this.primaryColor,{h:210,l:150}),this.cScale9=this.cScale9||z(this.primaryColor,{h:270}),this.cScale10=this.cScale10||z(this.primaryColor,{h:300}),this.cScale11=this.cScale11||z(this.primaryColor,{h:330}),this.darkMode)for(let i=0;i<this.THEME_COLOR_LIMIT;i++)this["cScale"+i]=Tt(this["cScale"+i],75);else for(let i=0;i<this.THEME_COLOR_LIMIT;i++)this["cScale"+i]=Tt(this["cScale"+i],25);for(let i=0;i<this.THEME_COLOR_LIMIT;i++)this["cScaleInv"+i]=this["cScaleInv"+i]||lt(this["cScale"+i]);for(let i=0;i<this.THEME_COLOR_LIMIT;i++)this.darkMode?this["cScalePeer"+i]=this["cScalePeer"+i]||ft(this["cScale"+i],10):this["cScalePeer"+i]=this["cScalePeer"+i]||Tt(this["cScale"+i],10);this.scaleLabelColor=this.scaleLabelColor||this.labelTextColor;for(let i=0;i<this.THEME_COLOR_LIMIT;i++)this["cScaleLabel"+i]=this["cScaleLabel"+i]||this.scaleLabelColor;const t=this.darkMode?-4:-1;for(let i=0;i<5;i++)this["surface"+i]=this["surface"+i]||z(this.mainBkg,{h:180,s:-15,l:t*(5+i*3)}),this["surfacePeer"+i]=this["surfacePeer"+i]||z(this.mainBkg,{h:180,s:-15,l:t*(8+i*3)});this.classText=this.classText||this.textColor,this.fillType0=this.fillType0||this.primaryColor,this.fillType1=this.fillType1||this.secondaryColor,this.fillType2=this.fillType2||z(this.primaryColor,{h:64}),this.fillType3=this.fillType3||z(this.secondaryColor,{h:64}),this.fillType4=this.fillType4||z(this.primaryColor,{h:-64}),this.fillType5=this.fillType5||z(this.secondaryColor,{h:-64}),this.fillType6=this.fillType6||z(this.primaryColor,{h:128}),this.fillType7=this.fillType7||z(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||z(this.primaryColor,{l:-10}),this.pie5=this.pie5||z(this.secondaryColor,{l:-10}),this.pie6=this.pie6||z(this.tertiaryColor,{l:-10}),this.pie7=this.pie7||z(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||z(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||z(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||z(this.primaryColor,{h:60,l:-20}),this.pie11=this.pie11||z(this.primaryColor,{h:-60,l:-20}),this.pie12=this.pie12||z(this.primaryColor,{h:120,l:-10}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.radar={axisColor:this.radar?.axisColor||this.lineColor,axisStrokeWidth:this.radar?.axisStrokeWidth||2,axisLabelFontSize:this.radar?.axisLabelFontSize||12,curveOpacity:this.radar?.curveOpacity||.5,curveStrokeWidth:this.radar?.curveStrokeWidth||2,graticuleColor:this.radar?.graticuleColor||"#DEDEDE",graticuleStrokeWidth:this.radar?.graticuleStrokeWidth||1,graticuleOpacity:this.radar?.graticuleOpacity||.3,legendBoxSize:this.radar?.legendBoxSize||12,legendFontSize:this.radar?.legendFontSize||12},this.archEdgeColor=this.archEdgeColor||"#777",this.archEdgeArrowColor=this.archEdgeArrowColor||"#777",this.archEdgeWidth=this.archEdgeWidth||"3",this.archGroupBorderColor=this.archGroupBorderColor||"#000",this.archGroupBorderWidth=this.archGroupBorderWidth||"2px",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||z(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||z(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||z(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||z(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||z(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||z(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||lh(this.quadrant1Fill)?ft(this.quadrant1Fill):Tt(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#FFF4DD,#FFD8B1,#FFA07A,#ECEFF1,#D6DBDF,#C3E0A8,#FFB6A4,#FFD74D,#738FA7,#FFFFF0"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?Tt(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||z(this.primaryColor,{h:-30}),this.git4=this.git4||z(this.primaryColor,{h:-60}),this.git5=this.git5||z(this.primaryColor,{h:-90}),this.git6=this.git6||z(this.primaryColor,{h:60}),this.git7=this.git7||z(this.primaryColor,{h:120}),this.darkMode?(this.git0=ft(this.git0,25),this.git1=ft(this.git1,25),this.git2=ft(this.git2,25),this.git3=ft(this.git3,25),this.git4=ft(this.git4,25),this.git5=ft(this.git5,25),this.git6=ft(this.git6,25),this.git7=ft(this.git7,25)):(this.git0=Tt(this.git0,25),this.git1=Tt(this.git1,25),this.git2=Tt(this.git2,25),this.git3=Tt(this.git3,25),this.git4=Tt(this.git4,25),this.git5=Tt(this.git5,25),this.git6=Tt(this.git6,25),this.git7=Tt(this.git7,25)),this.gitInv0=this.gitInv0||lt(this.git0),this.gitInv1=this.gitInv1||lt(this.git1),this.gitInv2=this.gitInv2||lt(this.git2),this.gitInv3=this.gitInv3||lt(this.git3),this.gitInv4=this.gitInv4||lt(this.git4),this.gitInv5=this.gitInv5||lt(this.git5),this.gitInv6=this.gitInv6||lt(this.git6),this.gitInv7=this.gitInv7||lt(this.git7),this.branchLabelColor=this.branchLabelColor||(this.darkMode?"black":this.labelTextColor),this.gitBranchLabel0=this.gitBranchLabel0||this.branchLabelColor,this.gitBranchLabel1=this.gitBranchLabel1||this.branchLabelColor,this.gitBranchLabel2=this.gitBranchLabel2||this.branchLabelColor,this.gitBranchLabel3=this.gitBranchLabel3||this.branchLabelColor,this.gitBranchLabel4=this.gitBranchLabel4||this.branchLabelColor,this.gitBranchLabel5=this.gitBranchLabel5||this.branchLabelColor,this.gitBranchLabel6=this.gitBranchLabel6||this.branchLabelColor,this.gitBranchLabel7=this.gitBranchLabel7||this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Ef,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||kf}calculate(t){if(typeof t!="object"){this.updateColors();return}const i=Object.keys(t);i.forEach(n=>{this[n]=t[n]}),this.updateColors(),i.forEach(n=>{this[n]=t[n]})}},x(wa,"Theme"),wa),C5=x(e=>{const t=new x5;return t.calculate(e),t},"getThemeVariables"),Sa,b5=(Sa=class{constructor(){this.background="#333",this.primaryColor="#1f2020",this.secondaryColor=ft(this.primaryColor,16),this.tertiaryColor=z(this.primaryColor,{h:-160}),this.primaryBorderColor=lt(this.background),this.secondaryBorderColor=Si(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=Si(this.tertiaryColor,this.darkMode),this.primaryTextColor=lt(this.primaryColor),this.secondaryTextColor=lt(this.secondaryColor),this.tertiaryTextColor=lt(this.tertiaryColor),this.lineColor=lt(this.background),this.textColor=lt(this.background),this.mainBkg="#1f2020",this.secondBkg="calculated",this.mainContrastColor="lightgrey",this.darkTextColor=ft(lt("#323D47"),10),this.lineColor="calculated",this.border1="#ccc",this.border2=rc(255,255,255,.25),this.arrowheadColor="calculated",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="#181818",this.textColor="#ccc",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#F9FFFE",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="calculated",this.activationBkgColor="calculated",this.sequenceNumberColor="black",this.sectionBkgColor=Tt("#EAE8D9",30),this.altSectionBkgColor="calculated",this.sectionBkgColor2="#EAE8D9",this.excludeBkgColor=Tt(this.sectionBkgColor,10),this.taskBorderColor=rc(255,255,255,70),this.taskBkgColor="calculated",this.taskTextColor="calculated",this.taskTextLightColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor=rc(255,255,255,50),this.activeTaskBkgColor="#81B1DB",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="grey",this.critBorderColor="#E83737",this.critBkgColor="#E83737",this.taskTextDarkColor="calculated",this.todayLineColor="#DB5757",this.vertLineColor="#00BFFF",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.rowOdd=this.rowOdd||ft(this.mainBkg,5)||"#ffffff",this.rowEven=this.rowEven||Tt(this.mainBkg,10),this.labelColor="calculated",this.errorBkgColor="#a44141",this.errorTextColor="#ddd"}updateColors(){this.secondBkg=ft(this.mainBkg,16),this.lineColor=this.mainContrastColor,this.arrowheadColor=this.mainContrastColor,this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.edgeLabelBackground=ft(this.labelBackground,25),this.actorBorder=this.border1,this.actorBkg=this.mainBkg,this.actorTextColor=this.mainContrastColor,this.actorLineColor=this.actorBorder,this.signalColor=this.mainContrastColor,this.signalTextColor=this.mainContrastColor,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.mainContrastColor,this.loopTextColor=this.mainContrastColor,this.noteBorderColor=this.secondaryBorderColor,this.noteBkgColor=this.secondBkg,this.noteTextColor=this.secondaryTextColor,this.activationBorderColor=this.border1,this.activationBkgColor=this.secondBkg,this.altSectionBkgColor=this.background,this.taskBkgColor=ft(this.mainBkg,23),this.taskTextColor=this.darkTextColor,this.taskTextLightColor=this.mainContrastColor,this.taskTextOutsideColor=this.taskTextLightColor,this.gridColor=this.mainContrastColor,this.doneTaskBkgColor=this.mainContrastColor,this.taskTextDarkColor=this.darkTextColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#555",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#f4f4f4",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=z(this.primaryColor,{h:64}),this.fillType3=z(this.secondaryColor,{h:64}),this.fillType4=z(this.primaryColor,{h:-64}),this.fillType5=z(this.secondaryColor,{h:-64}),this.fillType6=z(this.primaryColor,{h:128}),this.fillType7=z(this.secondaryColor,{h:128}),this.cScale1=this.cScale1||"#0b0000",this.cScale2=this.cScale2||"#4d1037",this.cScale3=this.cScale3||"#3f5258",this.cScale4=this.cScale4||"#4f2f1b",this.cScale5=this.cScale5||"#6e0a0a",this.cScale6=this.cScale6||"#3b0048",this.cScale7=this.cScale7||"#995a01",this.cScale8=this.cScale8||"#154706",this.cScale9=this.cScale9||"#161722",this.cScale10=this.cScale10||"#00296f",this.cScale11=this.cScale11||"#01629c",this.cScale12=this.cScale12||"#010029",this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||z(this.primaryColor,{h:30}),this.cScale4=this.cScale4||z(this.primaryColor,{h:60}),this.cScale5=this.cScale5||z(this.primaryColor,{h:90}),this.cScale6=this.cScale6||z(this.primaryColor,{h:120}),this.cScale7=this.cScale7||z(this.primaryColor,{h:150}),this.cScale8=this.cScale8||z(this.primaryColor,{h:210}),this.cScale9=this.cScale9||z(this.primaryColor,{h:270}),this.cScale10=this.cScale10||z(this.primaryColor,{h:300}),this.cScale11=this.cScale11||z(this.primaryColor,{h:330});for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleInv"+t]=this["cScaleInv"+t]||lt(this["cScale"+t]);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScalePeer"+t]=this["cScalePeer"+t]||ft(this["cScale"+t],10);for(let t=0;t<5;t++)this["surface"+t]=this["surface"+t]||z(this.mainBkg,{h:30,s:-30,l:-(-10+t*4)}),this["surfacePeer"+t]=this["surfacePeer"+t]||z(this.mainBkg,{h:30,s:-30,l:-(-7+t*4)});this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleLabel"+t]=this["cScaleLabel"+t]||this.scaleLabelColor;for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["pie"+t]=this["cScale"+t];this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||z(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||z(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||z(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||z(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||z(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||z(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||lh(this.quadrant1Fill)?ft(this.quadrant1Fill):Tt(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#3498db,#2ecc71,#e74c3c,#f1c40f,#bdc3c7,#ffffff,#34495e,#9b59b6,#1abc9c,#e67e22"},this.packet={startByteColor:this.primaryTextColor,endByteColor:this.primaryTextColor,labelColor:this.primaryTextColor,titleColor:this.primaryTextColor,blockStrokeColor:this.primaryTextColor,blockFillColor:this.background},this.radar={axisColor:this.radar?.axisColor||this.lineColor,axisStrokeWidth:this.radar?.axisStrokeWidth||2,axisLabelFontSize:this.radar?.axisLabelFontSize||12,curveOpacity:this.radar?.curveOpacity||.5,curveStrokeWidth:this.radar?.curveStrokeWidth||2,graticuleColor:this.radar?.graticuleColor||"#DEDEDE",graticuleStrokeWidth:this.radar?.graticuleStrokeWidth||1,graticuleOpacity:this.radar?.graticuleOpacity||.3,legendBoxSize:this.radar?.legendBoxSize||12,legendFontSize:this.radar?.legendFontSize||12},this.classText=this.primaryTextColor,this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?Tt(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=ft(this.secondaryColor,20),this.git1=ft(this.pie2||this.secondaryColor,20),this.git2=ft(this.pie3||this.tertiaryColor,20),this.git3=ft(this.pie4||z(this.primaryColor,{h:-30}),20),this.git4=ft(this.pie5||z(this.primaryColor,{h:-60}),20),this.git5=ft(this.pie6||z(this.primaryColor,{h:-90}),10),this.git6=ft(this.pie7||z(this.primaryColor,{h:60}),10),this.git7=ft(this.pie8||z(this.primaryColor,{h:120}),20),this.gitInv0=this.gitInv0||lt(this.git0),this.gitInv1=this.gitInv1||lt(this.git1),this.gitInv2=this.gitInv2||lt(this.git2),this.gitInv3=this.gitInv3||lt(this.git3),this.gitInv4=this.gitInv4||lt(this.git4),this.gitInv5=this.gitInv5||lt(this.git5),this.gitInv6=this.gitInv6||lt(this.git6),this.gitInv7=this.gitInv7||lt(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||lt(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||lt(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||ft(this.background,12),this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||ft(this.background,2),this.nodeBorder=this.nodeBorder||"#999"}calculate(t){if(typeof t!="object"){this.updateColors();return}const i=Object.keys(t);i.forEach(n=>{this[n]=t[n]}),this.updateColors(),i.forEach(n=>{this[n]=t[n]})}},x(Sa,"Theme"),Sa),v5=x(e=>{const t=new b5;return t.calculate(e),t},"getThemeVariables"),Ta,w5=(Ta=class{constructor(){this.background="#f4f4f4",this.primaryColor="#ECECFF",this.secondaryColor=z(this.primaryColor,{h:120}),this.secondaryColor="#ffffde",this.tertiaryColor=z(this.primaryColor,{h:-160}),this.primaryBorderColor=Si(this.primaryColor,this.darkMode),this.secondaryBorderColor=Si(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=Si(this.tertiaryColor,this.darkMode),this.primaryTextColor=lt(this.primaryColor),this.secondaryTextColor=lt(this.secondaryColor),this.tertiaryTextColor=lt(this.tertiaryColor),this.lineColor=lt(this.background),this.textColor=lt(this.background),this.background="white",this.mainBkg="#ECECFF",this.secondBkg="#ffffde",this.lineColor="#333333",this.border1="#9370DB",this.border2="#aaaa33",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="rgba(232,232,232, 0.8)",this.textColor="#333",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="calculated",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="calculated",this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor="calculated",this.taskTextOutsideColor=this.taskTextDarkColor,this.taskTextClickableColor="calculated",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBorderColor="calculated",this.critBkgColor="calculated",this.todayLineColor="calculated",this.vertLineColor="calculated",this.sectionBkgColor=rc(102,102,255,.49),this.altSectionBkgColor="white",this.sectionBkgColor2="#fff400",this.taskBorderColor="#534fbc",this.taskBkgColor="#8a90dd",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="#534fbc",this.activeTaskBkgColor="#bfc7ff",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.vertLineColor="navy",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.rowOdd="calculated",this.rowEven="calculated",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222",this.updateColors()}updateColors(){this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||z(this.primaryColor,{h:30}),this.cScale4=this.cScale4||z(this.primaryColor,{h:60}),this.cScale5=this.cScale5||z(this.primaryColor,{h:90}),this.cScale6=this.cScale6||z(this.primaryColor,{h:120}),this.cScale7=this.cScale7||z(this.primaryColor,{h:150}),this.cScale8=this.cScale8||z(this.primaryColor,{h:210}),this.cScale9=this.cScale9||z(this.primaryColor,{h:270}),this.cScale10=this.cScale10||z(this.primaryColor,{h:300}),this.cScale11=this.cScale11||z(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||Tt(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||Tt(this.tertiaryColor,40);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScale"+t]=Tt(this["cScale"+t],10),this["cScalePeer"+t]=this["cScalePeer"+t]||Tt(this["cScale"+t],25);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleInv"+t]=this["cScaleInv"+t]||z(this["cScale"+t],{h:180});for(let t=0;t<5;t++)this["surface"+t]=this["surface"+t]||z(this.mainBkg,{h:30,l:-(5+t*5)}),this["surfacePeer"+t]=this["surfacePeer"+t]||z(this.mainBkg,{h:30,l:-(7+t*5)});if(this.scaleLabelColor=this.scaleLabelColor!=="calculated"&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor,this.labelTextColor!=="calculated"){this.cScaleLabel0=this.cScaleLabel0||lt(this.labelTextColor),this.cScaleLabel3=this.cScaleLabel3||lt(this.labelTextColor);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleLabel"+t]=this["cScaleLabel"+t]||this.labelTextColor}this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.textColor,this.edgeLabelBackground=this.labelBackground,this.actorBorder=ft(this.border1,23),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.signalColor=this.textColor,this.signalTextColor=this.textColor,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.actorLineColor=this.actorBorder,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.rowOdd=this.rowOdd||ft(this.primaryColor,75)||"#ffffff",this.rowEven=this.rowEven||ft(this.primaryColor,1),this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=z(this.primaryColor,{h:64}),this.fillType3=z(this.secondaryColor,{h:64}),this.fillType4=z(this.primaryColor,{h:-64}),this.fillType5=z(this.secondaryColor,{h:-64}),this.fillType6=z(this.primaryColor,{h:128}),this.fillType7=z(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||z(this.tertiaryColor,{l:-40}),this.pie4=this.pie4||z(this.primaryColor,{l:-10}),this.pie5=this.pie5||z(this.secondaryColor,{l:-30}),this.pie6=this.pie6||z(this.tertiaryColor,{l:-20}),this.pie7=this.pie7||z(this.primaryColor,{h:60,l:-20}),this.pie8=this.pie8||z(this.primaryColor,{h:-60,l:-40}),this.pie9=this.pie9||z(this.primaryColor,{h:120,l:-40}),this.pie10=this.pie10||z(this.primaryColor,{h:60,l:-40}),this.pie11=this.pie11||z(this.primaryColor,{h:-90,l:-40}),this.pie12=this.pie12||z(this.primaryColor,{h:120,l:-30}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||z(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||z(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||z(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||z(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||z(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||z(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||lh(this.quadrant1Fill)?ft(this.quadrant1Fill):Tt(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.radar={axisColor:this.radar?.axisColor||this.lineColor,axisStrokeWidth:this.radar?.axisStrokeWidth||2,axisLabelFontSize:this.radar?.axisLabelFontSize||12,curveOpacity:this.radar?.curveOpacity||.5,curveStrokeWidth:this.radar?.curveStrokeWidth||2,graticuleColor:this.radar?.graticuleColor||"#DEDEDE",graticuleStrokeWidth:this.radar?.graticuleStrokeWidth||1,graticuleOpacity:this.radar?.graticuleOpacity||.3,legendBoxSize:this.radar?.legendBoxSize||12,legendFontSize:this.radar?.legendFontSize||12},this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#ECECFF,#8493A6,#FFC3A0,#DCDDE1,#B8E994,#D1A36F,#C3CDE6,#FFB6C1,#496078,#F8F3E3"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.labelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||z(this.primaryColor,{h:-30}),this.git4=this.git4||z(this.primaryColor,{h:-60}),this.git5=this.git5||z(this.primaryColor,{h:-90}),this.git6=this.git6||z(this.primaryColor,{h:60}),this.git7=this.git7||z(this.primaryColor,{h:120}),this.darkMode?(this.git0=ft(this.git0,25),this.git1=ft(this.git1,25),this.git2=ft(this.git2,25),this.git3=ft(this.git3,25),this.git4=ft(this.git4,25),this.git5=ft(this.git5,25),this.git6=ft(this.git6,25),this.git7=ft(this.git7,25)):(this.git0=Tt(this.git0,25),this.git1=Tt(this.git1,25),this.git2=Tt(this.git2,25),this.git3=Tt(this.git3,25),this.git4=Tt(this.git4,25),this.git5=Tt(this.git5,25),this.git6=Tt(this.git6,25),this.git7=Tt(this.git7,25)),this.gitInv0=this.gitInv0||Tt(lt(this.git0),25),this.gitInv1=this.gitInv1||lt(this.git1),this.gitInv2=this.gitInv2||lt(this.git2),this.gitInv3=this.gitInv3||lt(this.git3),this.gitInv4=this.gitInv4||lt(this.git4),this.gitInv5=this.gitInv5||lt(this.git5),this.gitInv6=this.gitInv6||lt(this.git6),this.gitInv7=this.gitInv7||lt(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||lt(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||lt(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Ef,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||kf}calculate(t){if(Object.keys(this).forEach(n=>{this[n]==="calculated"&&(this[n]=void 0)}),typeof t!="object"){this.updateColors();return}const i=Object.keys(t);i.forEach(n=>{this[n]=t[n]}),this.updateColors(),i.forEach(n=>{this[n]=t[n]})}},x(Ta,"Theme"),Ta),S5=x(e=>{const t=new w5;return t.calculate(e),t},"getThemeVariables"),Ea,T5=(Ea=class{constructor(){this.background="#f4f4f4",this.primaryColor="#cde498",this.secondaryColor="#cdffb2",this.background="white",this.mainBkg="#cde498",this.secondBkg="#cdffb2",this.lineColor="green",this.border1="#13540c",this.border2="#6eaa49",this.arrowheadColor="green",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.tertiaryColor=ft("#cde498",10),this.primaryBorderColor=Si(this.primaryColor,this.darkMode),this.secondaryBorderColor=Si(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=Si(this.tertiaryColor,this.darkMode),this.primaryTextColor=lt(this.primaryColor),this.secondaryTextColor=lt(this.secondaryColor),this.tertiaryTextColor=lt(this.primaryColor),this.lineColor=lt(this.background),this.textColor=lt(this.background),this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#333",this.edgeLabelBackground="#e8e8e8",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="calculated",this.signalColor="#333",this.signalTextColor="#333",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="#326932",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="#6eaa49",this.altSectionBkgColor="white",this.sectionBkgColor2="#6eaa49",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="#487e3a",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.vertLineColor="#00BFFF",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){this.actorBorder=Tt(this.mainBkg,20),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.actorLineColor=this.actorBorder,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||z(this.primaryColor,{h:30}),this.cScale4=this.cScale4||z(this.primaryColor,{h:60}),this.cScale5=this.cScale5||z(this.primaryColor,{h:90}),this.cScale6=this.cScale6||z(this.primaryColor,{h:120}),this.cScale7=this.cScale7||z(this.primaryColor,{h:150}),this.cScale8=this.cScale8||z(this.primaryColor,{h:210}),this.cScale9=this.cScale9||z(this.primaryColor,{h:270}),this.cScale10=this.cScale10||z(this.primaryColor,{h:300}),this.cScale11=this.cScale11||z(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||Tt(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||Tt(this.tertiaryColor,40);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScale"+t]=Tt(this["cScale"+t],10),this["cScalePeer"+t]=this["cScalePeer"+t]||Tt(this["cScale"+t],25);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleInv"+t]=this["cScaleInv"+t]||z(this["cScale"+t],{h:180});this.scaleLabelColor=this.scaleLabelColor!=="calculated"&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor;for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleLabel"+t]=this["cScaleLabel"+t]||this.scaleLabelColor;for(let t=0;t<5;t++)this["surface"+t]=this["surface"+t]||z(this.mainBkg,{h:30,s:-30,l:-(5+t*5)}),this["surfacePeer"+t]=this["surfacePeer"+t]||z(this.mainBkg,{h:30,s:-30,l:-(8+t*5)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.taskBorderColor=this.border1,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.rowOdd=this.rowOdd||ft(this.mainBkg,75)||"#ffffff",this.rowEven=this.rowEven||ft(this.mainBkg,20),this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=z(this.primaryColor,{h:64}),this.fillType3=z(this.secondaryColor,{h:64}),this.fillType4=z(this.primaryColor,{h:-64}),this.fillType5=z(this.secondaryColor,{h:-64}),this.fillType6=z(this.primaryColor,{h:128}),this.fillType7=z(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||z(this.primaryColor,{l:-30}),this.pie5=this.pie5||z(this.secondaryColor,{l:-30}),this.pie6=this.pie6||z(this.tertiaryColor,{h:40,l:-40}),this.pie7=this.pie7||z(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||z(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||z(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||z(this.primaryColor,{h:60,l:-50}),this.pie11=this.pie11||z(this.primaryColor,{h:-60,l:-50}),this.pie12=this.pie12||z(this.primaryColor,{h:120,l:-50}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||z(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||z(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||z(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||z(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||z(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||z(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||lh(this.quadrant1Fill)?ft(this.quadrant1Fill):Tt(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.packet={startByteColor:this.primaryTextColor,endByteColor:this.primaryTextColor,labelColor:this.primaryTextColor,titleColor:this.primaryTextColor,blockStrokeColor:this.primaryTextColor,blockFillColor:this.mainBkg},this.radar={axisColor:this.radar?.axisColor||this.lineColor,axisStrokeWidth:this.radar?.axisStrokeWidth||2,axisLabelFontSize:this.radar?.axisLabelFontSize||12,curveOpacity:this.radar?.curveOpacity||.5,curveStrokeWidth:this.radar?.curveStrokeWidth||2,graticuleColor:this.radar?.graticuleColor||"#DEDEDE",graticuleStrokeWidth:this.radar?.graticuleStrokeWidth||1,graticuleOpacity:this.radar?.graticuleOpacity||.3,legendBoxSize:this.radar?.legendBoxSize||12,legendFontSize:this.radar?.legendFontSize||12},this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#CDE498,#FF6B6B,#A0D2DB,#D7BDE2,#F0F0F0,#FFC3A0,#7FD8BE,#FF9A8B,#FAF3E0,#FFF176"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||z(this.primaryColor,{h:-30}),this.git4=this.git4||z(this.primaryColor,{h:-60}),this.git5=this.git5||z(this.primaryColor,{h:-90}),this.git6=this.git6||z(this.primaryColor,{h:60}),this.git7=this.git7||z(this.primaryColor,{h:120}),this.darkMode?(this.git0=ft(this.git0,25),this.git1=ft(this.git1,25),this.git2=ft(this.git2,25),this.git3=ft(this.git3,25),this.git4=ft(this.git4,25),this.git5=ft(this.git5,25),this.git6=ft(this.git6,25),this.git7=ft(this.git7,25)):(this.git0=Tt(this.git0,25),this.git1=Tt(this.git1,25),this.git2=Tt(this.git2,25),this.git3=Tt(this.git3,25),this.git4=Tt(this.git4,25),this.git5=Tt(this.git5,25),this.git6=Tt(this.git6,25),this.git7=Tt(this.git7,25)),this.gitInv0=this.gitInv0||lt(this.git0),this.gitInv1=this.gitInv1||lt(this.git1),this.gitInv2=this.gitInv2||lt(this.git2),this.gitInv3=this.gitInv3||lt(this.git3),this.gitInv4=this.gitInv4||lt(this.git4),this.gitInv5=this.gitInv5||lt(this.git5),this.gitInv6=this.gitInv6||lt(this.git6),this.gitInv7=this.gitInv7||lt(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||lt(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||lt(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Ef,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||kf}calculate(t){if(typeof t!="object"){this.updateColors();return}const i=Object.keys(t);i.forEach(n=>{this[n]=t[n]}),this.updateColors(),i.forEach(n=>{this[n]=t[n]})}},x(Ea,"Theme"),Ea),E5=x(e=>{const t=new T5;return t.calculate(e),t},"getThemeVariables"),ka,k5=(ka=class{constructor(){this.primaryColor="#eee",this.contrast="#707070",this.secondaryColor=ft(this.contrast,55),this.background="#ffffff",this.tertiaryColor=z(this.primaryColor,{h:-160}),this.primaryBorderColor=Si(this.primaryColor,this.darkMode),this.secondaryBorderColor=Si(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=Si(this.tertiaryColor,this.darkMode),this.primaryTextColor=lt(this.primaryColor),this.secondaryTextColor=lt(this.secondaryColor),this.tertiaryTextColor=lt(this.tertiaryColor),this.lineColor=lt(this.background),this.textColor=lt(this.background),this.mainBkg="#eee",this.secondBkg="calculated",this.lineColor="#666",this.border1="#999",this.border2="calculated",this.note="#ffa",this.text="#333",this.critical="#d42",this.done="#bbb",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="white",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor=this.actorBorder,this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="calculated",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="white",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBkgColor="calculated",this.critBorderColor="calculated",this.todayLineColor="calculated",this.vertLineColor="calculated",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.rowOdd=this.rowOdd||ft(this.mainBkg,75)||"#ffffff",this.rowEven=this.rowEven||"#f4f4f4",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){this.secondBkg=ft(this.contrast,55),this.border2=this.contrast,this.actorBorder=ft(this.border1,23),this.actorBkg=this.mainBkg,this.actorTextColor=this.text,this.actorLineColor=this.actorBorder,this.signalColor=this.text,this.signalTextColor=this.text,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.text,this.loopTextColor=this.text,this.noteBorderColor="#999",this.noteBkgColor="#666",this.noteTextColor="#fff",this.cScale0=this.cScale0||"#555",this.cScale1=this.cScale1||"#F4F4F4",this.cScale2=this.cScale2||"#555",this.cScale3=this.cScale3||"#BBB",this.cScale4=this.cScale4||"#777",this.cScale5=this.cScale5||"#999",this.cScale6=this.cScale6||"#DDD",this.cScale7=this.cScale7||"#FFF",this.cScale8=this.cScale8||"#DDD",this.cScale9=this.cScale9||"#BBB",this.cScale10=this.cScale10||"#999",this.cScale11=this.cScale11||"#777";for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleInv"+t]=this["cScaleInv"+t]||lt(this["cScale"+t]);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this.darkMode?this["cScalePeer"+t]=this["cScalePeer"+t]||ft(this["cScale"+t],10):this["cScalePeer"+t]=this["cScalePeer"+t]||Tt(this["cScale"+t],10);this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor),this.cScaleLabel0=this.cScaleLabel0||this.cScale1,this.cScaleLabel2=this.cScaleLabel2||this.cScale1;for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleLabel"+t]=this["cScaleLabel"+t]||this.scaleLabelColor;for(let t=0;t<5;t++)this["surface"+t]=this["surface"+t]||z(this.mainBkg,{l:-(5+t*5)}),this["surfacePeer"+t]=this["surfacePeer"+t]||z(this.mainBkg,{l:-(8+t*5)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.text,this.sectionBkgColor=ft(this.contrast,30),this.sectionBkgColor2=ft(this.contrast,30),this.taskBorderColor=Tt(this.contrast,10),this.taskBkgColor=this.contrast,this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor=this.text,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.gridColor=ft(this.border1,30),this.doneTaskBkgColor=this.done,this.doneTaskBorderColor=this.lineColor,this.critBkgColor=this.critical,this.critBorderColor=Tt(this.critBkgColor,10),this.todayLineColor=this.critBkgColor,this.vertLineColor=this.critBkgColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.transitionColor=this.transitionColor||"#000",this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f4f4f4",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.stateBorder=this.stateBorder||"#000",this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#222",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=z(this.primaryColor,{h:64}),this.fillType3=z(this.secondaryColor,{h:64}),this.fillType4=z(this.primaryColor,{h:-64}),this.fillType5=z(this.secondaryColor,{h:-64}),this.fillType6=z(this.primaryColor,{h:128}),this.fillType7=z(this.secondaryColor,{h:128});for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["pie"+t]=this["cScale"+t];this.pie12=this.pie0,this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||z(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||z(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||z(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||z(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||z(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||z(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||lh(this.quadrant1Fill)?ft(this.quadrant1Fill):Tt(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#EEE,#6BB8E4,#8ACB88,#C7ACD6,#E8DCC2,#FFB2A8,#FFF380,#7E8D91,#FFD8B1,#FAF3E0"},this.radar={axisColor:this.radar?.axisColor||this.lineColor,axisStrokeWidth:this.radar?.axisStrokeWidth||2,axisLabelFontSize:this.radar?.axisLabelFontSize||12,curveOpacity:this.radar?.curveOpacity||.5,curveStrokeWidth:this.radar?.curveStrokeWidth||2,graticuleColor:this.radar?.graticuleColor||"#DEDEDE",graticuleStrokeWidth:this.radar?.graticuleStrokeWidth||1,graticuleOpacity:this.radar?.graticuleOpacity||.3,legendBoxSize:this.radar?.legendBoxSize||12,legendFontSize:this.radar?.legendFontSize||12},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=Tt(this.pie1,25)||this.primaryColor,this.git1=this.pie2||this.secondaryColor,this.git2=this.pie3||this.tertiaryColor,this.git3=this.pie4||z(this.primaryColor,{h:-30}),this.git4=this.pie5||z(this.primaryColor,{h:-60}),this.git5=this.pie6||z(this.primaryColor,{h:-90}),this.git6=this.pie7||z(this.primaryColor,{h:60}),this.git7=this.pie8||z(this.primaryColor,{h:120}),this.gitInv0=this.gitInv0||lt(this.git0),this.gitInv1=this.gitInv1||lt(this.git1),this.gitInv2=this.gitInv2||lt(this.git2),this.gitInv3=this.gitInv3||lt(this.git3),this.gitInv4=this.gitInv4||lt(this.git4),this.gitInv5=this.gitInv5||lt(this.git5),this.gitInv6=this.gitInv6||lt(this.git6),this.gitInv7=this.gitInv7||lt(this.git7),this.branchLabelColor=this.branchLabelColor||this.labelTextColor,this.gitBranchLabel0=this.branchLabelColor,this.gitBranchLabel1="white",this.gitBranchLabel2=this.branchLabelColor,this.gitBranchLabel3="white",this.gitBranchLabel4=this.branchLabelColor,this.gitBranchLabel5=this.branchLabelColor,this.gitBranchLabel6=this.branchLabelColor,this.gitBranchLabel7=this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Ef,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||kf}calculate(t){if(typeof t!="object"){this.updateColors();return}const i=Object.keys(t);i.forEach(n=>{this[n]=t[n]}),this.updateColors(),i.forEach(n=>{this[n]=t[n]})}},x(ka,"Theme"),ka),R5=x(e=>{const t=new k5;return t.calculate(e),t},"getThemeVariables"),Or={base:{getThemeVariables:C5},dark:{getThemeVariables:v5},default:{getThemeVariables:S5},forest:{getThemeVariables:E5},neutral:{getThemeVariables:R5}},Wn={flowchart:{useMaxWidth:!0,titleTopMargin:25,subGraphTitleMargin:{top:0,bottom:0},diagramPadding:8,htmlLabels:!0,nodeSpacing:50,rankSpacing:50,curve:"basis",padding:15,defaultRenderer:"dagre-wrapper",wrappingWidth:200,inheritDir:!1},sequence:{useMaxWidth:!0,hideUnusedParticipants:!1,activationWidth:10,diagramMarginX:50,diagramMarginY:10,actorMargin:50,width:150,height:65,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",mirrorActors:!0,forceMenus:!1,bottomMarginAdj:1,rightAngles:!1,showSequenceNumbers:!1,actorFontSize:14,actorFontFamily:'"Open Sans", sans-serif',actorFontWeight:400,noteFontSize:14,noteFontFamily:'"trebuchet ms", verdana, arial, sans-serif',noteFontWeight:400,noteAlign:"center",messageFontSize:16,messageFontFamily:'"trebuchet ms", verdana, arial, sans-serif',messageFontWeight:400,wrap:!1,wrapPadding:10,labelBoxWidth:50,labelBoxHeight:20},gantt:{useMaxWidth:!0,titleTopMargin:25,barHeight:20,barGap:4,topPadding:50,rightPadding:75,leftPadding:75,gridLineStartPadding:35,fontSize:11,sectionFontSize:11,numberSectionStyles:4,axisFormat:"%Y-%m-%d",topAxis:!1,displayMode:"",weekday:"sunday"},journey:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,leftMargin:150,maxLabelWidth:360,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"],titleColor:"",titleFontFamily:'"trebuchet ms", verdana, arial, sans-serif',titleFontSize:"4ex"},class:{useMaxWidth:!0,titleTopMargin:25,arrowMarkerAbsolute:!1,dividerMargin:10,padding:5,textHeight:10,defaultRenderer:"dagre-wrapper",htmlLabels:!1,hideEmptyMembersBox:!1},state:{useMaxWidth:!0,titleTopMargin:25,dividerMargin:10,sizeUnit:5,padding:8,textHeight:10,titleShift:-15,noteMargin:10,forkWidth:70,forkHeight:7,miniPadding:2,fontSizeFactor:5.02,fontSize:24,labelHeight:16,edgeLengthFactor:"20",compositTitleSize:35,radius:5,defaultRenderer:"dagre-wrapper"},er:{useMaxWidth:!0,titleTopMargin:25,diagramPadding:20,layoutDirection:"TB",minEntityWidth:100,minEntityHeight:75,entityPadding:15,nodeSpacing:140,rankSpacing:80,stroke:"gray",fill:"honeydew",fontSize:12},pie:{useMaxWidth:!0,textPosition:.75},quadrantChart:{useMaxWidth:!0,chartWidth:500,chartHeight:500,titleFontSize:20,titlePadding:10,quadrantPadding:5,xAxisLabelPadding:5,yAxisLabelPadding:5,xAxisLabelFontSize:16,yAxisLabelFontSize:16,quadrantLabelFontSize:16,quadrantTextTopPadding:5,pointTextPadding:5,pointLabelFontSize:12,pointRadius:5,xAxisPosition:"top",yAxisPosition:"left",quadrantInternalBorderStrokeWidth:1,quadrantExternalBorderStrokeWidth:2},xyChart:{useMaxWidth:!0,width:700,height:500,titleFontSize:20,titlePadding:10,showDataLabel:!1,showTitle:!0,xAxis:{$ref:"#/$defs/XYChartAxisConfig",showLabel:!0,labelFontSize:14,labelPadding:5,showTitle:!0,titleFontSize:16,titlePadding:5,showTick:!0,tickLength:5,tickWidth:2,showAxisLine:!0,axisLineWidth:2},yAxis:{$ref:"#/$defs/XYChartAxisConfig",showLabel:!0,labelFontSize:14,labelPadding:5,showTitle:!0,titleFontSize:16,titlePadding:5,showTick:!0,tickLength:5,tickWidth:2,showAxisLine:!0,axisLineWidth:2},chartOrientation:"vertical",plotReservedSpacePercent:50},requirement:{useMaxWidth:!0,rect_fill:"#f9f9f9",text_color:"#333",rect_border_size:"0.5px",rect_border_color:"#bbb",rect_min_width:200,rect_min_height:200,fontSize:14,rect_padding:10,line_height:20},mindmap:{useMaxWidth:!0,padding:10,maxNodeWidth:200,layoutAlgorithm:"cose-bilkent"},kanban:{useMaxWidth:!0,padding:8,sectionWidth:200,ticketBaseUrl:""},timeline:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,leftMargin:150,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"],disableMulticolor:!1},gitGraph:{useMaxWidth:!0,titleTopMargin:25,diagramPadding:8,nodeLabel:{width:75,height:100,x:-25,y:0},mainBranchName:"main",mainBranchOrder:0,showCommitLabel:!0,showBranches:!0,rotateCommitLabel:!0,parallelCommits:!1,arrowMarkerAbsolute:!1},c4:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,c4ShapeMargin:50,c4ShapePadding:20,width:216,height:60,boxMargin:10,c4ShapeInRow:4,nextLinePaddingX:0,c4BoundaryInRow:2,personFontSize:14,personFontFamily:'"Open Sans", sans-serif',personFontWeight:"normal",external_personFontSize:14,external_personFontFamily:'"Open Sans", sans-serif',external_personFontWeight:"normal",systemFontSize:14,systemFontFamily:'"Open Sans", sans-serif',systemFontWeight:"normal",external_systemFontSize:14,external_systemFontFamily:'"Open Sans", sans-serif',external_systemFontWeight:"normal",system_dbFontSize:14,system_dbFontFamily:'"Open Sans", sans-serif',system_dbFontWeight:"normal",external_system_dbFontSize:14,external_system_dbFontFamily:'"Open Sans", sans-serif',external_system_dbFontWeight:"normal",system_queueFontSize:14,system_queueFontFamily:'"Open Sans", sans-serif',system_queueFontWeight:"normal",external_system_queueFontSize:14,external_system_queueFontFamily:'"Open Sans", sans-serif',external_system_queueFontWeight:"normal",boundaryFontSize:14,boundaryFontFamily:'"Open Sans", sans-serif',boundaryFontWeight:"normal",messageFontSize:12,messageFontFamily:'"Open Sans", sans-serif',messageFontWeight:"normal",containerFontSize:14,containerFontFamily:'"Open Sans", sans-serif',containerFontWeight:"normal",external_containerFontSize:14,external_containerFontFamily:'"Open Sans", sans-serif',external_containerFontWeight:"normal",container_dbFontSize:14,container_dbFontFamily:'"Open Sans", sans-serif',container_dbFontWeight:"normal",external_container_dbFontSize:14,external_container_dbFontFamily:'"Open Sans", sans-serif',external_container_dbFontWeight:"normal",container_queueFontSize:14,container_queueFontFamily:'"Open Sans", sans-serif',container_queueFontWeight:"normal",external_container_queueFontSize:14,external_container_queueFontFamily:'"Open Sans", sans-serif',external_container_queueFontWeight:"normal",componentFontSize:14,componentFontFamily:'"Open Sans", sans-serif',componentFontWeight:"normal",external_componentFontSize:14,external_componentFontFamily:'"Open Sans", sans-serif',external_componentFontWeight:"normal",component_dbFontSize:14,component_dbFontFamily:'"Open Sans", sans-serif',component_dbFontWeight:"normal",external_component_dbFontSize:14,external_component_dbFontFamily:'"Open Sans", sans-serif',external_component_dbFontWeight:"normal",component_queueFontSize:14,component_queueFontFamily:'"Open Sans", sans-serif',component_queueFontWeight:"normal",external_component_queueFontSize:14,external_component_queueFontFamily:'"Open Sans", sans-serif',external_component_queueFontWeight:"normal",wrap:!0,wrapPadding:10,person_bg_color:"#08427B",person_border_color:"#073B6F",external_person_bg_color:"#686868",external_person_border_color:"#8A8A8A",system_bg_color:"#1168BD",system_border_color:"#3C7FC0",system_db_bg_color:"#1168BD",system_db_border_color:"#3C7FC0",system_queue_bg_color:"#1168BD",system_queue_border_color:"#3C7FC0",external_system_bg_color:"#999999",external_system_border_color:"#8A8A8A",external_system_db_bg_color:"#999999",external_system_db_border_color:"#8A8A8A",external_system_queue_bg_color:"#999999",external_system_queue_border_color:"#8A8A8A",container_bg_color:"#438DD5",container_border_color:"#3C7FC0",container_db_bg_color:"#438DD5",container_db_border_color:"#3C7FC0",container_queue_bg_color:"#438DD5",container_queue_border_color:"#3C7FC0",external_container_bg_color:"#B3B3B3",external_container_border_color:"#A6A6A6",external_container_db_bg_color:"#B3B3B3",external_container_db_border_color:"#A6A6A6",external_container_queue_bg_color:"#B3B3B3",external_container_queue_border_color:"#A6A6A6",component_bg_color:"#85BBF0",component_border_color:"#78A8D8",component_db_bg_color:"#85BBF0",component_db_border_color:"#78A8D8",component_queue_bg_color:"#85BBF0",component_queue_border_color:"#78A8D8",external_component_bg_color:"#CCCCCC",external_component_border_color:"#BFBFBF",external_component_db_bg_color:"#CCCCCC",external_component_db_border_color:"#BFBFBF",external_component_queue_bg_color:"#CCCCCC",external_component_queue_border_color:"#BFBFBF"},sankey:{useMaxWidth:!0,width:600,height:400,linkColor:"gradient",nodeAlignment:"justify",showValues:!0,prefix:"",suffix:""},block:{useMaxWidth:!0,padding:8},packet:{useMaxWidth:!0,rowHeight:32,bitWidth:32,bitsPerRow:32,showBits:!0,paddingX:5,paddingY:5},architecture:{useMaxWidth:!0,padding:40,iconSize:80,fontSize:16},radar:{useMaxWidth:!0,width:600,height:600,marginTop:50,marginRight:50,marginBottom:50,marginLeft:50,axisScaleFactor:1,axisLabelFactor:1.05,curveTension:.17},theme:"default",look:"classic",handDrawnSeed:0,layout:"dagre",maxTextSize:5e4,maxEdges:500,darkMode:!1,fontFamily:'"trebuchet ms", verdana, arial, sans-serif;',logLevel:5,securityLevel:"strict",startOnLoad:!0,arrowMarkerAbsolute:!1,secure:["secure","securityLevel","startOnLoad","maxTextSize","suppressErrorRendering","maxEdges"],legacyMathML:!1,forceLegacyMathML:!1,deterministicIds:!1,fontSize:16,markdownAutoWrap:!0,suppressErrorRendering:!1},o2={...Wn,deterministicIDSeed:void 0,elk:{mergeEdges:!1,nodePlacementStrategy:"BRANDES_KOEPF",forceNodeModelOrder:!1,considerModelOrder:"NODES_AND_EDGES"},themeCSS:void 0,themeVariables:Or.default.getThemeVariables(),sequence:{...Wn.sequence,messageFont:x(function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},"messageFont"),noteFont:x(function(){return{fontFamily:this.noteFontFamily,fontSize:this.noteFontSize,fontWeight:this.noteFontWeight}},"noteFont"),actorFont:x(function(){return{fontFamily:this.actorFontFamily,fontSize:this.actorFontSize,fontWeight:this.actorFontWeight}},"actorFont")},class:{hideEmptyMembersBox:!1},gantt:{...Wn.gantt,tickInterval:void 0,useWidth:void 0},c4:{...Wn.c4,useWidth:void 0,personFont:x(function(){return{fontFamily:this.personFontFamily,fontSize:this.personFontSize,fontWeight:this.personFontWeight}},"personFont"),flowchart:{...Wn.flowchart,inheritDir:!1},external_personFont:x(function(){return{fontFamily:this.external_personFontFamily,fontSize:this.external_personFontSize,fontWeight:this.external_personFontWeight}},"external_personFont"),systemFont:x(function(){return{fontFamily:this.systemFontFamily,fontSize:this.systemFontSize,fontWeight:this.systemFontWeight}},"systemFont"),external_systemFont:x(function(){return{fontFamily:this.external_systemFontFamily,fontSize:this.external_systemFontSize,fontWeight:this.external_systemFontWeight}},"external_systemFont"),system_dbFont:x(function(){return{fontFamily:this.system_dbFontFamily,fontSize:this.system_dbFontSize,fontWeight:this.system_dbFontWeight}},"system_dbFont"),external_system_dbFont:x(function(){return{fontFamily:this.external_system_dbFontFamily,fontSize:this.external_system_dbFontSize,fontWeight:this.external_system_dbFontWeight}},"external_system_dbFont"),system_queueFont:x(function(){return{fontFamily:this.system_queueFontFamily,fontSize:this.system_queueFontSize,fontWeight:this.system_queueFontWeight}},"system_queueFont"),external_system_queueFont:x(function(){return{fontFamily:this.external_system_queueFontFamily,fontSize:this.external_system_queueFontSize,fontWeight:this.external_system_queueFontWeight}},"external_system_queueFont"),containerFont:x(function(){return{fontFamily:this.containerFontFamily,fontSize:this.containerFontSize,fontWeight:this.containerFontWeight}},"containerFont"),external_containerFont:x(function(){return{fontFamily:this.external_containerFontFamily,fontSize:this.external_containerFontSize,fontWeight:this.external_containerFontWeight}},"external_containerFont"),container_dbFont:x(function(){return{fontFamily:this.container_dbFontFamily,fontSize:this.container_dbFontSize,fontWeight:this.container_dbFontWeight}},"container_dbFont"),external_container_dbFont:x(function(){return{fontFamily:this.external_container_dbFontFamily,fontSize:this.external_container_dbFontSize,fontWeight:this.external_container_dbFontWeight}},"external_container_dbFont"),container_queueFont:x(function(){return{fontFamily:this.container_queueFontFamily,fontSize:this.container_queueFontSize,fontWeight:this.container_queueFontWeight}},"container_queueFont"),external_container_queueFont:x(function(){return{fontFamily:this.external_container_queueFontFamily,fontSize:this.external_container_queueFontSize,fontWeight:this.external_container_queueFontWeight}},"external_container_queueFont"),componentFont:x(function(){return{fontFamily:this.componentFontFamily,fontSize:this.componentFontSize,fontWeight:this.componentFontWeight}},"componentFont"),external_componentFont:x(function(){return{fontFamily:this.external_componentFontFamily,fontSize:this.external_componentFontSize,fontWeight:this.external_componentFontWeight}},"external_componentFont"),component_dbFont:x(function(){return{fontFamily:this.component_dbFontFamily,fontSize:this.component_dbFontSize,fontWeight:this.component_dbFontWeight}},"component_dbFont"),external_component_dbFont:x(function(){return{fontFamily:this.external_component_dbFontFamily,fontSize:this.external_component_dbFontSize,fontWeight:this.external_component_dbFontWeight}},"external_component_dbFont"),component_queueFont:x(function(){return{fontFamily:this.component_queueFontFamily,fontSize:this.component_queueFontSize,fontWeight:this.component_queueFontWeight}},"component_queueFont"),external_component_queueFont:x(function(){return{fontFamily:this.external_component_queueFontFamily,fontSize:this.external_component_queueFontSize,fontWeight:this.external_component_queueFontWeight}},"external_component_queueFont"),boundaryFont:x(function(){return{fontFamily:this.boundaryFontFamily,fontSize:this.boundaryFontSize,fontWeight:this.boundaryFontWeight}},"boundaryFont"),messageFont:x(function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},"messageFont")},pie:{...Wn.pie,useWidth:984},xyChart:{...Wn.xyChart,useWidth:void 0},requirement:{...Wn.requirement,useWidth:void 0},packet:{...Wn.packet},radar:{...Wn.radar},treemap:{useMaxWidth:!0,padding:10,diagramPadding:8,showValues:!0,nodeWidth:100,nodeHeight:40,borderWidth:1,valueFontSize:12,labelFontSize:14,valueFormat:","}},a2=x((e,t="")=>Object.keys(e).reduce((i,n)=>Array.isArray(e[n])?i:typeof e[n]=="object"&&e[n]!==null?[...i,t+n,...a2(e[n],"")]:[...i,t+n],[]),"keyify"),A5=new Set(a2(o2,"")),l2=o2,td=x(e=>{if(X.debug("sanitizeDirective called with",e),!(typeof e!="object"||e==null)){if(Array.isArray(e)){e.forEach(t=>td(t));return}for(const t of Object.keys(e)){if(X.debug("Checking key",t),t.startsWith("__")||t.includes("proto")||t.includes("constr")||!A5.has(t)||e[t]==null){X.debug("sanitize deleting key: ",t),delete e[t];continue}if(typeof e[t]=="object"){X.debug("sanitizing object",t),td(e[t]);continue}const i=["themeCSS","fontFamily","altFontFamily"];for(const n of i)t.includes(n)&&(X.debug("sanitizing css option",t),e[t]=L5(e[t]))}if(e.themeVariables)for(const t of Object.keys(e.themeVariables)){const i=e.themeVariables[t];i?.match&&!i.match(/^[\d "#%(),.;A-Za-z]+$/)&&(e.themeVariables[t]="")}X.debug("After sanitization",e)}},"sanitizeDirective"),L5=x(e=>{let t=0,i=0;for(const n of e){if(t<i)return"{ /* ERROR: Unbalanced CSS */ }";n==="{"?t++:n==="}"&&i++}return t!==i?"{ /* ERROR: Unbalanced CSS */ }":e},"sanitizeCss"),Wa=Object.freeze(l2),Ni=We({},Wa),ed,To=[],oc=We({},Wa),Rf=x((e,t)=>{let i=We({},e),n={};for(const r of t)u2(r),n=We(n,r);if(i=We(i,n),n.theme&&n.theme in Or){const r=We({},ed),s=We(r.themeVariables||{},n.themeVariables);i.theme&&i.theme in Or&&(i.themeVariables=Or[i.theme].getThemeVariables(s))}return oc=i,d2(oc),oc},"updateCurrentConfig"),M5=x(e=>(Ni=We({},Wa),Ni=We(Ni,e),e.theme&&Or[e.theme]&&(Ni.themeVariables=Or[e.theme].getThemeVariables(e.themeVariables)),Rf(Ni,To),Ni),"setSiteConfig"),I5=x(e=>{ed=We({},e)},"saveConfigFromInitialize"),P5=x(e=>(Ni=We(Ni,e),Rf(Ni,To),Ni),"updateSiteConfig"),c2=x(()=>We({},Ni),"getSiteConfig"),h2=x(e=>(d2(e),We(oc,e),ui()),"setConfig"),ui=x(()=>We({},oc),"getConfig"),u2=x(e=>{e&&(["secure",...Ni.secure??[]].forEach(t=>{Object.hasOwn(e,t)&&(X.debug(`Denied attempt to modify a secure key ${t}`,e[t]),delete e[t])}),Object.keys(e).forEach(t=>{t.startsWith("__")&&delete e[t]}),Object.keys(e).forEach(t=>{typeof e[t]=="string"&&(e[t].includes("<")||e[t].includes(">")||e[t].includes("url(data:"))&&delete e[t],typeof e[t]=="object"&&u2(e[t])}))},"sanitize"),F5=x(e=>{td(e),e.fontFamily&&!e.themeVariables?.fontFamily&&(e.themeVariables={...e.themeVariables,fontFamily:e.fontFamily}),To.push(e),Rf(Ni,To)},"addDirective"),id=x((e=Ni)=>{To=[],Rf(e,To)},"reset"),O5={LAZY_LOAD_DEPRECATED:"The configuration options lazyLoadedDiagrams and loadExternalDiagramsAtStartup are deprecated. Please use registerExternalDiagrams instead."},r1={},D5=x(e=>{r1[e]||(X.warn(O5[e]),r1[e]=!0)},"issueWarning"),d2=x(e=>{e&&(e.lazyLoadedDiagrams||e.loadExternalDiagramsAtStartup)&&D5("LAZY_LOAD_DEPRECATED")},"checkConfig"),N7=x(()=>{let e={};ed&&(e=We(e,ed));for(const t of To)e=We(e,t);return e},"getUserDefinedConfig"),ch=/<br\s*\/?>/gi,B5=x(e=>e?p2(e).replace(/\\n/g,"#br#").split("#br#"):[""],"getRows"),N5=(()=>{let e=!1;return()=>{e||(f2(),e=!0)}})();function f2(){const e="data-temp-href-target";Ga.addHook("beforeSanitizeAttributes",t=>{t.tagName==="A"&&t.hasAttribute("target")&&t.setAttribute(e,t.getAttribute("target")??"")}),Ga.addHook("afterSanitizeAttributes",t=>{t.tagName==="A"&&t.hasAttribute(e)&&(t.setAttribute("target",t.getAttribute(e)??""),t.removeAttribute(e),t.getAttribute("target")==="_blank"&&t.setAttribute("rel","noopener"))})}x(f2,"setupDompurifyHooks");var g2=x(e=>(N5(),Ga.sanitize(e)),"removeScript"),s1=x((e,t)=>{if(t.flowchart?.htmlLabels!==!1){const i=t.securityLevel;i==="antiscript"||i==="strict"?e=g2(e):i!=="loose"&&(e=p2(e),e=e.replace(/</g,"&lt;").replace(/>/g,"&gt;"),e=e.replace(/=/g,"&equals;"),e=W5(e))}return e},"sanitizeMore"),dn=x((e,t)=>e&&(t.dompurifyConfig?e=Ga.sanitize(s1(e,t),t.dompurifyConfig).toString():e=Ga.sanitize(s1(e,t),{FORBID_TAGS:["style"]}).toString(),e),"sanitizeText"),$5=x((e,t)=>typeof e=="string"?dn(e,t):e.flat().map(i=>dn(i,t)),"sanitizeTextOrArray"),z5=x(e=>ch.test(e),"hasBreaks"),G5=x(e=>e.split(ch),"splitBreaks"),W5=x(e=>e.replace(/#br#/g,"<br/>"),"placeholderToBreak"),p2=x(e=>e.replace(ch,"#br#"),"breakToPlaceholder"),j5=x(e=>{let t="";return e&&(t=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,t=CSS.escape(t)),t},"getUrl"),He=x(e=>!(e===!1||["false","null","0"].includes(String(e).trim().toLowerCase())),"evaluate"),H5=x(function(...e){const t=e.filter(i=>!isNaN(i));return Math.max(...t)},"getMax"),V5=x(function(...e){const t=e.filter(i=>!isNaN(i));return Math.min(...t)},"getMin"),o1=x(function(e){const t=e.split(/(,)/),i=[];for(let n=0;n<t.length;n++){let r=t[n];if(r===","&&n>0&&n+1<t.length){const s=t[n-1],o=t[n+1];U5(s,o)&&(r=s+","+o,n++,i.pop())}i.push(q5(r))}return i.join("")},"parseGenericTypes"),lm=x((e,t)=>Math.max(0,e.split(t).length-1),"countOccurrence"),U5=x((e,t)=>{const i=lm(e,"~"),n=lm(t,"~");return i===1&&n===1},"shouldCombineSets"),q5=x(e=>{const t=lm(e,"~");let i=!1;if(t<=1)return e;t%2!==0&&e.startsWith("~")&&(e=e.substring(1),i=!0);const n=[...e];let r=n.indexOf("~"),s=n.lastIndexOf("~");for(;r!==-1&&s!==-1&&r!==s;)n[r]="<",n[s]=">",r=n.indexOf("~"),s=n.lastIndexOf("~");return i&&n.unshift("~"),n.join("")},"processSet"),a1=x(()=>window.MathMLElement!==void 0,"isMathMLSupported"),cm=/\$\$(.*)\$\$/g,ja=x(e=>(e.match(cm)?.length??0)>0,"hasKatex"),$7=x(async(e,t)=>{const i=document.createElement("div");i.innerHTML=await Ty(e,t),i.id="katex-temp",i.style.visibility="hidden",i.style.position="absolute",i.style.top="0",document.querySelector("body")?.insertAdjacentElement("beforeend",i);const r={width:i.clientWidth,height:i.clientHeight};return i.remove(),r},"calculateMathMLDimensions"),Y5=x(async(e,t)=>{if(!ja(e))return e;if(!(a1()||t.legacyMathML||t.forceLegacyMathML))return e.replace(cm,"MathML is unsupported in this environment.");{const{default:i}=await Kt(async()=>{const{default:r}=await import("./katex-DhXJpUyf.js");return{default:r}},[]),n=t.forceLegacyMathML||!a1()&&t.legacyMathML?"htmlAndMathml":"mathml";return e.split(ch).map(r=>ja(r)?`<div style="display: flex; align-items: center; justify-content: center; white-space: nowrap;">${r}</div>`:`<div>${r}</div>`).join("").replace(cm,(r,s)=>i.renderToString(s,{throwOnError:!0,displayMode:!0,output:n}).replace(/\n/g," ").replace(/<annotation.*<\/annotation>/g,""))}},"renderKatexUnsanitized"),Ty=x(async(e,t)=>dn(await Y5(e,t),t),"renderKatexSanitized"),el={getRows:B5,sanitizeText:dn,sanitizeTextOrArray:$5,hasBreaks:z5,splitBreaks:G5,lineBreakRegex:ch,removeScript:g2,getUrl:j5,evaluate:He,getMax:H5,getMin:V5},X5=x(function(e,t){for(let i of t)e.attr(i[0],i[1])},"d3Attrs"),K5=x(function(e,t,i){let n=new Map;return i?(n.set("width","100%"),n.set("style",`max-width: ${t}px;`)):(n.set("height",e),n.set("width",t)),n},"calculateSvgSizeAttrs"),m2=x(function(e,t,i,n){const r=K5(t,i,n);X5(e,r)},"configureSvgSize"),Z5=x(function(e,t,i,n){const r=t.node().getBBox(),s=r.width,o=r.height;X.info(`SVG bounds: ${s}x${o}`,r);let a=0,l=0;X.info(`Graph bounds: ${a}x${l}`,e),a=s+i*2,l=o+i*2,X.info(`Calculated bounds: ${a}x${l}`),m2(t,l,a,n);const c=`${r.x-i} ${r.y-i} ${r.width+2*i} ${r.height+2*i}`;t.attr("viewBox",c)},"setupGraphViewbox"),uu={},J5=x((e,t,i)=>{let n="";return e in uu&&uu[e]?n=uu[e](i):X.warn(`No theme found for ${e}`),` & {
    font-family: ${i.fontFamily};
    font-size: ${i.fontSize};
    fill: ${i.textColor}
  }
  @keyframes edge-animation-frame {
    from {
      stroke-dashoffset: 0;
    }
  }
  @keyframes dash {
    to {
      stroke-dashoffset: 0;
    }
  }
  & .edge-animation-slow {
    stroke-dasharray: 9,5 !important;
    stroke-dashoffset: 900;
    animation: dash 50s linear infinite;
    stroke-linecap: round;
  }
  & .edge-animation-fast {
    stroke-dasharray: 9,5 !important;
    stroke-dashoffset: 900;
    animation: dash 20s linear infinite;
    stroke-linecap: round;
  }
  /* Classes common for multiple diagrams */

  & .error-icon {
    fill: ${i.errorBkgColor};
  }
  & .error-text {
    fill: ${i.errorTextColor};
    stroke: ${i.errorTextColor};
  }

  & .edge-thickness-normal {
    stroke-width: 1px;
  }
  & .edge-thickness-thick {
    stroke-width: 3.5px
  }
  & .edge-pattern-solid {
    stroke-dasharray: 0;
  }
  & .edge-thickness-invisible {
    stroke-width: 0;
    fill: none;
  }
  & .edge-pattern-dashed{
    stroke-dasharray: 3;
  }
  .edge-pattern-dotted {
    stroke-dasharray: 2;
  }

  & .marker {
    fill: ${i.lineColor};
    stroke: ${i.lineColor};
  }
  & .marker.cross {
    stroke: ${i.lineColor};
  }

  & svg {
    font-family: ${i.fontFamily};
    font-size: ${i.fontSize};
  }
   & p {
    margin: 0
   }

  ${n}

  ${t}
`},"getStyles"),Q5=x((e,t)=>{t!==void 0&&(uu[e]=t)},"addStylesForDiagram"),t4=J5,y2={};W$(y2,{clear:()=>e4,getAccDescription:()=>s4,getAccTitle:()=>n4,getDiagramTitle:()=>a4,setAccDescription:()=>r4,setAccTitle:()=>i4,setDiagramTitle:()=>o4});var Ey="",ky="",Ry="",Ay=x(e=>dn(e,ui()),"sanitizeText"),e4=x(()=>{Ey="",Ry="",ky=""},"clear"),i4=x(e=>{Ey=Ay(e).replace(/^\s+/g,"")},"setAccTitle"),n4=x(()=>Ey,"getAccTitle"),r4=x(e=>{Ry=Ay(e).replace(/\n\s+/g,`
`)},"setAccDescription"),s4=x(()=>Ry,"getAccDescription"),o4=x(e=>{ky=Ay(e)},"setDiagramTitle"),a4=x(()=>ky,"getDiagramTitle"),l1=X,l4=wy,ne=ui,z7=h2,G7=Wa,Ly=x(e=>dn(e,ne()),"sanitizeText"),c4=Z5,h4=x(()=>y2,"getCommonDb"),nd={},rd=x((e,t,i)=>{nd[e]&&l1.warn(`Diagram with id ${e} already registered. Overwriting.`),nd[e]=t,i&&s2(e,i),Q5(e,t.styles),t.injectUtils?.(l1,l4,ne,Ly,c4,h4(),()=>{})},"registerDiagram"),hm=x(e=>{if(e in nd)return nd[e];throw new u4(e)},"getDiagram"),Ra,u4=(Ra=class extends Error{constructor(t){super(`Diagram ${t} not found.`)}},x(Ra,"DiagramNotFoundError"),Ra),d4={value:()=>{}};function _2(){for(var e=0,t=arguments.length,i={},n;e<t;++e){if(!(n=arguments[e]+"")||n in i||/[\s.]/.test(n))throw new Error("illegal type: "+n);i[n]=[]}return new du(i)}function du(e){this._=e}function f4(e,t){return e.trim().split(/^|\s+/).map(function(i){var n="",r=i.indexOf(".");if(r>=0&&(n=i.slice(r+1),i=i.slice(0,r)),i&&!t.hasOwnProperty(i))throw new Error("unknown type: "+i);return{type:i,name:n}})}du.prototype=_2.prototype={constructor:du,on:function(e,t){var i=this._,n=f4(e+"",i),r,s=-1,o=n.length;if(arguments.length<2){for(;++s<o;)if((r=(e=n[s]).type)&&(r=g4(i[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(r=(e=n[s]).type)i[r]=c1(i[r],e.name,t);else if(t==null)for(r in i)i[r]=c1(i[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var i in t)e[i]=t[i].slice();return new du(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var i=new Array(r),n=0,r,s;n<r;++n)i[n]=arguments[n+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],n=0,r=s.length;n<r;++n)s[n].value.apply(t,i)},apply:function(e,t,i){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var n=this._[e],r=0,s=n.length;r<s;++r)n[r].value.apply(t,i)}};function g4(e,t){for(var i=0,n=e.length,r;i<n;++i)if((r=e[i]).name===t)return r.value}function c1(e,t,i){for(var n=0,r=e.length;n<r;++n)if(e[n].name===t){e[n]=d4,e=e.slice(0,n).concat(e.slice(n+1));break}return i!=null&&e.push({name:t,value:i}),e}var um="http://www.w3.org/1999/xhtml";const h1={svg:"http://www.w3.org/2000/svg",xhtml:um,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Af(e){var t=e+="",i=t.indexOf(":");return i>=0&&(t=e.slice(0,i))!=="xmlns"&&(e=e.slice(i+1)),h1.hasOwnProperty(t)?{space:h1[t],local:e}:e}function p4(e){return function(){var t=this.ownerDocument,i=this.namespaceURI;return i===um&&t.documentElement.namespaceURI===um?t.createElement(e):t.createElementNS(i,e)}}function m4(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function x2(e){var t=Af(e);return(t.local?m4:p4)(t)}function y4(){}function My(e){return e==null?y4:function(){return this.querySelector(e)}}function _4(e){typeof e!="function"&&(e=My(e));for(var t=this._groups,i=t.length,n=new Array(i),r=0;r<i;++r)for(var s=t[r],o=s.length,a=n[r]=new Array(o),l,c,h=0;h<o;++h)(l=s[h])&&(c=e.call(l,l.__data__,h,s))&&("__data__"in l&&(c.__data__=l.__data__),a[h]=c);return new Xi(n,this._parents)}function x4(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function C4(){return[]}function C2(e){return e==null?C4:function(){return this.querySelectorAll(e)}}function b4(e){return function(){return x4(e.apply(this,arguments))}}function v4(e){typeof e=="function"?e=b4(e):e=C2(e);for(var t=this._groups,i=t.length,n=[],r=[],s=0;s<i;++s)for(var o=t[s],a=o.length,l,c=0;c<a;++c)(l=o[c])&&(n.push(e.call(l,l.__data__,c,o)),r.push(l));return new Xi(n,r)}function b2(e){return function(){return this.matches(e)}}function v2(e){return function(t){return t.matches(e)}}var w4=Array.prototype.find;function S4(e){return function(){return w4.call(this.children,e)}}function T4(){return this.firstElementChild}function E4(e){return this.select(e==null?T4:S4(typeof e=="function"?e:v2(e)))}var k4=Array.prototype.filter;function R4(){return Array.from(this.children)}function A4(e){return function(){return k4.call(this.children,e)}}function L4(e){return this.selectAll(e==null?R4:A4(typeof e=="function"?e:v2(e)))}function M4(e){typeof e!="function"&&(e=b2(e));for(var t=this._groups,i=t.length,n=new Array(i),r=0;r<i;++r)for(var s=t[r],o=s.length,a=n[r]=[],l,c=0;c<o;++c)(l=s[c])&&e.call(l,l.__data__,c,s)&&a.push(l);return new Xi(n,this._parents)}function w2(e){return new Array(e.length)}function I4(){return new Xi(this._enter||this._groups.map(w2),this._parents)}function sd(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}sd.prototype={constructor:sd,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function P4(e){return function(){return e}}function F4(e,t,i,n,r,s){for(var o=0,a,l=t.length,c=s.length;o<c;++o)(a=t[o])?(a.__data__=s[o],n[o]=a):i[o]=new sd(e,s[o]);for(;o<l;++o)(a=t[o])&&(r[o]=a)}function O4(e,t,i,n,r,s,o){var a,l,c=new Map,h=t.length,u=s.length,d=new Array(h),f;for(a=0;a<h;++a)(l=t[a])&&(d[a]=f=o.call(l,l.__data__,a,t)+"",c.has(f)?r[a]=l:c.set(f,l));for(a=0;a<u;++a)f=o.call(e,s[a],a,s)+"",(l=c.get(f))?(n[a]=l,l.__data__=s[a],c.delete(f)):i[a]=new sd(e,s[a]);for(a=0;a<h;++a)(l=t[a])&&c.get(d[a])===l&&(r[a]=l)}function D4(e){return e.__data__}function B4(e,t){if(!arguments.length)return Array.from(this,D4);var i=t?O4:F4,n=this._parents,r=this._groups;typeof e!="function"&&(e=P4(e));for(var s=r.length,o=new Array(s),a=new Array(s),l=new Array(s),c=0;c<s;++c){var h=n[c],u=r[c],d=u.length,f=N4(e.call(h,h&&h.__data__,c,n)),g=f.length,p=a[c]=new Array(g),m=o[c]=new Array(g),y=l[c]=new Array(d);i(h,u,p,m,y,f,t);for(var _=0,C=0,b,v;_<g;++_)if(b=p[_]){for(_>=C&&(C=_+1);!(v=m[C])&&++C<g;);b._next=v||null}}return o=new Xi(o,n),o._enter=a,o._exit=l,o}function N4(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function $4(){return new Xi(this._exit||this._groups.map(w2),this._parents)}function z4(e,t,i){var n=this.enter(),r=this,s=this.exit();return typeof e=="function"?(n=e(n),n&&(n=n.selection())):n=n.append(e+""),t!=null&&(r=t(r),r&&(r=r.selection())),i==null?s.remove():i(s),n&&r?n.merge(r).order():r}function G4(e){for(var t=e.selection?e.selection():e,i=this._groups,n=t._groups,r=i.length,s=n.length,o=Math.min(r,s),a=new Array(r),l=0;l<o;++l)for(var c=i[l],h=n[l],u=c.length,d=a[l]=new Array(u),f,g=0;g<u;++g)(f=c[g]||h[g])&&(d[g]=f);for(;l<r;++l)a[l]=i[l];return new Xi(a,this._parents)}function W4(){for(var e=this._groups,t=-1,i=e.length;++t<i;)for(var n=e[t],r=n.length-1,s=n[r],o;--r>=0;)(o=n[r])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function j4(e){e||(e=H4);function t(u,d){return u&&d?e(u.__data__,d.__data__):!u-!d}for(var i=this._groups,n=i.length,r=new Array(n),s=0;s<n;++s){for(var o=i[s],a=o.length,l=r[s]=new Array(a),c,h=0;h<a;++h)(c=o[h])&&(l[h]=c);l.sort(t)}return new Xi(r,this._parents).order()}function H4(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function V4(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function U4(){return Array.from(this)}function q4(){for(var e=this._groups,t=0,i=e.length;t<i;++t)for(var n=e[t],r=0,s=n.length;r<s;++r){var o=n[r];if(o)return o}return null}function Y4(){let e=0;for(const t of this)++e;return e}function X4(){return!this.node()}function K4(e){for(var t=this._groups,i=0,n=t.length;i<n;++i)for(var r=t[i],s=0,o=r.length,a;s<o;++s)(a=r[s])&&e.call(a,a.__data__,s,r);return this}function Z4(e){return function(){this.removeAttribute(e)}}function J4(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Q4(e,t){return function(){this.setAttribute(e,t)}}function tz(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function ez(e,t){return function(){var i=t.apply(this,arguments);i==null?this.removeAttribute(e):this.setAttribute(e,i)}}function iz(e,t){return function(){var i=t.apply(this,arguments);i==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,i)}}function nz(e,t){var i=Af(e);if(arguments.length<2){var n=this.node();return i.local?n.getAttributeNS(i.space,i.local):n.getAttribute(i)}return this.each((t==null?i.local?J4:Z4:typeof t=="function"?i.local?iz:ez:i.local?tz:Q4)(i,t))}function S2(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function rz(e){return function(){this.style.removeProperty(e)}}function sz(e,t,i){return function(){this.style.setProperty(e,t,i)}}function oz(e,t,i){return function(){var n=t.apply(this,arguments);n==null?this.style.removeProperty(e):this.style.setProperty(e,n,i)}}function az(e,t,i){return arguments.length>1?this.each((t==null?rz:typeof t=="function"?oz:sz)(e,t,i??"")):Ha(this.node(),e)}function Ha(e,t){return e.style.getPropertyValue(t)||S2(e).getComputedStyle(e,null).getPropertyValue(t)}function lz(e){return function(){delete this[e]}}function cz(e,t){return function(){this[e]=t}}function hz(e,t){return function(){var i=t.apply(this,arguments);i==null?delete this[e]:this[e]=i}}function uz(e,t){return arguments.length>1?this.each((t==null?lz:typeof t=="function"?hz:cz)(e,t)):this.node()[e]}function T2(e){return e.trim().split(/^|\s+/)}function Iy(e){return e.classList||new E2(e)}function E2(e){this._node=e,this._names=T2(e.getAttribute("class")||"")}E2.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function k2(e,t){for(var i=Iy(e),n=-1,r=t.length;++n<r;)i.add(t[n])}function R2(e,t){for(var i=Iy(e),n=-1,r=t.length;++n<r;)i.remove(t[n])}function dz(e){return function(){k2(this,e)}}function fz(e){return function(){R2(this,e)}}function gz(e,t){return function(){(t.apply(this,arguments)?k2:R2)(this,e)}}function pz(e,t){var i=T2(e+"");if(arguments.length<2){for(var n=Iy(this.node()),r=-1,s=i.length;++r<s;)if(!n.contains(i[r]))return!1;return!0}return this.each((typeof t=="function"?gz:t?dz:fz)(i,t))}function mz(){this.textContent=""}function yz(e){return function(){this.textContent=e}}function _z(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function xz(e){return arguments.length?this.each(e==null?mz:(typeof e=="function"?_z:yz)(e)):this.node().textContent}function Cz(){this.innerHTML=""}function bz(e){return function(){this.innerHTML=e}}function vz(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function wz(e){return arguments.length?this.each(e==null?Cz:(typeof e=="function"?vz:bz)(e)):this.node().innerHTML}function Sz(){this.nextSibling&&this.parentNode.appendChild(this)}function Tz(){return this.each(Sz)}function Ez(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function kz(){return this.each(Ez)}function Rz(e){var t=typeof e=="function"?e:x2(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Az(){return null}function Lz(e,t){var i=typeof e=="function"?e:x2(e),n=t==null?Az:typeof t=="function"?t:My(t);return this.select(function(){return this.insertBefore(i.apply(this,arguments),n.apply(this,arguments)||null)})}function Mz(){var e=this.parentNode;e&&e.removeChild(this)}function Iz(){return this.each(Mz)}function Pz(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Fz(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Oz(e){return this.select(e?Fz:Pz)}function Dz(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Bz(e){return function(t){e.call(this,t,this.__data__)}}function Nz(e){return e.trim().split(/^|\s+/).map(function(t){var i="",n=t.indexOf(".");return n>=0&&(i=t.slice(n+1),t=t.slice(0,n)),{type:t,name:i}})}function $z(e){return function(){var t=this.__on;if(t){for(var i=0,n=-1,r=t.length,s;i<r;++i)s=t[i],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++n]=s;++n?t.length=n:delete this.__on}}}function zz(e,t,i){return function(){var n=this.__on,r,s=Bz(t);if(n){for(var o=0,a=n.length;o<a;++o)if((r=n[o]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=s,r.options=i),r.value=t;return}}this.addEventListener(e.type,s,i),r={type:e.type,name:e.name,value:t,listener:s,options:i},n?n.push(r):this.__on=[r]}}function Gz(e,t,i){var n=Nz(e+""),r,s=n.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,c=a.length,h;l<c;++l)for(r=0,h=a[l];r<s;++r)if((o=n[r]).type===h.type&&o.name===h.name)return h.value}return}for(a=t?zz:$z,r=0;r<s;++r)this.each(a(n[r],t,i));return this}function A2(e,t,i){var n=S2(e),r=n.CustomEvent;typeof r=="function"?r=new r(t,i):(r=n.document.createEvent("Event"),i?(r.initEvent(t,i.bubbles,i.cancelable),r.detail=i.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function Wz(e,t){return function(){return A2(this,e,t)}}function jz(e,t){return function(){return A2(this,e,t.apply(this,arguments))}}function Hz(e,t){return this.each((typeof t=="function"?jz:Wz)(e,t))}function*Vz(){for(var e=this._groups,t=0,i=e.length;t<i;++t)for(var n=e[t],r=0,s=n.length,o;r<s;++r)(o=n[r])&&(yield o)}var L2=[null];function Xi(e,t){this._groups=e,this._parents=t}function hh(){return new Xi([[document.documentElement]],L2)}function Uz(){return this}Xi.prototype=hh.prototype={constructor:Xi,select:_4,selectAll:v4,selectChild:E4,selectChildren:L4,filter:M4,data:B4,enter:I4,exit:$4,join:z4,merge:G4,selection:Uz,order:W4,sort:j4,call:V4,nodes:U4,node:q4,size:Y4,empty:X4,each:K4,attr:nz,style:az,property:uz,classed:pz,text:xz,html:wz,raise:Tz,lower:kz,append:Rz,insert:Lz,remove:Iz,clone:Oz,datum:Dz,on:Gz,dispatch:Hz,[Symbol.iterator]:Vz};function Xt(e){return typeof e=="string"?new Xi([[document.querySelector(e)]],[document.documentElement]):new Xi([[e]],L2)}function Py(e,t,i){e.prototype=t.prototype=i,i.constructor=e}function M2(e,t){var i=Object.create(e.prototype);for(var n in t)i[n]=t[n];return i}function uh(){}var Ic=.7,od=1/Ic,Ca="\\s*([+-]?\\d+)\\s*",Pc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",nr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",qz=/^#([0-9a-f]{3,8})$/,Yz=new RegExp(`^rgb\\(${Ca},${Ca},${Ca}\\)$`),Xz=new RegExp(`^rgb\\(${nr},${nr},${nr}\\)$`),Kz=new RegExp(`^rgba\\(${Ca},${Ca},${Ca},${Pc}\\)$`),Zz=new RegExp(`^rgba\\(${nr},${nr},${nr},${Pc}\\)$`),Jz=new RegExp(`^hsl\\(${Pc},${nr},${nr}\\)$`),Qz=new RegExp(`^hsla\\(${Pc},${nr},${nr},${Pc}\\)$`),u1={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Py(uh,Fc,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:d1,formatHex:d1,formatHex8:t6,formatHsl:e6,formatRgb:f1,toString:f1});function d1(){return this.rgb().formatHex()}function t6(){return this.rgb().formatHex8()}function e6(){return I2(this).formatHsl()}function f1(){return this.rgb().formatRgb()}function Fc(e){var t,i;return e=(e+"").trim().toLowerCase(),(t=qz.exec(e))?(i=t[1].length,t=parseInt(t[1],16),i===6?g1(t):i===3?new Gi(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):i===8?Hh(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):i===4?Hh(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Yz.exec(e))?new Gi(t[1],t[2],t[3],1):(t=Xz.exec(e))?new Gi(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Kz.exec(e))?Hh(t[1],t[2],t[3],t[4]):(t=Zz.exec(e))?Hh(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Jz.exec(e))?y1(t[1],t[2]/100,t[3]/100,1):(t=Qz.exec(e))?y1(t[1],t[2]/100,t[3]/100,t[4]):u1.hasOwnProperty(e)?g1(u1[e]):e==="transparent"?new Gi(NaN,NaN,NaN,0):null}function g1(e){return new Gi(e>>16&255,e>>8&255,e&255,1)}function Hh(e,t,i,n){return n<=0&&(e=t=i=NaN),new Gi(e,t,i,n)}function i6(e){return e instanceof uh||(e=Fc(e)),e?(e=e.rgb(),new Gi(e.r,e.g,e.b,e.opacity)):new Gi}function dm(e,t,i,n){return arguments.length===1?i6(e):new Gi(e,t,i,n??1)}function Gi(e,t,i,n){this.r=+e,this.g=+t,this.b=+i,this.opacity=+n}Py(Gi,dm,M2(uh,{brighter(e){return e=e==null?od:Math.pow(od,e),new Gi(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Ic:Math.pow(Ic,e),new Gi(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Gi(po(this.r),po(this.g),po(this.b),ad(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:p1,formatHex:p1,formatHex8:n6,formatRgb:m1,toString:m1}));function p1(){return`#${oo(this.r)}${oo(this.g)}${oo(this.b)}`}function n6(){return`#${oo(this.r)}${oo(this.g)}${oo(this.b)}${oo((isNaN(this.opacity)?1:this.opacity)*255)}`}function m1(){const e=ad(this.opacity);return`${e===1?"rgb(":"rgba("}${po(this.r)}, ${po(this.g)}, ${po(this.b)}${e===1?")":`, ${e})`}`}function ad(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function po(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function oo(e){return e=po(e),(e<16?"0":"")+e.toString(16)}function y1(e,t,i,n){return n<=0?e=t=i=NaN:i<=0||i>=1?e=t=NaN:t<=0&&(e=NaN),new bn(e,t,i,n)}function I2(e){if(e instanceof bn)return new bn(e.h,e.s,e.l,e.opacity);if(e instanceof uh||(e=Fc(e)),!e)return new bn;if(e instanceof bn)return e;e=e.rgb();var t=e.r/255,i=e.g/255,n=e.b/255,r=Math.min(t,i,n),s=Math.max(t,i,n),o=NaN,a=s-r,l=(s+r)/2;return a?(t===s?o=(i-n)/a+(i<n)*6:i===s?o=(n-t)/a+2:o=(t-i)/a+4,a/=l<.5?s+r:2-s-r,o*=60):a=l>0&&l<1?0:o,new bn(o,a,l,e.opacity)}function r6(e,t,i,n){return arguments.length===1?I2(e):new bn(e,t,i,n??1)}function bn(e,t,i,n){this.h=+e,this.s=+t,this.l=+i,this.opacity=+n}Py(bn,r6,M2(uh,{brighter(e){return e=e==null?od:Math.pow(od,e),new bn(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Ic:Math.pow(Ic,e),new bn(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,i=this.l,n=i+(i<.5?i:1-i)*t,r=2*i-n;return new Gi(ep(e>=240?e-240:e+120,r,n),ep(e,r,n),ep(e<120?e+240:e-120,r,n),this.opacity)},clamp(){return new bn(_1(this.h),Vh(this.s),Vh(this.l),ad(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=ad(this.opacity);return`${e===1?"hsl(":"hsla("}${_1(this.h)}, ${Vh(this.s)*100}%, ${Vh(this.l)*100}%${e===1?")":`, ${e})`}`}}));function _1(e){return e=(e||0)%360,e<0?e+360:e}function Vh(e){return Math.max(0,Math.min(1,e||0))}function ep(e,t,i){return(e<60?t+(i-t)*e/60:e<180?i:e<240?t+(i-t)*(240-e)/60:t)*255}const Fy=e=>()=>e;function P2(e,t){return function(i){return e+i*t}}function s6(e,t,i){return e=Math.pow(e,i),t=Math.pow(t,i)-e,i=1/i,function(n){return Math.pow(e+n*t,i)}}function W7(e,t){var i=t-e;return i?P2(e,i>180||i<-180?i-360*Math.round(i/360):i):Fy(isNaN(e)?t:e)}function o6(e){return(e=+e)==1?F2:function(t,i){return i-t?s6(t,i,e):Fy(isNaN(t)?i:t)}}function F2(e,t){var i=t-e;return i?P2(e,i):Fy(isNaN(e)?t:e)}const x1=(function e(t){var i=o6(t);function n(r,s){var o=i((r=dm(r)).r,(s=dm(s)).r),a=i(r.g,s.g),l=i(r.b,s.b),c=F2(r.opacity,s.opacity);return function(h){return r.r=o(h),r.g=a(h),r.b=l(h),r.opacity=c(h),r+""}}return n.gamma=e,n})(1);function fs(e,t){return e=+e,t=+t,function(i){return e*(1-i)+t*i}}var fm=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ip=new RegExp(fm.source,"g");function a6(e){return function(){return e}}function l6(e){return function(t){return e(t)+""}}function c6(e,t){var i=fm.lastIndex=ip.lastIndex=0,n,r,s,o=-1,a=[],l=[];for(e=e+"",t=t+"";(n=fm.exec(e))&&(r=ip.exec(t));)(s=r.index)>i&&(s=t.slice(i,s),a[o]?a[o]+=s:a[++o]=s),(n=n[0])===(r=r[0])?a[o]?a[o]+=r:a[++o]=r:(a[++o]=null,l.push({i:o,x:fs(n,r)})),i=ip.lastIndex;return i<t.length&&(s=t.slice(i),a[o]?a[o]+=s:a[++o]=s),a.length<2?l[0]?l6(l[0].x):a6(t):(t=l.length,function(c){for(var h=0,u;h<t;++h)a[(u=l[h]).i]=u.x(c);return a.join("")})}var C1=180/Math.PI,gm={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function O2(e,t,i,n,r,s){var o,a,l;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(l=e*i+t*n)&&(i-=e*l,n-=t*l),(a=Math.sqrt(i*i+n*n))&&(i/=a,n/=a,l/=a),e*n<t*i&&(e=-e,t=-t,l=-l,o=-o),{translateX:r,translateY:s,rotate:Math.atan2(t,e)*C1,skewX:Math.atan(l)*C1,scaleX:o,scaleY:a}}var Uh;function h6(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?gm:O2(t.a,t.b,t.c,t.d,t.e,t.f)}function u6(e){return e==null||(Uh||(Uh=document.createElementNS("http://www.w3.org/2000/svg","g")),Uh.setAttribute("transform",e),!(e=Uh.transform.baseVal.consolidate()))?gm:(e=e.matrix,O2(e.a,e.b,e.c,e.d,e.e,e.f))}function D2(e,t,i,n){function r(c){return c.length?c.pop()+" ":""}function s(c,h,u,d,f,g){if(c!==u||h!==d){var p=f.push("translate(",null,t,null,i);g.push({i:p-4,x:fs(c,u)},{i:p-2,x:fs(h,d)})}else(u||d)&&f.push("translate("+u+t+d+i)}function o(c,h,u,d){c!==h?(c-h>180?h+=360:h-c>180&&(c+=360),d.push({i:u.push(r(u)+"rotate(",null,n)-2,x:fs(c,h)})):h&&u.push(r(u)+"rotate("+h+n)}function a(c,h,u,d){c!==h?d.push({i:u.push(r(u)+"skewX(",null,n)-2,x:fs(c,h)}):h&&u.push(r(u)+"skewX("+h+n)}function l(c,h,u,d,f,g){if(c!==u||h!==d){var p=f.push(r(f)+"scale(",null,",",null,")");g.push({i:p-4,x:fs(c,u)},{i:p-2,x:fs(h,d)})}else(u!==1||d!==1)&&f.push(r(f)+"scale("+u+","+d+")")}return function(c,h){var u=[],d=[];return c=e(c),h=e(h),s(c.translateX,c.translateY,h.translateX,h.translateY,u,d),o(c.rotate,h.rotate,u,d),a(c.skewX,h.skewX,u,d),l(c.scaleX,c.scaleY,h.scaleX,h.scaleY,u,d),c=h=null,function(f){for(var g=-1,p=d.length,m;++g<p;)u[(m=d[g]).i]=m.x(f);return u.join("")}}}var d6=D2(h6,"px, ","px)","deg)"),f6=D2(u6,", ",")",")"),Va=0,$l=0,Sl=0,B2=1e3,ld,zl,cd=0,Eo=0,Lf=0,Oc=typeof performance=="object"&&performance.now?performance:Date,N2=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Oy(){return Eo||(N2(g6),Eo=Oc.now()+Lf)}function g6(){Eo=0}function hd(){this._call=this._time=this._next=null}hd.prototype=$2.prototype={constructor:hd,restart:function(e,t,i){if(typeof e!="function")throw new TypeError("callback is not a function");i=(i==null?Oy():+i)+(t==null?0:+t),!this._next&&zl!==this&&(zl?zl._next=this:ld=this,zl=this),this._call=e,this._time=i,pm()},stop:function(){this._call&&(this._call=null,this._time=1/0,pm())}};function $2(e,t,i){var n=new hd;return n.restart(e,t,i),n}function p6(){Oy(),++Va;for(var e=ld,t;e;)(t=Eo-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Va}function b1(){Eo=(cd=Oc.now())+Lf,Va=$l=0;try{p6()}finally{Va=0,y6(),Eo=0}}function m6(){var e=Oc.now(),t=e-cd;t>B2&&(Lf-=t,cd=e)}function y6(){for(var e,t=ld,i,n=1/0;t;)t._call?(n>t._time&&(n=t._time),e=t,t=t._next):(i=t._next,t._next=null,t=e?e._next=i:ld=i);zl=e,pm(n)}function pm(e){if(!Va){$l&&($l=clearTimeout($l));var t=e-Eo;t>24?(e<1/0&&($l=setTimeout(b1,e-Oc.now()-Lf)),Sl&&(Sl=clearInterval(Sl))):(Sl||(cd=Oc.now(),Sl=setInterval(m6,B2)),Va=1,N2(b1))}}function v1(e,t,i){var n=new hd;return t=t==null?0:+t,n.restart(r=>{n.stop(),e(r+t)},t,i),n}var _6=_2("start","end","cancel","interrupt"),x6=[],z2=0,w1=1,mm=2,fu=3,S1=4,ym=5,gu=6;function Mf(e,t,i,n,r,s){var o=e.__transition;if(!o)e.__transition={};else if(i in o)return;C6(e,i,{name:t,index:n,group:r,on:_6,tween:x6,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:z2})}function Dy(e,t){var i=Bn(e,t);if(i.state>z2)throw new Error("too late; already scheduled");return i}function hr(e,t){var i=Bn(e,t);if(i.state>fu)throw new Error("too late; already running");return i}function Bn(e,t){var i=e.__transition;if(!i||!(i=i[t]))throw new Error("transition not found");return i}function C6(e,t,i){var n=e.__transition,r;n[t]=i,i.timer=$2(s,0,i.time);function s(c){i.state=w1,i.timer.restart(o,i.delay,i.time),i.delay<=c&&o(c-i.delay)}function o(c){var h,u,d,f;if(i.state!==w1)return l();for(h in n)if(f=n[h],f.name===i.name){if(f.state===fu)return v1(o);f.state===S1?(f.state=gu,f.timer.stop(),f.on.call("interrupt",e,e.__data__,f.index,f.group),delete n[h]):+h<t&&(f.state=gu,f.timer.stop(),f.on.call("cancel",e,e.__data__,f.index,f.group),delete n[h])}if(v1(function(){i.state===fu&&(i.state=S1,i.timer.restart(a,i.delay,i.time),a(c))}),i.state=mm,i.on.call("start",e,e.__data__,i.index,i.group),i.state===mm){for(i.state=fu,r=new Array(d=i.tween.length),h=0,u=-1;h<d;++h)(f=i.tween[h].value.call(e,e.__data__,i.index,i.group))&&(r[++u]=f);r.length=u+1}}function a(c){for(var h=c<i.duration?i.ease.call(null,c/i.duration):(i.timer.restart(l),i.state=ym,1),u=-1,d=r.length;++u<d;)r[u].call(e,h);i.state===ym&&(i.on.call("end",e,e.__data__,i.index,i.group),l())}function l(){i.state=gu,i.timer.stop(),delete n[t];for(var c in n)return;delete e.__transition}}function b6(e,t){var i=e.__transition,n,r,s=!0,o;if(i){t=t==null?null:t+"";for(o in i){if((n=i[o]).name!==t){s=!1;continue}r=n.state>mm&&n.state<ym,n.state=gu,n.timer.stop(),n.on.call(r?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete i[o]}s&&delete e.__transition}}function v6(e){return this.each(function(){b6(this,e)})}function w6(e,t){var i,n;return function(){var r=hr(this,e),s=r.tween;if(s!==i){n=i=s;for(var o=0,a=n.length;o<a;++o)if(n[o].name===t){n=n.slice(),n.splice(o,1);break}}r.tween=n}}function S6(e,t,i){var n,r;if(typeof i!="function")throw new Error;return function(){var s=hr(this,e),o=s.tween;if(o!==n){r=(n=o).slice();for(var a={name:t,value:i},l=0,c=r.length;l<c;++l)if(r[l].name===t){r[l]=a;break}l===c&&r.push(a)}s.tween=r}}function T6(e,t){var i=this._id;if(e+="",arguments.length<2){for(var n=Bn(this.node(),i).tween,r=0,s=n.length,o;r<s;++r)if((o=n[r]).name===e)return o.value;return null}return this.each((t==null?w6:S6)(i,e,t))}function By(e,t,i){var n=e._id;return e.each(function(){var r=hr(this,n);(r.value||(r.value={}))[t]=i.apply(this,arguments)}),function(r){return Bn(r,n).value[t]}}function G2(e,t){var i;return(typeof t=="number"?fs:t instanceof Fc?x1:(i=Fc(t))?(t=i,x1):c6)(e,t)}function E6(e){return function(){this.removeAttribute(e)}}function k6(e){return function(){this.removeAttributeNS(e.space,e.local)}}function R6(e,t,i){var n,r=i+"",s;return function(){var o=this.getAttribute(e);return o===r?null:o===n?s:s=t(n=o,i)}}function A6(e,t,i){var n,r=i+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===r?null:o===n?s:s=t(n=o,i)}}function L6(e,t,i){var n,r,s;return function(){var o,a=i(this),l;return a==null?void this.removeAttribute(e):(o=this.getAttribute(e),l=a+"",o===l?null:o===n&&l===r?s:(r=l,s=t(n=o,a)))}}function M6(e,t,i){var n,r,s;return function(){var o,a=i(this),l;return a==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),l=a+"",o===l?null:o===n&&l===r?s:(r=l,s=t(n=o,a)))}}function I6(e,t){var i=Af(e),n=i==="transform"?f6:G2;return this.attrTween(e,typeof t=="function"?(i.local?M6:L6)(i,n,By(this,"attr."+e,t)):t==null?(i.local?k6:E6)(i):(i.local?A6:R6)(i,n,t))}function P6(e,t){return function(i){this.setAttribute(e,t.call(this,i))}}function F6(e,t){return function(i){this.setAttributeNS(e.space,e.local,t.call(this,i))}}function O6(e,t){var i,n;function r(){var s=t.apply(this,arguments);return s!==n&&(i=(n=s)&&F6(e,s)),i}return r._value=t,r}function D6(e,t){var i,n;function r(){var s=t.apply(this,arguments);return s!==n&&(i=(n=s)&&P6(e,s)),i}return r._value=t,r}function B6(e,t){var i="attr."+e;if(arguments.length<2)return(i=this.tween(i))&&i._value;if(t==null)return this.tween(i,null);if(typeof t!="function")throw new Error;var n=Af(e);return this.tween(i,(n.local?O6:D6)(n,t))}function N6(e,t){return function(){Dy(this,e).delay=+t.apply(this,arguments)}}function $6(e,t){return t=+t,function(){Dy(this,e).delay=t}}function z6(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?N6:$6)(t,e)):Bn(this.node(),t).delay}function G6(e,t){return function(){hr(this,e).duration=+t.apply(this,arguments)}}function W6(e,t){return t=+t,function(){hr(this,e).duration=t}}function j6(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?G6:W6)(t,e)):Bn(this.node(),t).duration}function H6(e,t){if(typeof t!="function")throw new Error;return function(){hr(this,e).ease=t}}function V6(e){var t=this._id;return arguments.length?this.each(H6(t,e)):Bn(this.node(),t).ease}function U6(e,t){return function(){var i=t.apply(this,arguments);if(typeof i!="function")throw new Error;hr(this,e).ease=i}}function q6(e){if(typeof e!="function")throw new Error;return this.each(U6(this._id,e))}function Y6(e){typeof e!="function"&&(e=b2(e));for(var t=this._groups,i=t.length,n=new Array(i),r=0;r<i;++r)for(var s=t[r],o=s.length,a=n[r]=[],l,c=0;c<o;++c)(l=s[c])&&e.call(l,l.__data__,c,s)&&a.push(l);return new jr(n,this._parents,this._name,this._id)}function X6(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,i=e._groups,n=t.length,r=i.length,s=Math.min(n,r),o=new Array(n),a=0;a<s;++a)for(var l=t[a],c=i[a],h=l.length,u=o[a]=new Array(h),d,f=0;f<h;++f)(d=l[f]||c[f])&&(u[f]=d);for(;a<n;++a)o[a]=t[a];return new jr(o,this._parents,this._name,this._id)}function K6(e){return(e+"").trim().split(/^|\s+/).every(function(t){var i=t.indexOf(".");return i>=0&&(t=t.slice(0,i)),!t||t==="start"})}function Z6(e,t,i){var n,r,s=K6(t)?Dy:hr;return function(){var o=s(this,e),a=o.on;a!==n&&(r=(n=a).copy()).on(t,i),o.on=r}}function J6(e,t){var i=this._id;return arguments.length<2?Bn(this.node(),i).on.on(e):this.each(Z6(i,e,t))}function Q6(e){return function(){var t=this.parentNode;for(var i in this.__transition)if(+i!==e)return;t&&t.removeChild(this)}}function tG(){return this.on("end.remove",Q6(this._id))}function eG(e){var t=this._name,i=this._id;typeof e!="function"&&(e=My(e));for(var n=this._groups,r=n.length,s=new Array(r),o=0;o<r;++o)for(var a=n[o],l=a.length,c=s[o]=new Array(l),h,u,d=0;d<l;++d)(h=a[d])&&(u=e.call(h,h.__data__,d,a))&&("__data__"in h&&(u.__data__=h.__data__),c[d]=u,Mf(c[d],t,i,d,c,Bn(h,i)));return new jr(s,this._parents,t,i)}function iG(e){var t=this._name,i=this._id;typeof e!="function"&&(e=C2(e));for(var n=this._groups,r=n.length,s=[],o=[],a=0;a<r;++a)for(var l=n[a],c=l.length,h,u=0;u<c;++u)if(h=l[u]){for(var d=e.call(h,h.__data__,u,l),f,g=Bn(h,i),p=0,m=d.length;p<m;++p)(f=d[p])&&Mf(f,t,i,p,d,g);s.push(d),o.push(h)}return new jr(s,o,t,i)}var nG=hh.prototype.constructor;function rG(){return new nG(this._groups,this._parents)}function sG(e,t){var i,n,r;return function(){var s=Ha(this,e),o=(this.style.removeProperty(e),Ha(this,e));return s===o?null:s===i&&o===n?r:r=t(i=s,n=o)}}function W2(e){return function(){this.style.removeProperty(e)}}function oG(e,t,i){var n,r=i+"",s;return function(){var o=Ha(this,e);return o===r?null:o===n?s:s=t(n=o,i)}}function aG(e,t,i){var n,r,s;return function(){var o=Ha(this,e),a=i(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(e),Ha(this,e))),o===l?null:o===n&&l===r?s:(r=l,s=t(n=o,a))}}function lG(e,t){var i,n,r,s="style."+t,o="end."+s,a;return function(){var l=hr(this,e),c=l.on,h=l.value[s]==null?a||(a=W2(t)):void 0;(c!==i||r!==h)&&(n=(i=c).copy()).on(o,r=h),l.on=n}}function cG(e,t,i){var n=(e+="")=="transform"?d6:G2;return t==null?this.styleTween(e,sG(e,n)).on("end.style."+e,W2(e)):typeof t=="function"?this.styleTween(e,aG(e,n,By(this,"style."+e,t))).each(lG(this._id,e)):this.styleTween(e,oG(e,n,t),i).on("end.style."+e,null)}function hG(e,t,i){return function(n){this.style.setProperty(e,t.call(this,n),i)}}function uG(e,t,i){var n,r;function s(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&hG(e,o,i)),n}return s._value=t,s}function dG(e,t,i){var n="style."+(e+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;return this.tween(n,uG(e,t,i??""))}function fG(e){return function(){this.textContent=e}}function gG(e){return function(){var t=e(this);this.textContent=t??""}}function pG(e){return this.tween("text",typeof e=="function"?gG(By(this,"text",e)):fG(e==null?"":e+""))}function mG(e){return function(t){this.textContent=e.call(this,t)}}function yG(e){var t,i;function n(){var r=e.apply(this,arguments);return r!==i&&(t=(i=r)&&mG(r)),t}return n._value=e,n}function _G(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,yG(e))}function xG(){for(var e=this._name,t=this._id,i=j2(),n=this._groups,r=n.length,s=0;s<r;++s)for(var o=n[s],a=o.length,l,c=0;c<a;++c)if(l=o[c]){var h=Bn(l,t);Mf(l,e,i,c,o,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new jr(n,this._parents,e,i)}function CG(){var e,t,i=this,n=i._id,r=i.size();return new Promise(function(s,o){var a={value:o},l={value:function(){--r===0&&s()}};i.each(function(){var c=hr(this,n),h=c.on;h!==e&&(t=(e=h).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(l)),c.on=t}),r===0&&s()})}var bG=0;function jr(e,t,i,n){this._groups=e,this._parents=t,this._name=i,this._id=n}function j2(){return++bG}var vr=hh.prototype;jr.prototype={constructor:jr,select:eG,selectAll:iG,selectChild:vr.selectChild,selectChildren:vr.selectChildren,filter:Y6,merge:X6,selection:rG,transition:xG,call:vr.call,nodes:vr.nodes,node:vr.node,size:vr.size,empty:vr.empty,each:vr.each,on:J6,attr:I6,attrTween:B6,style:cG,styleTween:dG,text:pG,textTween:_G,remove:tG,tween:T6,delay:z6,duration:j6,ease:V6,easeVarying:q6,end:CG,[Symbol.iterator]:vr[Symbol.iterator]};function vG(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var wG={time:null,delay:0,duration:250,ease:vG};function SG(e,t){for(var i;!(i=e.__transition)||!(i=i[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return i}function TG(e){var t,i;e instanceof jr?(t=e._id,e=e._name):(t=j2(),(i=wG).time=Oy(),e=e==null?null:e+"");for(var n=this._groups,r=n.length,s=0;s<r;++s)for(var o=n[s],a=o.length,l,c=0;c<a;++c)(l=o[c])&&Mf(l,e,t,c,o,i||SG(l,t));return new jr(n,this._parents,e,t)}hh.prototype.interrupt=v6;hh.prototype.transition=TG;const _m=Math.PI,xm=2*_m,Ys=1e-6,EG=xm-Ys;function H2(e){this._+=e[0];for(let t=1,i=e.length;t<i;++t)this._+=arguments[t]+e[t]}function kG(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return H2;const i=10**t;return function(n){this._+=n[0];for(let r=1,s=n.length;r<s;++r)this._+=Math.round(arguments[r]*i)/i+n[r]}}class RG{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?H2:kG(t)}moveTo(t,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+i}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,i){this._append`L${this._x1=+t},${this._y1=+i}`}quadraticCurveTo(t,i,n,r){this._append`Q${+t},${+i},${this._x1=+n},${this._y1=+r}`}bezierCurveTo(t,i,n,r,s,o){this._append`C${+t},${+i},${+n},${+r},${this._x1=+s},${this._y1=+o}`}arcTo(t,i,n,r,s){if(t=+t,i=+i,n=+n,r=+r,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,l=n-t,c=r-i,h=o-t,u=a-i,d=h*h+u*u;if(this._x1===null)this._append`M${this._x1=t},${this._y1=i}`;else if(d>Ys)if(!(Math.abs(u*l-c*h)>Ys)||!s)this._append`L${this._x1=t},${this._y1=i}`;else{let f=n-o,g=r-a,p=l*l+c*c,m=f*f+g*g,y=Math.sqrt(p),_=Math.sqrt(d),C=s*Math.tan((_m-Math.acos((p+d-m)/(2*y*_)))/2),b=C/_,v=C/y;Math.abs(b-1)>Ys&&this._append`L${t+b*h},${i+b*u}`,this._append`A${s},${s},0,0,${+(u*f>h*g)},${this._x1=t+v*l},${this._y1=i+v*c}`}}arc(t,i,n,r,s,o){if(t=+t,i=+i,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let a=n*Math.cos(r),l=n*Math.sin(r),c=t+a,h=i+l,u=1^o,d=o?r-s:s-r;this._x1===null?this._append`M${c},${h}`:(Math.abs(this._x1-c)>Ys||Math.abs(this._y1-h)>Ys)&&this._append`L${c},${h}`,n&&(d<0&&(d=d%xm+xm),d>EG?this._append`A${n},${n},0,1,${u},${t-a},${i-l}A${n},${n},0,1,${u},${this._x1=c},${this._y1=h}`:d>Ys&&this._append`A${n},${n},0,${+(d>=_m)},${u},${this._x1=t+n*Math.cos(s)},${this._y1=i+n*Math.sin(s)}`)}rect(t,i,n,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+i}h${n=+n}v${+r}h${-n}Z`}toString(){return this._}}function Xo(e){return function(){return e}}const j7=Math.abs,H7=Math.atan2,V7=Math.cos,U7=Math.max,q7=Math.min,Y7=Math.sin,X7=Math.sqrt,T1=1e-12,Ny=Math.PI,E1=Ny/2,K7=2*Ny;function Z7(e){return e>1?0:e<-1?Ny:Math.acos(e)}function J7(e){return e>=1?E1:e<=-1?-E1:Math.asin(e)}function AG(e){let t=3;return e.digits=function(i){if(!arguments.length)return t;if(i==null)t=null;else{const n=Math.floor(i);if(!(n>=0))throw new RangeError(`invalid digits: ${i}`);t=n}return e},()=>new RG(t)}function LG(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function V2(e){this._context=e}V2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function ud(e){return new V2(e)}function MG(e){return e[0]}function IG(e){return e[1]}function PG(e,t){var i=Xo(!0),n=null,r=ud,s=null,o=AG(a);e=typeof e=="function"?e:e===void 0?MG:Xo(e),t=typeof t=="function"?t:t===void 0?IG:Xo(t);function a(l){var c,h=(l=LG(l)).length,u,d=!1,f;for(n==null&&(s=r(f=o())),c=0;c<=h;++c)!(c<h&&i(u=l[c],c,l))===d&&((d=!d)?s.lineStart():s.lineEnd()),d&&s.point(+e(u,c,l),+t(u,c,l));if(f)return s=null,f+""||null}return a.x=function(l){return arguments.length?(e=typeof l=="function"?l:Xo(+l),a):e},a.y=function(l){return arguments.length?(t=typeof l=="function"?l:Xo(+l),a):t},a.defined=function(l){return arguments.length?(i=typeof l=="function"?l:Xo(!!l),a):i},a.curve=function(l){return arguments.length?(r=l,n!=null&&(s=r(n)),a):r},a.context=function(l){return arguments.length?(l==null?n=s=null:s=r(n=l),a):n},a}class U2{constructor(t,i){this._context=t,this._x=i}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,i){switch(t=+t,i=+i,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,i):this._context.moveTo(t,i);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,i,t,i):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+i)/2,t,this._y0,t,i);break}}this._x0=t,this._y0=i}}function q2(e){return new U2(e,!0)}function Y2(e){return new U2(e,!1)}function ks(){}function dd(e,t,i){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+i)/6)}function If(e){this._context=e}If.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:dd(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:dd(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function pu(e){return new If(e)}function X2(e){this._context=e}X2.prototype={areaStart:ks,areaEnd:ks,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:dd(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function FG(e){return new X2(e)}function K2(e){this._context=e}K2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var i=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(i,n):this._context.moveTo(i,n);break;case 3:this._point=4;default:dd(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function OG(e){return new K2(e)}function Z2(e,t){this._basis=new If(e),this._beta=t}Z2.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,i=e.length-1;if(i>0)for(var n=e[0],r=t[0],s=e[i]-n,o=t[i]-r,a=-1,l;++a<=i;)l=a/i,this._basis.point(this._beta*e[a]+(1-this._beta)*(n+l*s),this._beta*t[a]+(1-this._beta)*(r+l*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const DG=(function e(t){function i(n){return t===1?new If(n):new Z2(n,t)}return i.beta=function(n){return e(+n)},i})(.85);function fd(e,t,i){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-i),e._x2,e._y2)}function $y(e,t){this._context=e,this._k=(1-t)/6}$y.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:fd(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:fd(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const J2=(function e(t){function i(n){return new $y(n,t)}return i.tension=function(n){return e(+n)},i})(0);function zy(e,t){this._context=e,this._k=(1-t)/6}zy.prototype={areaStart:ks,areaEnd:ks,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:fd(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const BG=(function e(t){function i(n){return new zy(n,t)}return i.tension=function(n){return e(+n)},i})(0);function Gy(e,t){this._context=e,this._k=(1-t)/6}Gy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:fd(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const NG=(function e(t){function i(n){return new Gy(n,t)}return i.tension=function(n){return e(+n)},i})(0);function Wy(e,t,i){var n=e._x1,r=e._y1,s=e._x2,o=e._y2;if(e._l01_a>T1){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,l=3*e._l01_a*(e._l01_a+e._l12_a);n=(n*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/l,r=(r*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/l}if(e._l23_a>T1){var c=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,h=3*e._l23_a*(e._l23_a+e._l12_a);s=(s*c+e._x1*e._l23_2a-t*e._l12_2a)/h,o=(o*c+e._y1*e._l23_2a-i*e._l12_2a)/h}e._context.bezierCurveTo(n,r,s,o,e._x2,e._y2)}function Q2(e,t){this._context=e,this._alpha=t}Q2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var i=this._x2-e,n=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(i*i+n*n,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:Wy(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const tT=(function e(t){function i(n){return t?new Q2(n,t):new $y(n,0)}return i.alpha=function(n){return e(+n)},i})(.5);function eT(e,t){this._context=e,this._alpha=t}eT.prototype={areaStart:ks,areaEnd:ks,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var i=this._x2-e,n=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(i*i+n*n,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Wy(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const $G=(function e(t){function i(n){return t?new eT(n,t):new zy(n,0)}return i.alpha=function(n){return e(+n)},i})(.5);function iT(e,t){this._context=e,this._alpha=t}iT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var i=this._x2-e,n=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(i*i+n*n,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Wy(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const zG=(function e(t){function i(n){return t?new iT(n,t):new Gy(n,0)}return i.alpha=function(n){return e(+n)},i})(.5);function nT(e){this._context=e}nT.prototype={areaStart:ks,areaEnd:ks,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function GG(e){return new nT(e)}function k1(e){return e<0?-1:1}function R1(e,t,i){var n=e._x1-e._x0,r=t-e._x1,s=(e._y1-e._y0)/(n||r<0&&-0),o=(i-e._y1)/(r||n<0&&-0),a=(s*r+o*n)/(n+r);return(k1(s)+k1(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function A1(e,t){var i=e._x1-e._x0;return i?(3*(e._y1-e._y0)/i-t)/2:t}function np(e,t,i){var n=e._x0,r=e._y0,s=e._x1,o=e._y1,a=(s-n)/3;e._context.bezierCurveTo(n+a,r+a*t,s-a,o-a*i,s,o)}function gd(e){this._context=e}gd.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:np(this,this._t0,A1(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var i=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,np(this,A1(this,i=R1(this,e,t)),i);break;default:np(this,this._t0,i=R1(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=i}}};function rT(e){this._context=new sT(e)}(rT.prototype=Object.create(gd.prototype)).point=function(e,t){gd.prototype.point.call(this,t,e)};function sT(e){this._context=e}sT.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,i,n,r,s){this._context.bezierCurveTo(t,e,n,i,s,r)}};function oT(e){return new gd(e)}function aT(e){return new rT(e)}function lT(e){this._context=e}lT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,i=e.length;if(i)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),i===2)this._context.lineTo(e[1],t[1]);else for(var n=L1(e),r=L1(t),s=0,o=1;o<i;++s,++o)this._context.bezierCurveTo(n[0][s],r[0][s],n[1][s],r[1][s],e[o],t[o]);(this._line||this._line!==0&&i===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function L1(e){var t,i=e.length-1,n,r=new Array(i),s=new Array(i),o=new Array(i);for(r[0]=0,s[0]=2,o[0]=e[0]+2*e[1],t=1;t<i-1;++t)r[t]=1,s[t]=4,o[t]=4*e[t]+2*e[t+1];for(r[i-1]=2,s[i-1]=7,o[i-1]=8*e[i-1]+e[i],t=1;t<i;++t)n=r[t]/s[t-1],s[t]-=n,o[t]-=n*o[t-1];for(r[i-1]=o[i-1]/s[i-1],t=i-2;t>=0;--t)r[t]=(o[t]-r[t+1])/s[t];for(s[i-1]=(e[i]+r[i-1])/2,t=0;t<i-1;++t)s[t]=2*e[t+1]-r[t+1];return[r,s]}function cT(e){return new lT(e)}function Pf(e,t){this._context=e,this._t=t}Pf.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var i=this._x*(1-this._t)+e*this._t;this._context.lineTo(i,this._y),this._context.lineTo(i,t)}break}}this._x=e,this._y=t}};function hT(e){return new Pf(e,.5)}function uT(e){return new Pf(e,0)}function dT(e){return new Pf(e,1)}function Gl(e,t,i){this.k=e,this.x=t,this.y=i}Gl.prototype={constructor:Gl,scale:function(e){return e===1?this:new Gl(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Gl(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Gl.prototype;var WG=x(e=>{const{securityLevel:t}=ne();let i=Xt("body");if(t==="sandbox"){const s=Xt(`#i${e}`).node()?.contentDocument??document;i=Xt(s.body)}return i.select(`#${e}`)},"selectSvgElement");function jy(e){return typeof e>"u"||e===null}x(jy,"isNothing");function fT(e){return typeof e=="object"&&e!==null}x(fT,"isObject");function gT(e){return Array.isArray(e)?e:jy(e)?[]:[e]}x(gT,"toArray");function pT(e,t){var i,n,r,s;if(t)for(s=Object.keys(t),i=0,n=s.length;i<n;i+=1)r=s[i],e[r]=t[r];return e}x(pT,"extend");function mT(e,t){var i="",n;for(n=0;n<t;n+=1)i+=e;return i}x(mT,"repeat");function yT(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}x(yT,"isNegativeZero");var jG=jy,HG=fT,VG=gT,UG=mT,qG=yT,YG=pT,je={isNothing:jG,isObject:HG,toArray:VG,repeat:UG,isNegativeZero:qG,extend:YG};function Hy(e,t){var i="",n=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(i+='in "'+e.mark.name+'" '),i+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!t&&e.mark.snippet&&(i+=`

`+e.mark.snippet),n+" "+i):n}x(Hy,"formatError");function Ua(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=Hy(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}x(Ua,"YAMLException$1");Ua.prototype=Object.create(Error.prototype);Ua.prototype.constructor=Ua;Ua.prototype.toString=x(function(t){return this.name+": "+Hy(this,t)},"toString");var zi=Ua;function mu(e,t,i,n,r){var s="",o="",a=Math.floor(r/2)-1;return n-t>a&&(s=" ... ",t=n-a+s.length),i-n>a&&(o=" ...",i=n+a-o.length),{str:s+e.slice(t,i).replace(/\t/g,"")+o,pos:n-t+s.length}}x(mu,"getLine");function yu(e,t){return je.repeat(" ",t-e.length)+e}x(yu,"padStart");function _T(e,t){if(t=Object.create(t||null),!e.buffer)return null;t.maxLength||(t.maxLength=79),typeof t.indent!="number"&&(t.indent=1),typeof t.linesBefore!="number"&&(t.linesBefore=3),typeof t.linesAfter!="number"&&(t.linesAfter=2);for(var i=/\r?\n|\r|\0/g,n=[0],r=[],s,o=-1;s=i.exec(e.buffer);)r.push(s.index),n.push(s.index+s[0].length),e.position<=s.index&&o<0&&(o=n.length-2);o<0&&(o=n.length-1);var a="",l,c,h=Math.min(e.line+t.linesAfter,r.length).toString().length,u=t.maxLength-(t.indent+h+3);for(l=1;l<=t.linesBefore&&!(o-l<0);l++)c=mu(e.buffer,n[o-l],r[o-l],e.position-(n[o]-n[o-l]),u),a=je.repeat(" ",t.indent)+yu((e.line-l+1).toString(),h)+" | "+c.str+`
`+a;for(c=mu(e.buffer,n[o],r[o],e.position,u),a+=je.repeat(" ",t.indent)+yu((e.line+1).toString(),h)+" | "+c.str+`
`,a+=je.repeat("-",t.indent+h+3+c.pos)+`^
`,l=1;l<=t.linesAfter&&!(o+l>=r.length);l++)c=mu(e.buffer,n[o+l],r[o+l],e.position-(n[o]-n[o+l]),u),a+=je.repeat(" ",t.indent)+yu((e.line+l+1).toString(),h)+" | "+c.str+`
`;return a.replace(/\n$/,"")}x(_T,"makeSnippet");var XG=_T,KG=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],ZG=["scalar","sequence","mapping"];function xT(e){var t={};return e!==null&&Object.keys(e).forEach(function(i){e[i].forEach(function(n){t[String(n)]=i})}),t}x(xT,"compileStyleAliases");function CT(e,t){if(t=t||{},Object.keys(t).forEach(function(i){if(KG.indexOf(i)===-1)throw new zi('Unknown option "'+i+'" is met in definition of "'+e+'" YAML type.')}),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(i){return i},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=xT(t.styleAliases||null),ZG.indexOf(this.kind)===-1)throw new zi('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}x(CT,"Type$1");var di=CT;function Cm(e,t){var i=[];return e[t].forEach(function(n){var r=i.length;i.forEach(function(s,o){s.tag===n.tag&&s.kind===n.kind&&s.multi===n.multi&&(r=o)}),i[r]=n}),i}x(Cm,"compileList");function bT(){var e={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},t,i;function n(r){r.multi?(e.multi[r.kind].push(r),e.multi.fallback.push(r)):e[r.kind][r.tag]=e.fallback[r.tag]=r}for(x(n,"collectType"),t=0,i=arguments.length;t<i;t+=1)arguments[t].forEach(n);return e}x(bT,"compileMap");function pd(e){return this.extend(e)}x(pd,"Schema$1");pd.prototype.extend=x(function(t){var i=[],n=[];if(t instanceof di)n.push(t);else if(Array.isArray(t))n=n.concat(t);else if(t&&(Array.isArray(t.implicit)||Array.isArray(t.explicit)))t.implicit&&(i=i.concat(t.implicit)),t.explicit&&(n=n.concat(t.explicit));else throw new zi("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");i.forEach(function(s){if(!(s instanceof di))throw new zi("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(s.loadKind&&s.loadKind!=="scalar")throw new zi("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(s.multi)throw new zi("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(s){if(!(s instanceof di))throw new zi("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var r=Object.create(pd.prototype);return r.implicit=(this.implicit||[]).concat(i),r.explicit=(this.explicit||[]).concat(n),r.compiledImplicit=Cm(r,"implicit"),r.compiledExplicit=Cm(r,"explicit"),r.compiledTypeMap=bT(r.compiledImplicit,r.compiledExplicit),r},"extend");var JG=pd,QG=new di("tag:yaml.org,2002:str",{kind:"scalar",construct:x(function(e){return e!==null?e:""},"construct")}),tW=new di("tag:yaml.org,2002:seq",{kind:"sequence",construct:x(function(e){return e!==null?e:[]},"construct")}),eW=new di("tag:yaml.org,2002:map",{kind:"mapping",construct:x(function(e){return e!==null?e:{}},"construct")}),iW=new JG({explicit:[QG,tW,eW]});function vT(e){if(e===null)return!0;var t=e.length;return t===1&&e==="~"||t===4&&(e==="null"||e==="Null"||e==="NULL")}x(vT,"resolveYamlNull");function wT(){return null}x(wT,"constructYamlNull");function ST(e){return e===null}x(ST,"isNull");var nW=new di("tag:yaml.org,2002:null",{kind:"scalar",resolve:vT,construct:wT,predicate:ST,represent:{canonical:x(function(){return"~"},"canonical"),lowercase:x(function(){return"null"},"lowercase"),uppercase:x(function(){return"NULL"},"uppercase"),camelcase:x(function(){return"Null"},"camelcase"),empty:x(function(){return""},"empty")},defaultStyle:"lowercase"});function TT(e){if(e===null)return!1;var t=e.length;return t===4&&(e==="true"||e==="True"||e==="TRUE")||t===5&&(e==="false"||e==="False"||e==="FALSE")}x(TT,"resolveYamlBoolean");function ET(e){return e==="true"||e==="True"||e==="TRUE"}x(ET,"constructYamlBoolean");function kT(e){return Object.prototype.toString.call(e)==="[object Boolean]"}x(kT,"isBoolean");var rW=new di("tag:yaml.org,2002:bool",{kind:"scalar",resolve:TT,construct:ET,predicate:kT,represent:{lowercase:x(function(e){return e?"true":"false"},"lowercase"),uppercase:x(function(e){return e?"TRUE":"FALSE"},"uppercase"),camelcase:x(function(e){return e?"True":"False"},"camelcase")},defaultStyle:"lowercase"});function RT(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}x(RT,"isHexCode");function AT(e){return 48<=e&&e<=55}x(AT,"isOctCode");function LT(e){return 48<=e&&e<=57}x(LT,"isDecCode");function MT(e){if(e===null)return!1;var t=e.length,i=0,n=!1,r;if(!t)return!1;if(r=e[i],(r==="-"||r==="+")&&(r=e[++i]),r==="0"){if(i+1===t)return!0;if(r=e[++i],r==="b"){for(i++;i<t;i++)if(r=e[i],r!=="_"){if(r!=="0"&&r!=="1")return!1;n=!0}return n&&r!=="_"}if(r==="x"){for(i++;i<t;i++)if(r=e[i],r!=="_"){if(!RT(e.charCodeAt(i)))return!1;n=!0}return n&&r!=="_"}if(r==="o"){for(i++;i<t;i++)if(r=e[i],r!=="_"){if(!AT(e.charCodeAt(i)))return!1;n=!0}return n&&r!=="_"}}if(r==="_")return!1;for(;i<t;i++)if(r=e[i],r!=="_"){if(!LT(e.charCodeAt(i)))return!1;n=!0}return!(!n||r==="_")}x(MT,"resolveYamlInteger");function IT(e){var t=e,i=1,n;if(t.indexOf("_")!==-1&&(t=t.replace(/_/g,"")),n=t[0],(n==="-"||n==="+")&&(n==="-"&&(i=-1),t=t.slice(1),n=t[0]),t==="0")return 0;if(n==="0"){if(t[1]==="b")return i*parseInt(t.slice(2),2);if(t[1]==="x")return i*parseInt(t.slice(2),16);if(t[1]==="o")return i*parseInt(t.slice(2),8)}return i*parseInt(t,10)}x(IT,"constructYamlInteger");function PT(e){return Object.prototype.toString.call(e)==="[object Number]"&&e%1===0&&!je.isNegativeZero(e)}x(PT,"isInteger");var sW=new di("tag:yaml.org,2002:int",{kind:"scalar",resolve:MT,construct:IT,predicate:PT,represent:{binary:x(function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},"binary"),octal:x(function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},"octal"),decimal:x(function(e){return e.toString(10)},"decimal"),hexadecimal:x(function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)},"hexadecimal")},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),oW=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function FT(e){return!(e===null||!oW.test(e)||e[e.length-1]==="_")}x(FT,"resolveYamlFloat");function OT(e){var t,i;return t=e.replace(/_/g,"").toLowerCase(),i=t[0]==="-"?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),t===".inf"?i===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:t===".nan"?NaN:i*parseFloat(t,10)}x(OT,"constructYamlFloat");var aW=/^[-+]?[0-9]+e/;function DT(e,t){var i;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(je.isNegativeZero(e))return"-0.0";return i=e.toString(10),aW.test(i)?i.replace("e",".e"):i}x(DT,"representYamlFloat");function BT(e){return Object.prototype.toString.call(e)==="[object Number]"&&(e%1!==0||je.isNegativeZero(e))}x(BT,"isFloat");var lW=new di("tag:yaml.org,2002:float",{kind:"scalar",resolve:FT,construct:OT,predicate:BT,represent:DT,defaultStyle:"lowercase"}),NT=iW.extend({implicit:[nW,rW,sW,lW]}),cW=NT,$T=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),zT=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function GT(e){return e===null?!1:$T.exec(e)!==null||zT.exec(e)!==null}x(GT,"resolveYamlTimestamp");function WT(e){var t,i,n,r,s,o,a,l=0,c=null,h,u,d;if(t=$T.exec(e),t===null&&(t=zT.exec(e)),t===null)throw new Error("Date resolve error");if(i=+t[1],n=+t[2]-1,r=+t[3],!t[4])return new Date(Date.UTC(i,n,r));if(s=+t[4],o=+t[5],a=+t[6],t[7]){for(l=t[7].slice(0,3);l.length<3;)l+="0";l=+l}return t[9]&&(h=+t[10],u=+(t[11]||0),c=(h*60+u)*6e4,t[9]==="-"&&(c=-c)),d=new Date(Date.UTC(i,n,r,s,o,a,l)),c&&d.setTime(d.getTime()-c),d}x(WT,"constructYamlTimestamp");function jT(e){return e.toISOString()}x(jT,"representYamlTimestamp");var hW=new di("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:GT,construct:WT,instanceOf:Date,represent:jT});function HT(e){return e==="<<"||e===null}x(HT,"resolveYamlMerge");var uW=new di("tag:yaml.org,2002:merge",{kind:"scalar",resolve:HT}),Vy=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function VT(e){if(e===null)return!1;var t,i,n=0,r=e.length,s=Vy;for(i=0;i<r;i++)if(t=s.indexOf(e.charAt(i)),!(t>64)){if(t<0)return!1;n+=6}return n%8===0}x(VT,"resolveYamlBinary");function UT(e){var t,i,n=e.replace(/[\r\n=]/g,""),r=n.length,s=Vy,o=0,a=[];for(t=0;t<r;t++)t%4===0&&t&&(a.push(o>>16&255),a.push(o>>8&255),a.push(o&255)),o=o<<6|s.indexOf(n.charAt(t));return i=r%4*6,i===0?(a.push(o>>16&255),a.push(o>>8&255),a.push(o&255)):i===18?(a.push(o>>10&255),a.push(o>>2&255)):i===12&&a.push(o>>4&255),new Uint8Array(a)}x(UT,"constructYamlBinary");function qT(e){var t="",i=0,n,r,s=e.length,o=Vy;for(n=0;n<s;n++)n%3===0&&n&&(t+=o[i>>18&63],t+=o[i>>12&63],t+=o[i>>6&63],t+=o[i&63]),i=(i<<8)+e[n];return r=s%3,r===0?(t+=o[i>>18&63],t+=o[i>>12&63],t+=o[i>>6&63],t+=o[i&63]):r===2?(t+=o[i>>10&63],t+=o[i>>4&63],t+=o[i<<2&63],t+=o[64]):r===1&&(t+=o[i>>2&63],t+=o[i<<4&63],t+=o[64],t+=o[64]),t}x(qT,"representYamlBinary");function YT(e){return Object.prototype.toString.call(e)==="[object Uint8Array]"}x(YT,"isBinary");var dW=new di("tag:yaml.org,2002:binary",{kind:"scalar",resolve:VT,construct:UT,predicate:YT,represent:qT}),fW=Object.prototype.hasOwnProperty,gW=Object.prototype.toString;function XT(e){if(e===null)return!0;var t=[],i,n,r,s,o,a=e;for(i=0,n=a.length;i<n;i+=1){if(r=a[i],o=!1,gW.call(r)!=="[object Object]")return!1;for(s in r)if(fW.call(r,s))if(!o)o=!0;else return!1;if(!o)return!1;if(t.indexOf(s)===-1)t.push(s);else return!1}return!0}x(XT,"resolveYamlOmap");function KT(e){return e!==null?e:[]}x(KT,"constructYamlOmap");var pW=new di("tag:yaml.org,2002:omap",{kind:"sequence",resolve:XT,construct:KT}),mW=Object.prototype.toString;function ZT(e){if(e===null)return!0;var t,i,n,r,s,o=e;for(s=new Array(o.length),t=0,i=o.length;t<i;t+=1){if(n=o[t],mW.call(n)!=="[object Object]"||(r=Object.keys(n),r.length!==1))return!1;s[t]=[r[0],n[r[0]]]}return!0}x(ZT,"resolveYamlPairs");function JT(e){if(e===null)return[];var t,i,n,r,s,o=e;for(s=new Array(o.length),t=0,i=o.length;t<i;t+=1)n=o[t],r=Object.keys(n),s[t]=[r[0],n[r[0]]];return s}x(JT,"constructYamlPairs");var yW=new di("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:ZT,construct:JT}),_W=Object.prototype.hasOwnProperty;function QT(e){if(e===null)return!0;var t,i=e;for(t in i)if(_W.call(i,t)&&i[t]!==null)return!1;return!0}x(QT,"resolveYamlSet");function tE(e){return e!==null?e:{}}x(tE,"constructYamlSet");var xW=new di("tag:yaml.org,2002:set",{kind:"mapping",resolve:QT,construct:tE}),eE=cW.extend({implicit:[hW,uW],explicit:[dW,pW,yW,xW]}),Rs=Object.prototype.hasOwnProperty,md=1,iE=2,nE=3,yd=4,rp=1,CW=2,M1=3,bW=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,vW=/[\x85\u2028\u2029]/,wW=/[,\[\]\{\}]/,rE=/^(?:!|!!|![a-z\-]+!)$/i,sE=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function bm(e){return Object.prototype.toString.call(e)}x(bm,"_class");function Ln(e){return e===10||e===13}x(Ln,"is_EOL");function ws(e){return e===9||e===32}x(ws,"is_WHITE_SPACE");function Ti(e){return e===9||e===32||e===10||e===13}x(Ti,"is_WS_OR_EOL");function ao(e){return e===44||e===91||e===93||e===123||e===125}x(ao,"is_FLOW_INDICATOR");function oE(e){var t;return 48<=e&&e<=57?e-48:(t=e|32,97<=t&&t<=102?t-97+10:-1)}x(oE,"fromHexCode");function aE(e){return e===120?2:e===117?4:e===85?8:0}x(aE,"escapedHexLen");function lE(e){return 48<=e&&e<=57?e-48:-1}x(lE,"fromDecimalCode");function vm(e){return e===48?"\0":e===97?"\x07":e===98?"\b":e===116||e===9?"	":e===110?`
`:e===118?"\v":e===102?"\f":e===114?"\r":e===101?"\x1B":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"":e===95?"":e===76?"\u2028":e===80?"\u2029":""}x(vm,"simpleEscapeSequence");function cE(e){return e<=65535?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}x(cE,"charFromCodepoint");var hE=new Array(256),uE=new Array(256);for(Vs=0;Vs<256;Vs++)hE[Vs]=vm(Vs)?1:0,uE[Vs]=vm(Vs);var Vs;function dE(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||eE,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}x(dE,"State$1");function Uy(e,t){var i={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return i.snippet=XG(i),new zi(t,i)}x(Uy,"generateError");function vt(e,t){throw Uy(e,t)}x(vt,"throwError");function Dc(e,t){e.onWarning&&e.onWarning.call(null,Uy(e,t))}x(Dc,"throwWarning");var I1={YAML:x(function(t,i,n){var r,s,o;t.version!==null&&vt(t,"duplication of %YAML directive"),n.length!==1&&vt(t,"YAML directive accepts exactly one argument"),r=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),r===null&&vt(t,"ill-formed argument of the YAML directive"),s=parseInt(r[1],10),o=parseInt(r[2],10),s!==1&&vt(t,"unacceptable YAML version of the document"),t.version=n[0],t.checkLineBreaks=o<2,o!==1&&o!==2&&Dc(t,"unsupported YAML version of the document")},"handleYamlDirective"),TAG:x(function(t,i,n){var r,s;n.length!==2&&vt(t,"TAG directive accepts exactly two arguments"),r=n[0],s=n[1],rE.test(r)||vt(t,"ill-formed tag handle (first argument) of the TAG directive"),Rs.call(t.tagMap,r)&&vt(t,'there is a previously declared suffix for "'+r+'" tag handle'),sE.test(s)||vt(t,"ill-formed tag prefix (second argument) of the TAG directive");try{s=decodeURIComponent(s)}catch{vt(t,"tag prefix is malformed: "+s)}t.tagMap[r]=s},"handleTagDirective")};function Dr(e,t,i,n){var r,s,o,a;if(t<i){if(a=e.input.slice(t,i),n)for(r=0,s=a.length;r<s;r+=1)o=a.charCodeAt(r),o===9||32<=o&&o<=1114111||vt(e,"expected valid JSON character");else bW.test(a)&&vt(e,"the stream contains non-printable characters");e.result+=a}}x(Dr,"captureSegment");function wm(e,t,i,n){var r,s,o,a;for(je.isObject(i)||vt(e,"cannot merge mappings; the provided source object is unacceptable"),r=Object.keys(i),o=0,a=r.length;o<a;o+=1)s=r[o],Rs.call(t,s)||(t[s]=i[s],n[s]=!0)}x(wm,"mergeMappings");function lo(e,t,i,n,r,s,o,a,l){var c,h;if(Array.isArray(r))for(r=Array.prototype.slice.call(r),c=0,h=r.length;c<h;c+=1)Array.isArray(r[c])&&vt(e,"nested arrays are not supported inside keys"),typeof r=="object"&&bm(r[c])==="[object Object]"&&(r[c]="[object Object]");if(typeof r=="object"&&bm(r)==="[object Object]"&&(r="[object Object]"),r=String(r),t===null&&(t={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(s))for(c=0,h=s.length;c<h;c+=1)wm(e,t,s[c],i);else wm(e,t,s,i);else!e.json&&!Rs.call(i,r)&&Rs.call(t,r)&&(e.line=o||e.line,e.lineStart=a||e.lineStart,e.position=l||e.position,vt(e,"duplicated mapping key")),r==="__proto__"?Object.defineProperty(t,r,{configurable:!0,enumerable:!0,writable:!0,value:s}):t[r]=s,delete i[r];return t}x(lo,"storeMappingPair");function Ff(e){var t;t=e.input.charCodeAt(e.position),t===10?e.position++:t===13?(e.position++,e.input.charCodeAt(e.position)===10&&e.position++):vt(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}x(Ff,"readLineBreak");function Re(e,t,i){for(var n=0,r=e.input.charCodeAt(e.position);r!==0;){for(;ws(r);)r===9&&e.firstTabInLine===-1&&(e.firstTabInLine=e.position),r=e.input.charCodeAt(++e.position);if(t&&r===35)do r=e.input.charCodeAt(++e.position);while(r!==10&&r!==13&&r!==0);if(Ln(r))for(Ff(e),r=e.input.charCodeAt(e.position),n++,e.lineIndent=0;r===32;)e.lineIndent++,r=e.input.charCodeAt(++e.position);else break}return i!==-1&&n!==0&&e.lineIndent<i&&Dc(e,"deficient indentation"),n}x(Re,"skipSeparationSpace");function dh(e){var t=e.position,i;return i=e.input.charCodeAt(t),!!((i===45||i===46)&&i===e.input.charCodeAt(t+1)&&i===e.input.charCodeAt(t+2)&&(t+=3,i=e.input.charCodeAt(t),i===0||Ti(i)))}x(dh,"testDocumentSeparator");function Of(e,t){t===1?e.result+=" ":t>1&&(e.result+=je.repeat(`
`,t-1))}x(Of,"writeFoldedLines");function fE(e,t,i){var n,r,s,o,a,l,c,h,u=e.kind,d=e.result,f;if(f=e.input.charCodeAt(e.position),Ti(f)||ao(f)||f===35||f===38||f===42||f===33||f===124||f===62||f===39||f===34||f===37||f===64||f===96||(f===63||f===45)&&(r=e.input.charCodeAt(e.position+1),Ti(r)||i&&ao(r)))return!1;for(e.kind="scalar",e.result="",s=o=e.position,a=!1;f!==0;){if(f===58){if(r=e.input.charCodeAt(e.position+1),Ti(r)||i&&ao(r))break}else if(f===35){if(n=e.input.charCodeAt(e.position-1),Ti(n))break}else{if(e.position===e.lineStart&&dh(e)||i&&ao(f))break;if(Ln(f))if(l=e.line,c=e.lineStart,h=e.lineIndent,Re(e,!1,-1),e.lineIndent>=t){a=!0,f=e.input.charCodeAt(e.position);continue}else{e.position=o,e.line=l,e.lineStart=c,e.lineIndent=h;break}}a&&(Dr(e,s,o,!1),Of(e,e.line-l),s=o=e.position,a=!1),ws(f)||(o=e.position+1),f=e.input.charCodeAt(++e.position)}return Dr(e,s,o,!1),e.result?!0:(e.kind=u,e.result=d,!1)}x(fE,"readPlainScalar");function gE(e,t){var i,n,r;if(i=e.input.charCodeAt(e.position),i!==39)return!1;for(e.kind="scalar",e.result="",e.position++,n=r=e.position;(i=e.input.charCodeAt(e.position))!==0;)if(i===39)if(Dr(e,n,e.position,!0),i=e.input.charCodeAt(++e.position),i===39)n=e.position,e.position++,r=e.position;else return!0;else Ln(i)?(Dr(e,n,r,!0),Of(e,Re(e,!1,t)),n=r=e.position):e.position===e.lineStart&&dh(e)?vt(e,"unexpected end of the document within a single quoted scalar"):(e.position++,r=e.position);vt(e,"unexpected end of the stream within a single quoted scalar")}x(gE,"readSingleQuotedScalar");function pE(e,t){var i,n,r,s,o,a;if(a=e.input.charCodeAt(e.position),a!==34)return!1;for(e.kind="scalar",e.result="",e.position++,i=n=e.position;(a=e.input.charCodeAt(e.position))!==0;){if(a===34)return Dr(e,i,e.position,!0),e.position++,!0;if(a===92){if(Dr(e,i,e.position,!0),a=e.input.charCodeAt(++e.position),Ln(a))Re(e,!1,t);else if(a<256&&hE[a])e.result+=uE[a],e.position++;else if((o=aE(a))>0){for(r=o,s=0;r>0;r--)a=e.input.charCodeAt(++e.position),(o=oE(a))>=0?s=(s<<4)+o:vt(e,"expected hexadecimal character");e.result+=cE(s),e.position++}else vt(e,"unknown escape sequence");i=n=e.position}else Ln(a)?(Dr(e,i,n,!0),Of(e,Re(e,!1,t)),i=n=e.position):e.position===e.lineStart&&dh(e)?vt(e,"unexpected end of the document within a double quoted scalar"):(e.position++,n=e.position)}vt(e,"unexpected end of the stream within a double quoted scalar")}x(pE,"readDoubleQuotedScalar");function mE(e,t){var i=!0,n,r,s,o=e.tag,a,l=e.anchor,c,h,u,d,f,g=Object.create(null),p,m,y,_;if(_=e.input.charCodeAt(e.position),_===91)h=93,f=!1,a=[];else if(_===123)h=125,f=!0,a={};else return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=a),_=e.input.charCodeAt(++e.position);_!==0;){if(Re(e,!0,t),_=e.input.charCodeAt(e.position),_===h)return e.position++,e.tag=o,e.anchor=l,e.kind=f?"mapping":"sequence",e.result=a,!0;i?_===44&&vt(e,"expected the node content, but found ','"):vt(e,"missed comma between flow collection entries"),m=p=y=null,u=d=!1,_===63&&(c=e.input.charCodeAt(e.position+1),Ti(c)&&(u=d=!0,e.position++,Re(e,!0,t))),n=e.line,r=e.lineStart,s=e.position,ko(e,t,md,!1,!0),m=e.tag,p=e.result,Re(e,!0,t),_=e.input.charCodeAt(e.position),(d||e.line===n)&&_===58&&(u=!0,_=e.input.charCodeAt(++e.position),Re(e,!0,t),ko(e,t,md,!1,!0),y=e.result),f?lo(e,a,g,m,p,y,n,r,s):u?a.push(lo(e,null,g,m,p,y,n,r,s)):a.push(p),Re(e,!0,t),_=e.input.charCodeAt(e.position),_===44?(i=!0,_=e.input.charCodeAt(++e.position)):i=!1}vt(e,"unexpected end of the stream within a flow collection")}x(mE,"readFlowCollection");function yE(e,t){var i,n,r=rp,s=!1,o=!1,a=t,l=0,c=!1,h,u;if(u=e.input.charCodeAt(e.position),u===124)n=!1;else if(u===62)n=!0;else return!1;for(e.kind="scalar",e.result="";u!==0;)if(u=e.input.charCodeAt(++e.position),u===43||u===45)rp===r?r=u===43?M1:CW:vt(e,"repeat of a chomping mode identifier");else if((h=lE(u))>=0)h===0?vt(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):o?vt(e,"repeat of an indentation width identifier"):(a=t+h-1,o=!0);else break;if(ws(u)){do u=e.input.charCodeAt(++e.position);while(ws(u));if(u===35)do u=e.input.charCodeAt(++e.position);while(!Ln(u)&&u!==0)}for(;u!==0;){for(Ff(e),e.lineIndent=0,u=e.input.charCodeAt(e.position);(!o||e.lineIndent<a)&&u===32;)e.lineIndent++,u=e.input.charCodeAt(++e.position);if(!o&&e.lineIndent>a&&(a=e.lineIndent),Ln(u)){l++;continue}if(e.lineIndent<a){r===M1?e.result+=je.repeat(`
`,s?1+l:l):r===rp&&s&&(e.result+=`
`);break}for(n?ws(u)?(c=!0,e.result+=je.repeat(`
`,s?1+l:l)):c?(c=!1,e.result+=je.repeat(`
`,l+1)):l===0?s&&(e.result+=" "):e.result+=je.repeat(`
`,l):e.result+=je.repeat(`
`,s?1+l:l),s=!0,o=!0,l=0,i=e.position;!Ln(u)&&u!==0;)u=e.input.charCodeAt(++e.position);Dr(e,i,e.position,!1)}return!0}x(yE,"readBlockScalar");function Sm(e,t){var i,n=e.tag,r=e.anchor,s=[],o,a=!1,l;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=s),l=e.input.charCodeAt(e.position);l!==0&&(e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,vt(e,"tab characters must not be used in indentation")),!(l!==45||(o=e.input.charCodeAt(e.position+1),!Ti(o))));){if(a=!0,e.position++,Re(e,!0,-1)&&e.lineIndent<=t){s.push(null),l=e.input.charCodeAt(e.position);continue}if(i=e.line,ko(e,t,nE,!1,!0),s.push(e.result),Re(e,!0,-1),l=e.input.charCodeAt(e.position),(e.line===i||e.lineIndent>t)&&l!==0)vt(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break}return a?(e.tag=n,e.anchor=r,e.kind="sequence",e.result=s,!0):!1}x(Sm,"readBlockSequence");function _E(e,t,i){var n,r,s,o,a,l,c=e.tag,h=e.anchor,u={},d=Object.create(null),f=null,g=null,p=null,m=!1,y=!1,_;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=u),_=e.input.charCodeAt(e.position);_!==0;){if(!m&&e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,vt(e,"tab characters must not be used in indentation")),n=e.input.charCodeAt(e.position+1),s=e.line,(_===63||_===58)&&Ti(n))_===63?(m&&(lo(e,u,d,f,g,null,o,a,l),f=g=p=null),y=!0,m=!0,r=!0):m?(m=!1,r=!0):vt(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,_=n;else{if(o=e.line,a=e.lineStart,l=e.position,!ko(e,i,iE,!1,!0))break;if(e.line===s){for(_=e.input.charCodeAt(e.position);ws(_);)_=e.input.charCodeAt(++e.position);if(_===58)_=e.input.charCodeAt(++e.position),Ti(_)||vt(e,"a whitespace character is expected after the key-value separator within a block mapping"),m&&(lo(e,u,d,f,g,null,o,a,l),f=g=p=null),y=!0,m=!1,r=!1,f=e.tag,g=e.result;else if(y)vt(e,"can not read an implicit mapping pair; a colon is missed");else return e.tag=c,e.anchor=h,!0}else if(y)vt(e,"can not read a block mapping entry; a multiline key may not be an implicit key");else return e.tag=c,e.anchor=h,!0}if((e.line===s||e.lineIndent>t)&&(m&&(o=e.line,a=e.lineStart,l=e.position),ko(e,t,yd,!0,r)&&(m?g=e.result:p=e.result),m||(lo(e,u,d,f,g,p,o,a,l),f=g=p=null),Re(e,!0,-1),_=e.input.charCodeAt(e.position)),(e.line===s||e.lineIndent>t)&&_!==0)vt(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return m&&lo(e,u,d,f,g,null,o,a,l),y&&(e.tag=c,e.anchor=h,e.kind="mapping",e.result=u),y}x(_E,"readBlockMapping");function xE(e){var t,i=!1,n=!1,r,s,o;if(o=e.input.charCodeAt(e.position),o!==33)return!1;if(e.tag!==null&&vt(e,"duplication of a tag property"),o=e.input.charCodeAt(++e.position),o===60?(i=!0,o=e.input.charCodeAt(++e.position)):o===33?(n=!0,r="!!",o=e.input.charCodeAt(++e.position)):r="!",t=e.position,i){do o=e.input.charCodeAt(++e.position);while(o!==0&&o!==62);e.position<e.length?(s=e.input.slice(t,e.position),o=e.input.charCodeAt(++e.position)):vt(e,"unexpected end of the stream within a verbatim tag")}else{for(;o!==0&&!Ti(o);)o===33&&(n?vt(e,"tag suffix cannot contain exclamation marks"):(r=e.input.slice(t-1,e.position+1),rE.test(r)||vt(e,"named tag handle cannot contain such characters"),n=!0,t=e.position+1)),o=e.input.charCodeAt(++e.position);s=e.input.slice(t,e.position),wW.test(s)&&vt(e,"tag suffix cannot contain flow indicator characters")}s&&!sE.test(s)&&vt(e,"tag name cannot contain such characters: "+s);try{s=decodeURIComponent(s)}catch{vt(e,"tag name is malformed: "+s)}return i?e.tag=s:Rs.call(e.tagMap,r)?e.tag=e.tagMap[r]+s:r==="!"?e.tag="!"+s:r==="!!"?e.tag="tag:yaml.org,2002:"+s:vt(e,'undeclared tag handle "'+r+'"'),!0}x(xE,"readTagProperty");function CE(e){var t,i;if(i=e.input.charCodeAt(e.position),i!==38)return!1;for(e.anchor!==null&&vt(e,"duplication of an anchor property"),i=e.input.charCodeAt(++e.position),t=e.position;i!==0&&!Ti(i)&&!ao(i);)i=e.input.charCodeAt(++e.position);return e.position===t&&vt(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}x(CE,"readAnchorProperty");function bE(e){var t,i,n;if(n=e.input.charCodeAt(e.position),n!==42)return!1;for(n=e.input.charCodeAt(++e.position),t=e.position;n!==0&&!Ti(n)&&!ao(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&vt(e,"name of an alias node must contain at least one character"),i=e.input.slice(t,e.position),Rs.call(e.anchorMap,i)||vt(e,'unidentified alias "'+i+'"'),e.result=e.anchorMap[i],Re(e,!0,-1),!0}x(bE,"readAlias");function ko(e,t,i,n,r){var s,o,a,l=1,c=!1,h=!1,u,d,f,g,p,m;if(e.listener!==null&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,s=o=a=yd===i||nE===i,n&&Re(e,!0,-1)&&(c=!0,e.lineIndent>t?l=1:e.lineIndent===t?l=0:e.lineIndent<t&&(l=-1)),l===1)for(;xE(e)||CE(e);)Re(e,!0,-1)?(c=!0,a=s,e.lineIndent>t?l=1:e.lineIndent===t?l=0:e.lineIndent<t&&(l=-1)):a=!1;if(a&&(a=c||r),(l===1||yd===i)&&(md===i||iE===i?p=t:p=t+1,m=e.position-e.lineStart,l===1?a&&(Sm(e,m)||_E(e,m,p))||mE(e,p)?h=!0:(o&&yE(e,p)||gE(e,p)||pE(e,p)?h=!0:bE(e)?(h=!0,(e.tag!==null||e.anchor!==null)&&vt(e,"alias node should not have any properties")):fE(e,p,md===i)&&(h=!0,e.tag===null&&(e.tag="?")),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):l===0&&(h=a&&Sm(e,m))),e.tag===null)e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);else if(e.tag==="?"){for(e.result!==null&&e.kind!=="scalar"&&vt(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),u=0,d=e.implicitTypes.length;u<d;u+=1)if(g=e.implicitTypes[u],g.resolve(e.result)){e.result=g.construct(e.result),e.tag=g.tag,e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);break}}else if(e.tag!=="!"){if(Rs.call(e.typeMap[e.kind||"fallback"],e.tag))g=e.typeMap[e.kind||"fallback"][e.tag];else for(g=null,f=e.typeMap.multi[e.kind||"fallback"],u=0,d=f.length;u<d;u+=1)if(e.tag.slice(0,f[u].tag.length)===f[u].tag){g=f[u];break}g||vt(e,"unknown tag !<"+e.tag+">"),e.result!==null&&g.kind!==e.kind&&vt(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+g.kind+'", not "'+e.kind+'"'),g.resolve(e.result,e.tag)?(e.result=g.construct(e.result,e.tag),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):vt(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return e.listener!==null&&e.listener("close",e),e.tag!==null||e.anchor!==null||h}x(ko,"composeNode");function vE(e){var t=e.position,i,n,r,s=!1,o;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);(o=e.input.charCodeAt(e.position))!==0&&(Re(e,!0,-1),o=e.input.charCodeAt(e.position),!(e.lineIndent>0||o!==37));){for(s=!0,o=e.input.charCodeAt(++e.position),i=e.position;o!==0&&!Ti(o);)o=e.input.charCodeAt(++e.position);for(n=e.input.slice(i,e.position),r=[],n.length<1&&vt(e,"directive name must not be less than one character in length");o!==0;){for(;ws(o);)o=e.input.charCodeAt(++e.position);if(o===35){do o=e.input.charCodeAt(++e.position);while(o!==0&&!Ln(o));break}if(Ln(o))break;for(i=e.position;o!==0&&!Ti(o);)o=e.input.charCodeAt(++e.position);r.push(e.input.slice(i,e.position))}o!==0&&Ff(e),Rs.call(I1,n)?I1[n](e,n,r):Dc(e,'unknown document directive "'+n+'"')}if(Re(e,!0,-1),e.lineIndent===0&&e.input.charCodeAt(e.position)===45&&e.input.charCodeAt(e.position+1)===45&&e.input.charCodeAt(e.position+2)===45?(e.position+=3,Re(e,!0,-1)):s&&vt(e,"directives end mark is expected"),ko(e,e.lineIndent-1,yd,!1,!0),Re(e,!0,-1),e.checkLineBreaks&&vW.test(e.input.slice(t,e.position))&&Dc(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&dh(e)){e.input.charCodeAt(e.position)===46&&(e.position+=3,Re(e,!0,-1));return}if(e.position<e.length-1)vt(e,"end of the stream or a document separator is expected");else return}x(vE,"readDocument");function qy(e,t){e=String(e),t=t||{},e.length!==0&&(e.charCodeAt(e.length-1)!==10&&e.charCodeAt(e.length-1)!==13&&(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1)));var i=new dE(e,t),n=e.indexOf("\0");for(n!==-1&&(i.position=n,vt(i,"null byte is not allowed in input")),i.input+="\0";i.input.charCodeAt(i.position)===32;)i.lineIndent+=1,i.position+=1;for(;i.position<i.length-1;)vE(i);return i.documents}x(qy,"loadDocuments");function SW(e,t,i){t!==null&&typeof t=="object"&&typeof i>"u"&&(i=t,t=null);var n=qy(e,i);if(typeof t!="function")return n;for(var r=0,s=n.length;r<s;r+=1)t(n[r])}x(SW,"loadAll$1");function wE(e,t){var i=qy(e,t);if(i.length!==0){if(i.length===1)return i[0];throw new zi("expected a single document in the stream, but found more")}}x(wE,"load$1");var TW=wE,EW={load:TW},SE=Object.prototype.toString,TE=Object.prototype.hasOwnProperty,Yy=65279,kW=9,Bc=10,RW=13,AW=32,LW=33,MW=34,Tm=35,IW=37,PW=38,FW=39,OW=42,EE=44,DW=45,_d=58,BW=61,NW=62,$W=63,zW=64,kE=91,RE=93,GW=96,AE=123,WW=124,LE=125,gi={};gi[0]="\\0";gi[7]="\\a";gi[8]="\\b";gi[9]="\\t";gi[10]="\\n";gi[11]="\\v";gi[12]="\\f";gi[13]="\\r";gi[27]="\\e";gi[34]='\\"';gi[92]="\\\\";gi[133]="\\N";gi[160]="\\_";gi[8232]="\\L";gi[8233]="\\P";var jW=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],HW=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function ME(e,t){var i,n,r,s,o,a,l;if(t===null)return{};for(i={},n=Object.keys(t),r=0,s=n.length;r<s;r+=1)o=n[r],a=String(t[o]),o.slice(0,2)==="!!"&&(o="tag:yaml.org,2002:"+o.slice(2)),l=e.compiledTypeMap.fallback[o],l&&TE.call(l.styleAliases,a)&&(a=l.styleAliases[a]),i[o]=a;return i}x(ME,"compileStyleMap");function IE(e){var t,i,n;if(t=e.toString(16).toUpperCase(),e<=255)i="x",n=2;else if(e<=65535)i="u",n=4;else if(e<=4294967295)i="U",n=8;else throw new zi("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+i+je.repeat("0",n-t.length)+t}x(IE,"encodeHex");var VW=1,Nc=2;function PE(e){this.schema=e.schema||eE,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=je.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=ME(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType=e.quotingType==='"'?Nc:VW,this.forceQuotes=e.forceQuotes||!1,this.replacer=typeof e.replacer=="function"?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}x(PE,"State");function Em(e,t){for(var i=je.repeat(" ",t),n=0,r=-1,s="",o,a=e.length;n<a;)r=e.indexOf(`
`,n),r===-1?(o=e.slice(n),n=a):(o=e.slice(n,r+1),n=r+1),o.length&&o!==`
`&&(s+=i),s+=o;return s}x(Em,"indentString");function xd(e,t){return`
`+je.repeat(" ",e.indent*t)}x(xd,"generateNextLine");function FE(e,t){var i,n,r;for(i=0,n=e.implicitTypes.length;i<n;i+=1)if(r=e.implicitTypes[i],r.resolve(t))return!0;return!1}x(FE,"testImplicitResolving");function $c(e){return e===AW||e===kW}x($c,"isWhitespace");function qa(e){return 32<=e&&e<=126||161<=e&&e<=55295&&e!==8232&&e!==8233||57344<=e&&e<=65533&&e!==Yy||65536<=e&&e<=1114111}x(qa,"isPrintable");function km(e){return qa(e)&&e!==Yy&&e!==RW&&e!==Bc}x(km,"isNsCharOrWhitespace");function Rm(e,t,i){var n=km(e),r=n&&!$c(e);return(i?n:n&&e!==EE&&e!==kE&&e!==RE&&e!==AE&&e!==LE)&&e!==Tm&&!(t===_d&&!r)||km(t)&&!$c(t)&&e===Tm||t===_d&&r}x(Rm,"isPlainSafe");function OE(e){return qa(e)&&e!==Yy&&!$c(e)&&e!==DW&&e!==$W&&e!==_d&&e!==EE&&e!==kE&&e!==RE&&e!==AE&&e!==LE&&e!==Tm&&e!==PW&&e!==OW&&e!==LW&&e!==WW&&e!==BW&&e!==NW&&e!==FW&&e!==MW&&e!==IW&&e!==zW&&e!==GW}x(OE,"isPlainSafeFirst");function DE(e){return!$c(e)&&e!==_d}x(DE,"isPlainSafeLast");function ca(e,t){var i=e.charCodeAt(t),n;return i>=55296&&i<=56319&&t+1<e.length&&(n=e.charCodeAt(t+1),n>=56320&&n<=57343)?(i-55296)*1024+n-56320+65536:i}x(ca,"codePointAt");function Xy(e){var t=/^\n* /;return t.test(e)}x(Xy,"needIndentIndicator");var BE=1,Am=2,NE=3,$E=4,ra=5;function zE(e,t,i,n,r,s,o,a){var l,c=0,h=null,u=!1,d=!1,f=n!==-1,g=-1,p=OE(ca(e,0))&&DE(ca(e,e.length-1));if(t||o)for(l=0;l<e.length;c>=65536?l+=2:l++){if(c=ca(e,l),!qa(c))return ra;p=p&&Rm(c,h,a),h=c}else{for(l=0;l<e.length;c>=65536?l+=2:l++){if(c=ca(e,l),c===Bc)u=!0,f&&(d=d||l-g-1>n&&e[g+1]!==" ",g=l);else if(!qa(c))return ra;p=p&&Rm(c,h,a),h=c}d=d||f&&l-g-1>n&&e[g+1]!==" "}return!u&&!d?p&&!o&&!r(e)?BE:s===Nc?ra:Am:i>9&&Xy(e)?ra:o?s===Nc?ra:Am:d?$E:NE}x(zE,"chooseScalarStyle");function GE(e,t,i,n,r){e.dump=(function(){if(t.length===0)return e.quotingType===Nc?'""':"''";if(!e.noCompatMode&&(jW.indexOf(t)!==-1||HW.test(t)))return e.quotingType===Nc?'"'+t+'"':"'"+t+"'";var s=e.indent*Math.max(1,i),o=e.lineWidth===-1?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-s),a=n||e.flowLevel>-1&&i>=e.flowLevel;function l(c){return FE(e,c)}switch(x(l,"testAmbiguity"),zE(t,a,e.indent,o,l,e.quotingType,e.forceQuotes&&!n,r)){case BE:return t;case Am:return"'"+t.replace(/'/g,"''")+"'";case NE:return"|"+Lm(t,e.indent)+Mm(Em(t,s));case $E:return">"+Lm(t,e.indent)+Mm(Em(WE(t,o),s));case ra:return'"'+jE(t)+'"';default:throw new zi("impossible error: invalid scalar style")}})()}x(GE,"writeScalar");function Lm(e,t){var i=Xy(e)?String(t):"",n=e[e.length-1]===`
`,r=n&&(e[e.length-2]===`
`||e===`
`),s=r?"+":n?"":"-";return i+s+`
`}x(Lm,"blockHeader");function Mm(e){return e[e.length-1]===`
`?e.slice(0,-1):e}x(Mm,"dropEndingNewline");function WE(e,t){for(var i=/(\n+)([^\n]*)/g,n=(function(){var c=e.indexOf(`
`);return c=c!==-1?c:e.length,i.lastIndex=c,Im(e.slice(0,c),t)})(),r=e[0]===`
`||e[0]===" ",s,o;o=i.exec(e);){var a=o[1],l=o[2];s=l[0]===" ",n+=a+(!r&&!s&&l!==""?`
`:"")+Im(l,t),r=s}return n}x(WE,"foldString");function Im(e,t){if(e===""||e[0]===" ")return e;for(var i=/ [^ ]/g,n,r=0,s,o=0,a=0,l="";n=i.exec(e);)a=n.index,a-r>t&&(s=o>r?o:a,l+=`
`+e.slice(r,s),r=s+1),o=a;return l+=`
`,e.length-r>t&&o>r?l+=e.slice(r,o)+`
`+e.slice(o+1):l+=e.slice(r),l.slice(1)}x(Im,"foldLine");function jE(e){for(var t="",i=0,n,r=0;r<e.length;i>=65536?r+=2:r++)i=ca(e,r),n=gi[i],!n&&qa(i)?(t+=e[r],i>=65536&&(t+=e[r+1])):t+=n||IE(i);return t}x(jE,"escapeString");function HE(e,t,i){var n="",r=e.tag,s,o,a;for(s=0,o=i.length;s<o;s+=1)a=i[s],e.replacer&&(a=e.replacer.call(i,String(s),a)),(lr(e,t,a,!1,!1)||typeof a>"u"&&lr(e,t,null,!1,!1))&&(n!==""&&(n+=","+(e.condenseFlow?"":" ")),n+=e.dump);e.tag=r,e.dump="["+n+"]"}x(HE,"writeFlowSequence");function Pm(e,t,i,n){var r="",s=e.tag,o,a,l;for(o=0,a=i.length;o<a;o+=1)l=i[o],e.replacer&&(l=e.replacer.call(i,String(o),l)),(lr(e,t+1,l,!0,!0,!1,!0)||typeof l>"u"&&lr(e,t+1,null,!0,!0,!1,!0))&&((!n||r!=="")&&(r+=xd(e,t)),e.dump&&Bc===e.dump.charCodeAt(0)?r+="-":r+="- ",r+=e.dump);e.tag=s,e.dump=r||"[]"}x(Pm,"writeBlockSequence");function VE(e,t,i){var n="",r=e.tag,s=Object.keys(i),o,a,l,c,h;for(o=0,a=s.length;o<a;o+=1)h="",n!==""&&(h+=", "),e.condenseFlow&&(h+='"'),l=s[o],c=i[l],e.replacer&&(c=e.replacer.call(i,l,c)),lr(e,t,l,!1,!1)&&(e.dump.length>1024&&(h+="? "),h+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),lr(e,t,c,!1,!1)&&(h+=e.dump,n+=h));e.tag=r,e.dump="{"+n+"}"}x(VE,"writeFlowMapping");function UE(e,t,i,n){var r="",s=e.tag,o=Object.keys(i),a,l,c,h,u,d;if(e.sortKeys===!0)o.sort();else if(typeof e.sortKeys=="function")o.sort(e.sortKeys);else if(e.sortKeys)throw new zi("sortKeys must be a boolean or a function");for(a=0,l=o.length;a<l;a+=1)d="",(!n||r!=="")&&(d+=xd(e,t)),c=o[a],h=i[c],e.replacer&&(h=e.replacer.call(i,c,h)),lr(e,t+1,c,!0,!0,!0)&&(u=e.tag!==null&&e.tag!=="?"||e.dump&&e.dump.length>1024,u&&(e.dump&&Bc===e.dump.charCodeAt(0)?d+="?":d+="? "),d+=e.dump,u&&(d+=xd(e,t)),lr(e,t+1,h,!0,u)&&(e.dump&&Bc===e.dump.charCodeAt(0)?d+=":":d+=": ",d+=e.dump,r+=d));e.tag=s,e.dump=r||"{}"}x(UE,"writeBlockMapping");function Fm(e,t,i){var n,r,s,o,a,l;for(r=i?e.explicitTypes:e.implicitTypes,s=0,o=r.length;s<o;s+=1)if(a=r[s],(a.instanceOf||a.predicate)&&(!a.instanceOf||typeof t=="object"&&t instanceof a.instanceOf)&&(!a.predicate||a.predicate(t))){if(i?a.multi&&a.representName?e.tag=a.representName(t):e.tag=a.tag:e.tag="?",a.represent){if(l=e.styleMap[a.tag]||a.defaultStyle,SE.call(a.represent)==="[object Function]")n=a.represent(t,l);else if(TE.call(a.represent,l))n=a.represent[l](t,l);else throw new zi("!<"+a.tag+'> tag resolver accepts not "'+l+'" style');e.dump=n}return!0}return!1}x(Fm,"detectType");function lr(e,t,i,n,r,s,o){e.tag=null,e.dump=i,Fm(e,i,!1)||Fm(e,i,!0);var a=SE.call(e.dump),l=n,c;n&&(n=e.flowLevel<0||e.flowLevel>t);var h=a==="[object Object]"||a==="[object Array]",u,d;if(h&&(u=e.duplicates.indexOf(i),d=u!==-1),(e.tag!==null&&e.tag!=="?"||d||e.indent!==2&&t>0)&&(r=!1),d&&e.usedDuplicates[u])e.dump="*ref_"+u;else{if(h&&d&&!e.usedDuplicates[u]&&(e.usedDuplicates[u]=!0),a==="[object Object]")n&&Object.keys(e.dump).length!==0?(UE(e,t,e.dump,r),d&&(e.dump="&ref_"+u+e.dump)):(VE(e,t,e.dump),d&&(e.dump="&ref_"+u+" "+e.dump));else if(a==="[object Array]")n&&e.dump.length!==0?(e.noArrayIndent&&!o&&t>0?Pm(e,t-1,e.dump,r):Pm(e,t,e.dump,r),d&&(e.dump="&ref_"+u+e.dump)):(HE(e,t,e.dump),d&&(e.dump="&ref_"+u+" "+e.dump));else if(a==="[object String]")e.tag!=="?"&&GE(e,e.dump,t,s,l);else{if(a==="[object Undefined]")return!1;if(e.skipInvalid)return!1;throw new zi("unacceptable kind of an object to dump "+a)}e.tag!==null&&e.tag!=="?"&&(c=encodeURI(e.tag[0]==="!"?e.tag.slice(1):e.tag).replace(/!/g,"%21"),e.tag[0]==="!"?c="!"+c:c.slice(0,18)==="tag:yaml.org,2002:"?c="!!"+c.slice(18):c="!<"+c+">",e.dump=c+" "+e.dump)}return!0}x(lr,"writeNode");function qE(e,t){var i=[],n=[],r,s;for(Cd(e,i,n),r=0,s=n.length;r<s;r+=1)t.duplicates.push(i[n[r]]);t.usedDuplicates=new Array(s)}x(qE,"getDuplicateReferences");function Cd(e,t,i){var n,r,s;if(e!==null&&typeof e=="object")if(r=t.indexOf(e),r!==-1)i.indexOf(r)===-1&&i.push(r);else if(t.push(e),Array.isArray(e))for(r=0,s=e.length;r<s;r+=1)Cd(e[r],t,i);else for(n=Object.keys(e),r=0,s=n.length;r<s;r+=1)Cd(e[n[r]],t,i)}x(Cd,"inspectNode");function UW(e,t){t=t||{};var i=new PE(t);i.noRefs||qE(e,i);var n=e;return i.replacer&&(n=i.replacer.call({"":n},"",n)),lr(i,0,n,!0,!0)?i.dump+`
`:""}x(UW,"dump$1");function qW(e,t){return function(){throw new Error("Function yaml."+e+" is removed in js-yaml 4. Use yaml."+t+" instead, which is now safe by default.")}}x(qW,"renamed");var YW=NT,XW=EW.load;var oi={aggregation:17.25,extension:17.25,composition:17.25,dependency:6,lollipop:13.5,arrow_point:4},P1={arrow_point:9,arrow_cross:12.5,arrow_circle:12.5};function Wl(e,t){if(e===void 0||t===void 0)return{angle:0,deltaX:0,deltaY:0};e=_e(e),t=_e(t);const[i,n]=[e.x,e.y],[r,s]=[t.x,t.y],o=r-i,a=s-n;return{angle:Math.atan(a/o),deltaX:o,deltaY:a}}x(Wl,"calculateDeltaAndAngle");var _e=x(e=>Array.isArray(e)?{x:e[0],y:e[1]}:e,"pointTransformer"),KW=x(e=>({x:x(function(t,i,n){let r=0;const s=_e(n[0]).x<_e(n[n.length-1]).x?"left":"right";if(i===0&&Object.hasOwn(oi,e.arrowTypeStart)){const{angle:f,deltaX:g}=Wl(n[0],n[1]);r=oi[e.arrowTypeStart]*Math.cos(f)*(g>=0?1:-1)}else if(i===n.length-1&&Object.hasOwn(oi,e.arrowTypeEnd)){const{angle:f,deltaX:g}=Wl(n[n.length-1],n[n.length-2]);r=oi[e.arrowTypeEnd]*Math.cos(f)*(g>=0?1:-1)}const o=Math.abs(_e(t).x-_e(n[n.length-1]).x),a=Math.abs(_e(t).y-_e(n[n.length-1]).y),l=Math.abs(_e(t).x-_e(n[0]).x),c=Math.abs(_e(t).y-_e(n[0]).y),h=oi[e.arrowTypeStart],u=oi[e.arrowTypeEnd],d=1;if(o<u&&o>0&&a<u){let f=u+d-o;f*=s==="right"?-1:1,r-=f}if(l<h&&l>0&&c<h){let f=h+d-l;f*=s==="right"?-1:1,r+=f}return _e(t).x+r},"x"),y:x(function(t,i,n){let r=0;const s=_e(n[0]).y<_e(n[n.length-1]).y?"down":"up";if(i===0&&Object.hasOwn(oi,e.arrowTypeStart)){const{angle:f,deltaY:g}=Wl(n[0],n[1]);r=oi[e.arrowTypeStart]*Math.abs(Math.sin(f))*(g>=0?1:-1)}else if(i===n.length-1&&Object.hasOwn(oi,e.arrowTypeEnd)){const{angle:f,deltaY:g}=Wl(n[n.length-1],n[n.length-2]);r=oi[e.arrowTypeEnd]*Math.abs(Math.sin(f))*(g>=0?1:-1)}const o=Math.abs(_e(t).y-_e(n[n.length-1]).y),a=Math.abs(_e(t).x-_e(n[n.length-1]).x),l=Math.abs(_e(t).y-_e(n[0]).y),c=Math.abs(_e(t).x-_e(n[0]).x),h=oi[e.arrowTypeStart],u=oi[e.arrowTypeEnd],d=1;if(o<u&&o>0&&a<u){let f=u+d-o;f*=s==="up"?-1:1,r-=f}if(l<h&&l>0&&c<h){let f=h+d-l;f*=s==="up"?-1:1,r+=f}return _e(t).y+r},"y")}),"getLineFunctionsWithOffset"),Ky=x(({flowchart:e})=>{const t=e?.subGraphTitleMargin?.top??0,i=e?.subGraphTitleMargin?.bottom??0,n=t+i;return{subGraphTitleTopMargin:t,subGraphTitleBottomMargin:i,subGraphTitleTotalMargin:n}},"getSubGraphTitleMargins"),ZW=x(e=>{const{handDrawnSeed:t}=ne();return{fill:e,hachureAngle:120,hachureGap:4,fillWeight:2,roughness:.7,stroke:e,seed:t}},"solidStateFill"),il=x(e=>{const t=JW([...e.cssCompiledStyles||[],...e.cssStyles||[],...e.labelStyle||[]]);return{stylesMap:t,stylesArray:[...t]}},"compileStyles"),JW=x(e=>{const t=new Map;return e.forEach(i=>{const[n,r]=i.split(":");t.set(n.trim(),r?.trim())}),t},"styles2Map"),YE=x(e=>e==="color"||e==="font-size"||e==="font-family"||e==="font-weight"||e==="font-style"||e==="text-decoration"||e==="text-align"||e==="text-transform"||e==="line-height"||e==="letter-spacing"||e==="word-spacing"||e==="text-shadow"||e==="text-overflow"||e==="white-space"||e==="word-wrap"||e==="word-break"||e==="overflow-wrap"||e==="hyphens","isLabelStyle"),mt=x(e=>{const{stylesArray:t}=il(e),i=[],n=[],r=[],s=[];return t.forEach(o=>{const a=o[0];YE(a)?i.push(o.join(":")+" !important"):(n.push(o.join(":")+" !important"),a.includes("stroke")&&r.push(o.join(":")+" !important"),a==="fill"&&s.push(o.join(":")+" !important"))}),{labelStyles:i.join(";"),nodeStyles:n.join(";"),stylesArray:t,borderStyles:r,backgroundStyles:s}},"styles2String"),pt=x((e,t)=>{const{themeVariables:i,handDrawnSeed:n}=ne(),{nodeBorder:r,mainBkg:s}=i,{stylesMap:o}=il(e);return Object.assign({roughness:.7,fill:o.get("fill")||s,fillStyle:"hachure",fillWeight:4,hachureGap:5.2,stroke:o.get("stroke")||r,seed:n,strokeWidth:o.get("stroke-width")?.replace("px","")||1.3,fillLineDash:[0,0],strokeLineDash:QW(o.get("stroke-dasharray"))},t)},"userNodeOverrides"),QW=x(e=>{if(!e)return[0,0];const t=e.trim().split(/\s+/).map(Number);if(t.length===1){const r=isNaN(t[0])?0:t[0];return[r,r]}const i=isNaN(t[0])?0:t[0],n=isNaN(t[1])?0:t[1];return[i,n]},"getStrokeDashArray"),Tl={},Ne={},F1;function t8(){return F1||(F1=1,Object.defineProperty(Ne,"__esModule",{value:!0}),Ne.BLANK_URL=Ne.relativeFirstCharacters=Ne.whitespaceEscapeCharsRegex=Ne.urlSchemeRegex=Ne.ctrlCharactersRegex=Ne.htmlCtrlEntityRegex=Ne.htmlEntitiesRegex=Ne.invalidProtocolRegex=void 0,Ne.invalidProtocolRegex=/^([^\w]*)(javascript|data|vbscript)/im,Ne.htmlEntitiesRegex=/&#(\w+)(^\w|;)?/g,Ne.htmlCtrlEntityRegex=/&(newline|tab);/gi,Ne.ctrlCharactersRegex=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,Ne.urlSchemeRegex=/^.+(:|&colon;)/gim,Ne.whitespaceEscapeCharsRegex=/(\\|%5[cC])((%(6[eE]|72|74))|[nrt])/g,Ne.relativeFirstCharacters=[".","/"],Ne.BLANK_URL="about:blank"),Ne}var O1;function e8(){if(O1)return Tl;O1=1,Object.defineProperty(Tl,"__esModule",{value:!0}),Tl.sanitizeUrl=void 0;var e=t8();function t(o){return e.relativeFirstCharacters.indexOf(o[0])>-1}function i(o){var a=o.replace(e.ctrlCharactersRegex,"");return a.replace(e.htmlEntitiesRegex,function(l,c){return String.fromCharCode(c)})}function n(o){return URL.canParse(o)}function r(o){try{return decodeURIComponent(o)}catch{return o}}function s(o){if(!o)return e.BLANK_URL;var a,l=r(o.trim());do l=i(l).replace(e.htmlCtrlEntityRegex,"").replace(e.ctrlCharactersRegex,"").replace(e.whitespaceEscapeCharsRegex,"").trim(),l=r(l),a=l.match(e.ctrlCharactersRegex)||l.match(e.htmlEntitiesRegex)||l.match(e.htmlCtrlEntityRegex)||l.match(e.whitespaceEscapeCharsRegex);while(a&&a.length>0);var c=l;if(!c)return e.BLANK_URL;if(t(c))return c;var h=c.trimStart(),u=h.match(e.urlSchemeRegex);if(!u)return c;var d=u[0].toLowerCase().trim();if(e.invalidProtocolRegex.test(d))return e.BLANK_URL;var f=h.replace(/\\/g,"/");if(d==="mailto:"||d.includes("://"))return f;if(d==="http:"||d==="https:"){if(!n(f))return e.BLANK_URL;var g=new URL(f);return g.protocol=g.protocol.toLowerCase(),g.hostname=g.hostname.toLowerCase(),g.toString()}return f}return Tl.sanitizeUrl=s,Tl}var i8=e8(),XE=typeof global=="object"&&global&&global.Object===Object&&global,n8=typeof self=="object"&&self&&self.Object===Object&&self,ur=XE||n8||Function("return this")(),bd=ur.Symbol,KE=Object.prototype,r8=KE.hasOwnProperty,s8=KE.toString,El=bd?bd.toStringTag:void 0;function o8(e){var t=r8.call(e,El),i=e[El];try{e[El]=void 0;var n=!0}catch{}var r=s8.call(e);return n&&(t?e[El]=i:delete e[El]),r}var a8=Object.prototype,l8=a8.toString;function c8(e){return l8.call(e)}var h8="[object Null]",u8="[object Undefined]",D1=bd?bd.toStringTag:void 0;function nl(e){return e==null?e===void 0?u8:h8:D1&&D1 in Object(e)?o8(e):c8(e)}function Fo(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var d8="[object AsyncFunction]",f8="[object Function]",g8="[object GeneratorFunction]",p8="[object Proxy]";function Zy(e){if(!Fo(e))return!1;var t=nl(e);return t==f8||t==g8||t==d8||t==p8}var sp=ur["__core-js_shared__"],B1=(function(){var e=/[^.]+$/.exec(sp&&sp.keys&&sp.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""})();function m8(e){return!!B1&&B1 in e}var y8=Function.prototype,_8=y8.toString;function Oo(e){if(e!=null){try{return _8.call(e)}catch{}try{return e+""}catch{}}return""}var x8=/[\\^$.*+?()[\]{}|]/g,C8=/^\[object .+?Constructor\]$/,b8=Function.prototype,v8=Object.prototype,w8=b8.toString,S8=v8.hasOwnProperty,T8=RegExp("^"+w8.call(S8).replace(x8,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function E8(e){if(!Fo(e)||m8(e))return!1;var t=Zy(e)?T8:C8;return t.test(Oo(e))}function k8(e,t){return e?.[t]}function Do(e,t){var i=k8(e,t);return E8(i)?i:void 0}var zc=Do(Object,"create");function R8(){this.__data__=zc?zc(null):{},this.size=0}function A8(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var L8="__lodash_hash_undefined__",M8=Object.prototype,I8=M8.hasOwnProperty;function P8(e){var t=this.__data__;if(zc){var i=t[e];return i===L8?void 0:i}return I8.call(t,e)?t[e]:void 0}var F8=Object.prototype,O8=F8.hasOwnProperty;function D8(e){var t=this.__data__;return zc?t[e]!==void 0:O8.call(t,e)}var B8="__lodash_hash_undefined__";function N8(e,t){var i=this.__data__;return this.size+=this.has(e)?0:1,i[e]=zc&&t===void 0?B8:t,this}function Ro(e){var t=-1,i=e==null?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}Ro.prototype.clear=R8;Ro.prototype.delete=A8;Ro.prototype.get=P8;Ro.prototype.has=D8;Ro.prototype.set=N8;function $8(){this.__data__=[],this.size=0}function Df(e,t){return e===t||e!==e&&t!==t}function Bf(e,t){for(var i=e.length;i--;)if(Df(e[i][0],t))return i;return-1}var z8=Array.prototype,G8=z8.splice;function W8(e){var t=this.__data__,i=Bf(t,e);if(i<0)return!1;var n=t.length-1;return i==n?t.pop():G8.call(t,i,1),--this.size,!0}function j8(e){var t=this.__data__,i=Bf(t,e);return i<0?void 0:t[i][1]}function H8(e){return Bf(this.__data__,e)>-1}function V8(e,t){var i=this.__data__,n=Bf(i,e);return n<0?(++this.size,i.push([e,t])):i[n][1]=t,this}function Xr(e){var t=-1,i=e==null?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}Xr.prototype.clear=$8;Xr.prototype.delete=W8;Xr.prototype.get=j8;Xr.prototype.has=H8;Xr.prototype.set=V8;var Gc=Do(ur,"Map");function U8(){this.size=0,this.__data__={hash:new Ro,map:new(Gc||Xr),string:new Ro}}function q8(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function Nf(e,t){var i=e.__data__;return q8(t)?i[typeof t=="string"?"string":"hash"]:i.map}function Y8(e){var t=Nf(this,e).delete(e);return this.size-=t?1:0,t}function X8(e){return Nf(this,e).get(e)}function K8(e){return Nf(this,e).has(e)}function Z8(e,t){var i=Nf(this,e),n=i.size;return i.set(e,t),this.size+=i.size==n?0:1,this}function Fs(e){var t=-1,i=e==null?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}Fs.prototype.clear=U8;Fs.prototype.delete=Y8;Fs.prototype.get=X8;Fs.prototype.has=K8;Fs.prototype.set=Z8;var J8="Expected a function";function fh(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(J8);var i=function(){var n=arguments,r=t?t.apply(this,n):n[0],s=i.cache;if(s.has(r))return s.get(r);var o=e.apply(this,n);return i.cache=s.set(r,o)||s,o};return i.cache=new(fh.Cache||Fs),i}fh.Cache=Fs;function Q8(){this.__data__=new Xr,this.size=0}function tj(e){var t=this.__data__,i=t.delete(e);return this.size=t.size,i}function ej(e){return this.__data__.get(e)}function ij(e){return this.__data__.has(e)}var nj=200;function rj(e,t){var i=this.__data__;if(i instanceof Xr){var n=i.__data__;if(!Gc||n.length<nj-1)return n.push([e,t]),this.size=++i.size,this;i=this.__data__=new Fs(n)}return i.set(e,t),this.size=i.size,this}function rl(e){var t=this.__data__=new Xr(e);this.size=t.size}rl.prototype.clear=Q8;rl.prototype.delete=tj;rl.prototype.get=ej;rl.prototype.has=ij;rl.prototype.set=rj;var vd=(function(){try{var e=Do(Object,"defineProperty");return e({},"",{}),e}catch{}})();function Jy(e,t,i){t=="__proto__"&&vd?vd(e,t,{configurable:!0,enumerable:!0,value:i,writable:!0}):e[t]=i}function Om(e,t,i){(i!==void 0&&!Df(e[t],i)||i===void 0&&!(t in e))&&Jy(e,t,i)}function sj(e){return function(t,i,n){for(var r=-1,s=Object(t),o=n(t),a=o.length;a--;){var l=o[++r];if(i(s[l],l,s)===!1)break}return t}}var oj=sj(),ZE=typeof exports=="object"&&exports&&!exports.nodeType&&exports,N1=ZE&&typeof module=="object"&&module&&!module.nodeType&&module,aj=N1&&N1.exports===ZE,$1=aj?ur.Buffer:void 0,z1=$1?$1.allocUnsafe:void 0;function lj(e,t){if(t)return e.slice();var i=e.length,n=z1?z1(i):new e.constructor(i);return e.copy(n),n}var G1=ur.Uint8Array;function cj(e){var t=new e.constructor(e.byteLength);return new G1(t).set(new G1(e)),t}function hj(e,t){var i=t?cj(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.length)}function uj(e,t){var i=-1,n=e.length;for(t||(t=Array(n));++i<n;)t[i]=e[i];return t}var W1=Object.create,dj=(function(){function e(){}return function(t){if(!Fo(t))return{};if(W1)return W1(t);e.prototype=t;var i=new e;return e.prototype=void 0,i}})();function JE(e,t){return function(i){return e(t(i))}}var QE=JE(Object.getPrototypeOf,Object),fj=Object.prototype;function $f(e){var t=e&&e.constructor,i=typeof t=="function"&&t.prototype||fj;return e===i}function gj(e){return typeof e.constructor=="function"&&!$f(e)?dj(QE(e)):{}}function gh(e){return e!=null&&typeof e=="object"}var pj="[object Arguments]";function j1(e){return gh(e)&&nl(e)==pj}var tk=Object.prototype,mj=tk.hasOwnProperty,yj=tk.propertyIsEnumerable,wd=j1((function(){return arguments})())?j1:function(e){return gh(e)&&mj.call(e,"callee")&&!yj.call(e,"callee")},Sd=Array.isArray,_j=9007199254740991;function ek(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=_j}function zf(e){return e!=null&&ek(e.length)&&!Zy(e)}function xj(e){return gh(e)&&zf(e)}function Cj(){return!1}var ik=typeof exports=="object"&&exports&&!exports.nodeType&&exports,H1=ik&&typeof module=="object"&&module&&!module.nodeType&&module,bj=H1&&H1.exports===ik,V1=bj?ur.Buffer:void 0,vj=V1?V1.isBuffer:void 0,Qy=vj||Cj,wj="[object Object]",Sj=Function.prototype,Tj=Object.prototype,nk=Sj.toString,Ej=Tj.hasOwnProperty,kj=nk.call(Object);function Rj(e){if(!gh(e)||nl(e)!=wj)return!1;var t=QE(e);if(t===null)return!0;var i=Ej.call(t,"constructor")&&t.constructor;return typeof i=="function"&&i instanceof i&&nk.call(i)==kj}var Aj="[object Arguments]",Lj="[object Array]",Mj="[object Boolean]",Ij="[object Date]",Pj="[object Error]",Fj="[object Function]",Oj="[object Map]",Dj="[object Number]",Bj="[object Object]",Nj="[object RegExp]",$j="[object Set]",zj="[object String]",Gj="[object WeakMap]",Wj="[object ArrayBuffer]",jj="[object DataView]",Hj="[object Float32Array]",Vj="[object Float64Array]",Uj="[object Int8Array]",qj="[object Int16Array]",Yj="[object Int32Array]",Xj="[object Uint8Array]",Kj="[object Uint8ClampedArray]",Zj="[object Uint16Array]",Jj="[object Uint32Array]",pe={};pe[Hj]=pe[Vj]=pe[Uj]=pe[qj]=pe[Yj]=pe[Xj]=pe[Kj]=pe[Zj]=pe[Jj]=!0;pe[Aj]=pe[Lj]=pe[Wj]=pe[Mj]=pe[jj]=pe[Ij]=pe[Pj]=pe[Fj]=pe[Oj]=pe[Dj]=pe[Bj]=pe[Nj]=pe[$j]=pe[zj]=pe[Gj]=!1;function Qj(e){return gh(e)&&ek(e.length)&&!!pe[nl(e)]}function tH(e){return function(t){return e(t)}}var rk=typeof exports=="object"&&exports&&!exports.nodeType&&exports,ac=rk&&typeof module=="object"&&module&&!module.nodeType&&module,eH=ac&&ac.exports===rk,op=eH&&XE.process,U1=(function(){try{var e=ac&&ac.require&&ac.require("util").types;return e||op&&op.binding&&op.binding("util")}catch{}})(),q1=U1&&U1.isTypedArray,t_=q1?tH(q1):Qj;function Dm(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var iH=Object.prototype,nH=iH.hasOwnProperty;function rH(e,t,i){var n=e[t];(!(nH.call(e,t)&&Df(n,i))||i===void 0&&!(t in e))&&Jy(e,t,i)}function sH(e,t,i,n){var r=!i;i||(i={});for(var s=-1,o=t.length;++s<o;){var a=t[s],l=void 0;l===void 0&&(l=e[a]),r?Jy(i,a,l):rH(i,a,l)}return i}function oH(e,t){for(var i=-1,n=Array(e);++i<e;)n[i]=t(i);return n}var aH=9007199254740991,lH=/^(?:0|[1-9]\d*)$/;function sk(e,t){var i=typeof e;return t=t??aH,!!t&&(i=="number"||i!="symbol"&&lH.test(e))&&e>-1&&e%1==0&&e<t}var cH=Object.prototype,hH=cH.hasOwnProperty;function uH(e,t){var i=Sd(e),n=!i&&wd(e),r=!i&&!n&&Qy(e),s=!i&&!n&&!r&&t_(e),o=i||n||r||s,a=o?oH(e.length,String):[],l=a.length;for(var c in e)(t||hH.call(e,c))&&!(o&&(c=="length"||r&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||sk(c,l)))&&a.push(c);return a}function dH(e){var t=[];if(e!=null)for(var i in Object(e))t.push(i);return t}var fH=Object.prototype,gH=fH.hasOwnProperty;function pH(e){if(!Fo(e))return dH(e);var t=$f(e),i=[];for(var n in e)n=="constructor"&&(t||!gH.call(e,n))||i.push(n);return i}function ok(e){return zf(e)?uH(e,!0):pH(e)}function mH(e){return sH(e,ok(e))}function yH(e,t,i,n,r,s,o){var a=Dm(e,i),l=Dm(t,i),c=o.get(l);if(c){Om(e,i,c);return}var h=s?s(a,l,i+"",e,t,o):void 0,u=h===void 0;if(u){var d=Sd(l),f=!d&&Qy(l),g=!d&&!f&&t_(l);h=l,d||f||g?Sd(a)?h=a:xj(a)?h=uj(a):f?(u=!1,h=lj(l,!0)):g?(u=!1,h=hj(l,!0)):h=[]:Rj(l)||wd(l)?(h=a,wd(a)?h=mH(a):(!Fo(a)||Zy(a))&&(h=gj(l))):u=!1}u&&(o.set(l,h),r(h,l,n,s,o),o.delete(l)),Om(e,i,h)}function ak(e,t,i,n,r){e!==t&&oj(t,function(s,o){if(r||(r=new rl),Fo(s))yH(e,t,o,i,ak,n,r);else{var a=n?n(Dm(e,o),s,o+"",e,t,r):void 0;a===void 0&&(a=s),Om(e,o,a)}},ok)}function lk(e){return e}function _H(e,t,i){switch(i.length){case 0:return e.call(t);case 1:return e.call(t,i[0]);case 2:return e.call(t,i[0],i[1]);case 3:return e.call(t,i[0],i[1],i[2])}return e.apply(t,i)}var Y1=Math.max;function xH(e,t,i){return t=Y1(t===void 0?e.length-1:t,0),function(){for(var n=arguments,r=-1,s=Y1(n.length-t,0),o=Array(s);++r<s;)o[r]=n[t+r];r=-1;for(var a=Array(t+1);++r<t;)a[r]=n[r];return a[t]=i(o),_H(e,this,a)}}function CH(e){return function(){return e}}var bH=vd?function(e,t){return vd(e,"toString",{configurable:!0,enumerable:!1,value:CH(t),writable:!0})}:lk,vH=800,wH=16,SH=Date.now;function TH(e){var t=0,i=0;return function(){var n=SH(),r=wH-(n-i);if(i=n,r>0){if(++t>=vH)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var EH=TH(bH);function kH(e,t){return EH(xH(e,t,lk),e+"")}function RH(e,t,i){if(!Fo(i))return!1;var n=typeof t;return(n=="number"?zf(i)&&sk(t,i.length):n=="string"&&t in i)?Df(i[t],e):!1}function AH(e){return kH(function(t,i){var n=-1,r=i.length,s=r>1?i[r-1]:void 0,o=r>2?i[2]:void 0;for(s=e.length>3&&typeof s=="function"?(r--,s):void 0,o&&RH(i[0],i[1],o)&&(s=r<3?void 0:s,r=1),t=Object(t);++n<r;){var a=i[n];a&&e(t,a,n,s)}return t})}var LH=AH(function(e,t,i){ak(e,t,i)}),MH="",IH={curveBasis:pu,curveBasisClosed:FG,curveBasisOpen:OG,curveBumpX:q2,curveBumpY:Y2,curveBundle:DG,curveCardinalClosed:BG,curveCardinalOpen:NG,curveCardinal:J2,curveCatmullRomClosed:$G,curveCatmullRomOpen:zG,curveCatmullRom:tT,curveLinear:ud,curveLinearClosed:GG,curveMonotoneX:oT,curveMonotoneY:aT,curveNatural:cT,curveStep:hT,curveStepAfter:dT,curveStepBefore:uT},PH=/\s*(?:(\w+)(?=:):|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,FH=x(function(e,t){const i=ck(e,/(?:init\b)|(?:initialize\b)/);let n={};if(Array.isArray(i)){const o=i.map(a=>a.args);td(o),n=We(n,[...o])}else n=i.args;if(!n)return;let r=Sy(e,t);const s="config";return n[s]!==void 0&&(r==="flowchart-v2"&&(r="flowchart"),n[r]=n[s],delete n[s]),n},"detectInit"),ck=x(function(e,t=null){try{const i=new RegExp(`[%]{2}(?![{]${PH.source})(?=[}][%]{2}).*
`,"ig");e=e.trim().replace(i,"").replace(/'/gm,'"'),X.debug(`Detecting diagram directive${t!==null?" type:"+t:""} based on the text:${e}`);let n;const r=[];for(;(n=sc.exec(e))!==null;)if(n.index===sc.lastIndex&&sc.lastIndex++,n&&!t||t&&n[1]?.match(t)||t&&n[2]?.match(t)){const s=n[1]?n[1]:n[2],o=n[3]?n[3].trim():n[4]?JSON.parse(n[4].trim()):null;r.push({type:s,args:o})}return r.length===0?{type:e,args:null}:r.length===1?r[0]:r}catch(i){return X.error(`ERROR: ${i.message} - Unable to parse directive type: '${t}' based on the text: '${e}'`),{type:void 0,args:null}}},"detectDirective"),OH=x(function(e){return e.replace(sc,"")},"removeDirectives"),DH=x(function(e,t){for(const[i,n]of t.entries())if(n.match(e))return i;return-1},"isSubstringInArray");function e_(e,t){if(!e)return t;const i=`curve${e.charAt(0).toUpperCase()+e.slice(1)}`;return IH[i]??t}x(e_,"interpolateToCurve");function hk(e,t){const i=e.trim();if(i)return t.securityLevel!=="loose"?i8.sanitizeUrl(i):i}x(hk,"formatUrl");var BH=x((e,...t)=>{const i=e.split("."),n=i.length-1,r=i[n];let s=window;for(let o=0;o<n;o++)if(s=s[i[o]],!s){X.error(`Function name: ${e} not found in window`);return}s[r](...t)},"runFunc");function i_(e,t){return!e||!t?0:Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}x(i_,"distance");function uk(e){let t,i=0;e.forEach(r=>{i+=i_(r,t),t=r});const n=i/2;return n_(e,n)}x(uk,"traverseEdge");function dk(e){return e.length===1?e[0]:uk(e)}x(dk,"calcLabelPosition");var X1=x((e,t=2)=>{const i=Math.pow(10,t);return Math.round(e*i)/i},"roundNumber"),n_=x((e,t)=>{let i,n=t;for(const r of e){if(i){const s=i_(r,i);if(s===0)return i;if(s<n)n-=s;else{const o=n/s;if(o<=0)return i;if(o>=1)return{x:r.x,y:r.y};if(o>0&&o<1)return{x:X1((1-o)*i.x+o*r.x,5),y:X1((1-o)*i.y+o*r.y,5)}}}i=r}throw new Error("Could not find a suitable point for the given distance")},"calculatePoint"),NH=x((e,t,i)=>{X.info(`our points ${JSON.stringify(t)}`),t[0]!==i&&(t=t.reverse());const r=n_(t,25),s=e?10:5,o=Math.atan2(t[0].y-r.y,t[0].x-r.x),a={x:0,y:0};return a.x=Math.sin(o)*s+(t[0].x+r.x)/2,a.y=-Math.cos(o)*s+(t[0].y+r.y)/2,a},"calcCardinalityPosition");function fk(e,t,i){const n=structuredClone(i);X.info("our points",n),t!=="start_left"&&t!=="start_right"&&n.reverse();const r=25+e,s=n_(n,r),o=10+e*.5,a=Math.atan2(n[0].y-s.y,n[0].x-s.x),l={x:0,y:0};return t==="start_left"?(l.x=Math.sin(a+Math.PI)*o+(n[0].x+s.x)/2,l.y=-Math.cos(a+Math.PI)*o+(n[0].y+s.y)/2):t==="end_right"?(l.x=Math.sin(a-Math.PI)*o+(n[0].x+s.x)/2-5,l.y=-Math.cos(a-Math.PI)*o+(n[0].y+s.y)/2-5):t==="end_left"?(l.x=Math.sin(a)*o+(n[0].x+s.x)/2-5,l.y=-Math.cos(a)*o+(n[0].y+s.y)/2-5):(l.x=Math.sin(a)*o+(n[0].x+s.x)/2,l.y=-Math.cos(a)*o+(n[0].y+s.y)/2),l}x(fk,"calcTerminalLabelPosition");function gk(e){let t="",i="";for(const n of e)n!==void 0&&(n.startsWith("color:")||n.startsWith("text-align:")?i=i+n+";":t=t+n+";");return{style:t,labelStyle:i}}x(gk,"getStylesFromArray");var K1=0,$H=x(()=>(K1++,"id-"+Math.random().toString(36).substr(2,12)+"-"+K1),"generateId");function pk(e){let t="";const i="0123456789abcdef",n=i.length;for(let r=0;r<e;r++)t+=i.charAt(Math.floor(Math.random()*n));return t}x(pk,"makeRandomHex");var zH=x(e=>pk(e.length),"random"),GH=x(function(){return{x:0,y:0,fill:void 0,anchor:"start",style:"#666",width:100,height:100,textMargin:0,rx:0,ry:0,valign:void 0,text:""}},"getTextObj"),WH=x(function(e,t){const i=t.text.replace(el.lineBreakRegex," "),[,n]=Gf(t.fontSize),r=e.append("text");r.attr("x",t.x),r.attr("y",t.y),r.style("text-anchor",t.anchor),r.style("font-family",t.fontFamily),r.style("font-size",n),r.style("font-weight",t.fontWeight),r.attr("fill",t.fill),t.class!==void 0&&r.attr("class",t.class);const s=r.append("tspan");return s.attr("x",t.x+t.textMargin*2),s.attr("fill",t.fill),s.text(i),r},"drawSimpleText"),jH=fh((e,t,i)=>{if(!e||(i=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",joinWith:"<br/>"},i),el.lineBreakRegex.test(e)))return e;const n=e.split(" ").filter(Boolean),r=[];let s="";return n.forEach((o,a)=>{const l=Hr(`${o} `,i),c=Hr(s,i);if(l>t){const{hyphenatedStrings:d,remainingWord:f}=HH(o,t,"-",i);r.push(s,...d),s=f}else c+l>=t?(r.push(s),s=o):s=[s,o].filter(Boolean).join(" ");a+1===n.length&&r.push(s)}),r.filter(o=>o!=="").join(i.joinWith)},(e,t,i)=>`${e}${t}${i.fontSize}${i.fontWeight}${i.fontFamily}${i.joinWith}`),HH=fh((e,t,i="-",n)=>{n=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",margin:0},n);const r=[...e],s=[];let o="";return r.forEach((a,l)=>{const c=`${o}${a}`;if(Hr(c,n)>=t){const u=l+1,d=r.length===u,f=`${c}${i}`;s.push(d?c:f),o=""}else o=c}),{hyphenatedStrings:s,remainingWord:o}},(e,t,i="-",n)=>`${e}${t}${i}${n.fontSize}${n.fontWeight}${n.fontFamily}`);function mk(e,t){return r_(e,t).height}x(mk,"calculateTextHeight");function Hr(e,t){return r_(e,t).width}x(Hr,"calculateTextWidth");var r_=fh((e,t)=>{const{fontSize:i=12,fontFamily:n="Arial",fontWeight:r=400}=t;if(!e)return{width:0,height:0};const[,s]=Gf(i),o=["sans-serif",n],a=e.split(el.lineBreakRegex),l=[],c=Xt("body");if(!c.remove)return{width:0,height:0,lineHeight:0};const h=c.append("svg");for(const d of o){let f=0;const g={width:0,height:0,lineHeight:0};for(const p of a){const m=GH();m.text=p||MH;const y=WH(h,m).style("font-size",s).style("font-weight",r).style("font-family",d),_=(y._groups||y)[0][0].getBBox();if(_.width===0&&_.height===0)throw new Error("svg element not in render tree");g.width=Math.round(Math.max(g.width,_.width)),f=Math.round(_.height),g.height+=f,g.lineHeight=Math.round(Math.max(g.lineHeight,f))}l.push(g)}h.remove();const u=isNaN(l[1].height)||isNaN(l[1].width)||isNaN(l[1].lineHeight)||l[0].height>l[1].height&&l[0].width>l[1].width&&l[0].lineHeight>l[1].lineHeight?0:1;return l[u]},(e,t)=>`${e}${t.fontSize}${t.fontWeight}${t.fontFamily}`),Aa,VH=(Aa=class{constructor(t=!1,i){this.count=0,this.count=i?i.length:0,this.next=t?()=>this.count++:()=>Date.now()}},x(Aa,"InitIDGenerator"),Aa),qh,UH=x(function(e){return qh=qh||document.createElement("div"),e=escape(e).replace(/%26/g,"&").replace(/%23/g,"#").replace(/%3B/g,";"),qh.innerHTML=e,unescape(qh.textContent)},"entityDecode");function s_(e){return"str"in e}x(s_,"isDetailedError");var qH=x((e,t,i,n)=>{if(!n)return;const r=e.node()?.getBBox();r&&e.append("text").text(n).attr("text-anchor","middle").attr("x",r.x+r.width/2).attr("y",-i).attr("class",t)},"insertTitle"),Gf=x(e=>{if(typeof e=="number")return[e,e+"px"];const t=parseInt(e??"",10);return Number.isNaN(t)?[void 0,void 0]:e===String(t)?[t,e+"px"]:[t,e]},"parseFontSize");function o_(e,t){return LH({},e,t)}x(o_,"cleanAndMerge");var vn={assignWithDepth:We,wrapLabel:jH,calculateTextHeight:mk,calculateTextWidth:Hr,calculateTextDimensions:r_,cleanAndMerge:o_,detectInit:FH,detectDirective:ck,isSubstringInArray:DH,interpolateToCurve:e_,calcLabelPosition:dk,calcCardinalityPosition:NH,calcTerminalLabelPosition:fk,formatUrl:hk,getStylesFromArray:gk,generateId:$H,random:zH,runFunc:BH,entityDecode:UH,insertTitle:qH,isLabelCoordinateInPath:yk,parseFontSize:Gf,InitIDGenerator:VH},YH=x(function(e){let t=e;return t=t.replace(/style.*:\S*#.*;/g,function(i){return i.substring(0,i.length-1)}),t=t.replace(/classDef.*:\S*#.*;/g,function(i){return i.substring(0,i.length-1)}),t=t.replace(/#\w+;/g,function(i){const n=i.substring(1,i.length-1);return/^\+?\d+$/.test(n)?""+n+"":""+n+""}),t},"encodeEntities"),Bo=x(function(e){return e.replace(//g,"&#").replace(//g,"&").replace(//g,";")},"decodeEntities"),Q7=x((e,t,{counter:i=0,prefix:n,suffix:r},s)=>s||`${n?`${n}_`:""}${e}_${t}_${i}${r?`_${r}`:""}`,"getEdgeId");function fi(e){return e??null}x(fi,"handleUndefinedAttr");function yk(e,t){const i=Math.round(e.x),n=Math.round(e.y),r=t.replace(/(\d+\.\d+)/g,s=>Math.round(parseFloat(s)).toString());return r.includes(i.toString())||r.includes(n.toString())}x(yk,"isLabelCoordinateInPath");const XH=Object.freeze({left:0,top:0,width:16,height:16}),Td=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),_k=Object.freeze({...XH,...Td}),KH=Object.freeze({..._k,body:"",hidden:!1}),ZH=Object.freeze({width:null,height:null}),JH=Object.freeze({...ZH,...Td}),QH=(e,t,i,n="")=>{const r=e.split(":");if(e.slice(0,1)==="@"){if(r.length<2||r.length>3)return null;n=r.shift().slice(1)}if(r.length>3||!r.length)return null;if(r.length>1){const a=r.pop(),l=r.pop(),c={provider:r.length>0?r[0]:n,prefix:l,name:a};return ap(c)?c:null}const s=r[0],o=s.split("-");if(o.length>1){const a={provider:n,prefix:o.shift(),name:o.join("-")};return ap(a)?a:null}if(i&&n===""){const a={provider:n,prefix:"",name:s};return ap(a,i)?a:null}return null},ap=(e,t)=>e?!!((t&&e.prefix===""||e.prefix)&&e.name):!1;function t9(e,t){const i={};!e.hFlip!=!t.hFlip&&(i.hFlip=!0),!e.vFlip!=!t.vFlip&&(i.vFlip=!0);const n=((e.rotate||0)+(t.rotate||0))%4;return n&&(i.rotate=n),i}function Z1(e,t){const i=t9(e,t);for(const n in KH)n in Td?n in e&&!(n in i)&&(i[n]=Td[n]):n in t?i[n]=t[n]:n in e&&(i[n]=e[n]);return i}function e9(e,t){const i=e.icons,n=e.aliases||Object.create(null),r=Object.create(null);function s(o){if(i[o])return r[o]=[];if(!(o in r)){r[o]=null;const a=n[o]&&n[o].parent,l=a&&s(a);l&&(r[o]=[a].concat(l))}return r[o]}return(t||Object.keys(i).concat(Object.keys(n))).forEach(s),r}function J1(e,t,i){const n=e.icons,r=e.aliases||Object.create(null);let s={};function o(a){s=Z1(n[a]||r[a],s)}return o(t),i.forEach(o),Z1(e,s)}function i9(e,t){if(e.icons[t])return J1(e,t,[]);const i=e9(e,[t])[t];return i?J1(e,t,i):null}const n9=/(-?[0-9.]*[0-9]+[0-9.]*)/g,r9=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function Q1(e,t,i){if(t===1)return e;if(i=i||100,typeof e=="number")return Math.ceil(e*t*i)/i;if(typeof e!="string")return e;const n=e.split(n9);if(n===null||!n.length)return e;const r=[];let s=n.shift(),o=r9.test(s);for(;;){if(o){const a=parseFloat(s);isNaN(a)?r.push(s):r.push(Math.ceil(a*t*i)/i)}else r.push(s);if(s=n.shift(),s===void 0)return r.join("");o=!o}}function s9(e,t="defs"){let i="";const n=e.indexOf("<"+t);for(;n>=0;){const r=e.indexOf(">",n),s=e.indexOf("</"+t);if(r===-1||s===-1)break;const o=e.indexOf(">",s);if(o===-1)break;i+=e.slice(r+1,s).trim(),e=e.slice(0,n).trim()+e.slice(o+1)}return{defs:i,content:e}}function o9(e,t){return e?"<defs>"+e+"</defs>"+t:t}function a9(e,t,i){const n=s9(e);return o9(n.defs,t+n.content+i)}const l9=e=>e==="unset"||e==="undefined"||e==="none";function c9(e,t){const i={..._k,...e},n={...JH,...t},r={left:i.left,top:i.top,width:i.width,height:i.height};let s=i.body;[i,n].forEach(p=>{const m=[],y=p.hFlip,_=p.vFlip;let C=p.rotate;y?_?C+=2:(m.push("translate("+(r.width+r.left).toString()+" "+(0-r.top).toString()+")"),m.push("scale(-1 1)"),r.top=r.left=0):_&&(m.push("translate("+(0-r.left).toString()+" "+(r.height+r.top).toString()+")"),m.push("scale(1 -1)"),r.top=r.left=0);let b;switch(C<0&&(C-=Math.floor(C/4)*4),C=C%4,C){case 1:b=r.height/2+r.top,m.unshift("rotate(90 "+b.toString()+" "+b.toString()+")");break;case 2:m.unshift("rotate(180 "+(r.width/2+r.left).toString()+" "+(r.height/2+r.top).toString()+")");break;case 3:b=r.width/2+r.left,m.unshift("rotate(-90 "+b.toString()+" "+b.toString()+")");break}C%2===1&&(r.left!==r.top&&(b=r.left,r.left=r.top,r.top=b),r.width!==r.height&&(b=r.width,r.width=r.height,r.height=b)),m.length&&(s=a9(s,'<g transform="'+m.join(" ")+'">',"</g>"))});const o=n.width,a=n.height,l=r.width,c=r.height;let h,u;o===null?(u=a===null?"1em":a==="auto"?c:a,h=Q1(u,l/c)):(h=o==="auto"?l:o,u=a===null?Q1(h,c/l):a==="auto"?c:a);const d={},f=(p,m)=>{l9(m)||(d[p]=m.toString())};f("width",h),f("height",u);const g=[r.left,r.top,l,c];return d.viewBox=g.join(" "),{attributes:d,viewBox:g,body:s}}const h9=/\sid="(\S+)"/g,tb=new Map;function u9(e){e=e.replace(/[0-9]+$/,"")||"a";const t=tb.get(e)||0;return tb.set(e,t+1),t?`${e}${t}`:e}function d9(e){const t=[];let i;for(;i=h9.exec(e);)t.push(i[1]);if(!t.length)return e;const n="suffix"+(Math.random()*16777216|Date.now()).toString(16);return t.forEach(r=>{const s=u9(r),o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");e=e.replace(new RegExp('([#;"])('+o+')([")]|\\.[a-z])',"g"),"$1"+s+n+"$3")}),e=e.replace(new RegExp(n,"g"),""),e}function f9(e,t){let i=e.indexOf("xlink:")===-1?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const n in t)i+=" "+n+'="'+t[n]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+i+">"+e+"</svg>"}function a_(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var No=a_();function xk(e){No=e}var lc={exec:()=>null};function Jt(e,t=""){let i=typeof e=="string"?e:e.source,n={replace:(r,s)=>{let o=typeof s=="string"?s:s.source;return o=o.replace(Ei.caret,"$1"),i=i.replace(r,o),n},getRegex:()=>new RegExp(i,t)};return n}var g9=(()=>{try{return!!new RegExp("(?<=1)(?<!1)")}catch{return!1}})(),Ei={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:e=>new RegExp(`^( {0,3}${e})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}#`),htmlBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}<(?:[a-z].*>|!--)`,"i")},p9=/^(?:[ \t]*(?:\n|$))+/,m9=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,y9=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,ph=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,_9=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,l_=/(?:[*+-]|\d{1,9}[.)])/,Ck=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,bk=Jt(Ck).replace(/bull/g,l_).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),x9=Jt(Ck).replace(/bull/g,l_).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),c_=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,C9=/^[^\n]+/,h_=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,b9=Jt(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",h_).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),v9=Jt(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,l_).getRegex(),Wf="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",u_=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,w9=Jt("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",u_).replace("tag",Wf).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),vk=Jt(c_).replace("hr",ph).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Wf).getRegex(),S9=Jt(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",vk).getRegex(),d_={blockquote:S9,code:m9,def:b9,fences:y9,heading:_9,hr:ph,html:w9,lheading:bk,list:v9,newline:p9,paragraph:vk,table:lc,text:C9},eb=Jt("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",ph).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Wf).getRegex(),T9={...d_,lheading:x9,table:eb,paragraph:Jt(c_).replace("hr",ph).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",eb).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Wf).getRegex()},E9={...d_,html:Jt(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",u_).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:lc,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Jt(c_).replace("hr",ph).replace("heading",` *#{1,6} *[^
]`).replace("lheading",bk).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},k9=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,R9=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,wk=/^( {2,}|\\)\n(?!\s*$)/,A9=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,jf=/[\p{P}\p{S}]/u,f_=/[\s\p{P}\p{S}]/u,Sk=/[^\s\p{P}\p{S}]/u,L9=Jt(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,f_).getRegex(),Tk=/(?!~)[\p{P}\p{S}]/u,M9=/(?!~)[\s\p{P}\p{S}]/u,I9=/(?:[^\s\p{P}\p{S}]|~)/u,P9=Jt(/link|precode-code|html/,"g").replace("link",/\[(?:[^\[\]`]|(?<a>`+)[^`]+\k<a>(?!`))*?\]\((?:\\[\s\S]|[^\\\(\)]|\((?:\\[\s\S]|[^\\\(\)])*\))*\)/).replace("precode-",g9?"(?<!`)()":"(^^|[^`])").replace("code",/(?<b>`+)[^`]+\k<b>(?!`)/).replace("html",/<(?! )[^<>]*?>/).getRegex(),Ek=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,F9=Jt(Ek,"u").replace(/punct/g,jf).getRegex(),O9=Jt(Ek,"u").replace(/punct/g,Tk).getRegex(),kk="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",D9=Jt(kk,"gu").replace(/notPunctSpace/g,Sk).replace(/punctSpace/g,f_).replace(/punct/g,jf).getRegex(),B9=Jt(kk,"gu").replace(/notPunctSpace/g,I9).replace(/punctSpace/g,M9).replace(/punct/g,Tk).getRegex(),N9=Jt("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,Sk).replace(/punctSpace/g,f_).replace(/punct/g,jf).getRegex(),$9=Jt(/\\(punct)/,"gu").replace(/punct/g,jf).getRegex(),z9=Jt(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),G9=Jt(u_).replace("(?:-->|$)","-->").getRegex(),W9=Jt("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",G9).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Ed=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`+[^`]*?`+(?!`)|[^\[\]\\`])*?/,j9=Jt(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",Ed).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Rk=Jt(/^!?\[(label)\]\[(ref)\]/).replace("label",Ed).replace("ref",h_).getRegex(),Ak=Jt(/^!?\[(ref)\](?:\[\])?/).replace("ref",h_).getRegex(),H9=Jt("reflink|nolink(?!\\()","g").replace("reflink",Rk).replace("nolink",Ak).getRegex(),ib=/[hH][tT][tT][pP][sS]?|[fF][tT][pP]/,g_={_backpedal:lc,anyPunctuation:$9,autolink:z9,blockSkip:P9,br:wk,code:R9,del:lc,emStrongLDelim:F9,emStrongRDelimAst:D9,emStrongRDelimUnd:N9,escape:k9,link:j9,nolink:Ak,punctuation:L9,reflink:Rk,reflinkSearch:H9,tag:W9,text:A9,url:lc},V9={...g_,link:Jt(/^!?\[(label)\]\((.*?)\)/).replace("label",Ed).getRegex(),reflink:Jt(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Ed).getRegex()},Bm={...g_,emStrongRDelimAst:B9,emStrongLDelim:O9,url:Jt(/^((?:protocol):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).replace("protocol",ib).replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:Jt(/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|protocol:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/).replace("protocol",ib).getRegex()},U9={...Bm,br:Jt(wk).replace("{2,}","*").getRegex(),text:Jt(Bm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Yh={normal:d_,gfm:T9,pedantic:E9},kl={normal:g_,gfm:Bm,breaks:U9,pedantic:V9},q9={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},nb=e=>q9[e];function Hn(e,t){if(t){if(Ei.escapeTest.test(e))return e.replace(Ei.escapeReplace,nb)}else if(Ei.escapeTestNoEncode.test(e))return e.replace(Ei.escapeReplaceNoEncode,nb);return e}function rb(e){try{e=encodeURI(e).replace(Ei.percentDecode,"%")}catch{return null}return e}function sb(e,t){let i=e.replace(Ei.findPipe,(s,o,a)=>{let l=!1,c=o;for(;--c>=0&&a[c]==="\\";)l=!l;return l?"|":" |"}),n=i.split(Ei.splitPipe),r=0;if(n[0].trim()||n.shift(),n.length>0&&!n.at(-1)?.trim()&&n.pop(),t)if(n.length>t)n.splice(t);else for(;n.length<t;)n.push("");for(;r<n.length;r++)n[r]=n[r].trim().replace(Ei.slashPipe,"|");return n}function Rl(e,t,i){let n=e.length;if(n===0)return"";let r=0;for(;r<n&&e.charAt(n-r-1)===t;)r++;return e.slice(0,n-r)}function Y9(e,t){if(e.indexOf(t[1])===-1)return-1;let i=0;for(let n=0;n<e.length;n++)if(e[n]==="\\")n++;else if(e[n]===t[0])i++;else if(e[n]===t[1]&&(i--,i<0))return n;return i>0?-2:-1}function ob(e,t,i,n,r){let s=t.href,o=t.title||null,a=e[1].replace(r.other.outputLinkReplace,"$1");n.state.inLink=!0;let l={type:e[0].charAt(0)==="!"?"image":"link",raw:i,href:s,title:o,text:a,tokens:n.inlineTokens(a)};return n.state.inLink=!1,l}function X9(e,t,i){let n=e.match(i.other.indentCodeCompensation);if(n===null)return t;let r=n[1];return t.split(`
`).map(s=>{let o=s.match(i.other.beginningSpace);if(o===null)return s;let[a]=o;return a.length>=r.length?s.slice(r.length):s}).join(`
`)}var kd=class{options;rules;lexer;constructor(t){this.options=t||No}space(t){let i=this.rules.block.newline.exec(t);if(i&&i[0].length>0)return{type:"space",raw:i[0]}}code(t){let i=this.rules.block.code.exec(t);if(i){let n=i[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:i[0],codeBlockStyle:"indented",text:this.options.pedantic?n:Rl(n,`
`)}}}fences(t){let i=this.rules.block.fences.exec(t);if(i){let n=i[0],r=X9(n,i[3]||"",this.rules);return{type:"code",raw:n,lang:i[2]?i[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):i[2],text:r}}}heading(t){let i=this.rules.block.heading.exec(t);if(i){let n=i[2].trim();if(this.rules.other.endingHash.test(n)){let r=Rl(n,"#");(this.options.pedantic||!r||this.rules.other.endingSpaceChar.test(r))&&(n=r.trim())}return{type:"heading",raw:i[0],depth:i[1].length,text:n,tokens:this.lexer.inline(n)}}}hr(t){let i=this.rules.block.hr.exec(t);if(i)return{type:"hr",raw:Rl(i[0],`
`)}}blockquote(t){let i=this.rules.block.blockquote.exec(t);if(i){let n=Rl(i[0],`
`).split(`
`),r="",s="",o=[];for(;n.length>0;){let a=!1,l=[],c;for(c=0;c<n.length;c++)if(this.rules.other.blockquoteStart.test(n[c]))l.push(n[c]),a=!0;else if(!a)l.push(n[c]);else break;n=n.slice(c);let h=l.join(`
`),u=h.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");r=r?`${r}
${h}`:h,s=s?`${s}
${u}`:u;let d=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(u,o,!0),this.lexer.state.top=d,n.length===0)break;let f=o.at(-1);if(f?.type==="code")break;if(f?.type==="blockquote"){let g=f,p=g.raw+`
`+n.join(`
`),m=this.blockquote(p);o[o.length-1]=m,r=r.substring(0,r.length-g.raw.length)+m.raw,s=s.substring(0,s.length-g.text.length)+m.text;break}else if(f?.type==="list"){let g=f,p=g.raw+`
`+n.join(`
`),m=this.list(p);o[o.length-1]=m,r=r.substring(0,r.length-f.raw.length)+m.raw,s=s.substring(0,s.length-g.raw.length)+m.raw,n=p.substring(o.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:r,tokens:o,text:s}}}list(t){let i=this.rules.block.list.exec(t);if(i){let n=i[1].trim(),r=n.length>1,s={type:"list",raw:"",ordered:r,start:r?+n.slice(0,-1):"",loose:!1,items:[]};n=r?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=r?n:"[*+-]");let o=this.rules.other.listItemRegex(n),a=!1;for(;t;){let c=!1,h="",u="";if(!(i=o.exec(t))||this.rules.block.hr.test(t))break;h=i[0],t=t.substring(h.length);let d=i[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,_=>" ".repeat(3*_.length)),f=t.split(`
`,1)[0],g=!d.trim(),p=0;if(this.options.pedantic?(p=2,u=d.trimStart()):g?p=i[1].length+1:(p=i[2].search(this.rules.other.nonSpaceChar),p=p>4?1:p,u=d.slice(p),p+=i[1].length),g&&this.rules.other.blankLine.test(f)&&(h+=f+`
`,t=t.substring(f.length+1),c=!0),!c){let _=this.rules.other.nextBulletRegex(p),C=this.rules.other.hrRegex(p),b=this.rules.other.fencesBeginRegex(p),v=this.rules.other.headingBeginRegex(p),S=this.rules.other.htmlBeginRegex(p);for(;t;){let w=t.split(`
`,1)[0],L;if(f=w,this.options.pedantic?(f=f.replace(this.rules.other.listReplaceNesting,"  "),L=f):L=f.replace(this.rules.other.tabCharGlobal,"    "),b.test(f)||v.test(f)||S.test(f)||_.test(f)||C.test(f))break;if(L.search(this.rules.other.nonSpaceChar)>=p||!f.trim())u+=`
`+L.slice(p);else{if(g||d.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||b.test(d)||v.test(d)||C.test(d))break;u+=`
`+f}!g&&!f.trim()&&(g=!0),h+=w+`
`,t=t.substring(w.length+1),d=L.slice(p)}}s.loose||(a?s.loose=!0:this.rules.other.doubleBlankLine.test(h)&&(a=!0));let m=null,y;this.options.gfm&&(m=this.rules.other.listIsTask.exec(u),m&&(y=m[0]!=="[ ] ",u=u.replace(this.rules.other.listReplaceTask,""))),s.items.push({type:"list_item",raw:h,task:!!m,checked:y,loose:!1,text:u,tokens:[]}),s.raw+=h}let l=s.items.at(-1);if(l)l.raw=l.raw.trimEnd(),l.text=l.text.trimEnd();else return;s.raw=s.raw.trimEnd();for(let c=0;c<s.items.length;c++)if(this.lexer.state.top=!1,s.items[c].tokens=this.lexer.blockTokens(s.items[c].text,[]),!s.loose){let h=s.items[c].tokens.filter(d=>d.type==="space"),u=h.length>0&&h.some(d=>this.rules.other.anyLine.test(d.raw));s.loose=u}if(s.loose)for(let c=0;c<s.items.length;c++)s.items[c].loose=!0;return s}}html(t){let i=this.rules.block.html.exec(t);if(i)return{type:"html",block:!0,raw:i[0],pre:i[1]==="pre"||i[1]==="script"||i[1]==="style",text:i[0]}}def(t){let i=this.rules.block.def.exec(t);if(i){let n=i[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),r=i[2]?i[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",s=i[3]?i[3].substring(1,i[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):i[3];return{type:"def",tag:n,raw:i[0],href:r,title:s}}}table(t){let i=this.rules.block.table.exec(t);if(!i||!this.rules.other.tableDelimiter.test(i[2]))return;let n=sb(i[1]),r=i[2].replace(this.rules.other.tableAlignChars,"").split("|"),s=i[3]?.trim()?i[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],o={type:"table",raw:i[0],header:[],align:[],rows:[]};if(n.length===r.length){for(let a of r)this.rules.other.tableAlignRight.test(a)?o.align.push("right"):this.rules.other.tableAlignCenter.test(a)?o.align.push("center"):this.rules.other.tableAlignLeft.test(a)?o.align.push("left"):o.align.push(null);for(let a=0;a<n.length;a++)o.header.push({text:n[a],tokens:this.lexer.inline(n[a]),header:!0,align:o.align[a]});for(let a of s)o.rows.push(sb(a,o.header.length).map((l,c)=>({text:l,tokens:this.lexer.inline(l),header:!1,align:o.align[c]})));return o}}lheading(t){let i=this.rules.block.lheading.exec(t);if(i)return{type:"heading",raw:i[0],depth:i[2].charAt(0)==="="?1:2,text:i[1],tokens:this.lexer.inline(i[1])}}paragraph(t){let i=this.rules.block.paragraph.exec(t);if(i){let n=i[1].charAt(i[1].length-1)===`
`?i[1].slice(0,-1):i[1];return{type:"paragraph",raw:i[0],text:n,tokens:this.lexer.inline(n)}}}text(t){let i=this.rules.block.text.exec(t);if(i)return{type:"text",raw:i[0],text:i[0],tokens:this.lexer.inline(i[0])}}escape(t){let i=this.rules.inline.escape.exec(t);if(i)return{type:"escape",raw:i[0],text:i[1]}}tag(t){let i=this.rules.inline.tag.exec(t);if(i)return!this.lexer.state.inLink&&this.rules.other.startATag.test(i[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(i[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(i[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(i[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:i[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:i[0]}}link(t){let i=this.rules.inline.link.exec(t);if(i){let n=i[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(n)){if(!this.rules.other.endAngleBracket.test(n))return;let o=Rl(n.slice(0,-1),"\\");if((n.length-o.length)%2===0)return}else{let o=Y9(i[2],"()");if(o===-2)return;if(o>-1){let a=(i[0].indexOf("!")===0?5:4)+i[1].length+o;i[2]=i[2].substring(0,o),i[0]=i[0].substring(0,a).trim(),i[3]=""}}let r=i[2],s="";if(this.options.pedantic){let o=this.rules.other.pedanticHrefTitle.exec(r);o&&(r=o[1],s=o[3])}else s=i[3]?i[3].slice(1,-1):"";return r=r.trim(),this.rules.other.startAngleBracket.test(r)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(n)?r=r.slice(1):r=r.slice(1,-1)),ob(i,{href:r&&r.replace(this.rules.inline.anyPunctuation,"$1"),title:s&&s.replace(this.rules.inline.anyPunctuation,"$1")},i[0],this.lexer,this.rules)}}reflink(t,i){let n;if((n=this.rules.inline.reflink.exec(t))||(n=this.rules.inline.nolink.exec(t))){let r=(n[2]||n[1]).replace(this.rules.other.multipleSpaceGlobal," "),s=i[r.toLowerCase()];if(!s){let o=n[0].charAt(0);return{type:"text",raw:o,text:o}}return ob(n,s,n[0],this.lexer,this.rules)}}emStrong(t,i,n=""){let r=this.rules.inline.emStrongLDelim.exec(t);if(!(!r||r[3]&&n.match(this.rules.other.unicodeAlphaNumeric))&&(!(r[1]||r[2])||!n||this.rules.inline.punctuation.exec(n))){let s=[...r[0]].length-1,o,a,l=s,c=0,h=r[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(h.lastIndex=0,i=i.slice(-1*t.length+s);(r=h.exec(i))!=null;){if(o=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!o)continue;if(a=[...o].length,r[3]||r[4]){l+=a;continue}else if((r[5]||r[6])&&s%3&&!((s+a)%3)){c+=a;continue}if(l-=a,l>0)continue;a=Math.min(a,a+l+c);let u=[...r[0]][0].length,d=t.slice(0,s+r.index+u+a);if(Math.min(s,a)%2){let g=d.slice(1,-1);return{type:"em",raw:d,text:g,tokens:this.lexer.inlineTokens(g)}}let f=d.slice(2,-2);return{type:"strong",raw:d,text:f,tokens:this.lexer.inlineTokens(f)}}}}codespan(t){let i=this.rules.inline.code.exec(t);if(i){let n=i[2].replace(this.rules.other.newLineCharGlobal," "),r=this.rules.other.nonSpaceChar.test(n),s=this.rules.other.startingSpaceChar.test(n)&&this.rules.other.endingSpaceChar.test(n);return r&&s&&(n=n.substring(1,n.length-1)),{type:"codespan",raw:i[0],text:n}}}br(t){let i=this.rules.inline.br.exec(t);if(i)return{type:"br",raw:i[0]}}del(t){let i=this.rules.inline.del.exec(t);if(i)return{type:"del",raw:i[0],text:i[2],tokens:this.lexer.inlineTokens(i[2])}}autolink(t){let i=this.rules.inline.autolink.exec(t);if(i){let n,r;return i[2]==="@"?(n=i[1],r="mailto:"+n):(n=i[1],r=n),{type:"link",raw:i[0],text:n,href:r,tokens:[{type:"text",raw:n,text:n}]}}}url(t){let i;if(i=this.rules.inline.url.exec(t)){let n,r;if(i[2]==="@")n=i[0],r="mailto:"+n;else{let s;do s=i[0],i[0]=this.rules.inline._backpedal.exec(i[0])?.[0]??"";while(s!==i[0]);n=i[0],i[1]==="www."?r="http://"+i[0]:r=i[0]}return{type:"link",raw:i[0],text:n,href:r,tokens:[{type:"text",raw:n,text:n}]}}}inlineText(t){let i=this.rules.inline.text.exec(t);if(i){let n=this.lexer.state.inRawBlock;return{type:"text",raw:i[0],text:i[0],escaped:n}}}},yn=class Nm{tokens;options;state;tokenizer;inlineQueue;constructor(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||No,this.options.tokenizer=this.options.tokenizer||new kd,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let i={other:Ei,block:Yh.normal,inline:kl.normal};this.options.pedantic?(i.block=Yh.pedantic,i.inline=kl.pedantic):this.options.gfm&&(i.block=Yh.gfm,this.options.breaks?i.inline=kl.breaks:i.inline=kl.gfm),this.tokenizer.rules=i}static get rules(){return{block:Yh,inline:kl}}static lex(t,i){return new Nm(i).lex(t)}static lexInline(t,i){return new Nm(i).inlineTokens(t)}lex(t){t=t.replace(Ei.carriageReturn,`
`),this.blockTokens(t,this.tokens);for(let i=0;i<this.inlineQueue.length;i++){let n=this.inlineQueue[i];this.inlineTokens(n.src,n.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,i=[],n=!1){for(this.options.pedantic&&(t=t.replace(Ei.tabCharGlobal,"    ").replace(Ei.spaceLine,""));t;){let r;if(this.options.extensions?.block?.some(o=>(r=o.call({lexer:this},t,i))?(t=t.substring(r.raw.length),i.push(r),!0):!1))continue;if(r=this.tokenizer.space(t)){t=t.substring(r.raw.length);let o=i.at(-1);r.raw.length===1&&o!==void 0?o.raw+=`
`:i.push(r);continue}if(r=this.tokenizer.code(t)){t=t.substring(r.raw.length);let o=i.at(-1);o?.type==="paragraph"||o?.type==="text"?(o.raw+=(o.raw.endsWith(`
`)?"":`
`)+r.raw,o.text+=`
`+r.text,this.inlineQueue.at(-1).src=o.text):i.push(r);continue}if(r=this.tokenizer.fences(t)){t=t.substring(r.raw.length),i.push(r);continue}if(r=this.tokenizer.heading(t)){t=t.substring(r.raw.length),i.push(r);continue}if(r=this.tokenizer.hr(t)){t=t.substring(r.raw.length),i.push(r);continue}if(r=this.tokenizer.blockquote(t)){t=t.substring(r.raw.length),i.push(r);continue}if(r=this.tokenizer.list(t)){t=t.substring(r.raw.length),i.push(r);continue}if(r=this.tokenizer.html(t)){t=t.substring(r.raw.length),i.push(r);continue}if(r=this.tokenizer.def(t)){t=t.substring(r.raw.length);let o=i.at(-1);o?.type==="paragraph"||o?.type==="text"?(o.raw+=(o.raw.endsWith(`
`)?"":`
`)+r.raw,o.text+=`
`+r.raw,this.inlineQueue.at(-1).src=o.text):this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title},i.push(r));continue}if(r=this.tokenizer.table(t)){t=t.substring(r.raw.length),i.push(r);continue}if(r=this.tokenizer.lheading(t)){t=t.substring(r.raw.length),i.push(r);continue}let s=t;if(this.options.extensions?.startBlock){let o=1/0,a=t.slice(1),l;this.options.extensions.startBlock.forEach(c=>{l=c.call({lexer:this},a),typeof l=="number"&&l>=0&&(o=Math.min(o,l))}),o<1/0&&o>=0&&(s=t.substring(0,o+1))}if(this.state.top&&(r=this.tokenizer.paragraph(s))){let o=i.at(-1);n&&o?.type==="paragraph"?(o.raw+=(o.raw.endsWith(`
`)?"":`
`)+r.raw,o.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=o.text):i.push(r),n=s.length!==t.length,t=t.substring(r.raw.length);continue}if(r=this.tokenizer.text(t)){t=t.substring(r.raw.length);let o=i.at(-1);o?.type==="text"?(o.raw+=(o.raw.endsWith(`
`)?"":`
`)+r.raw,o.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=o.text):i.push(r);continue}if(t){let o="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(o);break}else throw new Error(o)}}return this.state.top=!0,i}inline(t,i=[]){return this.inlineQueue.push({src:t,tokens:i}),i}inlineTokens(t,i=[]){let n=t,r=null;if(this.tokens.links){let l=Object.keys(this.tokens.links);if(l.length>0)for(;(r=this.tokenizer.rules.inline.reflinkSearch.exec(n))!=null;)l.includes(r[0].slice(r[0].lastIndexOf("[")+1,-1))&&(n=n.slice(0,r.index)+"["+"a".repeat(r[0].length-2)+"]"+n.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(r=this.tokenizer.rules.inline.anyPunctuation.exec(n))!=null;)n=n.slice(0,r.index)+"++"+n.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);let s;for(;(r=this.tokenizer.rules.inline.blockSkip.exec(n))!=null;)s=r[2]?r[2].length:0,n=n.slice(0,r.index+s)+"["+"a".repeat(r[0].length-s-2)+"]"+n.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);n=this.options.hooks?.emStrongMask?.call({lexer:this},n)??n;let o=!1,a="";for(;t;){o||(a=""),o=!1;let l;if(this.options.extensions?.inline?.some(h=>(l=h.call({lexer:this},t,i))?(t=t.substring(l.raw.length),i.push(l),!0):!1))continue;if(l=this.tokenizer.escape(t)){t=t.substring(l.raw.length),i.push(l);continue}if(l=this.tokenizer.tag(t)){t=t.substring(l.raw.length),i.push(l);continue}if(l=this.tokenizer.link(t)){t=t.substring(l.raw.length),i.push(l);continue}if(l=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(l.raw.length);let h=i.at(-1);l.type==="text"&&h?.type==="text"?(h.raw+=l.raw,h.text+=l.text):i.push(l);continue}if(l=this.tokenizer.emStrong(t,n,a)){t=t.substring(l.raw.length),i.push(l);continue}if(l=this.tokenizer.codespan(t)){t=t.substring(l.raw.length),i.push(l);continue}if(l=this.tokenizer.br(t)){t=t.substring(l.raw.length),i.push(l);continue}if(l=this.tokenizer.del(t)){t=t.substring(l.raw.length),i.push(l);continue}if(l=this.tokenizer.autolink(t)){t=t.substring(l.raw.length),i.push(l);continue}if(!this.state.inLink&&(l=this.tokenizer.url(t))){t=t.substring(l.raw.length),i.push(l);continue}let c=t;if(this.options.extensions?.startInline){let h=1/0,u=t.slice(1),d;this.options.extensions.startInline.forEach(f=>{d=f.call({lexer:this},u),typeof d=="number"&&d>=0&&(h=Math.min(h,d))}),h<1/0&&h>=0&&(c=t.substring(0,h+1))}if(l=this.tokenizer.inlineText(c)){t=t.substring(l.raw.length),l.raw.slice(-1)!=="_"&&(a=l.raw.slice(-1)),o=!0;let h=i.at(-1);h?.type==="text"?(h.raw+=l.raw,h.text+=l.text):i.push(l);continue}if(t){let h="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(h);break}else throw new Error(h)}}return i}},Rd=class{options;parser;constructor(t){this.options=t||No}space(t){return""}code({text:t,lang:i,escaped:n}){let r=(i||"").match(Ei.notSpaceStart)?.[0],s=t.replace(Ei.endingNewline,"")+`
`;return r?'<pre><code class="language-'+Hn(r)+'">'+(n?s:Hn(s,!0))+`</code></pre>
`:"<pre><code>"+(n?s:Hn(s,!0))+`</code></pre>
`}blockquote({tokens:t}){return`<blockquote>
${this.parser.parse(t)}</blockquote>
`}html({text:t}){return t}def(t){return""}heading({tokens:t,depth:i}){return`<h${i}>${this.parser.parseInline(t)}</h${i}>
`}hr(t){return`<hr>
`}list(t){let i=t.ordered,n=t.start,r="";for(let a=0;a<t.items.length;a++){let l=t.items[a];r+=this.listitem(l)}let s=i?"ol":"ul",o=i&&n!==1?' start="'+n+'"':"";return"<"+s+o+`>
`+r+"</"+s+`>
`}listitem(t){let i="";if(t.task){let n=this.checkbox({checked:!!t.checked});t.loose?t.tokens[0]?.type==="paragraph"?(t.tokens[0].text=n+" "+t.tokens[0].text,t.tokens[0].tokens&&t.tokens[0].tokens.length>0&&t.tokens[0].tokens[0].type==="text"&&(t.tokens[0].tokens[0].text=n+" "+Hn(t.tokens[0].tokens[0].text),t.tokens[0].tokens[0].escaped=!0)):t.tokens.unshift({type:"text",raw:n+" ",text:n+" ",escaped:!0}):i+=n+" "}return i+=this.parser.parse(t.tokens,!!t.loose),`<li>${i}</li>
`}checkbox({checked:t}){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:t}){return`<p>${this.parser.parseInline(t)}</p>
`}table(t){let i="",n="";for(let s=0;s<t.header.length;s++)n+=this.tablecell(t.header[s]);i+=this.tablerow({text:n});let r="";for(let s=0;s<t.rows.length;s++){let o=t.rows[s];n="";for(let a=0;a<o.length;a++)n+=this.tablecell(o[a]);r+=this.tablerow({text:n})}return r&&(r=`<tbody>${r}</tbody>`),`<table>
<thead>
`+i+`</thead>
`+r+`</table>
`}tablerow({text:t}){return`<tr>
${t}</tr>
`}tablecell(t){let i=this.parser.parseInline(t.tokens),n=t.header?"th":"td";return(t.align?`<${n} align="${t.align}">`:`<${n}>`)+i+`</${n}>
`}strong({tokens:t}){return`<strong>${this.parser.parseInline(t)}</strong>`}em({tokens:t}){return`<em>${this.parser.parseInline(t)}</em>`}codespan({text:t}){return`<code>${Hn(t,!0)}</code>`}br(t){return"<br>"}del({tokens:t}){return`<del>${this.parser.parseInline(t)}</del>`}link({href:t,title:i,tokens:n}){let r=this.parser.parseInline(n),s=rb(t);if(s===null)return r;t=s;let o='<a href="'+t+'"';return i&&(o+=' title="'+Hn(i)+'"'),o+=">"+r+"</a>",o}image({href:t,title:i,text:n,tokens:r}){r&&(n=this.parser.parseInline(r,this.parser.textRenderer));let s=rb(t);if(s===null)return Hn(n);t=s;let o=`<img src="${t}" alt="${n}"`;return i&&(o+=` title="${Hn(i)}"`),o+=">",o}text(t){return"tokens"in t&&t.tokens?this.parser.parseInline(t.tokens):"escaped"in t&&t.escaped?t.text:Hn(t.text)}},p_=class{strong({text:t}){return t}em({text:t}){return t}codespan({text:t}){return t}del({text:t}){return t}html({text:t}){return t}text({text:t}){return t}link({text:t}){return""+t}image({text:t}){return""+t}br(){return""}},_n=class $m{options;renderer;textRenderer;constructor(t){this.options=t||No,this.options.renderer=this.options.renderer||new Rd,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new p_}static parse(t,i){return new $m(i).parse(t)}static parseInline(t,i){return new $m(i).parseInline(t)}parse(t,i=!0){let n="";for(let r=0;r<t.length;r++){let s=t[r];if(this.options.extensions?.renderers?.[s.type]){let a=s,l=this.options.extensions.renderers[a.type].call({parser:this},a);if(l!==!1||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(a.type)){n+=l||"";continue}}let o=s;switch(o.type){case"space":{n+=this.renderer.space(o);continue}case"hr":{n+=this.renderer.hr(o);continue}case"heading":{n+=this.renderer.heading(o);continue}case"code":{n+=this.renderer.code(o);continue}case"table":{n+=this.renderer.table(o);continue}case"blockquote":{n+=this.renderer.blockquote(o);continue}case"list":{n+=this.renderer.list(o);continue}case"html":{n+=this.renderer.html(o);continue}case"def":{n+=this.renderer.def(o);continue}case"paragraph":{n+=this.renderer.paragraph(o);continue}case"text":{let a=o,l=this.renderer.text(a);for(;r+1<t.length&&t[r+1].type==="text";)a=t[++r],l+=`
`+this.renderer.text(a);i?n+=this.renderer.paragraph({type:"paragraph",raw:l,text:l,tokens:[{type:"text",raw:l,text:l,escaped:!0}]}):n+=l;continue}default:{let a='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return n}parseInline(t,i=this.renderer){let n="";for(let r=0;r<t.length;r++){let s=t[r];if(this.options.extensions?.renderers?.[s.type]){let a=this.options.extensions.renderers[s.type].call({parser:this},s);if(a!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(s.type)){n+=a||"";continue}}let o=s;switch(o.type){case"escape":{n+=i.text(o);break}case"html":{n+=i.html(o);break}case"link":{n+=i.link(o);break}case"image":{n+=i.image(o);break}case"strong":{n+=i.strong(o);break}case"em":{n+=i.em(o);break}case"codespan":{n+=i.codespan(o);break}case"br":{n+=i.br(o);break}case"del":{n+=i.del(o);break}case"text":{n+=i.text(o);break}default:{let a='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return n}},jl=class{options;block;constructor(t){this.options=t||No}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens","emStrongMask"]);static passThroughHooksRespectAsync=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(t){return t}postprocess(t){return t}processAllTokens(t){return t}emStrongMask(t){return t}provideLexer(){return this.block?yn.lex:yn.lexInline}provideParser(){return this.block?_n.parse:_n.parseInline}},K9=class{defaults=a_();options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=_n;Renderer=Rd;TextRenderer=p_;Lexer=yn;Tokenizer=kd;Hooks=jl;constructor(...t){this.use(...t)}walkTokens(t,i){let n=[];for(let r of t)switch(n=n.concat(i.call(this,r)),r.type){case"table":{let s=r;for(let o of s.header)n=n.concat(this.walkTokens(o.tokens,i));for(let o of s.rows)for(let a of o)n=n.concat(this.walkTokens(a.tokens,i));break}case"list":{let s=r;n=n.concat(this.walkTokens(s.items,i));break}default:{let s=r;this.defaults.extensions?.childTokens?.[s.type]?this.defaults.extensions.childTokens[s.type].forEach(o=>{let a=s[o].flat(1/0);n=n.concat(this.walkTokens(a,i))}):s.tokens&&(n=n.concat(this.walkTokens(s.tokens,i)))}}return n}use(...t){let i=this.defaults.extensions||{renderers:{},childTokens:{}};return t.forEach(n=>{let r={...n};if(r.async=this.defaults.async||r.async||!1,n.extensions&&(n.extensions.forEach(s=>{if(!s.name)throw new Error("extension name required");if("renderer"in s){let o=i.renderers[s.name];o?i.renderers[s.name]=function(...a){let l=s.renderer.apply(this,a);return l===!1&&(l=o.apply(this,a)),l}:i.renderers[s.name]=s.renderer}if("tokenizer"in s){if(!s.level||s.level!=="block"&&s.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let o=i[s.level];o?o.unshift(s.tokenizer):i[s.level]=[s.tokenizer],s.start&&(s.level==="block"?i.startBlock?i.startBlock.push(s.start):i.startBlock=[s.start]:s.level==="inline"&&(i.startInline?i.startInline.push(s.start):i.startInline=[s.start]))}"childTokens"in s&&s.childTokens&&(i.childTokens[s.name]=s.childTokens)}),r.extensions=i),n.renderer){let s=this.defaults.renderer||new Rd(this.defaults);for(let o in n.renderer){if(!(o in s))throw new Error(`renderer '${o}' does not exist`);if(["options","parser"].includes(o))continue;let a=o,l=n.renderer[a],c=s[a];s[a]=(...h)=>{let u=l.apply(s,h);return u===!1&&(u=c.apply(s,h)),u||""}}r.renderer=s}if(n.tokenizer){let s=this.defaults.tokenizer||new kd(this.defaults);for(let o in n.tokenizer){if(!(o in s))throw new Error(`tokenizer '${o}' does not exist`);if(["options","rules","lexer"].includes(o))continue;let a=o,l=n.tokenizer[a],c=s[a];s[a]=(...h)=>{let u=l.apply(s,h);return u===!1&&(u=c.apply(s,h)),u}}r.tokenizer=s}if(n.hooks){let s=this.defaults.hooks||new jl;for(let o in n.hooks){if(!(o in s))throw new Error(`hook '${o}' does not exist`);if(["options","block"].includes(o))continue;let a=o,l=n.hooks[a],c=s[a];jl.passThroughHooks.has(o)?s[a]=h=>{if(this.defaults.async&&jl.passThroughHooksRespectAsync.has(o))return(async()=>{let d=await l.call(s,h);return c.call(s,d)})();let u=l.call(s,h);return c.call(s,u)}:s[a]=(...h)=>{if(this.defaults.async)return(async()=>{let d=await l.apply(s,h);return d===!1&&(d=await c.apply(s,h)),d})();let u=l.apply(s,h);return u===!1&&(u=c.apply(s,h)),u}}r.hooks=s}if(n.walkTokens){let s=this.defaults.walkTokens,o=n.walkTokens;r.walkTokens=function(a){let l=[];return l.push(o.call(this,a)),s&&(l=l.concat(s.call(this,a))),l}}this.defaults={...this.defaults,...r}}),this}setOptions(t){return this.defaults={...this.defaults,...t},this}lexer(t,i){return yn.lex(t,i??this.defaults)}parser(t,i){return _n.parse(t,i??this.defaults)}parseMarkdown(t){return(i,n)=>{let r={...n},s={...this.defaults,...r},o=this.onError(!!s.silent,!!s.async);if(this.defaults.async===!0&&r.async===!1)return o(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof i>"u"||i===null)return o(new Error("marked(): input parameter is undefined or null"));if(typeof i!="string")return o(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(i)+", string expected"));if(s.hooks&&(s.hooks.options=s,s.hooks.block=t),s.async)return(async()=>{let a=s.hooks?await s.hooks.preprocess(i):i,l=await(s.hooks?await s.hooks.provideLexer():t?yn.lex:yn.lexInline)(a,s),c=s.hooks?await s.hooks.processAllTokens(l):l;s.walkTokens&&await Promise.all(this.walkTokens(c,s.walkTokens));let h=await(s.hooks?await s.hooks.provideParser():t?_n.parse:_n.parseInline)(c,s);return s.hooks?await s.hooks.postprocess(h):h})().catch(o);try{s.hooks&&(i=s.hooks.preprocess(i));let a=(s.hooks?s.hooks.provideLexer():t?yn.lex:yn.lexInline)(i,s);s.hooks&&(a=s.hooks.processAllTokens(a)),s.walkTokens&&this.walkTokens(a,s.walkTokens);let l=(s.hooks?s.hooks.provideParser():t?_n.parse:_n.parseInline)(a,s);return s.hooks&&(l=s.hooks.postprocess(l)),l}catch(a){return o(a)}}}onError(t,i){return n=>{if(n.message+=`
Please report this to https://github.com/markedjs/marked.`,t){let r="<p>An error occurred:</p><pre>"+Hn(n.message+"",!0)+"</pre>";return i?Promise.resolve(r):r}if(i)return Promise.reject(n);throw n}}},Ao=new K9;function re(e,t){return Ao.parse(e,t)}re.options=re.setOptions=function(e){return Ao.setOptions(e),re.defaults=Ao.defaults,xk(re.defaults),re};re.getDefaults=a_;re.defaults=No;re.use=function(...e){return Ao.use(...e),re.defaults=Ao.defaults,xk(re.defaults),re};re.walkTokens=function(e,t){return Ao.walkTokens(e,t)};re.parseInline=Ao.parseInline;re.Parser=_n;re.parser=_n.parse;re.Renderer=Rd;re.TextRenderer=p_;re.Lexer=yn;re.lexer=yn.lex;re.Tokenizer=kd;re.Hooks=jl;re.parse=re;re.options;re.setOptions;re.use;re.walkTokens;re.parseInline;_n.parse;yn.lex;function Lk(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];var n=Array.from(typeof e=="string"?[e]:e);n[n.length-1]=n[n.length-1].replace(/\r?\n([\t ]*)$/,"");var r=n.reduce(function(a,l){var c=l.match(/\n([\t ]+|(?!\s).)/g);return c?a.concat(c.map(function(h){var u,d;return(d=(u=h.match(/[\t ]/g))===null||u===void 0?void 0:u.length)!==null&&d!==void 0?d:0})):a},[]);if(r.length){var s=new RegExp(`
[	 ]{`+Math.min.apply(Math,r)+"}","g");n=n.map(function(a){return a.replace(s,`
`)})}n[0]=n[0].replace(/^\r?\n/,"");var o=n[0];return t.forEach(function(a,l){var c=o.match(/(?:^|\n)( *)$/),h=c?c[1]:"",u=a;typeof a=="string"&&a.includes(`
`)&&(u=String(a).split(`
`).map(function(d,f){return f===0?d:""+h+d}).join(`
`)),o+=u+n[l+1]}),o}var Z9={body:'<g><rect width="80" height="80" style="fill: #087ebf; stroke-width: 0px;"/><text transform="translate(21.16 64.67)" style="fill: #fff; font-family: ArialMT, Arial; font-size: 67.75px;"><tspan x="0" y="0">?</tspan></text></g>',height:80,width:80},zm=new Map,Mk=new Map,J9=x(e=>{for(const t of e){if(!t.name)throw new Error('Invalid icon loader. Must have a "name" property with non-empty string value.');if(X.debug("Registering icon pack:",t.name),"loader"in t)Mk.set(t.name,t.loader);else if("icons"in t)zm.set(t.name,t.icons);else throw X.error("Invalid icon loader:",t),new Error('Invalid icon loader. Must have either "icons" or "loader" property.')}},"registerIconPacks"),Ik=x(async(e,t)=>{const i=QH(e,!0,t!==void 0);if(!i)throw new Error(`Invalid icon name: ${e}`);const n=i.prefix||t;if(!n)throw new Error(`Icon name must contain a prefix: ${e}`);let r=zm.get(n);if(!r){const o=Mk.get(n);if(!o)throw new Error(`Icon set not found: ${i.prefix}`);try{r={...await o(),prefix:n},zm.set(n,r)}catch(a){throw X.error(a),new Error(`Failed to load icon set: ${i.prefix}`)}}const s=i9(r,i.name);if(!s)throw new Error(`Icon not found: ${e}`);return s},"getRegisteredIconData"),Q9=x(async e=>{try{return await Ik(e),!0}catch{return!1}},"isIconAvailable"),mh=x(async(e,t,i)=>{let n;try{n=await Ik(e,t?.fallbackPrefix)}catch(o){X.error(o),n=Z9}const r=c9(n,t),s=f9(d9(r.body),{...r.attributes,...i});return dn(s,ui())},"getIconSVG");function Pk(e,{markdownAutoWrap:t}){const n=e.replace(/<br\/>/g,`
`).replace(/\n{2,}/g,`
`),r=Lk(n);return t===!1?r.replace(/ /g,"&nbsp;"):r}x(Pk,"preprocessMarkdown");function Fk(e,t={}){const i=Pk(e,t),n=re.lexer(i),r=[[]];let s=0;function o(a,l="normal"){a.type==="text"?a.text.split(`
`).forEach((h,u)=>{u!==0&&(s++,r.push([])),h.split(" ").forEach(d=>{d=d.replace(/&#39;/g,"'"),d&&r[s].push({content:d,type:l})})}):a.type==="strong"||a.type==="em"?a.tokens.forEach(c=>{o(c,a.type)}):a.type==="html"&&r[s].push({content:a.text,type:"normal"})}return x(o,"processNode"),n.forEach(a=>{a.type==="paragraph"?a.tokens?.forEach(l=>{o(l)}):a.type==="html"?r[s].push({content:a.text,type:"normal"}):r[s].push({content:a.raw,type:"normal"})}),r}x(Fk,"markdownToLines");function Ok(e,{markdownAutoWrap:t}={}){const i=re.lexer(e);function n(r){return r.type==="text"?t===!1?r.text.replace(/\n */g,"<br/>").replace(/ /g,"&nbsp;"):r.text.replace(/\n */g,"<br/>"):r.type==="strong"?`<strong>${r.tokens?.map(n).join("")}</strong>`:r.type==="em"?`<em>${r.tokens?.map(n).join("")}</em>`:r.type==="paragraph"?`<p>${r.tokens?.map(n).join("")}</p>`:r.type==="space"?"":r.type==="html"?`${r.text}`:r.type==="escape"?r.text:(X.warn(`Unsupported markdown: ${r.type}`),r.raw)}return x(n,"output"),i.map(n).join("")}x(Ok,"markdownToHTML");function Dk(e){return Intl.Segmenter?[...new Intl.Segmenter().segment(e)].map(t=>t.segment):[...e]}x(Dk,"splitTextToChars");function Bk(e,t){const i=Dk(t.content);return m_(e,[],i,t.type)}x(Bk,"splitWordToFitWidth");function m_(e,t,i,n){if(i.length===0)return[{content:t.join(""),type:n},{content:"",type:n}];const[r,...s]=i,o=[...t,r];return e([{content:o.join(""),type:n}])?m_(e,o,s,n):(t.length===0&&r&&(t.push(r),i.shift()),[{content:t.join(""),type:n},{content:i.join(""),type:n}])}x(m_,"splitWordToFitWidthRecursion");function Nk(e,t){if(e.some(({content:i})=>i.includes(`
`)))throw new Error("splitLineToFitWidth does not support newlines in the line");return Ad(e,t)}x(Nk,"splitLineToFitWidth");function Ad(e,t,i=[],n=[]){if(e.length===0)return n.length>0&&i.push(n),i.length>0?i:[];let r="";e[0].content===" "&&(r=" ",e.shift());const s=e.shift()??{content:" ",type:"normal"},o=[...n];if(r!==""&&o.push({content:r,type:"normal"}),o.push(s),t(o))return Ad(e,t,i,o);if(n.length>0)i.push(n),e.unshift(s);else if(s.content){const[a,l]=Bk(t,s);i.push([a]),l.content&&e.unshift(l)}return Ad(e,t,i)}x(Ad,"splitLineToFitWidthRecursion");function Gm(e,t){t&&e.attr("style",t)}x(Gm,"applyStyle");async function $k(e,t,i,n,r=!1,s=ui()){const o=e.append("foreignObject");o.attr("width",`${10*i}px`),o.attr("height",`${10*i}px`);const a=o.append("xhtml:div"),l=ja(t.label)?await Ty(t.label.replace(el.lineBreakRegex,`
`),s):dn(t.label,s),c=t.isNode?"nodeLabel":"edgeLabel",h=a.append("span");h.html(l),Gm(h,t.labelStyle),h.attr("class",`${c} ${n}`),Gm(a,t.labelStyle),a.style("display","table-cell"),a.style("white-space","nowrap"),a.style("line-height","1.5"),a.style("max-width",i+"px"),a.style("text-align","center"),a.attr("xmlns","http://www.w3.org/1999/xhtml"),r&&a.attr("class","labelBkg");let u=a.node().getBoundingClientRect();return u.width===i&&(a.style("display","table"),a.style("white-space","break-spaces"),a.style("width",i+"px"),u=a.node().getBoundingClientRect()),o.node()}x($k,"addHtmlSpan");function Hf(e,t,i){return e.append("tspan").attr("class","text-outer-tspan").attr("x",0).attr("y",t*i-.1+"em").attr("dy",i+"em")}x(Hf,"createTspan");function zk(e,t,i){const n=e.append("text"),r=Hf(n,1,t);Vf(r,i);const s=r.node().getComputedTextLength();return n.remove(),s}x(zk,"computeWidthOfText");function tV(e,t,i){const n=e.append("text"),r=Hf(n,1,t);Vf(r,[{content:i,type:"normal"}]);const s=r.node()?.getBoundingClientRect();return s&&n.remove(),s}x(tV,"computeDimensionOfText");function Gk(e,t,i,n=!1){const s=t.append("g"),o=s.insert("rect").attr("class","background").attr("style","stroke: none"),a=s.append("text").attr("y","-10.1");let l=0;for(const c of i){const h=x(d=>zk(s,1.1,d)<=e,"checkWidth"),u=h(c)?[c]:Nk(c,h);for(const d of u){const f=Hf(a,l,1.1);Vf(f,d),l++}}if(n){const c=a.node().getBBox(),h=2;return o.attr("x",c.x-h).attr("y",c.y-h).attr("width",c.width+2*h).attr("height",c.height+2*h),s.node()}else return a.node()}x(Gk,"createFormattedText");function Vf(e,t){e.text(""),t.forEach((i,n)=>{const r=e.append("tspan").attr("font-style",i.type==="em"?"italic":"normal").attr("class","text-inner-tspan").attr("font-weight",i.type==="strong"?"bold":"normal");n===0?r.text(i.content):r.text(" "+i.content)})}x(Vf,"updateTextContentAndStyles");async function Wk(e,t={}){const i=[];e.replace(/(fa[bklrs]?):fa-([\w-]+)/g,(r,s,o)=>(i.push((async()=>{const a=`${s}:${o}`;return await Q9(a)?await mh(a,void 0,{class:"label-icon"}):`<i class='${dn(r,t).replace(":"," ")}'></i>`})()),r));const n=await Promise.all(i);return e.replace(/(fa[bklrs]?):fa-([\w-]+)/g,()=>n.shift()??"")}x(Wk,"replaceIconSubstring");var Os=x(async(e,t="",{style:i="",isTitle:n=!1,classes:r="",useHtmlLabels:s=!0,isNode:o=!0,width:a=200,addSvgBackground:l=!1}={},c)=>{if(X.debug("XYZ createText",t,i,n,r,s,o,"addSvgBackground: ",l),s){const h=Ok(t,c),u=await Wk(Bo(h),c),d=t.replace(/\\\\/g,"\\"),f={isNode:o,label:ja(t)?d:u,labelStyle:i.replace("fill:","color:")};return await $k(e,f,a,r,l,c)}else{const h=t.replace(/<br\s*\/?>/g,"<br/>"),u=Fk(h.replace("<br>","<br/>"),c),d=Gk(a,e,u,t?l:!1);if(o){/stroke:/.exec(i)&&(i=i.replace("stroke:","lineColor:"));const f=i.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/color:/g,"fill:");Xt(d).attr("style",f)}else{const f=i.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/background:/g,"fill:");Xt(d).select("rect").attr("style",f.replace(/background:/g,"fill:"));const g=i.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/color:/g,"fill:");Xt(d).select("text").attr("style",g)}return d}},"createText");function lp(e,t,i){if(e&&e.length){const[n,r]=t,s=Math.PI/180*i,o=Math.cos(s),a=Math.sin(s);for(const l of e){const[c,h]=l;l[0]=(c-n)*o-(h-r)*a+n,l[1]=(c-n)*a+(h-r)*o+r}}}function eV(e,t){return e[0]===t[0]&&e[1]===t[1]}function iV(e,t,i,n=1){const r=i,s=Math.max(t,.1),o=e[0]&&e[0][0]&&typeof e[0][0]=="number"?[e]:e,a=[0,0];if(r)for(const c of o)lp(c,a,r);const l=(function(c,h,u){const d=[];for(const _ of c){const C=[..._];eV(C[0],C[C.length-1])||C.push([C[0][0],C[0][1]]),C.length>2&&d.push(C)}const f=[];h=Math.max(h,.1);const g=[];for(const _ of d)for(let C=0;C<_.length-1;C++){const b=_[C],v=_[C+1];if(b[1]!==v[1]){const S=Math.min(b[1],v[1]);g.push({ymin:S,ymax:Math.max(b[1],v[1]),x:S===b[1]?b[0]:v[0],islope:(v[0]-b[0])/(v[1]-b[1])})}}if(g.sort(((_,C)=>_.ymin<C.ymin?-1:_.ymin>C.ymin?1:_.x<C.x?-1:_.x>C.x?1:_.ymax===C.ymax?0:(_.ymax-C.ymax)/Math.abs(_.ymax-C.ymax))),!g.length)return f;let p=[],m=g[0].ymin,y=0;for(;p.length||g.length;){if(g.length){let _=-1;for(let C=0;C<g.length&&!(g[C].ymin>m);C++)_=C;g.splice(0,_+1).forEach((C=>{p.push({s:m,edge:C})}))}if(p=p.filter((_=>!(_.edge.ymax<=m))),p.sort(((_,C)=>_.edge.x===C.edge.x?0:(_.edge.x-C.edge.x)/Math.abs(_.edge.x-C.edge.x))),(u!==1||y%h==0)&&p.length>1)for(let _=0;_<p.length;_+=2){const C=_+1;if(C>=p.length)break;const b=p[_].edge,v=p[C].edge;f.push([[Math.round(b.x),m],[Math.round(v.x),m]])}m+=u,p.forEach((_=>{_.edge.x=_.edge.x+u*_.edge.islope})),y++}return f})(o,s,n);if(r){for(const c of o)lp(c,a,-r);(function(c,h,u){const d=[];c.forEach((f=>d.push(...f))),lp(d,h,u)})(l,a,-r)}return l}function yh(e,t){var i;const n=t.hachureAngle+90;let r=t.hachureGap;r<0&&(r=4*t.strokeWidth),r=Math.round(Math.max(r,.1));let s=1;return t.roughness>=1&&(((i=t.randomizer)===null||i===void 0?void 0:i.next())||Math.random())>.7&&(s=r),iV(e,r,n,s||1)}class y_{constructor(t){this.helper=t}fillPolygons(t,i){return this._fillPolygons(t,i)}_fillPolygons(t,i){const n=yh(t,i);return{type:"fillSketch",ops:this.renderLines(n,i)}}renderLines(t,i){const n=[];for(const r of t)n.push(...this.helper.doubleLineOps(r[0][0],r[0][1],r[1][0],r[1][1],i));return n}}function Uf(e){const t=e[0],i=e[1];return Math.sqrt(Math.pow(t[0]-i[0],2)+Math.pow(t[1]-i[1],2))}class nV extends y_{fillPolygons(t,i){let n=i.hachureGap;n<0&&(n=4*i.strokeWidth),n=Math.max(n,.1);const r=yh(t,Object.assign({},i,{hachureGap:n})),s=Math.PI/180*i.hachureAngle,o=[],a=.5*n*Math.cos(s),l=.5*n*Math.sin(s);for(const[c,h]of r)Uf([c,h])&&o.push([[c[0]-a,c[1]+l],[...h]],[[c[0]+a,c[1]-l],[...h]]);return{type:"fillSketch",ops:this.renderLines(o,i)}}}class rV extends y_{fillPolygons(t,i){const n=this._fillPolygons(t,i),r=Object.assign({},i,{hachureAngle:i.hachureAngle+90}),s=this._fillPolygons(t,r);return n.ops=n.ops.concat(s.ops),n}}class sV{constructor(t){this.helper=t}fillPolygons(t,i){const n=yh(t,i=Object.assign({},i,{hachureAngle:0}));return this.dotsOnLines(n,i)}dotsOnLines(t,i){const n=[];let r=i.hachureGap;r<0&&(r=4*i.strokeWidth),r=Math.max(r,.1);let s=i.fillWeight;s<0&&(s=i.strokeWidth/2);const o=r/4;for(const a of t){const l=Uf(a),c=l/r,h=Math.ceil(c)-1,u=l-h*r,d=(a[0][0]+a[1][0])/2-r/4,f=Math.min(a[0][1],a[1][1]);for(let g=0;g<h;g++){const p=f+u+g*r,m=d-o+2*Math.random()*o,y=p-o+2*Math.random()*o,_=this.helper.ellipse(m,y,s,s,i);n.push(..._.ops)}}return{type:"fillSketch",ops:n}}}class oV{constructor(t){this.helper=t}fillPolygons(t,i){const n=yh(t,i);return{type:"fillSketch",ops:this.dashedLine(n,i)}}dashedLine(t,i){const n=i.dashOffset<0?i.hachureGap<0?4*i.strokeWidth:i.hachureGap:i.dashOffset,r=i.dashGap<0?i.hachureGap<0?4*i.strokeWidth:i.hachureGap:i.dashGap,s=[];return t.forEach((o=>{const a=Uf(o),l=Math.floor(a/(n+r)),c=(a+r-l*(n+r))/2;let h=o[0],u=o[1];h[0]>u[0]&&(h=o[1],u=o[0]);const d=Math.atan((u[1]-h[1])/(u[0]-h[0]));for(let f=0;f<l;f++){const g=f*(n+r),p=g+n,m=[h[0]+g*Math.cos(d)+c*Math.cos(d),h[1]+g*Math.sin(d)+c*Math.sin(d)],y=[h[0]+p*Math.cos(d)+c*Math.cos(d),h[1]+p*Math.sin(d)+c*Math.sin(d)];s.push(...this.helper.doubleLineOps(m[0],m[1],y[0],y[1],i))}})),s}}class aV{constructor(t){this.helper=t}fillPolygons(t,i){const n=i.hachureGap<0?4*i.strokeWidth:i.hachureGap,r=i.zigzagOffset<0?n:i.zigzagOffset,s=yh(t,i=Object.assign({},i,{hachureGap:n+r}));return{type:"fillSketch",ops:this.zigzagLines(s,r,i)}}zigzagLines(t,i,n){const r=[];return t.forEach((s=>{const o=Uf(s),a=Math.round(o/(2*i));let l=s[0],c=s[1];l[0]>c[0]&&(l=s[1],c=s[0]);const h=Math.atan((c[1]-l[1])/(c[0]-l[0]));for(let u=0;u<a;u++){const d=2*u*i,f=2*(u+1)*i,g=Math.sqrt(2*Math.pow(i,2)),p=[l[0]+d*Math.cos(h),l[1]+d*Math.sin(h)],m=[l[0]+f*Math.cos(h),l[1]+f*Math.sin(h)],y=[p[0]+g*Math.cos(h+Math.PI/4),p[1]+g*Math.sin(h+Math.PI/4)];r.push(...this.helper.doubleLineOps(p[0],p[1],y[0],y[1],n),...this.helper.doubleLineOps(y[0],y[1],m[0],m[1],n))}})),r}}const Ii={};class lV{constructor(t){this.seed=t}next(){return this.seed?(2**31-1&(this.seed=Math.imul(48271,this.seed)))/2**31:Math.random()}}const cV=0,cp=1,ab=2,Xh={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:2,t:2,V:1,v:1,Z:0,z:0};function hp(e,t){return e.type===t}function __(e){const t=[],i=(function(o){const a=new Array;for(;o!=="";)if(o.match(/^([ \t\r\n,]+)/))o=o.substr(RegExp.$1.length);else if(o.match(/^([aAcChHlLmMqQsStTvVzZ])/))a[a.length]={type:cV,text:RegExp.$1},o=o.substr(RegExp.$1.length);else{if(!o.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))return[];a[a.length]={type:cp,text:`${parseFloat(RegExp.$1)}`},o=o.substr(RegExp.$1.length)}return a[a.length]={type:ab,text:""},a})(e);let n="BOD",r=0,s=i[r];for(;!hp(s,ab);){let o=0;const a=[];if(n==="BOD"){if(s.text!=="M"&&s.text!=="m")return __("M0,0"+e);r++,o=Xh[s.text],n=s.text}else hp(s,cp)?o=Xh[n]:(r++,o=Xh[s.text],n=s.text);if(!(r+o<i.length))throw new Error("Path data ended short");for(let l=r;l<r+o;l++){const c=i[l];if(!hp(c,cp))throw new Error("Param not a number: "+n+","+c.text);a[a.length]=+c.text}if(typeof Xh[n]!="number")throw new Error("Bad segment: "+n);{const l={key:n,data:a};t.push(l),r+=o,s=i[r],n==="M"&&(n="L"),n==="m"&&(n="l")}}return t}function jk(e){let t=0,i=0,n=0,r=0;const s=[];for(const{key:o,data:a}of e)switch(o){case"M":s.push({key:"M",data:[...a]}),[t,i]=a,[n,r]=a;break;case"m":t+=a[0],i+=a[1],s.push({key:"M",data:[t,i]}),n=t,r=i;break;case"L":s.push({key:"L",data:[...a]}),[t,i]=a;break;case"l":t+=a[0],i+=a[1],s.push({key:"L",data:[t,i]});break;case"C":s.push({key:"C",data:[...a]}),t=a[4],i=a[5];break;case"c":{const l=a.map(((c,h)=>h%2?c+i:c+t));s.push({key:"C",data:l}),t=l[4],i=l[5];break}case"Q":s.push({key:"Q",data:[...a]}),t=a[2],i=a[3];break;case"q":{const l=a.map(((c,h)=>h%2?c+i:c+t));s.push({key:"Q",data:l}),t=l[2],i=l[3];break}case"A":s.push({key:"A",data:[...a]}),t=a[5],i=a[6];break;case"a":t+=a[5],i+=a[6],s.push({key:"A",data:[a[0],a[1],a[2],a[3],a[4],t,i]});break;case"H":s.push({key:"H",data:[...a]}),t=a[0];break;case"h":t+=a[0],s.push({key:"H",data:[t]});break;case"V":s.push({key:"V",data:[...a]}),i=a[0];break;case"v":i+=a[0],s.push({key:"V",data:[i]});break;case"S":s.push({key:"S",data:[...a]}),t=a[2],i=a[3];break;case"s":{const l=a.map(((c,h)=>h%2?c+i:c+t));s.push({key:"S",data:l}),t=l[2],i=l[3];break}case"T":s.push({key:"T",data:[...a]}),t=a[0],i=a[1];break;case"t":t+=a[0],i+=a[1],s.push({key:"T",data:[t,i]});break;case"Z":case"z":s.push({key:"Z",data:[]}),t=n,i=r}return s}function Hk(e){const t=[];let i="",n=0,r=0,s=0,o=0,a=0,l=0;for(const{key:c,data:h}of e){switch(c){case"M":t.push({key:"M",data:[...h]}),[n,r]=h,[s,o]=h;break;case"C":t.push({key:"C",data:[...h]}),n=h[4],r=h[5],a=h[2],l=h[3];break;case"L":t.push({key:"L",data:[...h]}),[n,r]=h;break;case"H":n=h[0],t.push({key:"L",data:[n,r]});break;case"V":r=h[0],t.push({key:"L",data:[n,r]});break;case"S":{let u=0,d=0;i==="C"||i==="S"?(u=n+(n-a),d=r+(r-l)):(u=n,d=r),t.push({key:"C",data:[u,d,...h]}),a=h[0],l=h[1],n=h[2],r=h[3];break}case"T":{const[u,d]=h;let f=0,g=0;i==="Q"||i==="T"?(f=n+(n-a),g=r+(r-l)):(f=n,g=r);const p=n+2*(f-n)/3,m=r+2*(g-r)/3,y=u+2*(f-u)/3,_=d+2*(g-d)/3;t.push({key:"C",data:[p,m,y,_,u,d]}),a=f,l=g,n=u,r=d;break}case"Q":{const[u,d,f,g]=h,p=n+2*(u-n)/3,m=r+2*(d-r)/3,y=f+2*(u-f)/3,_=g+2*(d-g)/3;t.push({key:"C",data:[p,m,y,_,f,g]}),a=u,l=d,n=f,r=g;break}case"A":{const u=Math.abs(h[0]),d=Math.abs(h[1]),f=h[2],g=h[3],p=h[4],m=h[5],y=h[6];u===0||d===0?(t.push({key:"C",data:[n,r,m,y,m,y]}),n=m,r=y):(n!==m||r!==y)&&(Vk(n,r,m,y,u,d,f,g,p).forEach((function(_){t.push({key:"C",data:_})})),n=m,r=y);break}case"Z":t.push({key:"Z",data:[]}),n=s,r=o}i=c}return t}function Al(e,t,i){return[e*Math.cos(i)-t*Math.sin(i),e*Math.sin(i)+t*Math.cos(i)]}function Vk(e,t,i,n,r,s,o,a,l,c){const h=(u=o,Math.PI*u/180);var u;let d=[],f=0,g=0,p=0,m=0;if(c)[f,g,p,m]=c;else{[e,t]=Al(e,t,-h),[i,n]=Al(i,n,-h);const R=(e-i)/2,T=(t-n)/2;let P=R*R/(r*r)+T*T/(s*s);P>1&&(P=Math.sqrt(P),r*=P,s*=P);const E=r*r,D=s*s,M=E*D-E*T*T-D*R*R,j=E*T*T+D*R*R,Y=(a===l?-1:1)*Math.sqrt(Math.abs(M/j));p=Y*r*T/s+(e+i)/2,m=Y*-s*R/r+(t+n)/2,f=Math.asin(parseFloat(((t-m)/s).toFixed(9))),g=Math.asin(parseFloat(((n-m)/s).toFixed(9))),e<p&&(f=Math.PI-f),i<p&&(g=Math.PI-g),f<0&&(f=2*Math.PI+f),g<0&&(g=2*Math.PI+g),l&&f>g&&(f-=2*Math.PI),!l&&g>f&&(g-=2*Math.PI)}let y=g-f;if(Math.abs(y)>120*Math.PI/180){const R=g,T=i,P=n;g=l&&g>f?f+120*Math.PI/180*1:f+120*Math.PI/180*-1,d=Vk(i=p+r*Math.cos(g),n=m+s*Math.sin(g),T,P,r,s,o,0,l,[g,R,p,m])}y=g-f;const _=Math.cos(f),C=Math.sin(f),b=Math.cos(g),v=Math.sin(g),S=Math.tan(y/4),w=4/3*r*S,L=4/3*s*S,A=[e,t],B=[e+w*C,t-L*_],O=[i+w*v,n-L*b],F=[i,n];if(B[0]=2*A[0]-B[0],B[1]=2*A[1]-B[1],c)return[B,O,F].concat(d);{d=[B,O,F].concat(d);const R=[];for(let T=0;T<d.length;T+=3){const P=Al(d[T][0],d[T][1],h),E=Al(d[T+1][0],d[T+1][1],h),D=Al(d[T+2][0],d[T+2][1],h);R.push([P[0],P[1],E[0],E[1],D[0],D[1]])}return R}}const hV={randOffset:function(e,t){return Lt(e,t)},randOffsetWithRange:function(e,t,i){return Ld(e,t,i)},ellipse:function(e,t,i,n,r){const s=qk(i,n,r);return Wm(e,t,r,s).opset},doubleLineOps:function(e,t,i,n,r){return As(e,t,i,n,r,!0)}};function Uk(e,t,i,n,r){return{type:"path",ops:As(e,t,i,n,r)}}function _u(e,t,i){const n=(e||[]).length;if(n>2){const r=[];for(let s=0;s<n-1;s++)r.push(...As(e[s][0],e[s][1],e[s+1][0],e[s+1][1],i));return t&&r.push(...As(e[n-1][0],e[n-1][1],e[0][0],e[0][1],i)),{type:"path",ops:r}}return n===2?Uk(e[0][0],e[0][1],e[1][0],e[1][1],i):{type:"path",ops:[]}}function uV(e,t,i,n,r){return(function(s,o){return _u(s,!0,o)})([[e,t],[e+i,t],[e+i,t+n],[e,t+n]],r)}function lb(e,t){if(e.length){const i=typeof e[0][0]=="number"?[e]:e,n=Kh(i[0],1*(1+.2*t.roughness),t),r=t.disableMultiStroke?[]:Kh(i[0],1.5*(1+.22*t.roughness),ub(t));for(let s=1;s<i.length;s++){const o=i[s];if(o.length){const a=Kh(o,1*(1+.2*t.roughness),t),l=t.disableMultiStroke?[]:Kh(o,1.5*(1+.22*t.roughness),ub(t));for(const c of a)c.op!=="move"&&n.push(c);for(const c of l)c.op!=="move"&&r.push(c)}}return{type:"path",ops:n.concat(r)}}return{type:"path",ops:[]}}function qk(e,t,i){const n=Math.sqrt(2*Math.PI*Math.sqrt((Math.pow(e/2,2)+Math.pow(t/2,2))/2)),r=Math.ceil(Math.max(i.curveStepCount,i.curveStepCount/Math.sqrt(200)*n)),s=2*Math.PI/r;let o=Math.abs(e/2),a=Math.abs(t/2);const l=1-i.curveFitting;return o+=Lt(o*l,i),a+=Lt(a*l,i),{increment:s,rx:o,ry:a}}function Wm(e,t,i,n){const[r,s]=db(n.increment,e,t,n.rx,n.ry,1,n.increment*Ld(.1,Ld(.4,1,i),i),i);let o=Md(r,null,i);if(!i.disableMultiStroke&&i.roughness!==0){const[a]=db(n.increment,e,t,n.rx,n.ry,1.5,0,i),l=Md(a,null,i);o=o.concat(l)}return{estimatedPoints:s,opset:{type:"path",ops:o}}}function cb(e,t,i,n,r,s,o,a,l){const c=e,h=t;let u=Math.abs(i/2),d=Math.abs(n/2);u+=Lt(.01*u,l),d+=Lt(.01*d,l);let f=r,g=s;for(;f<0;)f+=2*Math.PI,g+=2*Math.PI;g-f>2*Math.PI&&(f=0,g=2*Math.PI);const p=2*Math.PI/l.curveStepCount,m=Math.min(p/2,(g-f)/2),y=fb(m,c,h,u,d,f,g,1,l);if(!l.disableMultiStroke){const _=fb(m,c,h,u,d,f,g,1.5,l);y.push(..._)}return o&&(a?y.push(...As(c,h,c+u*Math.cos(f),h+d*Math.sin(f),l),...As(c,h,c+u*Math.cos(g),h+d*Math.sin(g),l)):y.push({op:"lineTo",data:[c,h]},{op:"lineTo",data:[c+u*Math.cos(f),h+d*Math.sin(f)]})),{type:"path",ops:y}}function hb(e,t){const i=Hk(jk(__(e))),n=[];let r=[0,0],s=[0,0];for(const{key:o,data:a}of i)switch(o){case"M":s=[a[0],a[1]],r=[a[0],a[1]];break;case"L":n.push(...As(s[0],s[1],a[0],a[1],t)),s=[a[0],a[1]];break;case"C":{const[l,c,h,u,d,f]=a;n.push(...dV(l,c,h,u,d,f,s,t)),s=[d,f];break}case"Z":n.push(...As(s[0],s[1],r[0],r[1],t)),s=[r[0],r[1]]}return{type:"path",ops:n}}function up(e,t){const i=[];for(const n of e)if(n.length){const r=t.maxRandomnessOffset||0,s=n.length;if(s>2){i.push({op:"move",data:[n[0][0]+Lt(r,t),n[0][1]+Lt(r,t)]});for(let o=1;o<s;o++)i.push({op:"lineTo",data:[n[o][0]+Lt(r,t),n[o][1]+Lt(r,t)]})}}return{type:"fillPath",ops:i}}function Ko(e,t){return(function(i,n){let r=i.fillStyle||"hachure";if(!Ii[r])switch(r){case"zigzag":Ii[r]||(Ii[r]=new nV(n));break;case"cross-hatch":Ii[r]||(Ii[r]=new rV(n));break;case"dots":Ii[r]||(Ii[r]=new sV(n));break;case"dashed":Ii[r]||(Ii[r]=new oV(n));break;case"zigzag-line":Ii[r]||(Ii[r]=new aV(n));break;default:r="hachure",Ii[r]||(Ii[r]=new y_(n))}return Ii[r]})(t,hV).fillPolygons(e,t)}function ub(e){const t=Object.assign({},e);return t.randomizer=void 0,e.seed&&(t.seed=e.seed+1),t}function Yk(e){return e.randomizer||(e.randomizer=new lV(e.seed||0)),e.randomizer.next()}function Ld(e,t,i,n=1){return i.roughness*n*(Yk(i)*(t-e)+e)}function Lt(e,t,i=1){return Ld(-e,e,t,i)}function As(e,t,i,n,r,s=!1){const o=s?r.disableMultiStrokeFill:r.disableMultiStroke,a=jm(e,t,i,n,r,!0,!1);if(o)return a;const l=jm(e,t,i,n,r,!0,!0);return a.concat(l)}function jm(e,t,i,n,r,s,o){const a=Math.pow(e-i,2)+Math.pow(t-n,2),l=Math.sqrt(a);let c=1;c=l<200?1:l>500?.4:-.0016668*l+1.233334;let h=r.maxRandomnessOffset||0;h*h*100>a&&(h=l/10);const u=h/2,d=.2+.2*Yk(r);let f=r.bowing*r.maxRandomnessOffset*(n-t)/200,g=r.bowing*r.maxRandomnessOffset*(e-i)/200;f=Lt(f,r,c),g=Lt(g,r,c);const p=[],m=()=>Lt(u,r,c),y=()=>Lt(h,r,c),_=r.preserveVertices;return o?p.push({op:"move",data:[e+(_?0:m()),t+(_?0:m())]}):p.push({op:"move",data:[e+(_?0:Lt(h,r,c)),t+(_?0:Lt(h,r,c))]}),o?p.push({op:"bcurveTo",data:[f+e+(i-e)*d+m(),g+t+(n-t)*d+m(),f+e+2*(i-e)*d+m(),g+t+2*(n-t)*d+m(),i+(_?0:m()),n+(_?0:m())]}):p.push({op:"bcurveTo",data:[f+e+(i-e)*d+y(),g+t+(n-t)*d+y(),f+e+2*(i-e)*d+y(),g+t+2*(n-t)*d+y(),i+(_?0:y()),n+(_?0:y())]}),p}function Kh(e,t,i){if(!e.length)return[];const n=[];n.push([e[0][0]+Lt(t,i),e[0][1]+Lt(t,i)]),n.push([e[0][0]+Lt(t,i),e[0][1]+Lt(t,i)]);for(let r=1;r<e.length;r++)n.push([e[r][0]+Lt(t,i),e[r][1]+Lt(t,i)]),r===e.length-1&&n.push([e[r][0]+Lt(t,i),e[r][1]+Lt(t,i)]);return Md(n,null,i)}function Md(e,t,i){const n=e.length,r=[];if(n>3){const s=[],o=1-i.curveTightness;r.push({op:"move",data:[e[1][0],e[1][1]]});for(let a=1;a+2<n;a++){const l=e[a];s[0]=[l[0],l[1]],s[1]=[l[0]+(o*e[a+1][0]-o*e[a-1][0])/6,l[1]+(o*e[a+1][1]-o*e[a-1][1])/6],s[2]=[e[a+1][0]+(o*e[a][0]-o*e[a+2][0])/6,e[a+1][1]+(o*e[a][1]-o*e[a+2][1])/6],s[3]=[e[a+1][0],e[a+1][1]],r.push({op:"bcurveTo",data:[s[1][0],s[1][1],s[2][0],s[2][1],s[3][0],s[3][1]]})}}else n===3?(r.push({op:"move",data:[e[1][0],e[1][1]]}),r.push({op:"bcurveTo",data:[e[1][0],e[1][1],e[2][0],e[2][1],e[2][0],e[2][1]]})):n===2&&r.push(...jm(e[0][0],e[0][1],e[1][0],e[1][1],i,!0,!0));return r}function db(e,t,i,n,r,s,o,a){const l=[],c=[];if(a.roughness===0){e/=4,c.push([t+n*Math.cos(-e),i+r*Math.sin(-e)]);for(let h=0;h<=2*Math.PI;h+=e){const u=[t+n*Math.cos(h),i+r*Math.sin(h)];l.push(u),c.push(u)}c.push([t+n*Math.cos(0),i+r*Math.sin(0)]),c.push([t+n*Math.cos(e),i+r*Math.sin(e)])}else{const h=Lt(.5,a)-Math.PI/2;c.push([Lt(s,a)+t+.9*n*Math.cos(h-e),Lt(s,a)+i+.9*r*Math.sin(h-e)]);const u=2*Math.PI+h-.01;for(let d=h;d<u;d+=e){const f=[Lt(s,a)+t+n*Math.cos(d),Lt(s,a)+i+r*Math.sin(d)];l.push(f),c.push(f)}c.push([Lt(s,a)+t+n*Math.cos(h+2*Math.PI+.5*o),Lt(s,a)+i+r*Math.sin(h+2*Math.PI+.5*o)]),c.push([Lt(s,a)+t+.98*n*Math.cos(h+o),Lt(s,a)+i+.98*r*Math.sin(h+o)]),c.push([Lt(s,a)+t+.9*n*Math.cos(h+.5*o),Lt(s,a)+i+.9*r*Math.sin(h+.5*o)])}return[c,l]}function fb(e,t,i,n,r,s,o,a,l){const c=s+Lt(.1,l),h=[];h.push([Lt(a,l)+t+.9*n*Math.cos(c-e),Lt(a,l)+i+.9*r*Math.sin(c-e)]);for(let u=c;u<=o;u+=e)h.push([Lt(a,l)+t+n*Math.cos(u),Lt(a,l)+i+r*Math.sin(u)]);return h.push([t+n*Math.cos(o),i+r*Math.sin(o)]),h.push([t+n*Math.cos(o),i+r*Math.sin(o)]),Md(h,null,l)}function dV(e,t,i,n,r,s,o,a){const l=[],c=[a.maxRandomnessOffset||1,(a.maxRandomnessOffset||1)+.3];let h=[0,0];const u=a.disableMultiStroke?1:2,d=a.preserveVertices;for(let f=0;f<u;f++)f===0?l.push({op:"move",data:[o[0],o[1]]}):l.push({op:"move",data:[o[0]+(d?0:Lt(c[0],a)),o[1]+(d?0:Lt(c[0],a))]}),h=d?[r,s]:[r+Lt(c[f],a),s+Lt(c[f],a)],l.push({op:"bcurveTo",data:[e+Lt(c[f],a),t+Lt(c[f],a),i+Lt(c[f],a),n+Lt(c[f],a),h[0],h[1]]});return l}function Ll(e){return[...e]}function gb(e,t=0){const i=e.length;if(i<3)throw new Error("A curve must have at least three points.");const n=[];if(i===3)n.push(Ll(e[0]),Ll(e[1]),Ll(e[2]),Ll(e[2]));else{const r=[];r.push(e[0],e[0]);for(let a=1;a<e.length;a++)r.push(e[a]),a===e.length-1&&r.push(e[a]);const s=[],o=1-t;n.push(Ll(r[0]));for(let a=1;a+2<r.length;a++){const l=r[a];s[0]=[l[0],l[1]],s[1]=[l[0]+(o*r[a+1][0]-o*r[a-1][0])/6,l[1]+(o*r[a+1][1]-o*r[a-1][1])/6],s[2]=[r[a+1][0]+(o*r[a][0]-o*r[a+2][0])/6,r[a+1][1]+(o*r[a][1]-o*r[a+2][1])/6],s[3]=[r[a+1][0],r[a+1][1]],n.push(s[1],s[2],s[3])}}return n}function xu(e,t){return Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)}function fV(e,t,i){const n=xu(t,i);if(n===0)return xu(e,t);let r=((e[0]-t[0])*(i[0]-t[0])+(e[1]-t[1])*(i[1]-t[1]))/n;return r=Math.max(0,Math.min(1,r)),xu(e,Xs(t,i,r))}function Xs(e,t,i){return[e[0]+(t[0]-e[0])*i,e[1]+(t[1]-e[1])*i]}function Hm(e,t,i,n){const r=n||[];if((function(a,l){const c=a[l+0],h=a[l+1],u=a[l+2],d=a[l+3];let f=3*h[0]-2*c[0]-d[0];f*=f;let g=3*h[1]-2*c[1]-d[1];g*=g;let p=3*u[0]-2*d[0]-c[0];p*=p;let m=3*u[1]-2*d[1]-c[1];return m*=m,f<p&&(f=p),g<m&&(g=m),f+g})(e,t)<i){const a=e[t+0];r.length?(s=r[r.length-1],o=a,Math.sqrt(xu(s,o))>1&&r.push(a)):r.push(a),r.push(e[t+3])}else{const l=e[t+0],c=e[t+1],h=e[t+2],u=e[t+3],d=Xs(l,c,.5),f=Xs(c,h,.5),g=Xs(h,u,.5),p=Xs(d,f,.5),m=Xs(f,g,.5),y=Xs(p,m,.5);Hm([l,d,p,y],0,i,r),Hm([y,m,g,u],0,i,r)}var s,o;return r}function gV(e,t){return Id(e,0,e.length,t)}function Id(e,t,i,n,r){const s=r||[],o=e[t],a=e[i-1];let l=0,c=1;for(let h=t+1;h<i-1;++h){const u=fV(e[h],o,a);u>l&&(l=u,c=h)}return Math.sqrt(l)>n?(Id(e,t,c+1,n,s),Id(e,c,i,n,s)):(s.length||s.push(o),s.push(a)),s}function dp(e,t=.15,i){const n=[],r=(e.length-1)/3;for(let s=0;s<r;s++)Hm(e,3*s,t,n);return i&&i>0?Id(n,0,n.length,i):n}const ji="none";class Pd{constructor(t){this.defaultOptions={maxRandomnessOffset:2,roughness:1,bowing:1,stroke:"#000",strokeWidth:1,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,seed:0,disableMultiStroke:!1,disableMultiStrokeFill:!1,preserveVertices:!1,fillShapeRoughnessGain:.8},this.config=t||{},this.config.options&&(this.defaultOptions=this._o(this.config.options))}static newSeed(){return Math.floor(Math.random()*2**31)}_o(t){return t?Object.assign({},this.defaultOptions,t):this.defaultOptions}_d(t,i,n){return{shape:t,sets:i||[],options:n||this.defaultOptions}}line(t,i,n,r,s){const o=this._o(s);return this._d("line",[Uk(t,i,n,r,o)],o)}rectangle(t,i,n,r,s){const o=this._o(s),a=[],l=uV(t,i,n,r,o);if(o.fill){const c=[[t,i],[t+n,i],[t+n,i+r],[t,i+r]];o.fillStyle==="solid"?a.push(up([c],o)):a.push(Ko([c],o))}return o.stroke!==ji&&a.push(l),this._d("rectangle",a,o)}ellipse(t,i,n,r,s){const o=this._o(s),a=[],l=qk(n,r,o),c=Wm(t,i,o,l);if(o.fill)if(o.fillStyle==="solid"){const h=Wm(t,i,o,l).opset;h.type="fillPath",a.push(h)}else a.push(Ko([c.estimatedPoints],o));return o.stroke!==ji&&a.push(c.opset),this._d("ellipse",a,o)}circle(t,i,n,r){const s=this.ellipse(t,i,n,n,r);return s.shape="circle",s}linearPath(t,i){const n=this._o(i);return this._d("linearPath",[_u(t,!1,n)],n)}arc(t,i,n,r,s,o,a=!1,l){const c=this._o(l),h=[],u=cb(t,i,n,r,s,o,a,!0,c);if(a&&c.fill)if(c.fillStyle==="solid"){const d=Object.assign({},c);d.disableMultiStroke=!0;const f=cb(t,i,n,r,s,o,!0,!1,d);f.type="fillPath",h.push(f)}else h.push((function(d,f,g,p,m,y,_){const C=d,b=f;let v=Math.abs(g/2),S=Math.abs(p/2);v+=Lt(.01*v,_),S+=Lt(.01*S,_);let w=m,L=y;for(;w<0;)w+=2*Math.PI,L+=2*Math.PI;L-w>2*Math.PI&&(w=0,L=2*Math.PI);const A=(L-w)/_.curveStepCount,B=[];for(let O=w;O<=L;O+=A)B.push([C+v*Math.cos(O),b+S*Math.sin(O)]);return B.push([C+v*Math.cos(L),b+S*Math.sin(L)]),B.push([C,b]),Ko([B],_)})(t,i,n,r,s,o,c));return c.stroke!==ji&&h.push(u),this._d("arc",h,c)}curve(t,i){const n=this._o(i),r=[],s=lb(t,n);if(n.fill&&n.fill!==ji)if(n.fillStyle==="solid"){const o=lb(t,Object.assign(Object.assign({},n),{disableMultiStroke:!0,roughness:n.roughness?n.roughness+n.fillShapeRoughnessGain:0}));r.push({type:"fillPath",ops:this._mergedShape(o.ops)})}else{const o=[],a=t;if(a.length){const l=typeof a[0][0]=="number"?[a]:a;for(const c of l)c.length<3?o.push(...c):c.length===3?o.push(...dp(gb([c[0],c[0],c[1],c[2]]),10,(1+n.roughness)/2)):o.push(...dp(gb(c),10,(1+n.roughness)/2))}o.length&&r.push(Ko([o],n))}return n.stroke!==ji&&r.push(s),this._d("curve",r,n)}polygon(t,i){const n=this._o(i),r=[],s=_u(t,!0,n);return n.fill&&(n.fillStyle==="solid"?r.push(up([t],n)):r.push(Ko([t],n))),n.stroke!==ji&&r.push(s),this._d("polygon",r,n)}path(t,i){const n=this._o(i),r=[];if(!t)return this._d("path",r,n);t=(t||"").replace(/\n/g," ").replace(/(-\s)/g,"-").replace("/(ss)/g"," ");const s=n.fill&&n.fill!=="transparent"&&n.fill!==ji,o=n.stroke!==ji,a=!!(n.simplification&&n.simplification<1),l=(function(h,u,d){const f=Hk(jk(__(h))),g=[];let p=[],m=[0,0],y=[];const _=()=>{y.length>=4&&p.push(...dp(y,u)),y=[]},C=()=>{_(),p.length&&(g.push(p),p=[])};for(const{key:v,data:S}of f)switch(v){case"M":C(),m=[S[0],S[1]],p.push(m);break;case"L":_(),p.push([S[0],S[1]]);break;case"C":if(!y.length){const w=p.length?p[p.length-1]:m;y.push([w[0],w[1]])}y.push([S[0],S[1]]),y.push([S[2],S[3]]),y.push([S[4],S[5]]);break;case"Z":_(),p.push([m[0],m[1]])}if(C(),!d)return g;const b=[];for(const v of g){const S=gV(v,d);S.length&&b.push(S)}return b})(t,1,a?4-4*(n.simplification||1):(1+n.roughness)/2),c=hb(t,n);if(s)if(n.fillStyle==="solid")if(l.length===1){const h=hb(t,Object.assign(Object.assign({},n),{disableMultiStroke:!0,roughness:n.roughness?n.roughness+n.fillShapeRoughnessGain:0}));r.push({type:"fillPath",ops:this._mergedShape(h.ops)})}else r.push(up(l,n));else r.push(Ko(l,n));return o&&(a?l.forEach((h=>{r.push(_u(h,!1,n))})):r.push(c)),this._d("path",r,n)}opsToPath(t,i){let n="";for(const r of t.ops){const s=typeof i=="number"&&i>=0?r.data.map((o=>+o.toFixed(i))):r.data;switch(r.op){case"move":n+=`M${s[0]} ${s[1]} `;break;case"bcurveTo":n+=`C${s[0]} ${s[1]}, ${s[2]} ${s[3]}, ${s[4]} ${s[5]} `;break;case"lineTo":n+=`L${s[0]} ${s[1]} `}}return n.trim()}toPaths(t){const i=t.sets||[],n=t.options||this.defaultOptions,r=[];for(const s of i){let o=null;switch(s.type){case"path":o={d:this.opsToPath(s),stroke:n.stroke,strokeWidth:n.strokeWidth,fill:ji};break;case"fillPath":o={d:this.opsToPath(s),stroke:ji,strokeWidth:0,fill:n.fill||ji};break;case"fillSketch":o=this.fillSketch(s,n)}o&&r.push(o)}return r}fillSketch(t,i){let n=i.fillWeight;return n<0&&(n=i.strokeWidth/2),{d:this.opsToPath(t),stroke:i.fill||ji,strokeWidth:n,fill:ji}}_mergedShape(t){return t.filter(((i,n)=>n===0||i.op!=="move"))}}class pV{constructor(t,i){this.canvas=t,this.ctx=this.canvas.getContext("2d"),this.gen=new Pd(i)}draw(t){const i=t.sets||[],n=t.options||this.getDefaultOptions(),r=this.ctx,s=t.options.fixedDecimalPlaceDigits;for(const o of i)switch(o.type){case"path":r.save(),r.strokeStyle=n.stroke==="none"?"transparent":n.stroke,r.lineWidth=n.strokeWidth,n.strokeLineDash&&r.setLineDash(n.strokeLineDash),n.strokeLineDashOffset&&(r.lineDashOffset=n.strokeLineDashOffset),this._drawToContext(r,o,s),r.restore();break;case"fillPath":{r.save(),r.fillStyle=n.fill||"";const a=t.shape==="curve"||t.shape==="polygon"||t.shape==="path"?"evenodd":"nonzero";this._drawToContext(r,o,s,a),r.restore();break}case"fillSketch":this.fillSketch(r,o,n)}}fillSketch(t,i,n){let r=n.fillWeight;r<0&&(r=n.strokeWidth/2),t.save(),n.fillLineDash&&t.setLineDash(n.fillLineDash),n.fillLineDashOffset&&(t.lineDashOffset=n.fillLineDashOffset),t.strokeStyle=n.fill||"",t.lineWidth=r,this._drawToContext(t,i,n.fixedDecimalPlaceDigits),t.restore()}_drawToContext(t,i,n,r="nonzero"){t.beginPath();for(const s of i.ops){const o=typeof n=="number"&&n>=0?s.data.map((a=>+a.toFixed(n))):s.data;switch(s.op){case"move":t.moveTo(o[0],o[1]);break;case"bcurveTo":t.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5]);break;case"lineTo":t.lineTo(o[0],o[1])}}i.type==="fillPath"?t.fill(r):t.stroke()}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}line(t,i,n,r,s){const o=this.gen.line(t,i,n,r,s);return this.draw(o),o}rectangle(t,i,n,r,s){const o=this.gen.rectangle(t,i,n,r,s);return this.draw(o),o}ellipse(t,i,n,r,s){const o=this.gen.ellipse(t,i,n,r,s);return this.draw(o),o}circle(t,i,n,r){const s=this.gen.circle(t,i,n,r);return this.draw(s),s}linearPath(t,i){const n=this.gen.linearPath(t,i);return this.draw(n),n}polygon(t,i){const n=this.gen.polygon(t,i);return this.draw(n),n}arc(t,i,n,r,s,o,a=!1,l){const c=this.gen.arc(t,i,n,r,s,o,a,l);return this.draw(c),c}curve(t,i){const n=this.gen.curve(t,i);return this.draw(n),n}path(t,i){const n=this.gen.path(t,i);return this.draw(n),n}}const Zh="http://www.w3.org/2000/svg";class mV{constructor(t,i){this.svg=t,this.gen=new Pd(i)}draw(t){const i=t.sets||[],n=t.options||this.getDefaultOptions(),r=this.svg.ownerDocument||window.document,s=r.createElementNS(Zh,"g"),o=t.options.fixedDecimalPlaceDigits;for(const a of i){let l=null;switch(a.type){case"path":l=r.createElementNS(Zh,"path"),l.setAttribute("d",this.opsToPath(a,o)),l.setAttribute("stroke",n.stroke),l.setAttribute("stroke-width",n.strokeWidth+""),l.setAttribute("fill","none"),n.strokeLineDash&&l.setAttribute("stroke-dasharray",n.strokeLineDash.join(" ").trim()),n.strokeLineDashOffset&&l.setAttribute("stroke-dashoffset",`${n.strokeLineDashOffset}`);break;case"fillPath":l=r.createElementNS(Zh,"path"),l.setAttribute("d",this.opsToPath(a,o)),l.setAttribute("stroke","none"),l.setAttribute("stroke-width","0"),l.setAttribute("fill",n.fill||""),t.shape!=="curve"&&t.shape!=="polygon"||l.setAttribute("fill-rule","evenodd");break;case"fillSketch":l=this.fillSketch(r,a,n)}l&&s.appendChild(l)}return s}fillSketch(t,i,n){let r=n.fillWeight;r<0&&(r=n.strokeWidth/2);const s=t.createElementNS(Zh,"path");return s.setAttribute("d",this.opsToPath(i,n.fixedDecimalPlaceDigits)),s.setAttribute("stroke",n.fill||""),s.setAttribute("stroke-width",r+""),s.setAttribute("fill","none"),n.fillLineDash&&s.setAttribute("stroke-dasharray",n.fillLineDash.join(" ").trim()),n.fillLineDashOffset&&s.setAttribute("stroke-dashoffset",`${n.fillLineDashOffset}`),s}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}opsToPath(t,i){return this.gen.opsToPath(t,i)}line(t,i,n,r,s){const o=this.gen.line(t,i,n,r,s);return this.draw(o)}rectangle(t,i,n,r,s){const o=this.gen.rectangle(t,i,n,r,s);return this.draw(o)}ellipse(t,i,n,r,s){const o=this.gen.ellipse(t,i,n,r,s);return this.draw(o)}circle(t,i,n,r){const s=this.gen.circle(t,i,n,r);return this.draw(s)}linearPath(t,i){const n=this.gen.linearPath(t,i);return this.draw(n)}polygon(t,i){const n=this.gen.polygon(t,i);return this.draw(n)}arc(t,i,n,r,s,o,a=!1,l){const c=this.gen.arc(t,i,n,r,s,o,a,l);return this.draw(c)}curve(t,i){const n=this.gen.curve(t,i);return this.draw(n)}path(t,i){const n=this.gen.path(t,i);return this.draw(n)}}var gt={canvas:(e,t)=>new pV(e,t),svg:(e,t)=>new mV(e,t),generator:e=>new Pd(e),newSeed:()=>Pd.newSeed()},At=x(async(e,t,i)=>{let n;const r=t.useHtmlLabels||He(ne()?.htmlLabels);i?n=i:n="node default";const s=e.insert("g").attr("class",n).attr("id",t.domId||t.id),o=s.insert("g").attr("class","label").attr("style",fi(t.labelStyle));let a;t.label===void 0?a="":a=typeof t.label=="string"?t.label:t.label[0];const l=await Os(o,dn(Bo(a),ne()),{useHtmlLabels:r,width:t.width||ne().flowchart?.wrappingWidth,cssClasses:"markdown-node-label",style:t.labelStyle,addSvgBackground:!!t.icon||!!t.img});let c=l.getBBox();const h=(t?.padding??0)/2;if(r){const u=l.children[0],d=Xt(l),f=u.getElementsByTagName("img");if(f){const g=a.replace(/<img[^>]*>/g,"").trim()==="";await Promise.all([...f].map(p=>new Promise(m=>{function y(){if(p.style.display="flex",p.style.flexDirection="column",g){const _=ne().fontSize?ne().fontSize:window.getComputedStyle(document.body).fontSize,C=5,[b=l2.fontSize]=Gf(_),v=b*C+"px";p.style.minWidth=v,p.style.maxWidth=v}else p.style.width="100%";m(p)}x(y,"setupImage"),setTimeout(()=>{p.complete&&y()}),p.addEventListener("error",y),p.addEventListener("load",y)})))}c=u.getBoundingClientRect(),d.attr("width",c.width),d.attr("height",c.height)}return r?o.attr("transform","translate("+-c.width/2+", "+-c.height/2+")"):o.attr("transform","translate(0, "+-c.height/2+")"),t.centerLabel&&o.attr("transform","translate("+-c.width/2+", "+-c.height/2+")"),o.insert("rect",":first-child"),{shapeSvg:s,bbox:c,halfPadding:h,label:o}},"labelHelper"),fp=x(async(e,t,i)=>{const n=i.useHtmlLabels||He(ne()?.flowchart?.htmlLabels),r=e.insert("g").attr("class","label").attr("style",i.labelStyle||""),s=await Os(r,dn(Bo(t),ne()),{useHtmlLabels:n,width:i.width||ne()?.flowchart?.wrappingWidth,style:i.labelStyle,addSvgBackground:!!i.icon||!!i.img});let o=s.getBBox();const a=i.padding/2;if(He(ne()?.flowchart?.htmlLabels)){const l=s.children[0],c=Xt(s);o=l.getBoundingClientRect(),c.attr("width",o.width),c.attr("height",o.height)}return n?r.attr("transform","translate("+-o.width/2+", "+-o.height/2+")"):r.attr("transform","translate(0, "+-o.height/2+")"),i.centerLabel&&r.attr("transform","translate("+-o.width/2+", "+-o.height/2+")"),r.insert("rect",":first-child"),{shapeSvg:e,bbox:o,halfPadding:a,label:r}},"insertLabel"),yt=x((e,t)=>{const i=t.node().getBBox();e.width=i.width,e.height=i.height},"updateNodeBounds"),kt=x((e,t)=>(e.look==="handDrawn"?"rough-node":"node")+" "+e.cssClasses+" "+(t||""),"getNodeClasses");function Ht(e){const t=e.map((i,n)=>`${n===0?"M":"L"}${i.x},${i.y}`);return t.push("Z"),t.join(" ")}x(Ht,"createPathFromPoints");function Ls(e,t,i,n,r,s){const o=[],l=i-e,c=n-t,h=l/s,u=2*Math.PI/h,d=t+c/2;for(let f=0;f<=50;f++){const g=f/50,p=e+g*l,m=d+r*Math.sin(u*(p-e));o.push({x:p,y:m})}return o}x(Ls,"generateFullSineWavePoints");function Wc(e,t,i,n,r,s){const o=[],a=r*Math.PI/180,h=(s*Math.PI/180-a)/(n-1);for(let u=0;u<n;u++){const d=a+u*h,f=e+i*Math.cos(d),g=t+i*Math.sin(d);o.push({x:-f,y:-g})}return o}x(Wc,"generateCirclePoints");var yV=x((e,t)=>{var i=e.x,n=e.y,r=t.x-i,s=t.y-n,o=e.width/2,a=e.height/2,l,c;return Math.abs(s)*o>Math.abs(r)*a?(s<0&&(a=-a),l=s===0?0:a*r/s,c=a):(r<0&&(o=-o),l=o,c=r===0?0:o*s/r),{x:i+l,y:n+c}},"intersectRect"),sl=yV;function Xk(e,t){t&&e.attr("style",t)}x(Xk,"applyStyle");async function Kk(e){const t=Xt(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")),i=t.append("xhtml:div"),n=ne();let r=e.label;e.label&&ja(e.label)&&(r=await Ty(e.label.replace(el.lineBreakRegex,`
`),n));const o='<span class="'+(e.isNode?"nodeLabel":"edgeLabel")+'" '+(e.labelStyle?'style="'+e.labelStyle+'"':"")+">"+r+"</span>";return i.html(dn(o,n)),Xk(i,e.labelStyle),i.style("display","inline-block"),i.style("padding-right","1px"),i.style("white-space","nowrap"),i.attr("xmlns","http://www.w3.org/1999/xhtml"),t.node()}x(Kk,"addHtmlLabel");var _V=x(async(e,t,i,n)=>{let r=e||"";if(typeof r=="object"&&(r=r[0]),He(ne().flowchart.htmlLabels)){r=r.replace(/\\n|\n/g,"<br />"),X.info("vertexText"+r);const s={isNode:n,label:Bo(r).replace(/fa[blrs]?:fa-[\w-]+/g,a=>`<i class='${a.replace(":"," ")}'></i>`),labelStyle:t&&t.replace("fill:","color:")};return await Kk(s)}else{const s=document.createElementNS("http://www.w3.org/2000/svg","text");s.setAttribute("style",t.replace("color:","fill:"));let o=[];typeof r=="string"?o=r.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(r)?o=r:o=[];for(const a of o){const l=document.createElementNS("http://www.w3.org/2000/svg","tspan");l.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),l.setAttribute("dy","1em"),l.setAttribute("x","0"),i?l.setAttribute("class","title-row"):l.setAttribute("class","row"),l.textContent=a.trim(),s.appendChild(l)}return s}},"createLabel"),co=_V,Ds=x((e,t,i,n,r)=>["M",e+r,t,"H",e+i-r,"A",r,r,0,0,1,e+i,t+r,"V",t+n-r,"A",r,r,0,0,1,e+i-r,t+n,"H",e+r,"A",r,r,0,0,1,e,t+n-r,"V",t+r,"A",r,r,0,0,1,e+r,t,"Z"].join(" "),"createRoundedRectPathD"),Zk=x(async(e,t)=>{X.info("Creating subgraph rect for ",t.id,t);const i=ne(),{themeVariables:n,handDrawnSeed:r}=i,{clusterBkg:s,clusterBorder:o}=n,{labelStyles:a,nodeStyles:l,borderStyles:c,backgroundStyles:h}=mt(t),u=e.insert("g").attr("class","cluster "+t.cssClasses).attr("id",t.id).attr("data-look",t.look),d=He(i.flowchart.htmlLabels),f=u.insert("g").attr("class","cluster-label "),g=await Os(f,t.label,{style:t.labelStyle,useHtmlLabels:d,isNode:!0});let p=g.getBBox();if(He(i.flowchart.htmlLabels)){const w=g.children[0],L=Xt(g);p=w.getBoundingClientRect(),L.attr("width",p.width),L.attr("height",p.height)}const m=t.width<=p.width+t.padding?p.width+t.padding:t.width;t.width<=p.width+t.padding?t.diff=(m-t.width)/2-t.padding:t.diff=-t.padding;const y=t.height,_=t.x-m/2,C=t.y-y/2;X.trace("Data ",t,JSON.stringify(t));let b;if(t.look==="handDrawn"){const w=gt.svg(u),L=pt(t,{roughness:.7,fill:s,stroke:o,fillWeight:3,seed:r}),A=w.path(Ds(_,C,m,y,0),L);b=u.insert(()=>(X.debug("Rough node insert CXC",A),A),":first-child"),b.select("path:nth-child(2)").attr("style",c.join(";")),b.select("path").attr("style",h.join(";").replace("fill","stroke"))}else b=u.insert("rect",":first-child"),b.attr("style",l).attr("rx",t.rx).attr("ry",t.ry).attr("x",_).attr("y",C).attr("width",m).attr("height",y);const{subGraphTitleTopMargin:v}=Ky(i);if(f.attr("transform",`translate(${t.x-p.width/2}, ${t.y-t.height/2+v})`),a){const w=f.select("span");w&&w.attr("style",a)}const S=b.node().getBBox();return t.offsetX=0,t.width=S.width,t.height=S.height,t.offsetY=p.height-t.padding/2,t.intersect=function(w){return sl(t,w)},{cluster:u,labelBBox:p}},"rect"),xV=x((e,t)=>{const i=e.insert("g").attr("class","note-cluster").attr("id",t.id),n=i.insert("rect",":first-child"),r=0*t.padding,s=r/2;n.attr("rx",t.rx).attr("ry",t.ry).attr("x",t.x-t.width/2-s).attr("y",t.y-t.height/2-s).attr("width",t.width+r).attr("height",t.height+r).attr("fill","none");const o=n.node().getBBox();return t.width=o.width,t.height=o.height,t.intersect=function(a){return sl(t,a)},{cluster:i,labelBBox:{width:0,height:0}}},"noteGroup"),CV=x(async(e,t)=>{const i=ne(),{themeVariables:n,handDrawnSeed:r}=i,{altBackground:s,compositeBackground:o,compositeTitleBackground:a,nodeBorder:l}=n,c=e.insert("g").attr("class",t.cssClasses).attr("id",t.id).attr("data-id",t.id).attr("data-look",t.look),h=c.insert("g",":first-child"),u=c.insert("g").attr("class","cluster-label");let d=c.append("rect");const f=u.node().appendChild(await co(t.label,t.labelStyle,void 0,!0));let g=f.getBBox();if(He(i.flowchart.htmlLabels)){const A=f.children[0],B=Xt(f);g=A.getBoundingClientRect(),B.attr("width",g.width),B.attr("height",g.height)}const p=0*t.padding,m=p/2,y=(t.width<=g.width+t.padding?g.width+t.padding:t.width)+p;t.width<=g.width+t.padding?t.diff=(y-t.width)/2-t.padding:t.diff=-t.padding;const _=t.height+p,C=t.height+p-g.height-6,b=t.x-y/2,v=t.y-_/2;t.width=y;const S=t.y-t.height/2-m+g.height+2;let w;if(t.look==="handDrawn"){const A=t.cssClasses.includes("statediagram-cluster-alt"),B=gt.svg(c),O=t.rx||t.ry?B.path(Ds(b,v,y,_,10),{roughness:.7,fill:a,fillStyle:"solid",stroke:l,seed:r}):B.rectangle(b,v,y,_,{seed:r});w=c.insert(()=>O,":first-child");const F=B.rectangle(b,S,y,C,{fill:A?s:o,fillStyle:A?"hachure":"solid",stroke:l,seed:r});w=c.insert(()=>O,":first-child"),d=c.insert(()=>F)}else w=h.insert("rect",":first-child"),w.attr("class","outer").attr("x",b).attr("y",v).attr("width",y).attr("height",_).attr("data-look",t.look),d.attr("class","inner").attr("x",b).attr("y",S).attr("width",y).attr("height",C);u.attr("transform",`translate(${t.x-g.width/2}, ${v+1-(He(i.flowchart.htmlLabels)?0:3)})`);const L=w.node().getBBox();return t.height=L.height,t.offsetX=0,t.offsetY=g.height-t.padding/2,t.labelBBox=g,t.intersect=function(A){return sl(t,A)},{cluster:c,labelBBox:g}},"roundedWithTitle"),bV=x(async(e,t)=>{X.info("Creating subgraph rect for ",t.id,t);const i=ne(),{themeVariables:n,handDrawnSeed:r}=i,{clusterBkg:s,clusterBorder:o}=n,{labelStyles:a,nodeStyles:l,borderStyles:c,backgroundStyles:h}=mt(t),u=e.insert("g").attr("class","cluster "+t.cssClasses).attr("id",t.id).attr("data-look",t.look),d=He(i.flowchart.htmlLabels),f=u.insert("g").attr("class","cluster-label "),g=await Os(f,t.label,{style:t.labelStyle,useHtmlLabels:d,isNode:!0,width:t.width});let p=g.getBBox();if(He(i.flowchart.htmlLabels)){const w=g.children[0],L=Xt(g);p=w.getBoundingClientRect(),L.attr("width",p.width),L.attr("height",p.height)}const m=t.width<=p.width+t.padding?p.width+t.padding:t.width;t.width<=p.width+t.padding?t.diff=(m-t.width)/2-t.padding:t.diff=-t.padding;const y=t.height,_=t.x-m/2,C=t.y-y/2;X.trace("Data ",t,JSON.stringify(t));let b;if(t.look==="handDrawn"){const w=gt.svg(u),L=pt(t,{roughness:.7,fill:s,stroke:o,fillWeight:4,seed:r}),A=w.path(Ds(_,C,m,y,t.rx),L);b=u.insert(()=>(X.debug("Rough node insert CXC",A),A),":first-child"),b.select("path:nth-child(2)").attr("style",c.join(";")),b.select("path").attr("style",h.join(";").replace("fill","stroke"))}else b=u.insert("rect",":first-child"),b.attr("style",l).attr("rx",t.rx).attr("ry",t.ry).attr("x",_).attr("y",C).attr("width",m).attr("height",y);const{subGraphTitleTopMargin:v}=Ky(i);if(f.attr("transform",`translate(${t.x-p.width/2}, ${t.y-t.height/2+v})`),a){const w=f.select("span");w&&w.attr("style",a)}const S=b.node().getBBox();return t.offsetX=0,t.width=S.width,t.height=S.height,t.offsetY=p.height-t.padding/2,t.intersect=function(w){return sl(t,w)},{cluster:u,labelBBox:p}},"kanbanSection"),vV=x((e,t)=>{const i=ne(),{themeVariables:n,handDrawnSeed:r}=i,{nodeBorder:s}=n,o=e.insert("g").attr("class",t.cssClasses).attr("id",t.id).attr("data-look",t.look),a=o.insert("g",":first-child"),l=0*t.padding,c=t.width+l;t.diff=-t.padding;const h=t.height+l,u=t.x-c/2,d=t.y-h/2;t.width=c;let f;if(t.look==="handDrawn"){const m=gt.svg(o).rectangle(u,d,c,h,{fill:"lightgrey",roughness:.5,strokeLineDash:[5],stroke:s,seed:r});f=o.insert(()=>m,":first-child")}else f=a.insert("rect",":first-child"),f.attr("class","divider").attr("x",u).attr("y",d).attr("width",c).attr("height",h).attr("data-look",t.look);const g=f.node().getBBox();return t.height=g.height,t.offsetX=0,t.offsetY=0,t.intersect=function(p){return sl(t,p)},{cluster:o,labelBBox:{}}},"divider"),wV=Zk,SV={rect:Zk,squareRect:wV,roundedWithTitle:CV,noteGroup:xV,divider:vV,kanbanSection:bV},Jk=new Map,TV=x(async(e,t)=>{const i=t.shape||"rect",n=await SV[i](e,t);return Jk.set(t.id,n),n},"insertCluster"),sX=x(()=>{Jk=new Map},"clear");function Qk(e,t){return e.intersect(t)}x(Qk,"intersectNode");var EV=Qk;function tR(e,t,i,n){var r=e.x,s=e.y,o=r-n.x,a=s-n.y,l=Math.sqrt(t*t*a*a+i*i*o*o),c=Math.abs(t*i*o/l);n.x<r&&(c=-c);var h=Math.abs(t*i*a/l);return n.y<s&&(h=-h),{x:r+c,y:s+h}}x(tR,"intersectEllipse");var eR=tR;function iR(e,t,i){return eR(e,t,t,i)}x(iR,"intersectCircle");var kV=iR;function nR(e,t,i,n){{const r=t.y-e.y,s=e.x-t.x,o=t.x*e.y-e.x*t.y,a=r*i.x+s*i.y+o,l=r*n.x+s*n.y+o,c=1e-6;if(a!==0&&l!==0&&Vm(a,l))return;const h=n.y-i.y,u=i.x-n.x,d=n.x*i.y-i.x*n.y,f=h*e.x+u*e.y+d,g=h*t.x+u*t.y+d;if(Math.abs(f)<c&&Math.abs(g)<c&&Vm(f,g))return;const p=r*u-h*s;if(p===0)return;const m=Math.abs(p/2);let y=s*d-u*o;const _=y<0?(y-m)/p:(y+m)/p;y=h*o-r*d;const C=y<0?(y-m)/p:(y+m)/p;return{x:_,y:C}}}x(nR,"intersectLine");function Vm(e,t){return e*t>0}x(Vm,"sameSign");var RV=nR;function rR(e,t,i){let n=e.x,r=e.y,s=[],o=Number.POSITIVE_INFINITY,a=Number.POSITIVE_INFINITY;typeof t.forEach=="function"?t.forEach(function(h){o=Math.min(o,h.x),a=Math.min(a,h.y)}):(o=Math.min(o,t.x),a=Math.min(a,t.y));let l=n-e.width/2-o,c=r-e.height/2-a;for(let h=0;h<t.length;h++){let u=t[h],d=t[h<t.length-1?h+1:0],f=RV(e,i,{x:l+u.x,y:c+u.y},{x:l+d.x,y:c+d.y});f&&s.push(f)}return s.length?(s.length>1&&s.sort(function(h,u){let d=h.x-i.x,f=h.y-i.y,g=Math.sqrt(d*d+f*f),p=u.x-i.x,m=u.y-i.y,y=Math.sqrt(p*p+m*m);return g<y?-1:g===y?0:1}),s[0]):e}x(rR,"intersectPolygon");var AV=rR,ht={node:EV,circle:kV,ellipse:eR,polygon:AV,rect:sl};function sR(e,t){const{labelStyles:i}=mt(t);t.labelStyle=i;const n=kt(t);let r=n;n||(r="anchor");const s=e.insert("g").attr("class",r).attr("id",t.domId||t.id),o=1,{cssStyles:a}=t,l=gt.svg(s),c=pt(t,{fill:"black",stroke:"none",fillStyle:"solid"});t.look!=="handDrawn"&&(c.roughness=0);const h=l.circle(0,0,o*2,c),u=s.insert(()=>h,":first-child");return u.attr("class","anchor").attr("style",fi(a)),yt(t,u),t.intersect=function(d){return X.info("Circle intersect",t,o,d),ht.circle(t,o,d)},s}x(sR,"anchor");function Um(e,t,i,n,r,s,o){const l=(e+i)/2,c=(t+n)/2,h=Math.atan2(n-t,i-e),u=(i-e)/2,d=(n-t)/2,f=u/r,g=d/s,p=Math.sqrt(f**2+g**2);if(p>1)throw new Error("The given radii are too small to create an arc between the points.");const m=Math.sqrt(1-p**2),y=l+m*s*Math.sin(h)*(o?-1:1),_=c-m*r*Math.cos(h)*(o?-1:1),C=Math.atan2((t-_)/s,(e-y)/r);let v=Math.atan2((n-_)/s,(i-y)/r)-C;o&&v<0&&(v+=2*Math.PI),!o&&v>0&&(v-=2*Math.PI);const S=[];for(let w=0;w<20;w++){const L=w/19,A=C+L*v,B=y+r*Math.cos(A),O=_+s*Math.sin(A);S.push({x:B,y:O})}return S}x(Um,"generateArcPoints");async function oR(e,t){const{labelStyles:i,nodeStyles:n}=mt(t);t.labelStyle=i;const{shapeSvg:r,bbox:s}=await At(e,t,kt(t)),o=s.width+t.padding+20,a=s.height+t.padding,l=a/2,c=l/(2.5+a/50),{cssStyles:h}=t,u=[{x:o/2,y:-a/2},{x:-o/2,y:-a/2},...Um(-o/2,-a/2,-o/2,a/2,c,l,!1),{x:o/2,y:a/2},...Um(o/2,a/2,o/2,-a/2,c,l,!0)],d=gt.svg(r),f=pt(t,{});t.look!=="handDrawn"&&(f.roughness=0,f.fillStyle="solid");const g=Ht(u),p=d.path(g,f),m=r.insert(()=>p,":first-child");return m.attr("class","basic label-container"),h&&t.look!=="handDrawn"&&m.selectAll("path").attr("style",h),n&&t.look!=="handDrawn"&&m.selectAll("path").attr("style",n),m.attr("transform",`translate(${c/2}, 0)`),yt(t,m),t.intersect=function(y){return ht.polygon(t,u,y)},r}x(oR,"bowTieRect");function Bs(e,t,i,n){return e.insert("polygon",":first-child").attr("points",n.map(function(r){return r.x+","+r.y}).join(" ")).attr("class","label-container").attr("transform","translate("+-t/2+","+i/2+")")}x(Bs,"insertPolygonShape");async function aR(e,t){const{labelStyles:i,nodeStyles:n}=mt(t);t.labelStyle=i;const{shapeSvg:r,bbox:s}=await At(e,t,kt(t)),o=s.height+t.padding,a=12,l=s.width+t.padding+a,c=0,h=l,u=-o,d=0,f=[{x:c+a,y:u},{x:h,y:u},{x:h,y:d},{x:c,y:d},{x:c,y:u+a},{x:c+a,y:u}];let g;const{cssStyles:p}=t;if(t.look==="handDrawn"){const m=gt.svg(r),y=pt(t,{}),_=Ht(f),C=m.path(_,y);g=r.insert(()=>C,":first-child").attr("transform",`translate(${-l/2}, ${o/2})`),p&&g.attr("style",p)}else g=Bs(r,l,o,f);return n&&g.attr("style",n),yt(t,g),t.intersect=function(m){return ht.polygon(t,f,m)},r}x(aR,"card");function lR(e,t){const{nodeStyles:i}=mt(t);t.label="";const n=e.insert("g").attr("class",kt(t)).attr("id",t.domId??t.id),{cssStyles:r}=t,s=Math.max(28,t.width??0),o=[{x:0,y:s/2},{x:s/2,y:0},{x:0,y:-s/2},{x:-s/2,y:0}],a=gt.svg(n),l=pt(t,{});t.look!=="handDrawn"&&(l.roughness=0,l.fillStyle="solid");const c=Ht(o),h=a.path(c,l),u=n.insert(()=>h,":first-child");return r&&t.look!=="handDrawn"&&u.selectAll("path").attr("style",r),i&&t.look!=="handDrawn"&&u.selectAll("path").attr("style",i),t.width=28,t.height=28,t.intersect=function(d){return ht.polygon(t,o,d)},n}x(lR,"choice");async function x_(e,t,i){const{labelStyles:n,nodeStyles:r}=mt(t);t.labelStyle=n;const{shapeSvg:s,bbox:o,halfPadding:a}=await At(e,t,kt(t)),l=i?.padding??a,c=o.width/2+l;let h;const{cssStyles:u}=t;if(t.look==="handDrawn"){const d=gt.svg(s),f=pt(t,{}),g=d.circle(0,0,c*2,f);h=s.insert(()=>g,":first-child"),h.attr("class","basic label-container").attr("style",fi(u))}else h=s.insert("circle",":first-child").attr("class","basic label-container").attr("style",r).attr("r",c).attr("cx",0).attr("cy",0);return yt(t,h),t.calcIntersect=function(d,f){const g=d.width/2;return ht.circle(d,g,f)},t.intersect=function(d){return X.info("Circle intersect",t,c,d),ht.circle(t,c,d)},s}x(x_,"circle");function cR(e){const t=Math.cos(Math.PI/4),i=Math.sin(Math.PI/4),n=e*2,r={x:n/2*t,y:n/2*i},s={x:-(n/2)*t,y:n/2*i},o={x:-(n/2)*t,y:-(n/2)*i},a={x:n/2*t,y:-(n/2)*i};return`M ${s.x},${s.y} L ${a.x},${a.y}
                   M ${r.x},${r.y} L ${o.x},${o.y}`}x(cR,"createLine");function hR(e,t){const{labelStyles:i,nodeStyles:n}=mt(t);t.labelStyle=i,t.label="";const r=e.insert("g").attr("class",kt(t)).attr("id",t.domId??t.id),s=Math.max(30,t?.width??0),{cssStyles:o}=t,a=gt.svg(r),l=pt(t,{});t.look!=="handDrawn"&&(l.roughness=0,l.fillStyle="solid");const c=a.circle(0,0,s*2,l),h=cR(s),u=a.path(h,l),d=r.insert(()=>c,":first-child");return d.insert(()=>u),o&&t.look!=="handDrawn"&&d.selectAll("path").attr("style",o),n&&t.look!=="handDrawn"&&d.selectAll("path").attr("style",n),yt(t,d),t.intersect=function(f){return X.info("crossedCircle intersect",t,{radius:s,point:f}),ht.circle(t,s,f)},r}x(hR,"crossedCircle");function Sr(e,t,i,n=100,r=0,s=180){const o=[],a=r*Math.PI/180,h=(s*Math.PI/180-a)/(n-1);for(let u=0;u<n;u++){const d=a+u*h,f=e+i*Math.cos(d),g=t+i*Math.sin(d);o.push({x:-f,y:-g})}return o}x(Sr,"generateCirclePoints");async function uR(e,t){const{labelStyles:i,nodeStyles:n}=mt(t);t.labelStyle=i;const{shapeSvg:r,bbox:s,label:o}=await At(e,t,kt(t)),a=s.width+(t.padding??0),l=s.height+(t.padding??0),c=Math.max(5,l*.1),{cssStyles:h}=t,u=[...Sr(a/2,-l/2,c,30,-90,0),{x:-a/2-c,y:c},...Sr(a/2+c*2,-c,c,20,-180,-270),...Sr(a/2+c*2,c,c,20,-90,-180),{x:-a/2-c,y:-l/2},...Sr(a/2,l/2,c,20,0,90)],d=[{x:a/2,y:-l/2-c},{x:-a/2,y:-l/2-c},...Sr(a/2,-l/2,c,20,-90,0),{x:-a/2-c,y:-c},...Sr(a/2+a*.1,-c,c,20,-180,-270),...Sr(a/2+a*.1,c,c,20,-90,-180),{x:-a/2-c,y:l/2},...Sr(a/2,l/2,c,20,0,90),{x:-a/2,y:l/2+c},{x:a/2,y:l/2+c}],f=gt.svg(r),g=pt(t,{fill:"none"});t.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const m=Ht(u).replace("Z",""),y=f.path(m,g),_=Ht(d),C=f.path(_,{...g}),b=r.insert("g",":first-child");return b.insert(()=>C,":first-child").attr("stroke-opacity",0),b.insert(()=>y,":first-child"),b.attr("class","text"),h&&t.look!=="handDrawn"&&b.selectAll("path").attr("style",h),n&&t.look!=="handDrawn"&&b.selectAll("path").attr("style",n),b.attr("transform",`translate(${c}, 0)`),o.attr("transform",`translate(${-a/2+c-(s.x-(s.left??0))},${-l/2+(t.padding??0)/2-(s.y-(s.top??0))})`),yt(t,b),t.intersect=function(v){return ht.polygon(t,d,v)},r}x(uR,"curlyBraceLeft");function Tr(e,t,i,n=100,r=0,s=180){const o=[],a=r*Math.PI/180,h=(s*Math.PI/180-a)/(n-1);for(let u=0;u<n;u++){const d=a+u*h,f=e+i*Math.cos(d),g=t+i*Math.sin(d);o.push({x:f,y:g})}return o}x(Tr,"generateCirclePoints");async function dR(e,t){const{labelStyles:i,nodeStyles:n}=mt(t);t.labelStyle=i;const{shapeSvg:r,bbox:s,label:o}=await At(e,t,kt(t)),a=s.width+(t.padding??0),l=s.height+(t.padding??0),c=Math.max(5,l*.1),{cssStyles:h}=t,u=[...Tr(a/2,-l/2,c,20,-90,0),{x:a/2+c,y:-c},...Tr(a/2+c*2,-c,c,20,-180,-270),...Tr(a/2+c*2,c,c,20,-90,-180),{x:a/2+c,y:l/2},...Tr(a/2,l/2,c,20,0,90)],d=[{x:-a/2,y:-l/2-c},{x:a/2,y:-l/2-c},...Tr(a/2,-l/2,c,20,-90,0),{x:a/2+c,y:-c},...Tr(a/2+c*2,-c,c,20,-180,-270),...Tr(a/2+c*2,c,c,20,-90,-180),{x:a/2+c,y:l/2},...Tr(a/2,l/2,c,20,0,90),{x:a/2,y:l/2+c},{x:-a/2,y:l/2+c}],f=gt.svg(r),g=pt(t,{fill:"none"});t.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const m=Ht(u).replace("Z",""),y=f.path(m,g),_=Ht(d),C=f.path(_,{...g}),b=r.insert("g",":first-child");return b.insert(()=>C,":first-child").attr("stroke-opacity",0),b.insert(()=>y,":first-child"),b.attr("class","text"),h&&t.look!=="handDrawn"&&b.selectAll("path").attr("style",h),n&&t.look!=="handDrawn"&&b.selectAll("path").attr("style",n),b.attr("transform",`translate(${-c}, 0)`),o.attr("transform",`translate(${-a/2+(t.padding??0)/2-(s.x-(s.left??0))},${-l/2+(t.padding??0)/2-(s.y-(s.top??0))})`),yt(t,b),t.intersect=function(v){return ht.polygon(t,d,v)},r}x(dR,"curlyBraceRight");function Ke(e,t,i,n=100,r=0,s=180){const o=[],a=r*Math.PI/180,h=(s*Math.PI/180-a)/(n-1);for(let u=0;u<n;u++){const d=a+u*h,f=e+i*Math.cos(d),g=t+i*Math.sin(d);o.push({x:-f,y:-g})}return o}x(Ke,"generateCirclePoints");async function fR(e,t){const{labelStyles:i,nodeStyles:n}=mt(t);t.labelStyle=i;const{shapeSvg:r,bbox:s,label:o}=await At(e,t,kt(t)),a=s.width+(t.padding??0),l=s.height+(t.padding??0),c=Math.max(5,l*.1),{cssStyles:h}=t,u=[...Ke(a/2,-l/2,c,30,-90,0),{x:-a/2-c,y:c},...Ke(a/2+c*2,-c,c,20,-180,-270),...Ke(a/2+c*2,c,c,20,-90,-180),{x:-a/2-c,y:-l/2},...Ke(a/2,l/2,c,20,0,90)],d=[...Ke(-a/2+c+c/2,-l/2,c,20,-90,-180),{x:a/2-c/2,y:c},...Ke(-a/2-c/2,-c,c,20,0,90),...Ke(-a/2-c/2,c,c,20,-90,0),{x:a/2-c/2,y:-c},...Ke(-a/2+c+c/2,l/2,c,30,-180,-270)],f=[{x:a/2,y:-l/2-c},{x:-a/2,y:-l/2-c},...Ke(a/2,-l/2,c,20,-90,0),{x:-a/2-c,y:-c},...Ke(a/2+c*2,-c,c,20,-180,-270),...Ke(a/2+c*2,c,c,20,-90,-180),{x:-a/2-c,y:l/2},...Ke(a/2,l/2,c,20,0,90),{x:-a/2,y:l/2+c},{x:a/2-c-c/2,y:l/2+c},...Ke(-a/2+c+c/2,-l/2,c,20,-90,-180),{x:a/2-c/2,y:c},...Ke(-a/2-c/2,-c,c,20,0,90),...Ke(-a/2-c/2,c,c,20,-90,0),{x:a/2-c/2,y:-c},...Ke(-a/2+c+c/2,l/2,c,30,-180,-270)],g=gt.svg(r),p=pt(t,{fill:"none"});t.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const y=Ht(u).replace("Z",""),_=g.path(y,p),b=Ht(d).replace("Z",""),v=g.path(b,p),S=Ht(f),w=g.path(S,{...p}),L=r.insert("g",":first-child");return L.insert(()=>w,":first-child").attr("stroke-opacity",0),L.insert(()=>_,":first-child"),L.insert(()=>v,":first-child"),L.attr("class","text"),h&&t.look!=="handDrawn"&&L.selectAll("path").attr("style",h),n&&t.look!=="handDrawn"&&L.selectAll("path").attr("style",n),L.attr("transform",`translate(${c-c/4}, 0)`),o.attr("transform",`translate(${-a/2+(t.padding??0)/2-(s.x-(s.left??0))},${-l/2+(t.padding??0)/2-(s.y-(s.top??0))})`),yt(t,L),t.intersect=function(A){return ht.polygon(t,f,A)},r}x(fR,"curlyBraces");async function gR(e,t){const{labelStyles:i,nodeStyles:n}=mt(t);t.labelStyle=i;const{shapeSvg:r,bbox:s}=await At(e,t,kt(t)),o=80,a=20,l=Math.max(o,(s.width+(t.padding??0)*2)*1.25,t?.width??0),c=Math.max(a,s.height+(t.padding??0)*2,t?.height??0),h=c/2,{cssStyles:u}=t,d=gt.svg(r),f=pt(t,{});t.look!=="handDrawn"&&(f.roughness=0,f.fillStyle="solid");const g=l,p=c,m=g-h,y=p/4,_=[{x:m,y:0},{x:y,y:0},{x:0,y:p/2},{x:y,y:p},{x:m,y:p},...Wc(-m,-p/2,h,50,270,90)],C=Ht(_),b=d.path(C,f),v=r.insert(()=>b,":first-child");return v.attr("class","basic label-container"),u&&t.look!=="handDrawn"&&v.selectChildren("path").attr("style",u),n&&t.look!=="handDrawn"&&v.selectChildren("path").attr("style",n),v.attr("transform",`translate(${-l/2}, ${-c/2})`),yt(t,v),t.intersect=function(S){return ht.polygon(t,_,S)},r}x(gR,"curvedTrapezoid");var LV=x((e,t,i,n,r,s)=>[`M${e},${t+s}`,`a${r},${s} 0,0,0 ${i},0`,`a${r},${s} 0,0,0 ${-i},0`,`l0,${n}`,`a${r},${s} 0,0,0 ${i},0`,`l0,${-n}`].join(" "),"createCylinderPathD"),MV=x((e,t,i,n,r,s)=>[`M${e},${t+s}`,`M${e+i},${t+s}`,`a${r},${s} 0,0,0 ${-i},0`,`l0,${n}`,`a${r},${s} 0,0,0 ${i},0`,`l0,${-n}`].join(" "),"createOuterCylinderPathD"),IV=x((e,t,i,n,r,s)=>[`M${e-i/2},${-n/2}`,`a${r},${s} 0,0,0 ${i},0`].join(" "),"createInnerCylinderPathD");async function pR(e,t){const{labelStyles:i,nodeStyles:n}=mt(t);t.labelStyle=i;const{shapeSvg:r,bbox:s,label:o}=await At(e,t,kt(t)),a=Math.max(s.width+t.padding,t.width??0),l=a/2,c=l/(2.5+a/50),h=Math.max(s.height+c+t.padding,t.height??0);let u;const{cssStyles:d}=t;if(t.look==="handDrawn"){const f=gt.svg(r),g=MV(0,0,a,h,l,c),p=IV(0,c,a,h,l,c),m=f.path(g,pt(t,{})),y=f.path(p,pt(t,{fill:"none"}));u=r.insert(()=>y,":first-child"),u=r.insert(()=>m,":first-child"),u.attr("class","basic label-container"),d&&u.attr("style",d)}else{const f=LV(0,0,a,h,l,c);u=r.insert("path",":first-child").attr("d",f).attr("class","basic label-container").attr("style",fi(d)).attr("style",n)}return u.attr("label-offset-y",c),u.attr("transform",`translate(${-a/2}, ${-(h/2+c)})`),yt(t,u),o.attr("transform",`translate(${-(s.width/2)-(s.x-(s.left??0))}, ${-(s.height/2)+(t.padding??0)/1.5-(s.y-(s.top??0))})`),t.intersect=function(f){const g=ht.rect(t,f),p=g.x-(t.x??0);if(l!=0&&(Math.abs(p)<(t.width??0)/2||Math.abs(p)==(t.width??0)/2&&Math.abs(g.y-(t.y??0))>(t.height??0)/2-c)){let m=c*c*(1-p*p/(l*l));m>0&&(m=Math.sqrt(m)),m=c-m,f.y-(t.y??0)>0&&(m=-m),g.y+=m}return g},r}x(pR,"cylinder");async function mR(e,t){const{labelStyles:i,nodeStyles:n}=mt(t);t.labelStyle=i;const{shapeSvg:r,bbox:s,label:o}=await At(e,t,kt(t)),a=s.width+t.padding,l=s.height+t.padding,c=l*.2,h=-a/2,u=-l/2-c/2,{cssStyles:d}=t,f=gt.svg(r),g=pt(t,{});t.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const p=[{x:h,y:u+c},{x:-h,y:u+c},{x:-h,y:-u},{x:h,y:-u},{x:h,y:u},{x:-h,y:u},{x:-h,y:u+c}],m=f.polygon(p.map(_=>[_.x,_.y]),g),y=r.insert(()=>m,":first-child");return y.attr("class","basic label-container"),d&&t.look!=="handDrawn"&&y.selectAll("path").attr("style",d),n&&t.look!=="handDrawn"&&y.selectAll("path").attr("style",n),o.attr("transform",`translate(${h+(t.padding??0)/2-(s.x-(s.left??0))}, ${u+c+(t.padding??0)/2-(s.y-(s.top??0))})`),yt(t,y),t.intersect=function(_){return ht.rect(t,_)},r}x(mR,"dividedRectangle");async function yR(e,t){const{labelStyles:i,nodeStyles:n}=mt(t);t.labelStyle=i;const{shapeSvg:r,bbox:s,halfPadding:o}=await At(e,t,kt(t)),l=s.width/2+o+5,c=s.width/2+o;let h;const{cssStyles:u}=t;if(t.look==="handDrawn"){const d=gt.svg(r),f=pt(t,{roughness:.2,strokeWidth:2.5}),g=pt(t,{roughness:.2,strokeWidth:1.5}),p=d.circle(0,0,l*2,f),m=d.circle(0,0,c*2,g);h=r.insert("g",":first-child"),h.attr("class",fi(t.cssClasses)).attr("style",fi(u)),h.node()?.appendChild(p),h.node()?.appendChild(m)}else{h=r.insert("g",":first-child");const d=h.insert("circle",":first-child"),f=h.insert("circle");h.attr("class","basic label-container").attr("style",n),d.attr("class","outer-circle").attr("style",n).attr("r",l).attr("cx",0).attr("cy",0),f.attr("class","inner-circle").attr("style",n).attr("r",c).attr("cx",0).attr("cy",0)}return yt(t,h),t.intersect=function(d){return X.info("DoubleCircle intersect",t,l,d),ht.circle(t,l,d)},r}x(yR,"doublecircle");function _R(e,t,{config:{themeVariables:i}}){const{labelStyles:n,nodeStyles:r}=mt(t);t.label="",t.labelStyle=n;const s=e.insert("g").attr("class",kt(t)).attr("id",t.domId??t.id),o=7,{cssStyles:a}=t,l=gt.svg(s),{nodeBorder:c}=i,h=pt(t,{fillStyle:"solid"});t.look!=="handDrawn"&&(h.roughness=0);const u=l.circle(0,0,o*2,h),d=s.insert(()=>u,":first-child");return d.selectAll("path").attr("style",`fill: ${c} !important;`),a&&a.length>0&&t.look!=="handDrawn"&&d.selectAll("path").attr("style",a),r&&t.look!=="handDrawn"&&d.selectAll("path").attr("style",r),yt(t,d),t.intersect=function(f){return X.info("filledCircle intersect",t,{radius:o,point:f}),ht.circle(t,o,f)},s}x(_R,"filledCircle");async function xR(e,t){const{labelStyles:i,nodeStyles:n}=mt(t);t.labelStyle=i;const{shapeSvg:r,bbox:s,label:o}=await At(e,t,kt(t)),a=s.width+(t.padding??0),l=a+s.height,c=a+s.height,h=[{x:0,y:-l},{x:c,y:-l},{x:c/2,y:0}],{cssStyles:u}=t,d=gt.svg(r),f=pt(t,{});t.look!=="handDrawn"&&(f.roughness=0,f.fillStyle="solid");const g=Ht(h),p=d.path(g,f),m=r.insert(()=>p,":first-child").attr("transform",`translate(${-l/2}, ${l/2})`);return u&&t.look!=="handDrawn"&&m.selectChildren("path").attr("style",u),n&&t.look!=="handDrawn"&&m.selectChildren("path").attr("style",n),t.width=a,t.height=l,yt(t,m),o.attr("transform",`translate(${-s.width/2-(s.x-(s.left??0))}, ${-l/2+(t.padding??0)/2+(s.y-(s.top??0))})`),t.intersect=function(y){return X.info("Triangle intersect",t,h,y),ht.polygon(t,h,y)},r}x(xR,"flippedTriangle");function CR(e,t,{dir:i,config:{state:n,themeVariables:r}}){const{nodeStyles:s}=mt(t);t.label="";const o=e.insert("g").attr("class",kt(t)).attr("id",t.domId??t.id),{cssStyles:a}=t;let l=Math.max(70,t?.width??0),c=Math.max(10,t?.height??0);i==="LR"&&(l=Math.max(10,t?.width??0),c=Math.max(70,t?.height??0));const h=-1*l/2,u=-1*c/2,d=gt.svg(o),f=pt(t,{stroke:r.lineColor,fill:r.lineColor});t.look!=="handDrawn"&&(f.roughness=0,f.fillStyle="solid");const g=d.rectangle(h,u,l,c,f),p=o.insert(()=>g,":first-child");a&&t.look!=="handDrawn"&&p.selectAll("path").attr("style",a),s&&t.look!=="handDrawn"&&p.selectAll("path").attr("style",s),yt(t,p);const m=n?.padding??0;return t.width&&t.height&&(t.width+=m/2||0,t.height+=m/2||0),t.intersect=function(y){return ht.rect(t,y)},o}x(CR,"forkJoin");async function bR(e,t){const{labelStyles:i,nodeStyles:n}=mt(t);t.labelStyle=i;const r=80,s=50,{shapeSvg:o,bbox:a}=await At(e,t,kt(t)),l=Math.max(r,a.width+(t.padding??0)*2,t?.width??0),c=Math.max(s,a.height+(t.padding??0)*2,t?.height??0),h=c/2,{cssStyles:u}=t,d=gt.svg(o),f=pt(t,{});t.look!=="handDrawn"&&(f.roughness=0,f.fillStyle="solid");const g=[{x:-l/2,y:-c/2},{x:l/2-h,y:-c/2},...Wc(-l/2+h,0,h,50,90,270),{x:l/2-h,y:c/2},{x:-l/2,y:c/2}],p=Ht(g),m=d.path(p,f),y=o.insert(()=>m,":first-child");return y.attr("class","basic label-container"),u&&t.look!=="handDrawn"&&y.selectChildren("path").attr("style",u),n&&t.look!=="handDrawn"&&y.selectChildren("path").attr("style",n),yt(t,y),t.intersect=function(_){return X.info("Pill intersect",t,{radius:h,point:_}),ht.polygon(t,g,_)},o}x(bR,"halfRoundedRectangle");async function vR(e,t){const{labelStyles:i,nodeStyles:n}=mt(t);t.labelStyle=i;const{shapeSvg:r,bbox:s}=await At(e,t,kt(t)),o=s.height+(t.padding??0),a=s.width+(t.padding??0)*2.5,{cssStyles:l}=t,c=gt.svg(r),h=pt(t,{});t.look!=="handDrawn"&&(h.roughness=0,h.fillStyle="solid");let u=a/2;const d=u/6;u=u+d;const f=o/2,g=f/2,p=u-g,m=[{x:-p,y:-f},{x:0,y:-f},{x:p,y:-f},{x:u,y:0},{x:p,y:f},{x:0,y:f},{x:-p,y:f},{x:-u,y:0}],y=Ht(m),_=c.path(y,h),C=r.insert(()=>_,":first-child");return C.attr("class","basic label-container"),l&&t.look!=="handDrawn"&&C.selectChildren("path").attr("style",l),n&&t.look!=="handDrawn"&&C.selectChildren("path").attr("style",n),t.width=a,t.height=o,yt(t,C),t.intersect=function(b){return ht.polygon(t,m,b)},r}x(vR,"hexagon");async function wR(e,t){const{labelStyles:i,nodeStyles:n}=mt(t);t.label="",t.labelStyle=i;const{shapeSvg:r}=await At(e,t,kt(t)),s=Math.max(30,t?.width??0),o=Math.max(30,t?.height??0),{cssStyles:a}=t,l=gt.svg(r),c=pt(t,{});t.look!=="handDrawn"&&(c.roughness=0,c.fillStyle="solid");const h=[{x:0,y:0},{x:s,y:0},{x:0,y:o},{x:s,y:o}],u=Ht(h),d=l.path(u,c),f=r.insert(()=>d,":first-child");return f.attr("class","basic label-container"),a&&t.look!=="handDrawn"&&f.selectChildren("path").attr("style",a),n&&t.look!=="handDrawn"&&f.selectChildren("path").attr("style",n),f.attr("transform",`translate(${-s/2}, ${-o/2})`),yt(t,f),t.intersect=function(g){return X.info("Pill intersect",t,{points:h}),ht.polygon(t,h,g)},r}x(wR,"hourglass");async function SR(e,t,{config:{themeVariables:i,flowchart:n}}){const{labelStyles:r}=mt(t);t.labelStyle=r;const s=t.assetHeight??48,o=t.assetWidth??48,a=Math.max(s,o),l=n?.wrappingWidth;t.width=Math.max(a,l??0);const{shapeSvg:c,bbox:h,label:u}=await At(e,t,"icon-shape default"),d=t.pos==="t",f=a,g=a,{nodeBorder:p}=i,{stylesMap:m}=il(t),y=-g/2,_=-f/2,C=t.label?8:0,b=gt.svg(c),v=pt(t,{stroke:"none",fill:"none"});t.look!=="handDrawn"&&(v.roughness=0,v.fillStyle="solid");const S=b.rectangle(y,_,g,f,v),w=Math.max(g,h.width),L=f+h.height+C,A=b.rectangle(-w/2,-L/2,w,L,{...v,fill:"transparent",stroke:"none"}),B=c.insert(()=>S,":first-child"),O=c.insert(()=>A);if(t.icon){const F=c.append("g");F.html(`<g>${await mh(t.icon,{height:a,width:a,fallbackPrefix:""})}</g>`);const R=F.node().getBBox(),T=R.width,P=R.height,E=R.x,D=R.y;F.attr("transform",`translate(${-T/2-E},${d?h.height/2+C/2-P/2-D:-h.height/2-C/2-P/2-D})`),F.attr("style",`color: ${m.get("stroke")??p};`)}return u.attr("transform",`translate(${-h.width/2-(h.x-(h.left??0))},${d?-L/2:L/2-h.height})`),B.attr("transform",`translate(0,${d?h.height/2+C/2:-h.height/2-C/2})`),yt(t,O),t.intersect=function(F){if(X.info("iconSquare intersect",t,F),!t.label)return ht.rect(t,F);const R=t.x??0,T=t.y??0,P=t.height??0;let E=[];return d?E=[{x:R-h.width/2,y:T-P/2},{x:R+h.width/2,y:T-P/2},{x:R+h.width/2,y:T-P/2+h.height+C},{x:R+g/2,y:T-P/2+h.height+C},{x:R+g/2,y:T+P/2},{x:R-g/2,y:T+P/2},{x:R-g/2,y:T-P/2+h.height+C},{x:R-h.width/2,y:T-P/2+h.height+C}]:E=[{x:R-g/2,y:T-P/2},{x:R+g/2,y:T-P/2},{x:R+g/2,y:T-P/2+f},{x:R+h.width/2,y:T-P/2+f},{x:R+h.width/2/2,y:T+P/2},{x:R-h.width/2,y:T+P/2},{x:R-h.width/2,y:T-P/2+f},{x:R-g/2,y:T-P/2+f}],ht.polygon(t,E,F)},c}x(SR,"icon");async function TR(e,t,{config:{themeVariables:i,flowchart:n}}){const{labelStyles:r}=mt(t);t.labelStyle=r;const s=t.assetHeight??48,o=t.assetWidth??48,a=Math.max(s,o),l=n?.wrappingWidth;t.width=Math.max(a,l??0);const{shapeSvg:c,bbox:h,label:u}=await At(e,t,"icon-shape default"),d=20,f=t.label?8:0,g=t.pos==="t",{nodeBorder:p,mainBkg:m}=i,{stylesMap:y}=il(t),_=gt.svg(c),C=pt(t,{});t.look!=="handDrawn"&&(C.roughness=0,C.fillStyle="solid");const b=y.get("fill");C.stroke=b??m;const v=c.append("g");t.icon&&v.html(`<g>${await mh(t.icon,{height:a,width:a,fallbackPrefix:""})}</g>`);const S=v.node().getBBox(),w=S.width,L=S.height,A=S.x,B=S.y,O=Math.max(w,L)*Math.SQRT2+d*2,F=_.circle(0,0,O,C),R=Math.max(O,h.width),T=O+h.height+f,P=_.rectangle(-R/2,-T/2,R,T,{...C,fill:"transparent",stroke:"none"}),E=c.insert(()=>F,":first-child"),D=c.insert(()=>P);return v.attr("transform",`translate(${-w/2-A},${g?h.height/2+f/2-L/2-B:-h.height/2-f/2-L/2-B})`),v.attr("style",`color: ${y.get("stroke")??p};`),u.attr("transform",`translate(${-h.width/2-(h.x-(h.left??0))},${g?-T/2:T/2-h.height})`),E.attr("transform",`translate(0,${g?h.height/2+f/2:-h.height/2-f/2})`),yt(t,D),t.intersect=function(M){return X.info("iconSquare intersect",t,M),ht.rect(t,M)},c}x(TR,"iconCircle");async function ER(e,t,{config:{themeVariables:i,flowchart:n}}){const{labelStyles:r}=mt(t);t.labelStyle=r;const s=t.assetHeight??48,o=t.assetWidth??48,a=Math.max(s,o),l=n?.wrappingWidth;t.width=Math.max(a,l??0);const{shapeSvg:c,bbox:h,halfPadding:u,label:d}=await At(e,t,"icon-shape default"),f=t.pos==="t",g=a+u*2,p=a+u*2,{nodeBorder:m,mainBkg:y}=i,{stylesMap:_}=il(t),C=-p/2,b=-g/2,v=t.label?8:0,S=gt.svg(c),w=pt(t,{});t.look!=="handDrawn"&&(w.roughness=0,w.fillStyle="solid");const L=_.get("fill");w.stroke=L??y;const A=S.path(Ds(C,b,p,g,5),w),B=Math.max(p,h.width),O=g+h.height+v,F=S.rectangle(-B/2,-O/2,B,O,{...w,fill:"transparent",stroke:"none"}),R=c.insert(()=>A,":first-child").attr("class","icon-shape2"),T=c.insert(()=>F);if(t.icon){const P=c.append("g");P.html(`<g>${await mh(t.icon,{height:a,width:a,fallbackPrefix:""})}</g>`);const E=P.node().getBBox(),D=E.width,M=E.height,j=E.x,Y=E.y;P.attr("transform",`translate(${-D/2-j},${f?h.height/2+v/2-M/2-Y:-h.height/2-v/2-M/2-Y})`),P.attr("style",`color: ${_.get("stroke")??m};`)}return d.attr("transform",`translate(${-h.width/2-(h.x-(h.left??0))},${f?-O/2:O/2-h.height})`),R.attr("transform",`translate(0,${f?h.height/2+v/2:-h.height/2-v/2})`),yt(t,T),t.intersect=function(P){if(X.info("iconSquare intersect",t,P),!t.label)return ht.rect(t,P);const E=t.x??0,D=t.y??0,M=t.height??0;let j=[];return f?j=[{x:E-h.width/2,y:D-M/2},{x:E+h.width/2,y:D-M/2},{x:E+h.width/2,y:D-M/2+h.height+v},{x:E+p/2,y:D-M/2+h.height+v},{x:E+p/2,y:D+M/2},{x:E-p/2,y:D+M/2},{x:E-p/2,y:D-M/2+h.height+v},{x:E-h.width/2,y:D-M/2+h.height+v}]:j=[{x:E-p/2,y:D-M/2},{x:E+p/2,y:D-M/2},{x:E+p/2,y:D-M/2+g},{x:E+h.width/2,y:D-M/2+g},{x:E+h.width/2/2,y:D+M/2},{x:E-h.width/2,y:D+M/2},{x:E-h.width/2,y:D-M/2+g},{x:E-p/2,y:D-M/2+g}],ht.polygon(t,j,P)},c}x(ER,"iconRounded");async function kR(e,t,{config:{themeVariables:i,flowchart:n}}){const{labelStyles:r}=mt(t);t.labelStyle=r;const s=t.assetHeight??48,o=t.assetWidth??48,a=Math.max(s,o),l=n?.wrappingWidth;t.width=Math.max(a,l??0);const{shapeSvg:c,bbox:h,halfPadding:u,label:d}=await At(e,t,"icon-shape default"),f=t.pos==="t",g=a+u*2,p=a+u*2,{nodeBorder:m,mainBkg:y}=i,{stylesMap:_}=il(t),C=-p/2,b=-g/2,v=t.label?8:0,S=gt.svg(c),w=pt(t,{});t.look!=="handDrawn"&&(w.roughness=0,w.fillStyle="solid");const L=_.get("fill");w.stroke=L??y;const A=S.path(Ds(C,b,p,g,.1),w),B=Math.max(p,h.width),O=g+h.height+v,F=S.rectangle(-B/2,-O/2,B,O,{...w,fill:"transparent",stroke:"none"}),R=c.insert(()=>A,":first-child"),T=c.insert(()=>F);if(t.icon){const P=c.append("g");P.html(`<g>${await mh(t.icon,{height:a,width:a,fallbackPrefix:""})}</g>`);const E=P.node().getBBox(),D=E.width,M=E.height,j=E.x,Y=E.y;P.attr("transform",`translate(${-D/2-j},${f?h.height/2+v/2-M/2-Y:-h.height/2-v/2-M/2-Y})`),P.attr("style",`color: ${_.get("stroke")??m};`)}return d.attr("transform",`translate(${-h.width/2-(h.x-(h.left??0))},${f?-O/2:O/2-h.height})`),R.attr("transform",`translate(0,${f?h.height/2+v/2:-h.height/2-v/2})`),yt(t,T),t.intersect=function(P){if(X.info("iconSquare intersect",t,P),!t.label)return ht.rect(t,P);const E=t.x??0,D=t.y??0,M=t.height??0;let j=[];return f?j=[{x:E-h.width/2,y:D-M/2},{x:E+h.width/2,y:D-M/2},{x:E+h.width/2,y:D-M/2+h.height+v},{x:E+p/2,y:D-M/2+h.height+v},{x:E+p/2,y:D+M/2},{x:E-p/2,y:D+M/2},{x:E-p/2,y:D-M/2+h.height+v},{x:E-h.width/2,y:D-M/2+h.height+v}]:j=[{x:E-p/2,y:D-M/2},{x:E+p/2,y:D-M/2},{x:E+p/2,y:D-M/2+g},{x:E+h.width/2,y:D-M/2+g},{x:E+h.width/2/2,y:D+M/2},{x:E-h.width/2,y:D+M/2},{x:E-h.width/2,y:D-M/2+g},{x:E-p/2,y:D-M/2+g}],ht.polygon(t,j,P)},c}x(kR,"iconSquare");async function RR(e,t,{config:{flowchart:i}}){const n=new Image;n.src=t?.img??"",await n.decode();const r=Number(n.naturalWidth.toString().replace("px","")),s=Number(n.naturalHeight.toString().replace("px",""));t.imageAspectRatio=r/s;const{labelStyles:o}=mt(t);t.labelStyle=o;const a=i?.wrappingWidth;t.defaultWidth=i?.wrappingWidth;const l=Math.max(t.label?a??0:0,t?.assetWidth??r),c=t.constraint==="on"&&t?.assetHeight?t.assetHeight*t.imageAspectRatio:l,h=t.constraint==="on"?c/t.imageAspectRatio:t?.assetHeight??s;t.width=Math.max(c,a??0);const{shapeSvg:u,bbox:d,label:f}=await At(e,t,"image-shape default"),g=t.pos==="t",p=-c/2,m=-h/2,y=t.label?8:0,_=gt.svg(u),C=pt(t,{});t.look!=="handDrawn"&&(C.roughness=0,C.fillStyle="solid");const b=_.rectangle(p,m,c,h,C),v=Math.max(c,d.width),S=h+d.height+y,w=_.rectangle(-v/2,-S/2,v,S,{...C,fill:"none",stroke:"none"}),L=u.insert(()=>b,":first-child"),A=u.insert(()=>w);if(t.img){const B=u.append("image");B.attr("href",t.img),B.attr("width",c),B.attr("height",h),B.attr("preserveAspectRatio","none"),B.attr("transform",`translate(${-c/2},${g?S/2-h:-S/2})`)}return f.attr("transform",`translate(${-d.width/2-(d.x-(d.left??0))},${g?-h/2-d.height/2-y/2:h/2-d.height/2+y/2})`),L.attr("transform",`translate(0,${g?d.height/2+y/2:-d.height/2-y/2})`),yt(t,A),t.intersect=function(B){if(X.info("iconSquare intersect",t,B),!t.label)return ht.rect(t,B);const O=t.x??0,F=t.y??0,R=t.height??0;let T=[];return g?T=[{x:O-d.width/2,y:F-R/2},{x:O+d.width/2,y:F-R/2},{x:O+d.width/2,y:F-R/2+d.height+y},{x:O+c/2,y:F-R/2+d.height+y},{x:O+c/2,y:F+R/2},{x:O-c/2,y:F+R/2},{x:O-c/2,y:F-R/2+d.height+y},{x:O-d.width/2,y:F-R/2+d.height+y}]:T=[{x:O-c/2,y:F-R/2},{x:O+c/2,y:F-R/2},{x:O+c/2,y:F-R/2+h},{x:O+d.width/2,y:F-R/2+h},{x:O+d.width/2/2,y:F+R/2},{x:O-d.width/2,y:F+R/2},{x:O-d.width/2,y:F-R/2+h},{x:O-c/2,y:F-R/2+h}],ht.polygon(t,T,B)},u}x(RR,"imageSquare");async function AR(e,t){const{labelStyles:i,nodeStyles:n}=mt(t);t.labelStyle=i;const{shapeSvg:r,bbox:s}=await At(e,t,kt(t)),o=Math.max(s.width+(t.padding??0)*2,t?.width??0),a=Math.max(s.height+(t.padding??0)*2,t?.height??0),l=[{x:0,y:0},{x:o,y:0},{x:o+3*a/6,y:-a},{x:-3*a/6,y:-a}];let c;const{cssStyles:h}=t;if(t.look==="handDrawn"){const u=gt.svg(r),d=pt(t,{}),f=Ht(l),g=u.path(f,d);c=r.insert(()=>g,":first-child").attr("transform",`translate(${-o/2}, ${a/2})`),h&&c.attr("style",h)}else c=Bs(r,o,a,l);return n&&c.attr("style",n),t.width=o,t.height=a,yt(t,c),t.intersect=function(u){return ht.polygon(t,l,u)},r}x(AR,"inv_trapezoid");async function qf(e,t,i){const{labelStyles:n,nodeStyles:r}=mt(t);t.labelStyle=n;const{shapeSvg:s,bbox:o}=await At(e,t,kt(t)),a=Math.max(o.width+i.labelPaddingX*2,t?.width||0),l=Math.max(o.height+i.labelPaddingY*2,t?.height||0),c=-a/2,h=-l/2;let u,{rx:d,ry:f}=t;const{cssStyles:g}=t;if(i?.rx&&i.ry&&(d=i.rx,f=i.ry),t.look==="handDrawn"){const p=gt.svg(s),m=pt(t,{}),y=d||f?p.path(Ds(c,h,a,l,d||0),m):p.rectangle(c,h,a,l,m);u=s.insert(()=>y,":first-child"),u.attr("class","basic label-container").attr("style",fi(g))}else u=s.insert("rect",":first-child"),u.attr("class","basic label-container").attr("style",r).attr("rx",fi(d)).attr("ry",fi(f)).attr("x",c).attr("y",h).attr("width",a).attr("height",l);return yt(t,u),t.calcIntersect=function(p,m){return ht.rect(p,m)},t.intersect=function(p){return ht.rect(t,p)},s}x(qf,"drawRect");async function LR(e,t){const{shapeSvg:i,bbox:n,label:r}=await At(e,t,"label"),s=i.insert("rect",":first-child");return s.attr("width",.1).attr("height",.1),i.attr("class","label edgeLabel"),r.attr("transform",`translate(${-(n.width/2)-(n.x-(n.left??0))}, ${-(n.height/2)-(n.y-(n.top??0))})`),yt(t,s),t.intersect=function(l){return ht.rect(t,l)},i}x(LR,"labelRect");async function MR(e,t){const{labelStyles:i,nodeStyles:n}=mt(t);t.labelStyle=i;const{shapeSvg:r,bbox:s}=await At(e,t,kt(t)),o=Math.max(s.width+(t.padding??0),t?.width??0),a=Math.max(s.height+(t.padding??0),t?.height??0),l=[{x:0,y:0},{x:o+3*a/6,y:0},{x:o,y:-a},{x:-(3*a)/6,y:-a}];let c;const{cssStyles:h}=t;if(t.look==="handDrawn"){const u=gt.svg(r),d=pt(t,{}),f=Ht(l),g=u.path(f,d);c=r.insert(()=>g,":first-child").attr("transform",`translate(${-o/2}, ${a/2})`),h&&c.attr("style",h)}else c=Bs(r,o,a,l);return n&&c.attr("style",n),t.width=o,t.height=a,yt(t,c),t.intersect=function(u){return ht.polygon(t,l,u)},r}x(MR,"lean_left");async function IR(e,t){const{labelStyles:i,nodeStyles:n}=mt(t);t.labelStyle=i;const{shapeSvg:r,bbox:s}=await At(e,t,kt(t)),o=Math.max(s.width+(t.padding??0),t?.width??0),a=Math.max(s.height+(t.padding??0),t?.height??0),l=[{x:-3*a/6,y:0},{x:o,y:0},{x:o+3*a/6,y:-a},{x:0,y:-a}];let c;const{cssStyles:h}=t;if(t.look==="handDrawn"){const u=gt.svg(r),d=pt(t,{}),f=Ht(l),g=u.path(f,d);c=r.insert(()=>g,":first-child").attr("transform",`translate(${-o/2}, ${a/2})`),h&&c.attr("style",h)}else c=Bs(r,o,a,l);return n&&c.attr("style",n),t.width=o,t.height=a,yt(t,c),t.intersect=function(u){return ht.polygon(t,l,u)},r}x(IR,"lean_right");function PR(e,t){const{labelStyles:i,nodeStyles:n}=mt(t);t.label="",t.labelStyle=i;const r=e.insert("g").attr("class",kt(t)).attr("id",t.domId??t.id),{cssStyles:s}=t,o=Math.max(35,t?.width??0),a=Math.max(35,t?.height??0),l=7,c=[{x:o,y:0},{x:0,y:a+l/2},{x:o-2*l,y:a+l/2},{x:0,y:2*a},{x:o,y:a-l/2},{x:2*l,y:a-l/2}],h=gt.svg(r),u=pt(t,{});t.look!=="handDrawn"&&(u.roughness=0,u.fillStyle="solid");const d=Ht(c),f=h.path(d,u),g=r.insert(()=>f,":first-child");return s&&t.look!=="handDrawn"&&g.selectAll("path").attr("style",s),n&&t.look!=="handDrawn"&&g.selectAll("path").attr("style",n),g.attr("transform",`translate(-${o/2},${-a})`),yt(t,g),t.intersect=function(p){return X.info("lightningBolt intersect",t,p),ht.polygon(t,c,p)},r}x(PR,"lightningBolt");var PV=x((e,t,i,n,r,s,o)=>[`M${e},${t+s}`,`a${r},${s} 0,0,0 ${i},0`,`a${r},${s} 0,0,0 ${-i},0`,`l0,${n}`,`a${r},${s} 0,0,0 ${i},0`,`l0,${-n}`,`M${e},${t+s+o}`,`a${r},${s} 0,0,0 ${i},0`].join(" "),"createCylinderPathD"),FV=x((e,t,i,n,r,s,o)=>[`M${e},${t+s}`,`M${e+i},${t+s}`,`a${r},${s} 0,0,0 ${-i},0`,`l0,${n}`,`a${r},${s} 0,0,0 ${i},0`,`l0,${-n}`,`M${e},${t+s+o}`,`a${r},${s} 0,0,0 ${i},0`].join(" "),"createOuterCylinderPathD"),OV=x((e,t,i,n,r,s)=>[`M${e-i/2},${-n/2}`,`a${r},${s} 0,0,0 ${i},0`].join(" "),"createInnerCylinderPathD");async function FR(e,t){const{labelStyles:i,nodeStyles:n}=mt(t);t.labelStyle=i;const{shapeSvg:r,bbox:s,label:o}=await At(e,t,kt(t)),a=Math.max(s.width+(t.padding??0),t.width??0),l=a/2,c=l/(2.5+a/50),h=Math.max(s.height+c+(t.padding??0),t.height??0),u=h*.1;let d;const{cssStyles:f}=t;if(t.look==="handDrawn"){const g=gt.svg(r),p=FV(0,0,a,h,l,c,u),m=OV(0,c,a,h,l,c),y=pt(t,{}),_=g.path(p,y),C=g.path(m,y);r.insert(()=>C,":first-child").attr("class","line"),d=r.insert(()=>_,":first-child"),d.attr("class","basic label-container"),f&&d.attr("style",f)}else{const g=PV(0,0,a,h,l,c,u);d=r.insert("path",":first-child").attr("d",g).attr("class","basic label-container").attr("style",fi(f)).attr("style",n)}return d.attr("label-offset-y",c),d.attr("transform",`translate(${-a/2}, ${-(h/2+c)})`),yt(t,d),o.attr("transform",`translate(${-(s.width/2)-(s.x-(s.left??0))}, ${-(s.height/2)+c-(s.y-(s.top??0))})`),t.intersect=function(g){const p=ht.rect(t,g),m=p.x-(t.x??0);if(l!=0&&(Math.abs(m)<(t.width??0)/2||Math.abs(m)==(t.width??0)/2&&Math.abs(p.y-(t.y??0))>(t.height??0)/2-c)){let y=c*c*(1-m*m/(l*l));y>0&&(y=Math.sqrt(y)),y=c-y,g.y-(t.y??0)>0&&(y=-y),p.y+=y}return p},r}x(FR,"linedCylinder");async function OR(e,t){const{labelStyles:i,nodeStyles:n}=mt(t);t.labelStyle=i;const{shapeSvg:r,bbox:s,label:o}=await At(e,t,kt(t)),a=Math.max(s.width+(t.padding??0)*2,t?.width??0),l=Math.max(s.height+(t.padding??0)*2,t?.height??0),c=l/4,h=l+c,{cssStyles:u}=t,d=gt.svg(r),f=pt(t,{});t.look!=="handDrawn"&&(f.roughness=0,f.fillStyle="solid");const g=[{x:-a/2-a/2*.1,y:-h/2},{x:-a/2-a/2*.1,y:h/2},...Ls(-a/2-a/2*.1,h/2,a/2+a/2*.1,h/2,c,.8),{x:a/2+a/2*.1,y:-h/2},{x:-a/2-a/2*.1,y:-h/2},{x:-a/2,y:-h/2},{x:-a/2,y:h/2*1.1},{x:-a/2,y:-h/2}],p=d.polygon(g.map(y=>[y.x,y.y]),f),m=r.insert(()=>p,":first-child");return m.attr("class","basic label-container"),u&&t.look!=="handDrawn"&&m.selectAll("path").attr("style",u),n&&t.look!=="handDrawn"&&m.selectAll("path").attr("style",n),m.attr("transform",`translate(0,${-c/2})`),o.attr("transform",`translate(${-a/2+(t.padding??0)+a/2*.1/2-(s.x-(s.left??0))},${-l/2+(t.padding??0)-c/2-(s.y-(s.top??0))})`),yt(t,m),t.intersect=function(y){return ht.polygon(t,g,y)},r}x(OR,"linedWaveEdgedRect");async function DR(e,t){const{labelStyles:i,nodeStyles:n}=mt(t);t.labelStyle=i;const{shapeSvg:r,bbox:s,label:o}=await At(e,t,kt(t)),a=Math.max(s.width+(t.padding??0)*2,t?.width??0),l=Math.max(s.height+(t.padding??0)*2,t?.height??0),c=5,h=-a/2,u=-l/2,{cssStyles:d}=t,f=gt.svg(r),g=pt(t,{}),p=[{x:h-c,y:u+c},{x:h-c,y:u+l+c},{x:h+a-c,y:u+l+c},{x:h+a-c,y:u+l},{x:h+a,y:u+l},{x:h+a,y:u+l-c},{x:h+a+c,y:u+l-c},{x:h+a+c,y:u-c},{x:h+c,y:u-c},{x:h+c,y:u},{x:h,y:u},{x:h,y:u+c}],m=[{x:h,y:u+c},{x:h+a-c,y:u+c},{x:h+a-c,y:u+l},{x:h+a,y:u+l},{x:h+a,y:u},{x:h,y:u}];t.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const y=Ht(p),_=f.path(y,g),C=Ht(m),b=f.path(C,{...g,fill:"none"}),v=r.insert(()=>b,":first-child");return v.insert(()=>_,":first-child"),v.attr("class","basic label-container"),d&&t.look!=="handDrawn"&&v.selectAll("path").attr("style",d),n&&t.look!=="handDrawn"&&v.selectAll("path").attr("style",n),o.attr("transform",`translate(${-(s.width/2)-c-(s.x-(s.left??0))}, ${-(s.height/2)+c-(s.y-(s.top??0))})`),yt(t,v),t.intersect=function(S){return ht.polygon(t,p,S)},r}x(DR,"multiRect");async function BR(e,t){const{labelStyles:i,nodeStyles:n}=mt(t);t.labelStyle=i;const{shapeSvg:r,bbox:s,label:o}=await At(e,t,kt(t)),a=Math.max(s.width+(t.padding??0)*2,t?.width??0),l=Math.max(s.height+(t.padding??0)*2,t?.height??0),c=l/4,h=l+c,u=-a/2,d=-h/2,f=5,{cssStyles:g}=t,p=Ls(u-f,d+h+f,u+a-f,d+h+f,c,.8),m=p?.[p.length-1],y=[{x:u-f,y:d+f},{x:u-f,y:d+h+f},...p,{x:u+a-f,y:m.y-f},{x:u+a,y:m.y-f},{x:u+a,y:m.y-2*f},{x:u+a+f,y:m.y-2*f},{x:u+a+f,y:d-f},{x:u+f,y:d-f},{x:u+f,y:d},{x:u,y:d},{x:u,y:d+f}],_=[{x:u,y:d+f},{x:u+a-f,y:d+f},{x:u+a-f,y:m.y-f},{x:u+a,y:m.y-f},{x:u+a,y:d},{x:u,y:d}],C=gt.svg(r),b=pt(t,{});t.look!=="handDrawn"&&(b.roughness=0,b.fillStyle="solid");const v=Ht(y),S=C.path(v,b),w=Ht(_),L=C.path(w,b),A=r.insert(()=>S,":first-child");return A.insert(()=>L),A.attr("class","basic label-container"),g&&t.look!=="handDrawn"&&A.selectAll("path").attr("style",g),n&&t.look!=="handDrawn"&&A.selectAll("path").attr("style",n),A.attr("transform",`translate(0,${-c/2})`),o.attr("transform",`translate(${-(s.width/2)-f-(s.x-(s.left??0))}, ${-(s.height/2)+f-c/2-(s.y-(s.top??0))})`),yt(t,A),t.intersect=function(B){return ht.polygon(t,y,B)},r}x(BR,"multiWaveEdgedRectangle");async function NR(e,t,{config:{themeVariables:i}}){const{labelStyles:n,nodeStyles:r}=mt(t);t.labelStyle=n,t.useHtmlLabels||ui().flowchart?.htmlLabels!==!1||(t.centerLabel=!0);const{shapeSvg:o,bbox:a,label:l}=await At(e,t,kt(t)),c=Math.max(a.width+(t.padding??0)*2,t?.width??0),h=Math.max(a.height+(t.padding??0)*2,t?.height??0),u=-c/2,d=-h/2,{cssStyles:f}=t,g=gt.svg(o),p=pt(t,{fill:i.noteBkgColor,stroke:i.noteBorderColor});t.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const m=g.rectangle(u,d,c,h,p),y=o.insert(()=>m,":first-child");return y.attr("class","basic label-container"),f&&t.look!=="handDrawn"&&y.selectAll("path").attr("style",f),r&&t.look!=="handDrawn"&&y.selectAll("path").attr("style",r),l.attr("transform",`translate(${-a.width/2-(a.x-(a.left??0))}, ${-(a.height/2)-(a.y-(a.top??0))})`),yt(t,y),t.intersect=function(_){return ht.rect(t,_)},o}x(NR,"note");var DV=x((e,t,i)=>[`M${e+i/2},${t}`,`L${e+i},${t-i/2}`,`L${e+i/2},${t-i}`,`L${e},${t-i/2}`,"Z"].join(" "),"createDecisionBoxPathD");async function $R(e,t){const{labelStyles:i,nodeStyles:n}=mt(t);t.labelStyle=i;const{shapeSvg:r,bbox:s}=await At(e,t,kt(t)),o=s.width+t.padding,a=s.height+t.padding,l=o+a,c=.5,h=[{x:l/2,y:0},{x:l,y:-l/2},{x:l/2,y:-l},{x:0,y:-l/2}];let u;const{cssStyles:d}=t;if(t.look==="handDrawn"){const f=gt.svg(r),g=pt(t,{}),p=DV(0,0,l),m=f.path(p,g);u=r.insert(()=>m,":first-child").attr("transform",`translate(${-l/2+c}, ${l/2})`),d&&u.attr("style",d)}else u=Bs(r,l,l,h),u.attr("transform",`translate(${-l/2+c}, ${l/2})`);return n&&u.attr("style",n),yt(t,u),t.calcIntersect=function(f,g){const p=f.width,m=[{x:p/2,y:0},{x:p,y:-p/2},{x:p/2,y:-p},{x:0,y:-p/2}],y=ht.polygon(f,m,g);return{x:y.x-.5,y:y.y-.5}},t.intersect=function(f){return this.calcIntersect(t,f)},r}x($R,"question");async function zR(e,t){const{labelStyles:i,nodeStyles:n}=mt(t);t.labelStyle=i;const{shapeSvg:r,bbox:s,label:o}=await At(e,t,kt(t)),a=Math.max(s.width+(t.padding??0),t?.width??0),l=Math.max(s.height+(t.padding??0),t?.height??0),c=-a/2,h=-l/2,u=h/2,d=[{x:c+u,y:h},{x:c,y:0},{x:c+u,y:-h},{x:-c,y:-h},{x:-c,y:h}],{cssStyles:f}=t,g=gt.svg(r),p=pt(t,{});t.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const m=Ht(d),y=g.path(m,p),_=r.insert(()=>y,":first-child");return _.attr("class","basic label-container"),f&&t.look!=="handDrawn"&&_.selectAll("path").attr("style",f),n&&t.look!=="handDrawn"&&_.selectAll("path").attr("style",n),_.attr("transform",`translate(${-u/2},0)`),o.attr("transform",`translate(${-u/2-s.width/2-(s.x-(s.left??0))}, ${-(s.height/2)-(s.y-(s.top??0))})`),yt(t,_),t.intersect=function(C){return ht.polygon(t,d,C)},r}x(zR,"rect_left_inv_arrow");async function GR(e,t){const{labelStyles:i,nodeStyles:n}=mt(t);t.labelStyle=i;let r;t.cssClasses?r="node "+t.cssClasses:r="node default";const s=e.insert("g").attr("class",r).attr("id",t.domId||t.id),o=s.insert("g"),a=s.insert("g").attr("class","label").attr("style",n),l=t.description,c=t.label,h=a.node().appendChild(await co(c,t.labelStyle,!0,!0));let u={width:0,height:0};if(He(ne()?.flowchart?.htmlLabels)){const L=h.children[0],A=Xt(h);u=L.getBoundingClientRect(),A.attr("width",u.width),A.attr("height",u.height)}X.info("Text 2",l);const d=l||[],f=h.getBBox(),g=a.node().appendChild(await co(d.join?d.join("<br/>"):d,t.labelStyle,!0,!0)),p=g.children[0],m=Xt(g);u=p.getBoundingClientRect(),m.attr("width",u.width),m.attr("height",u.height);const y=(t.padding||0)/2;Xt(g).attr("transform","translate( "+(u.width>f.width?0:(f.width-u.width)/2)+", "+(f.height+y+5)+")"),Xt(h).attr("transform","translate( "+(u.width<f.width?0:-(f.width-u.width)/2)+", 0)"),u=a.node().getBBox(),a.attr("transform","translate("+-u.width/2+", "+(-u.height/2-y+3)+")");const _=u.width+(t.padding||0),C=u.height+(t.padding||0),b=-u.width/2-y,v=-u.height/2-y;let S,w;if(t.look==="handDrawn"){const L=gt.svg(s),A=pt(t,{}),B=L.path(Ds(b,v,_,C,t.rx||0),A),O=L.line(-u.width/2-y,-u.height/2-y+f.height+y,u.width/2+y,-u.height/2-y+f.height+y,A);w=s.insert(()=>(X.debug("Rough node insert CXC",B),O),":first-child"),S=s.insert(()=>(X.debug("Rough node insert CXC",B),B),":first-child")}else S=o.insert("rect",":first-child"),w=o.insert("line"),S.attr("class","outer title-state").attr("style",n).attr("x",-u.width/2-y).attr("y",-u.height/2-y).attr("width",u.width+(t.padding||0)).attr("height",u.height+(t.padding||0)),w.attr("class","divider").attr("x1",-u.width/2-y).attr("x2",u.width/2+y).attr("y1",-u.height/2-y+f.height+y).attr("y2",-u.height/2-y+f.height+y);return yt(t,S),t.intersect=function(L){return ht.rect(t,L)},s}x(GR,"rectWithTitle");function Hl(e,t,i,n,r,s,o){const l=(e+i)/2,c=(t+n)/2,h=Math.atan2(n-t,i-e),u=(i-e)/2,d=(n-t)/2,f=u/r,g=d/s,p=Math.sqrt(f**2+g**2);if(p>1)throw new Error("The given radii are too small to create an arc between the points.");const m=Math.sqrt(1-p**2),y=l+m*s*Math.sin(h)*(o?-1:1),_=c-m*r*Math.cos(h)*(o?-1:1),C=Math.atan2((t-_)/s,(e-y)/r);let v=Math.atan2((n-_)/s,(i-y)/r)-C;o&&v<0&&(v+=2*Math.PI),!o&&v>0&&(v-=2*Math.PI);const S=[];for(let w=0;w<20;w++){const L=w/19,A=C+L*v,B=y+r*Math.cos(A),O=_+s*Math.sin(A);S.push({x:B,y:O})}return S}x(Hl,"generateArcPoints");async function WR(e,t){const{labelStyles:i,nodeStyles:n}=mt(t);t.labelStyle=i;const{shapeSvg:r,bbox:s}=await At(e,t,kt(t)),o=t?.padding??0,a=t?.padding??0,l=(t?.width?t?.width:s.width)+o*2,c=(t?.height?t?.height:s.height)+a*2,h=t.radius||5,u=t.taper||5,{cssStyles:d}=t,f=gt.svg(r),g=pt(t,{});t.stroke&&(g.stroke=t.stroke),t.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const p=[{x:-l/2+u,y:-c/2},{x:l/2-u,y:-c/2},...Hl(l/2-u,-c/2,l/2,-c/2+u,h,h,!0),{x:l/2,y:-c/2+u},{x:l/2,y:c/2-u},...Hl(l/2,c/2-u,l/2-u,c/2,h,h,!0),{x:l/2-u,y:c/2},{x:-l/2+u,y:c/2},...Hl(-l/2+u,c/2,-l/2,c/2-u,h,h,!0),{x:-l/2,y:c/2-u},{x:-l/2,y:-c/2+u},...Hl(-l/2,-c/2+u,-l/2+u,-c/2,h,h,!0)],m=Ht(p),y=f.path(m,g),_=r.insert(()=>y,":first-child");return _.attr("class","basic label-container outer-path"),d&&t.look!=="handDrawn"&&_.selectChildren("path").attr("style",d),n&&t.look!=="handDrawn"&&_.selectChildren("path").attr("style",n),yt(t,_),t.intersect=function(C){return ht.polygon(t,p,C)},r}x(WR,"roundedRect");async function jR(e,t){const{labelStyles:i,nodeStyles:n}=mt(t);t.labelStyle=i;const{shapeSvg:r,bbox:s,label:o}=await At(e,t,kt(t)),a=t?.padding??0,l=Math.max(s.width+(t.padding??0)*2,t?.width??0),c=Math.max(s.height+(t.padding??0)*2,t?.height??0),h=-s.width/2-a,u=-s.height/2-a,{cssStyles:d}=t,f=gt.svg(r),g=pt(t,{});t.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const p=[{x:h,y:u},{x:h+l+8,y:u},{x:h+l+8,y:u+c},{x:h-8,y:u+c},{x:h-8,y:u},{x:h,y:u},{x:h,y:u+c}],m=f.polygon(p.map(_=>[_.x,_.y]),g),y=r.insert(()=>m,":first-child");return y.attr("class","basic label-container").attr("style",fi(d)),n&&t.look!=="handDrawn"&&y.selectAll("path").attr("style",n),d&&t.look!=="handDrawn"&&y.selectAll("path").attr("style",n),o.attr("transform",`translate(${-l/2+4+(t.padding??0)-(s.x-(s.left??0))},${-c/2+(t.padding??0)-(s.y-(s.top??0))})`),yt(t,y),t.intersect=function(_){return ht.rect(t,_)},r}x(jR,"shadedProcess");async function HR(e,t){const{labelStyles:i,nodeStyles:n}=mt(t);t.labelStyle=i;const{shapeSvg:r,bbox:s,label:o}=await At(e,t,kt(t)),a=Math.max(s.width+(t.padding??0)*2,t?.width??0),l=Math.max(s.height+(t.padding??0)*2,t?.height??0),c=-a/2,h=-l/2,{cssStyles:u}=t,d=gt.svg(r),f=pt(t,{});t.look!=="handDrawn"&&(f.roughness=0,f.fillStyle="solid");const g=[{x:c,y:h},{x:c,y:h+l},{x:c+a,y:h+l},{x:c+a,y:h-l/2}],p=Ht(g),m=d.path(p,f),y=r.insert(()=>m,":first-child");return y.attr("class","basic label-container"),u&&t.look!=="handDrawn"&&y.selectChildren("path").attr("style",u),n&&t.look!=="handDrawn"&&y.selectChildren("path").attr("style",n),y.attr("transform",`translate(0, ${l/4})`),o.attr("transform",`translate(${-a/2+(t.padding??0)-(s.x-(s.left??0))}, ${-l/4+(t.padding??0)-(s.y-(s.top??0))})`),yt(t,y),t.intersect=function(_){return ht.polygon(t,g,_)},r}x(HR,"slopedRect");async function VR(e,t){const i={rx:0,ry:0,labelPaddingX:t.labelPaddingX??(t?.padding||0)*2,labelPaddingY:(t?.padding||0)*1};return qf(e,t,i)}x(VR,"squareRect");async function UR(e,t){const{labelStyles:i,nodeStyles:n}=mt(t);t.labelStyle=i;const{shapeSvg:r,bbox:s}=await At(e,t,kt(t)),o=s.height+t.padding,a=s.width+o/4+t.padding,l=o/2,{cssStyles:c}=t,h=gt.svg(r),u=pt(t,{});t.look!=="handDrawn"&&(u.roughness=0,u.fillStyle="solid");const d=[{x:-a/2+l,y:-o/2},{x:a/2-l,y:-o/2},...Wc(-a/2+l,0,l,50,90,270),{x:a/2-l,y:o/2},...Wc(a/2-l,0,l,50,270,450)],f=Ht(d),g=h.path(f,u),p=r.insert(()=>g,":first-child");return p.attr("class","basic label-container outer-path"),c&&t.look!=="handDrawn"&&p.selectChildren("path").attr("style",c),n&&t.look!=="handDrawn"&&p.selectChildren("path").attr("style",n),yt(t,p),t.intersect=function(m){return ht.polygon(t,d,m)},r}x(UR,"stadium");async function qR(e,t){return qf(e,t,{rx:5,ry:5})}x(qR,"state");function YR(e,t,{config:{themeVariables:i}}){const{labelStyles:n,nodeStyles:r}=mt(t);t.labelStyle=n;const{cssStyles:s}=t,{lineColor:o,stateBorder:a,nodeBorder:l}=i,c=e.insert("g").attr("class","node default").attr("id",t.domId||t.id),h=gt.svg(c),u=pt(t,{});t.look!=="handDrawn"&&(u.roughness=0,u.fillStyle="solid");const d=h.circle(0,0,14,{...u,stroke:o,strokeWidth:2}),f=a??l,g=h.circle(0,0,5,{...u,fill:f,stroke:f,strokeWidth:2,fillStyle:"solid"}),p=c.insert(()=>d,":first-child");return p.insert(()=>g),s&&p.selectAll("path").attr("style",s),r&&p.selectAll("path").attr("style",r),yt(t,p),t.intersect=function(m){return ht.circle(t,7,m)},c}x(YR,"stateEnd");function XR(e,t,{config:{themeVariables:i}}){const{lineColor:n}=i,r=e.insert("g").attr("class","node default").attr("id",t.domId||t.id);let s;if(t.look==="handDrawn"){const a=gt.svg(r).circle(0,0,14,ZW(n));s=r.insert(()=>a),s.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14)}else s=r.insert("circle",":first-child"),s.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14);return yt(t,s),t.intersect=function(o){return ht.circle(t,7,o)},r}x(XR,"stateStart");async function KR(e,t){const{labelStyles:i,nodeStyles:n}=mt(t);t.labelStyle=i;const{shapeSvg:r,bbox:s}=await At(e,t,kt(t)),o=(t?.padding||0)/2,a=s.width+t.padding,l=s.height+t.padding,c=-s.width/2-o,h=-s.height/2-o,u=[{x:0,y:0},{x:a,y:0},{x:a,y:-l},{x:0,y:-l},{x:0,y:0},{x:-8,y:0},{x:a+8,y:0},{x:a+8,y:-l},{x:-8,y:-l},{x:-8,y:0}];if(t.look==="handDrawn"){const d=gt.svg(r),f=pt(t,{}),g=d.rectangle(c-8,h,a+16,l,f),p=d.line(c,h,c,h+l,f),m=d.line(c+a,h,c+a,h+l,f);r.insert(()=>p,":first-child"),r.insert(()=>m,":first-child");const y=r.insert(()=>g,":first-child"),{cssStyles:_}=t;y.attr("class","basic label-container").attr("style",fi(_)),yt(t,y)}else{const d=Bs(r,a,l,u);n&&d.attr("style",n),yt(t,d)}return t.intersect=function(d){return ht.polygon(t,u,d)},r}x(KR,"subroutine");async function ZR(e,t){const{labelStyles:i,nodeStyles:n}=mt(t);t.labelStyle=i;const{shapeSvg:r,bbox:s}=await At(e,t,kt(t)),o=Math.max(s.width+(t.padding??0)*2,t?.width??0),a=Math.max(s.height+(t.padding??0)*2,t?.height??0),l=-o/2,c=-a/2,h=.2*a,u=.2*a,{cssStyles:d}=t,f=gt.svg(r),g=pt(t,{}),p=[{x:l-h/2,y:c},{x:l+o+h/2,y:c},{x:l+o+h/2,y:c+a},{x:l-h/2,y:c+a}],m=[{x:l+o-h/2,y:c+a},{x:l+o+h/2,y:c+a},{x:l+o+h/2,y:c+a-u}];t.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const y=Ht(p),_=f.path(y,g),C=Ht(m),b=f.path(C,{...g,fillStyle:"solid"}),v=r.insert(()=>b,":first-child");return v.insert(()=>_,":first-child"),v.attr("class","basic label-container"),d&&t.look!=="handDrawn"&&v.selectAll("path").attr("style",d),n&&t.look!=="handDrawn"&&v.selectAll("path").attr("style",n),yt(t,v),t.intersect=function(S){return ht.polygon(t,p,S)},r}x(ZR,"taggedRect");async function JR(e,t){const{labelStyles:i,nodeStyles:n}=mt(t);t.labelStyle=i;const{shapeSvg:r,bbox:s,label:o}=await At(e,t,kt(t)),a=Math.max(s.width+(t.padding??0)*2,t?.width??0),l=Math.max(s.height+(t.padding??0)*2,t?.height??0),c=l/4,h=.2*a,u=.2*l,d=l+c,{cssStyles:f}=t,g=gt.svg(r),p=pt(t,{});t.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const m=[{x:-a/2-a/2*.1,y:d/2},...Ls(-a/2-a/2*.1,d/2,a/2+a/2*.1,d/2,c,.8),{x:a/2+a/2*.1,y:-d/2},{x:-a/2-a/2*.1,y:-d/2}],y=-a/2+a/2*.1,_=-d/2-u*.4,C=[{x:y+a-h,y:(_+l)*1.4},{x:y+a,y:_+l-u},{x:y+a,y:(_+l)*.9},...Ls(y+a,(_+l)*1.3,y+a-h,(_+l)*1.5,-l*.03,.5)],b=Ht(m),v=g.path(b,p),S=Ht(C),w=g.path(S,{...p,fillStyle:"solid"}),L=r.insert(()=>w,":first-child");return L.insert(()=>v,":first-child"),L.attr("class","basic label-container"),f&&t.look!=="handDrawn"&&L.selectAll("path").attr("style",f),n&&t.look!=="handDrawn"&&L.selectAll("path").attr("style",n),L.attr("transform",`translate(0,${-c/2})`),o.attr("transform",`translate(${-a/2+(t.padding??0)-(s.x-(s.left??0))},${-l/2+(t.padding??0)-c/2-(s.y-(s.top??0))})`),yt(t,L),t.intersect=function(A){return ht.polygon(t,m,A)},r}x(JR,"taggedWaveEdgedRectangle");async function QR(e,t){const{labelStyles:i,nodeStyles:n}=mt(t);t.labelStyle=i;const{shapeSvg:r,bbox:s}=await At(e,t,kt(t)),o=Math.max(s.width+t.padding,t?.width||0),a=Math.max(s.height+t.padding,t?.height||0),l=-o/2,c=-a/2,h=r.insert("rect",":first-child");return h.attr("class","text").attr("style",n).attr("rx",0).attr("ry",0).attr("x",l).attr("y",c).attr("width",o).attr("height",a),yt(t,h),t.intersect=function(u){return ht.rect(t,u)},r}x(QR,"text");var BV=x((e,t,i,n,r,s)=>`M${e},${t}
    a${r},${s} 0,0,1 0,${-n}
    l${i},0
    a${r},${s} 0,0,1 0,${n}
    M${i},${-n}
    a${r},${s} 0,0,0 0,${n}
    l${-i},0`,"createCylinderPathD"),NV=x((e,t,i,n,r,s)=>[`M${e},${t}`,`M${e+i},${t}`,`a${r},${s} 0,0,0 0,${-n}`,`l${-i},0`,`a${r},${s} 0,0,0 0,${n}`,`l${i},0`].join(" "),"createOuterCylinderPathD"),$V=x((e,t,i,n,r,s)=>[`M${e+i/2},${-n/2}`,`a${r},${s} 0,0,0 0,${n}`].join(" "),"createInnerCylinderPathD");async function tA(e,t){const{labelStyles:i,nodeStyles:n}=mt(t);t.labelStyle=i;const{shapeSvg:r,bbox:s,label:o,halfPadding:a}=await At(e,t,kt(t)),l=t.look==="neo"?a*2:a,c=s.height+l,h=c/2,u=h/(2.5+c/50),d=s.width+u+l,{cssStyles:f}=t;let g;if(t.look==="handDrawn"){const p=gt.svg(r),m=NV(0,0,d,c,u,h),y=$V(0,0,d,c,u,h),_=p.path(m,pt(t,{})),C=p.path(y,pt(t,{fill:"none"}));g=r.insert(()=>C,":first-child"),g=r.insert(()=>_,":first-child"),g.attr("class","basic label-container"),f&&g.attr("style",f)}else{const p=BV(0,0,d,c,u,h);g=r.insert("path",":first-child").attr("d",p).attr("class","basic label-container").attr("style",fi(f)).attr("style",n),g.attr("class","basic label-container"),f&&g.selectAll("path").attr("style",f),n&&g.selectAll("path").attr("style",n)}return g.attr("label-offset-x",u),g.attr("transform",`translate(${-d/2}, ${c/2} )`),o.attr("transform",`translate(${-(s.width/2)-u-(s.x-(s.left??0))}, ${-(s.height/2)-(s.y-(s.top??0))})`),yt(t,g),t.intersect=function(p){const m=ht.rect(t,p),y=m.y-(t.y??0);if(h!=0&&(Math.abs(y)<(t.height??0)/2||Math.abs(y)==(t.height??0)/2&&Math.abs(m.x-(t.x??0))>(t.width??0)/2-u)){let _=u*u*(1-y*y/(h*h));_!=0&&(_=Math.sqrt(Math.abs(_))),_=u-_,p.x-(t.x??0)>0&&(_=-_),m.x+=_}return m},r}x(tA,"tiltedCylinder");async function eA(e,t){const{labelStyles:i,nodeStyles:n}=mt(t);t.labelStyle=i;const{shapeSvg:r,bbox:s}=await At(e,t,kt(t)),o=s.width+t.padding,a=s.height+t.padding,l=[{x:-3*a/6,y:0},{x:o+3*a/6,y:0},{x:o,y:-a},{x:0,y:-a}];let c;const{cssStyles:h}=t;if(t.look==="handDrawn"){const u=gt.svg(r),d=pt(t,{}),f=Ht(l),g=u.path(f,d);c=r.insert(()=>g,":first-child").attr("transform",`translate(${-o/2}, ${a/2})`),h&&c.attr("style",h)}else c=Bs(r,o,a,l);return n&&c.attr("style",n),t.width=o,t.height=a,yt(t,c),t.intersect=function(u){return ht.polygon(t,l,u)},r}x(eA,"trapezoid");async function iA(e,t){const{labelStyles:i,nodeStyles:n}=mt(t);t.labelStyle=i;const{shapeSvg:r,bbox:s}=await At(e,t,kt(t)),o=60,a=20,l=Math.max(o,s.width+(t.padding??0)*2,t?.width??0),c=Math.max(a,s.height+(t.padding??0)*2,t?.height??0),{cssStyles:h}=t,u=gt.svg(r),d=pt(t,{});t.look!=="handDrawn"&&(d.roughness=0,d.fillStyle="solid");const f=[{x:-l/2*.8,y:-c/2},{x:l/2*.8,y:-c/2},{x:l/2,y:-c/2*.6},{x:l/2,y:c/2},{x:-l/2,y:c/2},{x:-l/2,y:-c/2*.6}],g=Ht(f),p=u.path(g,d),m=r.insert(()=>p,":first-child");return m.attr("class","basic label-container"),h&&t.look!=="handDrawn"&&m.selectChildren("path").attr("style",h),n&&t.look!=="handDrawn"&&m.selectChildren("path").attr("style",n),yt(t,m),t.intersect=function(y){return ht.polygon(t,f,y)},r}x(iA,"trapezoidalPentagon");async function nA(e,t){const{labelStyles:i,nodeStyles:n}=mt(t);t.labelStyle=i;const{shapeSvg:r,bbox:s,label:o}=await At(e,t,kt(t)),a=He(ne().flowchart?.htmlLabels),l=s.width+(t.padding??0),c=l+s.height,h=l+s.height,u=[{x:0,y:0},{x:h,y:0},{x:h/2,y:-c}],{cssStyles:d}=t,f=gt.svg(r),g=pt(t,{});t.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const p=Ht(u),m=f.path(p,g),y=r.insert(()=>m,":first-child").attr("transform",`translate(${-c/2}, ${c/2})`);return d&&t.look!=="handDrawn"&&y.selectChildren("path").attr("style",d),n&&t.look!=="handDrawn"&&y.selectChildren("path").attr("style",n),t.width=l,t.height=c,yt(t,y),o.attr("transform",`translate(${-s.width/2-(s.x-(s.left??0))}, ${c/2-(s.height+(t.padding??0)/(a?2:1)-(s.y-(s.top??0)))})`),t.intersect=function(_){return X.info("Triangle intersect",t,u,_),ht.polygon(t,u,_)},r}x(nA,"triangle");async function rA(e,t){const{labelStyles:i,nodeStyles:n}=mt(t);t.labelStyle=i;const{shapeSvg:r,bbox:s,label:o}=await At(e,t,kt(t)),a=Math.max(s.width+(t.padding??0)*2,t?.width??0),l=Math.max(s.height+(t.padding??0)*2,t?.height??0),c=l/8,h=l+c,{cssStyles:u}=t,f=70-a,g=f>0?f/2:0,p=gt.svg(r),m=pt(t,{});t.look!=="handDrawn"&&(m.roughness=0,m.fillStyle="solid");const y=[{x:-a/2-g,y:h/2},...Ls(-a/2-g,h/2,a/2+g,h/2,c,.8),{x:a/2+g,y:-h/2},{x:-a/2-g,y:-h/2}],_=Ht(y),C=p.path(_,m),b=r.insert(()=>C,":first-child");return b.attr("class","basic label-container"),u&&t.look!=="handDrawn"&&b.selectAll("path").attr("style",u),n&&t.look!=="handDrawn"&&b.selectAll("path").attr("style",n),b.attr("transform",`translate(0,${-c/2})`),o.attr("transform",`translate(${-a/2+(t.padding??0)-(s.x-(s.left??0))},${-l/2+(t.padding??0)-c-(s.y-(s.top??0))})`),yt(t,b),t.intersect=function(v){return ht.polygon(t,y,v)},r}x(rA,"waveEdgedRectangle");async function sA(e,t){const{labelStyles:i,nodeStyles:n}=mt(t);t.labelStyle=i;const{shapeSvg:r,bbox:s}=await At(e,t,kt(t)),o=100,a=50,l=Math.max(s.width+(t.padding??0)*2,t?.width??0),c=Math.max(s.height+(t.padding??0)*2,t?.height??0),h=l/c;let u=l,d=c;u>d*h?d=u/h:u=d*h,u=Math.max(u,o),d=Math.max(d,a);const f=Math.min(d*.2,d/4),g=d+f*2,{cssStyles:p}=t,m=gt.svg(r),y=pt(t,{});t.look!=="handDrawn"&&(y.roughness=0,y.fillStyle="solid");const _=[{x:-u/2,y:g/2},...Ls(-u/2,g/2,u/2,g/2,f,1),{x:u/2,y:-g/2},...Ls(u/2,-g/2,-u/2,-g/2,f,-1)],C=Ht(_),b=m.path(C,y),v=r.insert(()=>b,":first-child");return v.attr("class","basic label-container"),p&&t.look!=="handDrawn"&&v.selectAll("path").attr("style",p),n&&t.look!=="handDrawn"&&v.selectAll("path").attr("style",n),yt(t,v),t.intersect=function(S){return ht.polygon(t,_,S)},r}x(sA,"waveRectangle");async function oA(e,t){const{labelStyles:i,nodeStyles:n}=mt(t);t.labelStyle=i;const{shapeSvg:r,bbox:s,label:o}=await At(e,t,kt(t)),a=Math.max(s.width+(t.padding??0)*2,t?.width??0),l=Math.max(s.height+(t.padding??0)*2,t?.height??0),c=5,h=-a/2,u=-l/2,{cssStyles:d}=t,f=gt.svg(r),g=pt(t,{}),p=[{x:h-c,y:u-c},{x:h-c,y:u+l},{x:h+a,y:u+l},{x:h+a,y:u-c}],m=`M${h-c},${u-c} L${h+a},${u-c} L${h+a},${u+l} L${h-c},${u+l} L${h-c},${u-c}
                M${h-c},${u} L${h+a},${u}
                M${h},${u-c} L${h},${u+l}`;t.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const y=f.path(m,g),_=r.insert(()=>y,":first-child");return _.attr("transform",`translate(${c/2}, ${c/2})`),_.attr("class","basic label-container"),d&&t.look!=="handDrawn"&&_.selectAll("path").attr("style",d),n&&t.look!=="handDrawn"&&_.selectAll("path").attr("style",n),o.attr("transform",`translate(${-(s.width/2)+c/2-(s.x-(s.left??0))}, ${-(s.height/2)+c/2-(s.y-(s.top??0))})`),yt(t,_),t.intersect=function(C){return ht.polygon(t,p,C)},r}x(oA,"windowPane");async function C_(e,t){const i=t;if(i.alias&&(t.label=i.alias),t.look==="handDrawn"){const{themeVariables:G}=ui(),{background:Q}=G,ut={...t,id:t.id+"-background",look:"default",cssStyles:["stroke: none",`fill: ${Q}`]};await C_(e,ut)}const n=ui();t.useHtmlLabels=n.htmlLabels;let r=n.er?.diagramPadding??10,s=n.er?.entityPadding??6;const{cssStyles:o}=t,{labelStyles:a,nodeStyles:l}=mt(t);if(i.attributes.length===0&&t.label){const G={rx:0,ry:0,labelPaddingX:r,labelPaddingY:r*1.5};Hr(t.label,n)+G.labelPaddingX*2<n.er.minEntityWidth&&(t.width=n.er.minEntityWidth);const Q=await qf(e,t,G);if(!He(n.htmlLabels)){const ut=Q.select("text"),at=ut.node()?.getBBox();ut.attr("transform",`translate(${-at.width/2}, 0)`)}return Q}n.htmlLabels||(r*=1.25,s*=1.25);let c=kt(t);c||(c="node default");const h=e.insert("g").attr("class",c).attr("id",t.domId||t.id),u=await sa(h,t.label??"",n,0,0,["name"],a);u.height+=s;let d=0;const f=[],g=[];let p=0,m=0,y=0,_=0,C=!0,b=!0;for(const G of i.attributes){const Q=await sa(h,G.type,n,0,d,["attribute-type"],a);p=Math.max(p,Q.width+r);const ut=await sa(h,G.name,n,0,d,["attribute-name"],a);m=Math.max(m,ut.width+r);const at=await sa(h,G.keys.join(),n,0,d,["attribute-keys"],a);y=Math.max(y,at.width+r);const It=await sa(h,G.comment,n,0,d,["attribute-comment"],a);_=Math.max(_,It.width+r);const W=Math.max(Q.height,ut.height,at.height,It.height)+s;g.push({yOffset:d,rowHeight:W}),d+=W}let v=4;y<=r&&(C=!1,y=0,v--),_<=r&&(b=!1,_=0,v--);const S=h.node().getBBox();if(u.width+r*2-(p+m+y+_)>0){const G=u.width+r*2-(p+m+y+_);p+=G/v,m+=G/v,y>0&&(y+=G/v),_>0&&(_+=G/v)}const w=p+m+y+_,L=gt.svg(h),A=pt(t,{});t.look!=="handDrawn"&&(A.roughness=0,A.fillStyle="solid");let B=0;g.length>0&&(B=g.reduce((G,Q)=>G+(Q?.rowHeight??0),0));const O=Math.max(S.width+r*2,t?.width||0,w),F=Math.max((B??0)+u.height,t?.height||0),R=-O/2,T=-F/2;h.selectAll("g:not(:first-child)").each((G,Q,ut)=>{const at=Xt(ut[Q]),It=at.attr("transform");let W=0,et=0;if(It){const it=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(It);it&&(W=parseFloat(it[1]),et=parseFloat(it[2]),at.attr("class").includes("attribute-name")?W+=p:at.attr("class").includes("attribute-keys")?W+=p+m:at.attr("class").includes("attribute-comment")&&(W+=p+m+y))}at.attr("transform",`translate(${R+r/2+W}, ${et+T+u.height+s/2})`)}),h.select(".name").attr("transform","translate("+-u.width/2+", "+(T+s/2)+")");const P=L.rectangle(R,T,O,F,A),E=h.insert(()=>P,":first-child").attr("style",o.join("")),{themeVariables:D}=ui(),{rowEven:M,rowOdd:j,nodeBorder:Y}=D;f.push(0);for(const[G,Q]of g.entries()){const at=(G+1)%2===0&&Q.yOffset!==0,It=L.rectangle(R,u.height+T+Q?.yOffset,O,Q?.rowHeight,{...A,fill:at?M:j,stroke:Y});h.insert(()=>It,"g.label").attr("style",o.join("")).attr("class",`row-rect-${at?"even":"odd"}`)}let K=L.line(R,u.height+T,O+R,u.height+T,A);h.insert(()=>K).attr("class","divider"),K=L.line(p+R,u.height+T,p+R,F+T,A),h.insert(()=>K).attr("class","divider"),C&&(K=L.line(p+m+R,u.height+T,p+m+R,F+T,A),h.insert(()=>K).attr("class","divider")),b&&(K=L.line(p+m+y+R,u.height+T,p+m+y+R,F+T,A),h.insert(()=>K).attr("class","divider"));for(const G of f)K=L.line(R,u.height+T+G,O+R,u.height+T+G,A),h.insert(()=>K).attr("class","divider");if(yt(t,E),l&&t.look!=="handDrawn"){const Q=l.split(";")?.filter(ut=>ut.includes("stroke"))?.map(ut=>`${ut}`).join("; ");h.selectAll("path").attr("style",Q??""),h.selectAll(".row-rect-even path").attr("style",l)}return t.intersect=function(G){return ht.rect(t,G)},h}x(C_,"erBox");async function sa(e,t,i,n=0,r=0,s=[],o=""){const a=e.insert("g").attr("class",`label ${s.join(" ")}`).attr("transform",`translate(${n}, ${r})`).attr("style",o);t!==o1(t)&&(t=o1(t),t=t.replaceAll("<","&lt;").replaceAll(">","&gt;"));const l=a.node().appendChild(await Os(a,t,{width:Hr(t,i)+100,style:o,useHtmlLabels:i.htmlLabels},i));if(t.includes("&lt;")||t.includes("&gt;")){let h=l.children[0];for(h.textContent=h.textContent.replaceAll("&lt;","<").replaceAll("&gt;",">");h.childNodes[0];)h=h.childNodes[0],h.textContent=h.textContent.replaceAll("&lt;","<").replaceAll("&gt;",">")}let c=l.getBBox();if(He(i.htmlLabels)){const h=l.children[0];h.style.textAlign="start";const u=Xt(l);c=h.getBoundingClientRect(),u.attr("width",c.width),u.attr("height",c.height)}return c}x(sa,"addText");async function aA(e,t,i,n,r=i.class.padding??12){const s=n?0:3,o=e.insert("g").attr("class",kt(t)).attr("id",t.domId||t.id);let a=null,l=null,c=null,h=null,u=0,d=0,f=0;if(a=o.insert("g").attr("class","annotation-group text"),t.annotations.length>0){const _=t.annotations[0];await Vl(a,{text:`${_}`},0),u=a.node().getBBox().height}l=o.insert("g").attr("class","label-group text"),await Vl(l,t,0,["font-weight: bolder"]);const g=l.node().getBBox();d=g.height,c=o.insert("g").attr("class","members-group text");let p=0;for(const _ of t.members){const C=await Vl(c,_,p,[_.parseClassifier()]);p+=C+s}f=c.node().getBBox().height,f<=0&&(f=r/2),h=o.insert("g").attr("class","methods-group text");let m=0;for(const _ of t.methods){const C=await Vl(h,_,m,[_.parseClassifier()]);m+=C+s}let y=o.node().getBBox();if(a!==null){const _=a.node().getBBox();a.attr("transform",`translate(${-_.width/2})`)}return l.attr("transform",`translate(${-g.width/2}, ${u})`),y=o.node().getBBox(),c.attr("transform",`translate(0, ${u+d+r*2})`),y=o.node().getBBox(),h.attr("transform",`translate(0, ${u+d+(f?f+r*4:r*2)})`),y=o.node().getBBox(),{shapeSvg:o,bbox:y}}x(aA,"textHelper");async function Vl(e,t,i,n=[]){const r=e.insert("g").attr("class","label").attr("style",n.join("; ")),s=ui();let o="useHtmlLabels"in t?t.useHtmlLabels:He(s.htmlLabels)??!0,a="";"text"in t?a=t.text:a=t.label,!o&&a.startsWith("\\")&&(a=a.substring(1)),ja(a)&&(o=!0);const l=await Os(r,Ly(Bo(a)),{width:Hr(a,s)+50,classes:"markdown-node-label",useHtmlLabels:o},s);let c,h=1;if(o){const u=l.children[0],d=Xt(l);h=u.innerHTML.split("<br>").length,u.innerHTML.includes("</math>")&&(h+=u.innerHTML.split("<mrow>").length-1);const f=u.getElementsByTagName("img");if(f){const g=a.replace(/<img[^>]*>/g,"").trim()==="";await Promise.all([...f].map(p=>new Promise(m=>{function y(){if(p.style.display="flex",p.style.flexDirection="column",g){const _=s.fontSize?.toString()??window.getComputedStyle(document.body).fontSize,b=parseInt(_,10)*5+"px";p.style.minWidth=b,p.style.maxWidth=b}else p.style.width="100%";m(p)}x(y,"setupImage"),setTimeout(()=>{p.complete&&y()}),p.addEventListener("error",y),p.addEventListener("load",y)})))}c=u.getBoundingClientRect(),d.attr("width",c.width),d.attr("height",c.height)}else{n.includes("font-weight: bolder")&&Xt(l).selectAll("tspan").attr("font-weight",""),h=l.children.length;const u=l.children[0];(l.textContent===""||l.textContent.includes("&gt"))&&(u.textContent=a[0]+a.substring(1).replaceAll("&gt;",">").replaceAll("&lt;","<").trim(),a[1]===" "&&(u.textContent=u.textContent[0]+" "+u.textContent.substring(1))),u.textContent==="undefined"&&(u.textContent=""),c=l.getBBox()}return r.attr("transform","translate(0,"+(-c.height/(2*h)+i)+")"),c.height}x(Vl,"addText");async function lA(e,t){const i=ne(),n=i.class.padding??12,r=n,s=t.useHtmlLabels??He(i.htmlLabels)??!0,o=t;o.annotations=o.annotations??[],o.members=o.members??[],o.methods=o.methods??[];const{shapeSvg:a,bbox:l}=await aA(e,t,i,s,r),{labelStyles:c,nodeStyles:h}=mt(t);t.labelStyle=c,t.cssStyles=o.styles||"";const u=o.styles?.join(";")||h||"";t.cssStyles||(t.cssStyles=u.replaceAll("!important","").split(";"));const d=o.members.length===0&&o.methods.length===0&&!i.class?.hideEmptyMembersBox,f=gt.svg(a),g=pt(t,{});t.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const p=l.width;let m=l.height;o.members.length===0&&o.methods.length===0?m+=r:o.members.length>0&&o.methods.length===0&&(m+=r*2);const y=-p/2,_=-m/2,C=f.rectangle(y-n,_-n-(d?n:o.members.length===0&&o.methods.length===0?-n/2:0),p+2*n,m+2*n+(d?n*2:o.members.length===0&&o.methods.length===0?-n:0),g),b=a.insert(()=>C,":first-child");b.attr("class","basic label-container");const v=b.node().getBBox();a.selectAll(".text").each((A,B,O)=>{const F=Xt(O[B]),R=F.attr("transform");let T=0;if(R){const M=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(R);M&&(T=parseFloat(M[2]))}let P=T+_+n-(d?n:o.members.length===0&&o.methods.length===0?-n/2:0);s||(P-=4);let E=y;(F.attr("class").includes("label-group")||F.attr("class").includes("annotation-group"))&&(E=-F.node()?.getBBox().width/2||0,a.selectAll("text").each(function(D,M,j){window.getComputedStyle(j[M]).textAnchor==="middle"&&(E=0)})),F.attr("transform",`translate(${E}, ${P})`)});const S=a.select(".annotation-group").node().getBBox().height-(d?n/2:0)||0,w=a.select(".label-group").node().getBBox().height-(d?n/2:0)||0,L=a.select(".members-group").node().getBBox().height-(d?n/2:0)||0;if(o.members.length>0||o.methods.length>0||d){const A=f.line(v.x,S+w+_+n,v.x+v.width,S+w+_+n,g);a.insert(()=>A).attr("class","divider").attr("style",u)}if(d||o.members.length>0||o.methods.length>0){const A=f.line(v.x,S+w+L+_+r*2+n,v.x+v.width,S+w+L+_+n+r*2,g);a.insert(()=>A).attr("class","divider").attr("style",u)}if(o.look!=="handDrawn"&&a.selectAll("path").attr("style",u),b.select(":nth-child(2)").attr("style",u),a.selectAll(".divider").select("path").attr("style",u),t.labelStyle?a.selectAll("span").attr("style",t.labelStyle):a.selectAll("span").attr("style",u),!s){const A=RegExp(/color\s*:\s*([^;]*)/),B=A.exec(u);if(B){const O=B[0].replace("color","fill");a.selectAll("tspan").attr("style",O)}else if(c){const O=A.exec(c);if(O){const F=O[0].replace("color","fill");a.selectAll("tspan").attr("style",F)}}}return yt(t,b),t.intersect=function(A){return ht.rect(t,A)},a}x(lA,"classBox");async function cA(e,t){const{labelStyles:i,nodeStyles:n}=mt(t);t.labelStyle=i;const r=t,s=t,o=20,a=20,l="verifyMethod"in t,c=kt(t),h=e.insert("g").attr("class",c).attr("id",t.domId??t.id);let u;l?u=await Vn(h,`&lt;&lt;${r.type}&gt;&gt;`,0,t.labelStyle):u=await Vn(h,"&lt;&lt;Element&gt;&gt;",0,t.labelStyle);let d=u;const f=await Vn(h,r.name,d,t.labelStyle+"; font-weight: bold;");if(d+=f+a,l){const S=await Vn(h,`${r.requirementId?`ID: ${r.requirementId}`:""}`,d,t.labelStyle);d+=S;const w=await Vn(h,`${r.text?`Text: ${r.text}`:""}`,d,t.labelStyle);d+=w;const L=await Vn(h,`${r.risk?`Risk: ${r.risk}`:""}`,d,t.labelStyle);d+=L,await Vn(h,`${r.verifyMethod?`Verification: ${r.verifyMethod}`:""}`,d,t.labelStyle)}else{const S=await Vn(h,`${s.type?`Type: ${s.type}`:""}`,d,t.labelStyle);d+=S,await Vn(h,`${s.docRef?`Doc Ref: ${s.docRef}`:""}`,d,t.labelStyle)}const g=(h.node()?.getBBox().width??200)+o,p=(h.node()?.getBBox().height??200)+o,m=-g/2,y=-p/2,_=gt.svg(h),C=pt(t,{});t.look!=="handDrawn"&&(C.roughness=0,C.fillStyle="solid");const b=_.rectangle(m,y,g,p,C),v=h.insert(()=>b,":first-child");if(v.attr("class","basic label-container").attr("style",n),h.selectAll(".label").each((S,w,L)=>{const A=Xt(L[w]),B=A.attr("transform");let O=0,F=0;if(B){const E=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(B);E&&(O=parseFloat(E[1]),F=parseFloat(E[2]))}const R=F-p/2;let T=m+o/2;(w===0||w===1)&&(T=O),A.attr("transform",`translate(${T}, ${R+o})`)}),d>u+f+a){const S=_.line(m,y+u+f+a,m+g,y+u+f+a,C);h.insert(()=>S).attr("style",n)}return yt(t,v),t.intersect=function(S){return ht.rect(t,S)},h}x(cA,"requirementBox");async function Vn(e,t,i,n=""){if(t==="")return 0;const r=e.insert("g").attr("class","label").attr("style",n),s=ne(),o=s.htmlLabels??!0,a=await Os(r,Ly(Bo(t)),{width:Hr(t,s)+50,classes:"markdown-node-label",useHtmlLabels:o,style:n},s);let l;if(o){const c=a.children[0],h=Xt(a);l=c.getBoundingClientRect(),h.attr("width",l.width),h.attr("height",l.height)}else{const c=a.children[0];for(const h of c.children)h.textContent=h.textContent.replaceAll("&gt;",">").replaceAll("&lt;","<"),n&&h.setAttribute("style",n);l=a.getBBox(),l.height+=6}return r.attr("transform",`translate(${-l.width/2},${-l.height/2+i})`),l.height}x(Vn,"addText");var zV=x(e=>{switch(e){case"Very High":return"red";case"High":return"orange";case"Medium":return null;case"Low":return"blue";case"Very Low":return"lightblue"}},"colorFromPriority");async function hA(e,t,{config:i}){const{labelStyles:n,nodeStyles:r}=mt(t);t.labelStyle=n||"";const s=10,o=t.width;t.width=(t.width??200)-10;const{shapeSvg:a,bbox:l,label:c}=await At(e,t,kt(t)),h=t.padding||10;let u="",d;"ticket"in t&&t.ticket&&i?.kanban?.ticketBaseUrl&&(u=i?.kanban?.ticketBaseUrl.replace("#TICKET#",t.ticket),d=a.insert("svg:a",":first-child").attr("class","kanban-ticket-link").attr("xlink:href",u).attr("target","_blank"));const f={useHtmlLabels:t.useHtmlLabels,labelStyle:t.labelStyle||"",width:t.width,img:t.img,padding:t.padding||8,centerLabel:!1};let g,p;d?{label:g,bbox:p}=await fp(d,"ticket"in t&&t.ticket||"",f):{label:g,bbox:p}=await fp(a,"ticket"in t&&t.ticket||"",f);const{label:m,bbox:y}=await fp(a,"assigned"in t&&t.assigned||"",f);t.width=o;const _=10,C=t?.width||0,b=Math.max(p.height,y.height)/2,v=Math.max(l.height+_*2,t?.height||0)+b,S=-C/2,w=-v/2;c.attr("transform","translate("+(h-C/2)+", "+(-b-l.height/2)+")"),g.attr("transform","translate("+(h-C/2)+", "+(-b+l.height/2)+")"),m.attr("transform","translate("+(h+C/2-y.width-2*s)+", "+(-b+l.height/2)+")");let L;const{rx:A,ry:B}=t,{cssStyles:O}=t;if(t.look==="handDrawn"){const F=gt.svg(a),R=pt(t,{}),T=A||B?F.path(Ds(S,w,C,v,A||0),R):F.rectangle(S,w,C,v,R);L=a.insert(()=>T,":first-child"),L.attr("class","basic label-container").attr("style",O||null)}else{L=a.insert("rect",":first-child"),L.attr("class","basic label-container __APA__").attr("style",r).attr("rx",A??5).attr("ry",B??5).attr("x",S).attr("y",w).attr("width",C).attr("height",v);const F="priority"in t&&t.priority;if(F){const R=a.append("line"),T=S+2,P=w+Math.floor((A??0)/2),E=w+v-Math.floor((A??0)/2);R.attr("x1",T).attr("y1",P).attr("x2",T).attr("y2",E).attr("stroke-width","4").attr("stroke",zV(F))}}return yt(t,L),t.height=v,t.intersect=function(F){return ht.rect(t,F)},a}x(hA,"kanbanItem");async function uA(e,t){const{labelStyles:i,nodeStyles:n}=mt(t);t.labelStyle=i;const{shapeSvg:r,bbox:s,halfPadding:o,label:a}=await At(e,t,kt(t)),l=s.width+10*o,c=s.height+8*o,h=.15*l,{cssStyles:u}=t,d=s.width+20,f=s.height+20,g=Math.max(l,d),p=Math.max(c,f);a.attr("transform",`translate(${-s.width/2}, ${-s.height/2})`);let m;const y=`M0 0 
    a${h},${h} 1 0,0 ${g*.25},${-1*p*.1}
    a${h},${h} 1 0,0 ${g*.25},0
    a${h},${h} 1 0,0 ${g*.25},0
    a${h},${h} 1 0,0 ${g*.25},${p*.1}

    a${h},${h} 1 0,0 ${g*.15},${p*.33}
    a${h*.8},${h*.8} 1 0,0 0,${p*.34}
    a${h},${h} 1 0,0 ${-1*g*.15},${p*.33}

    a${h},${h} 1 0,0 ${-1*g*.25},${p*.15}
    a${h},${h} 1 0,0 ${-1*g*.25},0
    a${h},${h} 1 0,0 ${-1*g*.25},0
    a${h},${h} 1 0,0 ${-1*g*.25},${-1*p*.15}

    a${h},${h} 1 0,0 ${-1*g*.1},${-1*p*.33}
    a${h*.8},${h*.8} 1 0,0 0,${-1*p*.34}
    a${h},${h} 1 0,0 ${g*.1},${-1*p*.33}
  H0 V0 Z`;if(t.look==="handDrawn"){const _=gt.svg(r),C=pt(t,{}),b=_.path(y,C);m=r.insert(()=>b,":first-child"),m.attr("class","basic label-container").attr("style",fi(u))}else m=r.insert("path",":first-child").attr("class","basic label-container").attr("style",n).attr("d",y);return m.attr("transform",`translate(${-g/2}, ${-p/2})`),yt(t,m),t.calcIntersect=function(_,C){return ht.rect(_,C)},t.intersect=function(_){return X.info("Bang intersect",t,_),ht.rect(t,_)},r}x(uA,"bang");async function dA(e,t){const{labelStyles:i,nodeStyles:n}=mt(t);t.labelStyle=i;const{shapeSvg:r,bbox:s,halfPadding:o,label:a}=await At(e,t,kt(t)),l=s.width+2*o,c=s.height+2*o,h=.15*l,u=.25*l,d=.35*l,f=.2*l,{cssStyles:g}=t;let p;const m=`M0 0 
    a${h},${h} 0 0,1 ${l*.25},${-1*l*.1}
    a${d},${d} 1 0,1 ${l*.4},${-1*l*.1}
    a${u},${u} 1 0,1 ${l*.35},${l*.2}

    a${h},${h} 1 0,1 ${l*.15},${c*.35}
    a${f},${f} 1 0,1 ${-1*l*.15},${c*.65}

    a${u},${h} 1 0,1 ${-1*l*.25},${l*.15}
    a${d},${d} 1 0,1 ${-1*l*.5},0
    a${h},${h} 1 0,1 ${-1*l*.25},${-1*l*.15}

    a${h},${h} 1 0,1 ${-1*l*.1},${-1*c*.35}
    a${f},${f} 1 0,1 ${l*.1},${-1*c*.65}
  H0 V0 Z`;if(t.look==="handDrawn"){const y=gt.svg(r),_=pt(t,{}),C=y.path(m,_);p=r.insert(()=>C,":first-child"),p.attr("class","basic label-container").attr("style",fi(g))}else p=r.insert("path",":first-child").attr("class","basic label-container").attr("style",n).attr("d",m);return a.attr("transform",`translate(${-s.width/2}, ${-s.height/2})`),p.attr("transform",`translate(${-l/2}, ${-c/2})`),yt(t,p),t.calcIntersect=function(y,_){return ht.rect(y,_)},t.intersect=function(y){return X.info("Cloud intersect",t,y),ht.rect(t,y)},r}x(dA,"cloud");async function fA(e,t){const{labelStyles:i,nodeStyles:n}=mt(t);t.labelStyle=i;const{shapeSvg:r,bbox:s,halfPadding:o,label:a}=await At(e,t,kt(t)),l=s.width+8*o,c=s.height+2*o,h=5,u=`
    M${-l/2} ${c/2-h}
    v${-c+2*h}
    q0,-${h} ${h},-${h}
    h${l-2*h}
    q${h},0 ${h},${h}
    v${c-2*h}
    q0,${h} -${h},${h}
    h${-l+2*h}
    q-${h},0 -${h},-${h}
    Z
  `,d=r.append("path").attr("id","node-"+t.id).attr("class","node-bkg node-"+t.type).attr("style",n).attr("d",u);return r.append("line").attr("class","node-line-").attr("x1",-l/2).attr("y1",c/2).attr("x2",l/2).attr("y2",c/2),a.attr("transform",`translate(${-s.width/2}, ${-s.height/2})`),r.append(()=>a.node()),yt(t,d),t.calcIntersect=function(f,g){return ht.rect(f,g)},t.intersect=function(f){return ht.rect(t,f)},r}x(fA,"defaultMindmapNode");async function gA(e,t){const i={padding:t.padding??0};return x_(e,t,i)}x(gA,"mindmapCircle");var GV=[{semanticName:"Process",name:"Rectangle",shortName:"rect",description:"Standard process shape",aliases:["proc","process","rectangle"],internalAliases:["squareRect"],handler:VR},{semanticName:"Event",name:"Rounded Rectangle",shortName:"rounded",description:"Represents an event",aliases:["event"],internalAliases:["roundedRect"],handler:WR},{semanticName:"Terminal Point",name:"Stadium",shortName:"stadium",description:"Terminal point",aliases:["terminal","pill"],handler:UR},{semanticName:"Subprocess",name:"Framed Rectangle",shortName:"fr-rect",description:"Subprocess",aliases:["subprocess","subproc","framed-rectangle","subroutine"],handler:KR},{semanticName:"Database",name:"Cylinder",shortName:"cyl",description:"Database storage",aliases:["db","database","cylinder"],handler:pR},{semanticName:"Start",name:"Circle",shortName:"circle",description:"Starting point",aliases:["circ"],handler:x_},{semanticName:"Bang",name:"Bang",shortName:"bang",description:"Bang",aliases:["bang"],handler:uA},{semanticName:"Cloud",name:"Cloud",shortName:"cloud",description:"cloud",aliases:["cloud"],handler:dA},{semanticName:"Decision",name:"Diamond",shortName:"diam",description:"Decision-making step",aliases:["decision","diamond","question"],handler:$R},{semanticName:"Prepare Conditional",name:"Hexagon",shortName:"hex",description:"Preparation or condition step",aliases:["hexagon","prepare"],handler:vR},{semanticName:"Data Input/Output",name:"Lean Right",shortName:"lean-r",description:"Represents input or output",aliases:["lean-right","in-out"],internalAliases:["lean_right"],handler:IR},{semanticName:"Data Input/Output",name:"Lean Left",shortName:"lean-l",description:"Represents output or input",aliases:["lean-left","out-in"],internalAliases:["lean_left"],handler:MR},{semanticName:"Priority Action",name:"Trapezoid Base Bottom",shortName:"trap-b",description:"Priority action",aliases:["priority","trapezoid-bottom","trapezoid"],handler:eA},{semanticName:"Manual Operation",name:"Trapezoid Base Top",shortName:"trap-t",description:"Represents a manual task",aliases:["manual","trapezoid-top","inv-trapezoid"],internalAliases:["inv_trapezoid"],handler:AR},{semanticName:"Stop",name:"Double Circle",shortName:"dbl-circ",description:"Represents a stop point",aliases:["double-circle"],internalAliases:["doublecircle"],handler:yR},{semanticName:"Text Block",name:"Text Block",shortName:"text",description:"Text block",handler:QR},{semanticName:"Card",name:"Notched Rectangle",shortName:"notch-rect",description:"Represents a card",aliases:["card","notched-rectangle"],handler:aR},{semanticName:"Lined/Shaded Process",name:"Lined Rectangle",shortName:"lin-rect",description:"Lined process shape",aliases:["lined-rectangle","lined-process","lin-proc","shaded-process"],handler:jR},{semanticName:"Start",name:"Small Circle",shortName:"sm-circ",description:"Small starting point",aliases:["start","small-circle"],internalAliases:["stateStart"],handler:XR},{semanticName:"Stop",name:"Framed Circle",shortName:"fr-circ",description:"Stop point",aliases:["stop","framed-circle"],internalAliases:["stateEnd"],handler:YR},{semanticName:"Fork/Join",name:"Filled Rectangle",shortName:"fork",description:"Fork or join in process flow",aliases:["join"],internalAliases:["forkJoin"],handler:CR},{semanticName:"Collate",name:"Hourglass",shortName:"hourglass",description:"Represents a collate operation",aliases:["hourglass","collate"],handler:wR},{semanticName:"Comment",name:"Curly Brace",shortName:"brace",description:"Adds a comment",aliases:["comment","brace-l"],handler:uR},{semanticName:"Comment Right",name:"Curly Brace",shortName:"brace-r",description:"Adds a comment",handler:dR},{semanticName:"Comment with braces on both sides",name:"Curly Braces",shortName:"braces",description:"Adds a comment",handler:fR},{semanticName:"Com Link",name:"Lightning Bolt",shortName:"bolt",description:"Communication link",aliases:["com-link","lightning-bolt"],handler:PR},{semanticName:"Document",name:"Document",shortName:"doc",description:"Represents a document",aliases:["doc","document"],handler:rA},{semanticName:"Delay",name:"Half-Rounded Rectangle",shortName:"delay",description:"Represents a delay",aliases:["half-rounded-rectangle"],handler:bR},{semanticName:"Direct Access Storage",name:"Horizontal Cylinder",shortName:"h-cyl",description:"Direct access storage",aliases:["das","horizontal-cylinder"],handler:tA},{semanticName:"Disk Storage",name:"Lined Cylinder",shortName:"lin-cyl",description:"Disk storage",aliases:["disk","lined-cylinder"],handler:FR},{semanticName:"Display",name:"Curved Trapezoid",shortName:"curv-trap",description:"Represents a display",aliases:["curved-trapezoid","display"],handler:gR},{semanticName:"Divided Process",name:"Divided Rectangle",shortName:"div-rect",description:"Divided process shape",aliases:["div-proc","divided-rectangle","divided-process"],handler:mR},{semanticName:"Extract",name:"Triangle",shortName:"tri",description:"Extraction process",aliases:["extract","triangle"],handler:nA},{semanticName:"Internal Storage",name:"Window Pane",shortName:"win-pane",description:"Internal storage",aliases:["internal-storage","window-pane"],handler:oA},{semanticName:"Junction",name:"Filled Circle",shortName:"f-circ",description:"Junction point",aliases:["junction","filled-circle"],handler:_R},{semanticName:"Loop Limit",name:"Trapezoidal Pentagon",shortName:"notch-pent",description:"Loop limit step",aliases:["loop-limit","notched-pentagon"],handler:iA},{semanticName:"Manual File",name:"Flipped Triangle",shortName:"flip-tri",description:"Manual file operation",aliases:["manual-file","flipped-triangle"],handler:xR},{semanticName:"Manual Input",name:"Sloped Rectangle",shortName:"sl-rect",description:"Manual input step",aliases:["manual-input","sloped-rectangle"],handler:HR},{semanticName:"Multi-Document",name:"Stacked Document",shortName:"docs",description:"Multiple documents",aliases:["documents","st-doc","stacked-document"],handler:BR},{semanticName:"Multi-Process",name:"Stacked Rectangle",shortName:"st-rect",description:"Multiple processes",aliases:["procs","processes","stacked-rectangle"],handler:DR},{semanticName:"Stored Data",name:"Bow Tie Rectangle",shortName:"bow-rect",description:"Stored data",aliases:["stored-data","bow-tie-rectangle"],handler:oR},{semanticName:"Summary",name:"Crossed Circle",shortName:"cross-circ",description:"Summary",aliases:["summary","crossed-circle"],handler:hR},{semanticName:"Tagged Document",name:"Tagged Document",shortName:"tag-doc",description:"Tagged document",aliases:["tag-doc","tagged-document"],handler:JR},{semanticName:"Tagged Process",name:"Tagged Rectangle",shortName:"tag-rect",description:"Tagged process",aliases:["tagged-rectangle","tag-proc","tagged-process"],handler:ZR},{semanticName:"Paper Tape",name:"Flag",shortName:"flag",description:"Paper tape",aliases:["paper-tape"],handler:sA},{semanticName:"Odd",name:"Odd",shortName:"odd",description:"Odd shape",internalAliases:["rect_left_inv_arrow"],handler:zR},{semanticName:"Lined Document",name:"Lined Document",shortName:"lin-doc",description:"Lined document",aliases:["lined-document"],handler:OR}],WV=x(()=>{const t=[...Object.entries({state:qR,choice:lR,note:NR,rectWithTitle:GR,labelRect:LR,iconSquare:kR,iconCircle:TR,icon:SR,iconRounded:ER,imageSquare:RR,anchor:sR,kanbanItem:hA,mindmapCircle:gA,defaultMindmapNode:fA,classBox:lA,erBox:C_,requirementBox:cA}),...GV.flatMap(i=>[i.shortName,..."aliases"in i?i.aliases:[],..."internalAliases"in i?i.internalAliases:[]].map(r=>[r,i.handler]))];return Object.fromEntries(t)},"generateShapeMap"),pA=WV();function jV(e){return e in pA}x(jV,"isValidShape");var Yf=new Map;async function mA(e,t,i){let n,r;t.shape==="rect"&&(t.rx&&t.ry?t.shape="roundedRect":t.shape="squareRect");const s=t.shape?pA[t.shape]:void 0;if(!s)throw new Error(`No such shape: ${t.shape}. Please check your syntax.`);if(t.link){let o;i.config.securityLevel==="sandbox"?o="_top":t.linkTarget&&(o=t.linkTarget||"_blank"),n=e.insert("svg:a").attr("xlink:href",t.link).attr("target",o??null),r=await s(n,t,i)}else r=await s(e,t,i),n=r;return t.tooltip&&r.attr("title",t.tooltip),Yf.set(t.id,n),t.haveCallback&&n.attr("class",n.attr("class")+" clickable"),n}x(mA,"insertNode");var oX=x((e,t)=>{Yf.set(t.id,e)},"setNodeElem"),aX=x(()=>{Yf.clear()},"clear"),lX=x(e=>{const t=Yf.get(e.id);X.trace("Transforming node",e.diff,e,"translate("+(e.x-e.width/2-5)+", "+e.width/2+")");const i=8,n=e.diff||0;return e.clusterNode?t.attr("transform","translate("+(e.x+n-e.width/2)+", "+(e.y-e.height/2-i)+")"):t.attr("transform","translate("+e.x+", "+e.y+")"),n},"positionNode"),HV=x((e,t,i,n,r,s)=>{t.arrowTypeStart&&pb(e,"start",t.arrowTypeStart,i,n,r,s),t.arrowTypeEnd&&pb(e,"end",t.arrowTypeEnd,i,n,r,s)},"addEdgeMarkers"),VV={arrow_cross:{type:"cross",fill:!1},arrow_point:{type:"point",fill:!0},arrow_barb:{type:"barb",fill:!0},arrow_circle:{type:"circle",fill:!1},aggregation:{type:"aggregation",fill:!1},extension:{type:"extension",fill:!1},composition:{type:"composition",fill:!0},dependency:{type:"dependency",fill:!0},lollipop:{type:"lollipop",fill:!1},only_one:{type:"onlyOne",fill:!1},zero_or_one:{type:"zeroOrOne",fill:!1},one_or_more:{type:"oneOrMore",fill:!1},zero_or_more:{type:"zeroOrMore",fill:!1},requirement_arrow:{type:"requirement_arrow",fill:!1},requirement_contains:{type:"requirement_contains",fill:!1}},pb=x((e,t,i,n,r,s,o)=>{const a=VV[i];if(!a){X.warn(`Unknown arrow type: ${i}`);return}const l=a.type,h=`${r}_${s}-${l}${t==="start"?"Start":"End"}`;if(o&&o.trim()!==""){const u=o.replace(/[^\dA-Za-z]/g,"_"),d=`${h}_${u}`;if(!document.getElementById(d)){const f=document.getElementById(h);if(f){const g=f.cloneNode(!0);g.id=d,g.querySelectorAll("path, circle, line").forEach(m=>{m.setAttribute("stroke",o),a.fill&&m.setAttribute("fill",o)}),f.parentNode?.appendChild(g)}}e.attr(`marker-${t}`,`url(${n}#${d})`)}else e.attr(`marker-${t}`,`url(${n}#${h})`)},"addEdgeMarker"),Fd=new Map,Ze=new Map,cX=x(()=>{Fd.clear(),Ze.clear()},"clear"),Jh=x(e=>e?e.reduce((i,n)=>i+";"+n,""):"","getLabelStyles"),UV=x(async(e,t)=>{let i=He(ne().flowchart.htmlLabels);const{labelStyles:n}=mt(t);t.labelStyle=n;const r=await Os(e,t.label,{style:t.labelStyle,useHtmlLabels:i,addSvgBackground:!0,isNode:!1});X.info("abc82",t,t.labelType);const s=e.insert("g").attr("class","edgeLabel"),o=s.insert("g").attr("class","label").attr("data-id",t.id);o.node().appendChild(r);let a=r.getBBox();if(i){const c=r.children[0],h=Xt(r);a=c.getBoundingClientRect(),h.attr("width",a.width),h.attr("height",a.height)}o.attr("transform","translate("+-a.width/2+", "+-a.height/2+")"),Fd.set(t.id,s),t.width=a.width,t.height=a.height;let l;if(t.startLabelLeft){const c=await co(t.startLabelLeft,Jh(t.labelStyle)),h=e.insert("g").attr("class","edgeTerminals"),u=h.insert("g").attr("class","inner");l=u.node().appendChild(c);const d=c.getBBox();u.attr("transform","translate("+-d.width/2+", "+-d.height/2+")"),Ze.get(t.id)||Ze.set(t.id,{}),Ze.get(t.id).startLeft=h,Ul(l,t.startLabelLeft)}if(t.startLabelRight){const c=await co(t.startLabelRight,Jh(t.labelStyle)),h=e.insert("g").attr("class","edgeTerminals"),u=h.insert("g").attr("class","inner");l=h.node().appendChild(c),u.node().appendChild(c);const d=c.getBBox();u.attr("transform","translate("+-d.width/2+", "+-d.height/2+")"),Ze.get(t.id)||Ze.set(t.id,{}),Ze.get(t.id).startRight=h,Ul(l,t.startLabelRight)}if(t.endLabelLeft){const c=await co(t.endLabelLeft,Jh(t.labelStyle)),h=e.insert("g").attr("class","edgeTerminals"),u=h.insert("g").attr("class","inner");l=u.node().appendChild(c);const d=c.getBBox();u.attr("transform","translate("+-d.width/2+", "+-d.height/2+")"),h.node().appendChild(c),Ze.get(t.id)||Ze.set(t.id,{}),Ze.get(t.id).endLeft=h,Ul(l,t.endLabelLeft)}if(t.endLabelRight){const c=await co(t.endLabelRight,Jh(t.labelStyle)),h=e.insert("g").attr("class","edgeTerminals"),u=h.insert("g").attr("class","inner");l=u.node().appendChild(c);const d=c.getBBox();u.attr("transform","translate("+-d.width/2+", "+-d.height/2+")"),h.node().appendChild(c),Ze.get(t.id)||Ze.set(t.id,{}),Ze.get(t.id).endRight=h,Ul(l,t.endLabelRight)}return r},"insertEdgeLabel");function Ul(e,t){ne().flowchart.htmlLabels&&e&&(e.style.width=t.length*9+"px",e.style.height="12px")}x(Ul,"setTerminalWidth");var qV=x((e,t)=>{X.debug("Moving label abc88 ",e.id,e.label,Fd.get(e.id),t);let i=t.updatedPath?t.updatedPath:t.originalPath;const n=ne(),{subGraphTitleTotalMargin:r}=Ky(n);if(e.label){const s=Fd.get(e.id);let o=e.x,a=e.y;if(i){const l=vn.calcLabelPosition(i);X.debug("Moving label "+e.label+" from (",o,",",a,") to (",l.x,",",l.y,") abc88"),t.updatedPath&&(o=l.x,a=l.y)}s.attr("transform",`translate(${o}, ${a+r/2})`)}if(e.startLabelLeft){const s=Ze.get(e.id).startLeft;let o=e.x,a=e.y;if(i){const l=vn.calcTerminalLabelPosition(e.arrowTypeStart?10:0,"start_left",i);o=l.x,a=l.y}s.attr("transform",`translate(${o}, ${a})`)}if(e.startLabelRight){const s=Ze.get(e.id).startRight;let o=e.x,a=e.y;if(i){const l=vn.calcTerminalLabelPosition(e.arrowTypeStart?10:0,"start_right",i);o=l.x,a=l.y}s.attr("transform",`translate(${o}, ${a})`)}if(e.endLabelLeft){const s=Ze.get(e.id).endLeft;let o=e.x,a=e.y;if(i){const l=vn.calcTerminalLabelPosition(e.arrowTypeEnd?10:0,"end_left",i);o=l.x,a=l.y}s.attr("transform",`translate(${o}, ${a})`)}if(e.endLabelRight){const s=Ze.get(e.id).endRight;let o=e.x,a=e.y;if(i){const l=vn.calcTerminalLabelPosition(e.arrowTypeEnd?10:0,"end_right",i);o=l.x,a=l.y}s.attr("transform",`translate(${o}, ${a})`)}},"positionEdgeLabel"),YV=x((e,t)=>{const i=e.x,n=e.y,r=Math.abs(t.x-i),s=Math.abs(t.y-n),o=e.width/2,a=e.height/2;return r>=o||s>=a},"outsideNode"),XV=x((e,t,i)=>{X.debug(`intersection calc abc89:
  outsidePoint: ${JSON.stringify(t)}
  insidePoint : ${JSON.stringify(i)}
  node        : x:${e.x} y:${e.y} w:${e.width} h:${e.height}`);const n=e.x,r=e.y,s=Math.abs(n-i.x),o=e.width/2;let a=i.x<t.x?o-s:o+s;const l=e.height/2,c=Math.abs(t.y-i.y),h=Math.abs(t.x-i.x);if(Math.abs(r-t.y)*o>Math.abs(n-t.x)*l){let u=i.y<t.y?t.y-l-r:r-l-t.y;a=h*u/c;const d={x:i.x<t.x?i.x+a:i.x-h+a,y:i.y<t.y?i.y+c-u:i.y-c+u};return a===0&&(d.x=t.x,d.y=t.y),h===0&&(d.x=t.x),c===0&&(d.y=t.y),X.debug(`abc89 top/bottom calc, Q ${c}, q ${u}, R ${h}, r ${a}`,d),d}else{i.x<t.x?a=t.x-o-n:a=n-o-t.x;let u=c*a/h,d=i.x<t.x?i.x+h-a:i.x-h+a,f=i.y<t.y?i.y+u:i.y-u;return X.debug(`sides calc abc89, Q ${c}, q ${u}, R ${h}, r ${a}`,{_x:d,_y:f}),a===0&&(d=t.x,f=t.y),h===0&&(d=t.x),c===0&&(f=t.y),{x:d,y:f}}},"intersection"),mb=x((e,t)=>{X.warn("abc88 cutPathAtIntersect",e,t);let i=[],n=e[0],r=!1;return e.forEach(s=>{if(X.info("abc88 checking point",s,t),!YV(t,s)&&!r){const o=XV(t,n,s);X.debug("abc88 inside",s,n,o),X.debug("abc88 intersection",o,t);let a=!1;i.forEach(l=>{a=a||l.x===o.x&&l.y===o.y}),i.some(l=>l.x===o.x&&l.y===o.y)?X.warn("abc88 no intersect",o,i):i.push(o),r=!0}else X.warn("abc88 outside",s,n),n=s,r||i.push(s)}),X.debug("returning points",i),i},"cutPathAtIntersect");function yA(e){const t=[],i=[];for(let n=1;n<e.length-1;n++){const r=e[n-1],s=e[n],o=e[n+1];(r.x===s.x&&s.y===o.y&&Math.abs(s.x-o.x)>5&&Math.abs(s.y-r.y)>5||r.y===s.y&&s.x===o.x&&Math.abs(s.x-r.x)>5&&Math.abs(s.y-o.y)>5)&&(t.push(s),i.push(n))}return{cornerPoints:t,cornerPointPositions:i}}x(yA,"extractCornerPoints");var yb=x(function(e,t,i){const n=t.x-e.x,r=t.y-e.y,s=Math.sqrt(n*n+r*r),o=i/s;return{x:t.x-o*n,y:t.y-o*r}},"findAdjacentPoint"),KV=x(function(e){const{cornerPointPositions:t}=yA(e),i=[];for(let n=0;n<e.length;n++)if(t.includes(n)){const r=e[n-1],s=e[n+1],o=e[n],a=yb(r,o,5),l=yb(s,o,5),c=l.x-a.x,h=l.y-a.y;i.push(a);const u=Math.sqrt(2)*2;let d={x:o.x,y:o.y};if(Math.abs(s.x-r.x)>10&&Math.abs(s.y-r.y)>=10){X.debug("Corner point fixing",Math.abs(s.x-r.x),Math.abs(s.y-r.y));const f=5;o.x===a.x?d={x:c<0?a.x-f+u:a.x+f-u,y:h<0?a.y-u:a.y+u}:d={x:c<0?a.x-u:a.x+u,y:h<0?a.y-f+u:a.y+f-u}}else X.debug("Corner point skipping fixing",Math.abs(s.x-r.x),Math.abs(s.y-r.y));i.push(d,l)}else i.push(e[n]);return i},"fixCorners"),ZV=x((e,t,i)=>{const n=e-t-i,r=2,s=2,o=r+s,a=Math.floor(n/o),l=Array(a).fill(`${r} ${s}`).join(" ");return`0 ${t} ${l} ${i}`},"generateDashArray"),JV=x(function(e,t,i,n,r,s,o,a=!1){const{handDrawnSeed:l}=ne();let c=t.points,h=!1;const u=r;var d=s;const f=[];for(const T in t.cssCompiledStyles)YE(T)||f.push(t.cssCompiledStyles[T]);X.debug("UIO intersect check",t.points,d.x,u.x),d.intersect&&u.intersect&&!a&&(c=c.slice(1,t.points.length-1),c.unshift(u.intersect(c[0])),X.debug("Last point UIO",t.start,"-->",t.end,c[c.length-1],d,d.intersect(c[c.length-1])),c.push(d.intersect(c[c.length-1])));const g=btoa(JSON.stringify(c));t.toCluster&&(X.info("to cluster abc88",i.get(t.toCluster)),c=mb(t.points,i.get(t.toCluster).node),h=!0),t.fromCluster&&(X.debug("from cluster abc88",i.get(t.fromCluster),JSON.stringify(c,null,2)),c=mb(c.reverse(),i.get(t.fromCluster).node).reverse(),h=!0);let p=c.filter(T=>!Number.isNaN(T.y));p=KV(p);let m=pu;switch(m=ud,t.curve){case"linear":m=ud;break;case"basis":m=pu;break;case"cardinal":m=J2;break;case"bumpX":m=q2;break;case"bumpY":m=Y2;break;case"catmullRom":m=tT;break;case"monotoneX":m=oT;break;case"monotoneY":m=aT;break;case"natural":m=cT;break;case"step":m=hT;break;case"stepAfter":m=dT;break;case"stepBefore":m=uT;break;default:m=pu}const{x:y,y:_}=KW(t),C=PG().x(y).y(_).curve(m);let b;switch(t.thickness){case"normal":b="edge-thickness-normal";break;case"thick":b="edge-thickness-thick";break;case"invisible":b="edge-thickness-invisible";break;default:b="edge-thickness-normal"}switch(t.pattern){case"solid":b+=" edge-pattern-solid";break;case"dotted":b+=" edge-pattern-dotted";break;case"dashed":b+=" edge-pattern-dashed";break;default:b+=" edge-pattern-solid"}let v,S=t.curve==="rounded"?_A(xA(p,t),5):C(p);const w=Array.isArray(t.style)?t.style:[t.style];let L=w.find(T=>T?.startsWith("stroke:")),A=!1;if(t.look==="handDrawn"){const T=gt.svg(e);Object.assign([],p);const P=T.path(S,{roughness:.3,seed:l});b+=" transition",v=Xt(P).select("path").attr("id",t.id).attr("class"," "+b+(t.classes?" "+t.classes:"")).attr("style",w?w.reduce((D,M)=>D+";"+M,""):"");let E=v.attr("d");v.attr("d",E),e.node().appendChild(v.node())}else{const T=f.join(";"),P=w?w.reduce((G,Q)=>G+Q+";",""):"";let E="";t.animate&&(E=" edge-animation-fast"),t.animation&&(E=" edge-animation-"+t.animation);const D=(T?T+";"+P+";":P)+";"+(w?w.reduce((G,Q)=>G+";"+Q,""):"");v=e.append("path").attr("d",S).attr("id",t.id).attr("class"," "+b+(t.classes?" "+t.classes:"")+(E??"")).attr("style",D),L=D.match(/stroke:([^;]+)/)?.[1],A=t.animate===!0||!!t.animation||T.includes("animation");const M=v.node(),j=typeof M.getTotalLength=="function"?M.getTotalLength():0,Y=P1[t.arrowTypeStart]||0,K=P1[t.arrowTypeEnd]||0;if(t.look==="neo"&&!A){const Q=`stroke-dasharray: ${t.pattern==="dotted"||t.pattern==="dashed"?ZV(j,Y,K):`0 ${Y} ${j-Y-K} ${K}`}; stroke-dashoffset: 0;`;v.attr("style",Q+v.attr("style"))}}v.attr("data-edge",!0),v.attr("data-et","edge"),v.attr("data-id",t.id),v.attr("data-points",g),t.showPoints&&p.forEach(T=>{e.append("circle").style("stroke","red").style("fill","red").attr("r",1).attr("cx",T.x).attr("cy",T.y)});let B="";(ne().flowchart.arrowMarkerAbsolute||ne().state.arrowMarkerAbsolute)&&(B=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,B=B.replace(/\(/g,"\\(").replace(/\)/g,"\\)")),X.info("arrowTypeStart",t.arrowTypeStart),X.info("arrowTypeEnd",t.arrowTypeEnd),HV(v,t,B,o,n,L);const O=Math.floor(c.length/2),F=c[O];vn.isLabelCoordinateInPath(F,v.attr("d"))||(h=!0);let R={};return h&&(R.updatedPath=c),R.originalPath=t.points,R},"insertEdge");function _A(e,t){if(e.length<2)return"";let i="";const n=e.length,r=1e-5;for(let s=0;s<n;s++){const o=e[s],a=e[s-1],l=e[s+1];if(s===0)i+=`M${o.x},${o.y}`;else if(s===n-1)i+=`L${o.x},${o.y}`;else{const c=o.x-a.x,h=o.y-a.y,u=l.x-o.x,d=l.y-o.y,f=Math.hypot(c,h),g=Math.hypot(u,d);if(f<r||g<r){i+=`L${o.x},${o.y}`;continue}const p=c/f,m=h/f,y=u/g,_=d/g,C=p*y+m*_,b=Math.max(-1,Math.min(1,C)),v=Math.acos(b);if(v<r||Math.abs(Math.PI-v)<r){i+=`L${o.x},${o.y}`;continue}const S=Math.min(t/Math.sin(v/2),f/2,g/2),w=o.x-p*S,L=o.y-m*S,A=o.x+y*S,B=o.y+_*S;i+=`L${w},${L}`,i+=`Q${o.x},${o.y} ${A},${B}`}}return i}x(_A,"generateRoundedPath");function qm(e,t){if(!e||!t)return{angle:0,deltaX:0,deltaY:0};const i=t.x-e.x,n=t.y-e.y;return{angle:Math.atan2(n,i),deltaX:i,deltaY:n}}x(qm,"calculateDeltaAndAngle");function xA(e,t){const i=e.map(r=>({...r}));if(e.length>=2&&oi[t.arrowTypeStart]){const r=oi[t.arrowTypeStart],s=e[0],o=e[1],{angle:a}=qm(s,o),l=r*Math.cos(a),c=r*Math.sin(a);i[0].x=s.x+l,i[0].y=s.y+c}const n=e.length;if(n>=2&&oi[t.arrowTypeEnd]){const r=oi[t.arrowTypeEnd],s=e[n-1],o=e[n-2],{angle:a}=qm(o,s),l=r*Math.cos(a),c=r*Math.sin(a);i[n-1].x=s.x-l,i[n-1].y=s.y-c}return i}x(xA,"applyMarkerOffsetsToPoints");var QV=x((e,t,i,n)=>{t.forEach(r=>{pU[r](e,i,n)})},"insertMarkers"),tU=x((e,t,i)=>{X.trace("Making markers for ",i),e.append("defs").append("marker").attr("id",i+"_"+t+"-extensionStart").attr("class","marker extension "+t).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),e.append("defs").append("marker").attr("id",i+"_"+t+"-extensionEnd").attr("class","marker extension "+t).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z")},"extension"),eU=x((e,t,i)=>{e.append("defs").append("marker").attr("id",i+"_"+t+"-compositionStart").attr("class","marker composition "+t).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),e.append("defs").append("marker").attr("id",i+"_"+t+"-compositionEnd").attr("class","marker composition "+t).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},"composition"),iU=x((e,t,i)=>{e.append("defs").append("marker").attr("id",i+"_"+t+"-aggregationStart").attr("class","marker aggregation "+t).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),e.append("defs").append("marker").attr("id",i+"_"+t+"-aggregationEnd").attr("class","marker aggregation "+t).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},"aggregation"),nU=x((e,t,i)=>{e.append("defs").append("marker").attr("id",i+"_"+t+"-dependencyStart").attr("class","marker dependency "+t).attr("refX",6).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),e.append("defs").append("marker").attr("id",i+"_"+t+"-dependencyEnd").attr("class","marker dependency "+t).attr("refX",13).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},"dependency"),rU=x((e,t,i)=>{e.append("defs").append("marker").attr("id",i+"_"+t+"-lollipopStart").attr("class","marker lollipop "+t).attr("refX",13).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6),e.append("defs").append("marker").attr("id",i+"_"+t+"-lollipopEnd").attr("class","marker lollipop "+t).attr("refX",1).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6)},"lollipop"),sU=x((e,t,i)=>{e.append("marker").attr("id",i+"_"+t+"-pointEnd").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",8).attr("markerHeight",8).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),e.append("marker").attr("id",i+"_"+t+"-pointStart").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",4.5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",8).attr("markerHeight",8).attr("orient","auto").append("path").attr("d","M 0 5 L 10 10 L 10 0 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},"point"),oU=x((e,t,i)=>{e.append("marker").attr("id",i+"_"+t+"-circleEnd").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",11).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),e.append("marker").attr("id",i+"_"+t+"-circleStart").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",-1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},"circle"),aU=x((e,t,i)=>{e.append("marker").attr("id",i+"_"+t+"-crossEnd").attr("class","marker cross "+t).attr("viewBox","0 0 11 11").attr("refX",12).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0"),e.append("marker").attr("id",i+"_"+t+"-crossStart").attr("class","marker cross "+t).attr("viewBox","0 0 11 11").attr("refX",-1).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0")},"cross"),lU=x((e,t,i)=>{e.append("defs").append("marker").attr("id",i+"_"+t+"-barbEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",14).attr("markerUnits","userSpaceOnUse").attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")},"barb"),cU=x((e,t,i)=>{e.append("defs").append("marker").attr("id",i+"_"+t+"-onlyOneStart").attr("class","marker onlyOne "+t).attr("refX",0).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("d","M9,0 L9,18 M15,0 L15,18"),e.append("defs").append("marker").attr("id",i+"_"+t+"-onlyOneEnd").attr("class","marker onlyOne "+t).attr("refX",18).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("d","M3,0 L3,18 M9,0 L9,18")},"only_one"),hU=x((e,t,i)=>{const n=e.append("defs").append("marker").attr("id",i+"_"+t+"-zeroOrOneStart").attr("class","marker zeroOrOne "+t).attr("refX",0).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto");n.append("circle").attr("fill","white").attr("cx",21).attr("cy",9).attr("r",6),n.append("path").attr("d","M9,0 L9,18");const r=e.append("defs").append("marker").attr("id",i+"_"+t+"-zeroOrOneEnd").attr("class","marker zeroOrOne "+t).attr("refX",30).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto");r.append("circle").attr("fill","white").attr("cx",9).attr("cy",9).attr("r",6),r.append("path").attr("d","M21,0 L21,18")},"zero_or_one"),uU=x((e,t,i)=>{e.append("defs").append("marker").attr("id",i+"_"+t+"-oneOrMoreStart").attr("class","marker oneOrMore "+t).attr("refX",18).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("d","M0,18 Q 18,0 36,18 Q 18,36 0,18 M42,9 L42,27"),e.append("defs").append("marker").attr("id",i+"_"+t+"-oneOrMoreEnd").attr("class","marker oneOrMore "+t).attr("refX",27).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("d","M3,9 L3,27 M9,18 Q27,0 45,18 Q27,36 9,18")},"one_or_more"),dU=x((e,t,i)=>{const n=e.append("defs").append("marker").attr("id",i+"_"+t+"-zeroOrMoreStart").attr("class","marker zeroOrMore "+t).attr("refX",18).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto");n.append("circle").attr("fill","white").attr("cx",48).attr("cy",18).attr("r",6),n.append("path").attr("d","M0,18 Q18,0 36,18 Q18,36 0,18");const r=e.append("defs").append("marker").attr("id",i+"_"+t+"-zeroOrMoreEnd").attr("class","marker zeroOrMore "+t).attr("refX",39).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto");r.append("circle").attr("fill","white").attr("cx",9).attr("cy",18).attr("r",6),r.append("path").attr("d","M21,18 Q39,0 57,18 Q39,36 21,18")},"zero_or_more"),fU=x((e,t,i)=>{e.append("defs").append("marker").attr("id",i+"_"+t+"-requirement_arrowEnd").attr("refX",20).attr("refY",10).attr("markerWidth",20).attr("markerHeight",20).attr("orient","auto").append("path").attr("d",`M0,0
      L20,10
      M20,10
      L0,20`)},"requirement_arrow"),gU=x((e,t,i)=>{const n=e.append("defs").append("marker").attr("id",i+"_"+t+"-requirement_containsStart").attr("refX",0).attr("refY",10).attr("markerWidth",20).attr("markerHeight",20).attr("orient","auto").append("g");n.append("circle").attr("cx",10).attr("cy",10).attr("r",9).attr("fill","none"),n.append("line").attr("x1",1).attr("x2",19).attr("y1",10).attr("y2",10),n.append("line").attr("y1",1).attr("y2",19).attr("x1",10).attr("x2",10)},"requirement_contains"),pU={extension:tU,composition:eU,aggregation:iU,dependency:nU,lollipop:rU,point:sU,circle:oU,cross:aU,barb:lU,only_one:cU,zero_or_one:hU,one_or_more:uU,zero_or_more:dU,requirement_arrow:fU,requirement_contains:gU},mU=QV,yU={common:el,getConfig:ui,insertCluster:TV,insertEdge:JV,insertEdgeLabel:UV,insertMarkers:mU,insertNode:mA,interpolateToCurve:e_,labelHelper:At,log:X,positionEdgeLabel:qV},jc={},CA=x(e=>{for(const t of e)jc[t.name]=t},"registerLayoutLoaders"),_U=x(()=>{CA([{name:"dagre",loader:x(async()=>await Kt(()=>import("./dagre-6UL2VRFP-BGkJMz43.js"),__vite__mapDeps([6,7,8,9,10,11])),"loader")},{name:"cose-bilkent",loader:x(async()=>await Kt(()=>import("./cose-bilkent-S5V4N54A-DLp6Igro.js"),__vite__mapDeps([12,13])),"loader")}])},"registerDefaultLayoutLoaders");_U();var hX=x(async(e,t)=>{if(!(e.layoutAlgorithm in jc))throw new Error(`Unknown layout algorithm: ${e.layoutAlgorithm}`);const i=jc[e.layoutAlgorithm];return(await i.loader()).render(e,t,yU,{algorithm:i.algorithm})},"render"),uX=x((e="",{fallback:t="dagre"}={})=>{if(e in jc)return e;if(t in jc)return X.warn(`Layout algorithm ${e} is not registered. Using ${t} as fallback.`),t;throw new Error(`Both layout algorithms ${e} and ${t} are not registered.`)},"getRegisteredLayoutAlgorithm"),bA="comm",vA="rule",wA="decl",xU="@import",CU="@namespace",bU="@keyframes",vU="@layer",SA=Math.abs,b_=String.fromCharCode;function TA(e){return e.trim()}function Cu(e,t,i){return e.replace(t,i)}function wU(e,t,i){return e.indexOf(t,i)}function ba(e,t){return e.charCodeAt(t)|0}function Ya(e,t,i){return e.slice(t,i)}function qn(e){return e.length}function SU(e){return e.length}function Qh(e,t){return t.push(e),e}var Xf=1,Xa=1,EA=0,fn=0,Oe=0,ol="";function v_(e,t,i,n,r,s,o,a){return{value:e,root:t,parent:i,type:n,props:r,children:s,line:Xf,column:Xa,length:o,return:"",siblings:a}}function TU(){return Oe}function EU(){return Oe=fn>0?ba(ol,--fn):0,Xa--,Oe===10&&(Xa=1,Xf--),Oe}function Mn(){return Oe=fn<EA?ba(ol,fn++):0,Xa++,Oe===10&&(Xa=1,Xf++),Oe}function Cs(){return ba(ol,fn)}function bu(){return fn}function Kf(e,t){return Ya(ol,e,t)}function Hc(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function kU(e){return Xf=Xa=1,EA=qn(ol=e),fn=0,[]}function RU(e){return ol="",e}function gp(e){return TA(Kf(fn-1,Ym(e===91?e+2:e===40?e+1:e)))}function AU(e){for(;(Oe=Cs())&&Oe<33;)Mn();return Hc(e)>2||Hc(Oe)>3?"":" "}function LU(e,t){for(;--t&&Mn()&&!(Oe<48||Oe>102||Oe>57&&Oe<65||Oe>70&&Oe<97););return Kf(e,bu()+(t<6&&Cs()==32&&Mn()==32))}function Ym(e){for(;Mn();)switch(Oe){case e:return fn;case 34:case 39:e!==34&&e!==39&&Ym(Oe);break;case 40:e===41&&Ym(e);break;case 92:Mn();break}return fn}function MU(e,t){for(;Mn()&&e+Oe!==57;)if(e+Oe===84&&Cs()===47)break;return"/*"+Kf(t,fn-1)+"*"+b_(e===47?e:Mn())}function IU(e){for(;!Hc(Cs());)Mn();return Kf(e,fn)}function PU(e){return RU(vu("",null,null,null,[""],e=kU(e),0,[0],e))}function vu(e,t,i,n,r,s,o,a,l){for(var c=0,h=0,u=o,d=0,f=0,g=0,p=1,m=1,y=1,_=0,C="",b=r,v=s,S=n,w=C;m;)switch(g=_,_=Mn()){case 40:if(g!=108&&ba(w,u-1)==58){wU(w+=Cu(gp(_),"&","&\f"),"&\f",SA(c?a[c-1]:0))!=-1&&(y=-1);break}case 34:case 39:case 91:w+=gp(_);break;case 9:case 10:case 13:case 32:w+=AU(g);break;case 92:w+=LU(bu()-1,7);continue;case 47:switch(Cs()){case 42:case 47:Qh(FU(MU(Mn(),bu()),t,i,l),l),(Hc(g||1)==5||Hc(Cs()||1)==5)&&qn(w)&&Ya(w,-1,void 0)!==" "&&(w+=" ");break;default:w+="/"}break;case 123*p:a[c++]=qn(w)*y;case 125*p:case 59:case 0:switch(_){case 0:case 125:m=0;case 59+h:y==-1&&(w=Cu(w,/\f/g,"")),f>0&&(qn(w)-u||p===0&&g===47)&&Qh(f>32?xb(w+";",n,i,u-1,l):xb(Cu(w," ","")+";",n,i,u-2,l),l);break;case 59:w+=";";default:if(Qh(S=_b(w,t,i,c,h,r,a,C,b=[],v=[],u,s),s),_===123)if(h===0)vu(w,t,S,S,b,s,u,a,v);else{switch(d){case 99:if(ba(w,3)===110)break;case 108:if(ba(w,2)===97)break;default:h=0;case 100:case 109:case 115:}h?vu(e,S,S,n&&Qh(_b(e,S,S,0,0,r,a,C,r,b=[],u,v),v),r,v,u,a,n?b:v):vu(w,S,S,S,[""],v,0,a,v)}}c=h=f=0,p=y=1,C=w="",u=o;break;case 58:u=1+qn(w),f=g;default:if(p<1){if(_==123)--p;else if(_==125&&p++==0&&EU()==125)continue}switch(w+=b_(_),_*p){case 38:y=h>0?1:(w+="\f",-1);break;case 44:a[c++]=(qn(w)-1)*y,y=1;break;case 64:Cs()===45&&(w+=gp(Mn())),d=Cs(),h=u=qn(C=w+=IU(bu())),_++;break;case 45:g===45&&qn(w)==2&&(p=0)}}return s}function _b(e,t,i,n,r,s,o,a,l,c,h,u){for(var d=r-1,f=r===0?s:[""],g=SU(f),p=0,m=0,y=0;p<n;++p)for(var _=0,C=Ya(e,d+1,d=SA(m=o[p])),b=e;_<g;++_)(b=TA(m>0?f[_]+" "+C:Cu(C,/&\f/g,f[_])))&&(l[y++]=b);return v_(e,t,i,r===0?vA:a,l,c,h,u)}function FU(e,t,i,n){return v_(e,t,i,bA,b_(TU()),Ya(e,2,-2),0,n)}function xb(e,t,i,n,r){return v_(e,t,i,wA,Ya(e,0,n),Ya(e,n+1,-1),n,r)}function Xm(e,t){for(var i="",n=0;n<e.length;n++)i+=t(e[n],n,e,t)||"";return i}function OU(e,t,i,n){switch(e.type){case vU:if(e.children.length)break;case xU:case CU:case wA:return e.return=e.return||e.value;case bA:return"";case bU:return e.return=e.value+"{"+Xm(e.children,n)+"}";case vA:if(!qn(e.value=e.props.join(",")))return""}return qn(i=Xm(e.children,n))?e.return=e.value+"{"+i+"}":""}var DU=JE(Object.keys,Object),BU=Object.prototype,NU=BU.hasOwnProperty;function $U(e){if(!$f(e))return DU(e);var t=[];for(var i in Object(e))NU.call(e,i)&&i!="constructor"&&t.push(i);return t}var Km=Do(ur,"DataView"),Zm=Do(ur,"Promise"),Jm=Do(ur,"Set"),Qm=Do(ur,"WeakMap"),Cb="[object Map]",zU="[object Object]",bb="[object Promise]",vb="[object Set]",wb="[object WeakMap]",Sb="[object DataView]",GU=Oo(Km),WU=Oo(Gc),jU=Oo(Zm),HU=Oo(Jm),VU=Oo(Qm),Ks=nl;(Km&&Ks(new Km(new ArrayBuffer(1)))!=Sb||Gc&&Ks(new Gc)!=Cb||Zm&&Ks(Zm.resolve())!=bb||Jm&&Ks(new Jm)!=vb||Qm&&Ks(new Qm)!=wb)&&(Ks=function(e){var t=nl(e),i=t==zU?e.constructor:void 0,n=i?Oo(i):"";if(n)switch(n){case GU:return Sb;case WU:return Cb;case jU:return bb;case HU:return vb;case VU:return wb}return t});var UU="[object Map]",qU="[object Set]",YU=Object.prototype,XU=YU.hasOwnProperty;function Tb(e){if(e==null)return!0;if(zf(e)&&(Sd(e)||typeof e=="string"||typeof e.splice=="function"||Qy(e)||t_(e)||wd(e)))return!e.length;var t=Ks(e);if(t==UU||t==qU)return!e.size;if($f(e))return!$U(e).length;for(var i in e)if(XU.call(e,i))return!1;return!0}var kA="c4",KU=x(e=>/^\s*C4Context|C4Container|C4Component|C4Dynamic|C4Deployment/.test(e),"detector"),ZU=x(async()=>{const{diagram:e}=await Kt(async()=>{const{diagram:t}=await import("./c4Diagram-YG6GDRKO-CuAUQTl_.js");return{diagram:t}},__vite__mapDeps([14,15]));return{id:kA,diagram:e}},"loader"),JU={id:kA,detector:KU,loader:ZU},QU=JU,RA="flowchart",tq=x((e,t)=>t?.flowchart?.defaultRenderer==="dagre-wrapper"||t?.flowchart?.defaultRenderer==="elk"?!1:/^\s*graph/.test(e),"detector"),eq=x(async()=>{const{diagram:e}=await Kt(async()=>{const{diagram:t}=await import("./flowDiagram-NV44I4VS-t_rUD_c2.js");return{diagram:t}},__vite__mapDeps([16,17,18,19,20]));return{id:RA,diagram:e}},"loader"),iq={id:RA,detector:tq,loader:eq},nq=iq,AA="flowchart-v2",rq=x((e,t)=>t?.flowchart?.defaultRenderer==="dagre-d3"?!1:(t?.flowchart?.defaultRenderer==="elk"&&(t.layout="elk"),/^\s*graph/.test(e)&&t?.flowchart?.defaultRenderer==="dagre-wrapper"?!0:/^\s*flowchart/.test(e)),"detector"),sq=x(async()=>{const{diagram:e}=await Kt(async()=>{const{diagram:t}=await import("./flowDiagram-NV44I4VS-t_rUD_c2.js");return{diagram:t}},__vite__mapDeps([16,17,18,19,20]));return{id:AA,diagram:e}},"loader"),oq={id:AA,detector:rq,loader:sq},aq=oq,LA="er",lq=x(e=>/^\s*erDiagram/.test(e),"detector"),cq=x(async()=>{const{diagram:e}=await Kt(async()=>{const{diagram:t}=await import("./erDiagram-Q2GNP2WA-BCJ0qWvy.js");return{diagram:t}},__vite__mapDeps([21,18,19,20]));return{id:LA,diagram:e}},"loader"),hq={id:LA,detector:lq,loader:cq},uq=hq,MA="gitGraph",dq=x(e=>/^\s*gitGraph/.test(e),"detector"),fq=x(async()=>{const{diagram:e}=await Kt(async()=>{const{diagram:t}=await import("./gitGraphDiagram-NY62KEGX-b6H7Aj_B.js");return{diagram:t}},__vite__mapDeps([22,23,24,25,10,8]));return{id:MA,diagram:e}},"loader"),gq={id:MA,detector:dq,loader:fq},pq=gq,IA="gantt",mq=x(e=>/^\s*gantt/.test(e),"detector"),yq=x(async()=>{const{diagram:e}=await Kt(async()=>{const{diagram:t}=await import("./ganttDiagram-JELNMOA3-Bx7O3S07.js");return{diagram:t}},__vite__mapDeps([26,27,28,29]));return{id:IA,diagram:e}},"loader"),_q={id:IA,detector:mq,loader:yq},xq=_q,PA="info",Cq=x(e=>/^\s*info/.test(e),"detector"),bq=x(async()=>{const{diagram:e}=await Kt(async()=>{const{diagram:t}=await import("./infoDiagram-WHAUD3N6-BUSRwQrM.js");return{diagram:t}},__vite__mapDeps([30,25,10,8]));return{id:PA,diagram:e}},"loader"),vq={id:PA,detector:Cq,loader:bq},FA="pie",wq=x(e=>/^\s*pie/.test(e),"detector"),Sq=x(async()=>{const{diagram:e}=await Kt(async()=>{const{diagram:t}=await import("./pieDiagram-ADFJNKIX-C74se6QC.js");return{diagram:t}},__vite__mapDeps([31,23,25,10,8,32,33,28]));return{id:FA,diagram:e}},"loader"),Tq={id:FA,detector:wq,loader:Sq},OA="quadrantChart",Eq=x(e=>/^\s*quadrantChart/.test(e),"detector"),kq=x(async()=>{const{diagram:e}=await Kt(async()=>{const{diagram:t}=await import("./quadrantDiagram-AYHSOK5B-DSmEhRV4.js");return{diagram:t}},__vite__mapDeps([34,27,28,29]));return{id:OA,diagram:e}},"loader"),Rq={id:OA,detector:Eq,loader:kq},Aq=Rq,DA="xychart",Lq=x(e=>/^\s*xychart(-beta)?/.test(e),"detector"),Mq=x(async()=>{const{diagram:e}=await Kt(async()=>{const{diagram:t}=await import("./xychartDiagram-PRI3JC2R-COo7oR7p.js");return{diagram:t}},__vite__mapDeps([35,28,33,27,29]));return{id:DA,diagram:e}},"loader"),Iq={id:DA,detector:Lq,loader:Mq},Pq=Iq,BA="requirement",Fq=x(e=>/^\s*requirement(Diagram)?/.test(e),"detector"),Oq=x(async()=>{const{diagram:e}=await Kt(async()=>{const{diagram:t}=await import("./requirementDiagram-UZGBJVZJ-Bx3R3nCI.js");return{diagram:t}},__vite__mapDeps([36,18,19]));return{id:BA,diagram:e}},"loader"),Dq={id:BA,detector:Fq,loader:Oq},Bq=Dq,NA="sequence",Nq=x(e=>/^\s*sequenceDiagram/.test(e),"detector"),$q=x(async()=>{const{diagram:e}=await Kt(async()=>{const{diagram:t}=await import("./sequenceDiagram-WL72ISMW-DVBkEcje.js");return{diagram:t}},__vite__mapDeps([37,15,24]));return{id:NA,diagram:e}},"loader"),zq={id:NA,detector:Nq,loader:$q},Gq=zq,$A="class",Wq=x((e,t)=>t?.class?.defaultRenderer==="dagre-wrapper"?!1:/^\s*classDiagram/.test(e),"detector"),jq=x(async()=>{const{diagram:e}=await Kt(async()=>{const{diagram:t}=await import("./classDiagram-2ON5EDUG-DMtRB23a.js");return{diagram:t}},__vite__mapDeps([38,39,17,18,19]));return{id:$A,diagram:e}},"loader"),Hq={id:$A,detector:Wq,loader:jq},Vq=Hq,zA="classDiagram",Uq=x((e,t)=>/^\s*classDiagram/.test(e)&&t?.class?.defaultRenderer==="dagre-wrapper"?!0:/^\s*classDiagram-v2/.test(e),"detector"),qq=x(async()=>{const{diagram:e}=await Kt(async()=>{const{diagram:t}=await import("./classDiagram-v2-WZHVMYZB-DMtRB23a.js");return{diagram:t}},__vite__mapDeps([40,39,17,18,19]));return{id:zA,diagram:e}},"loader"),Yq={id:zA,detector:Uq,loader:qq},Xq=Yq,GA="state",Kq=x((e,t)=>t?.state?.defaultRenderer==="dagre-wrapper"?!1:/^\s*stateDiagram/.test(e),"detector"),Zq=x(async()=>{const{diagram:e}=await Kt(async()=>{const{diagram:t}=await import("./stateDiagram-FKZM4ZOC-BJ4yAf1s.js");return{diagram:t}},__vite__mapDeps([41,42,18,19,7,8,9,10]));return{id:GA,diagram:e}},"loader"),Jq={id:GA,detector:Kq,loader:Zq},Qq=Jq,WA="stateDiagram",tY=x((e,t)=>!!(/^\s*stateDiagram-v2/.test(e)||/^\s*stateDiagram/.test(e)&&t?.state?.defaultRenderer==="dagre-wrapper"),"detector"),eY=x(async()=>{const{diagram:e}=await Kt(async()=>{const{diagram:t}=await import("./stateDiagram-v2-4FDKWEC3-kYvuriAw.js");return{diagram:t}},__vite__mapDeps([43,42,18,19]));return{id:WA,diagram:e}},"loader"),iY={id:WA,detector:tY,loader:eY},nY=iY,jA="journey",rY=x(e=>/^\s*journey/.test(e),"detector"),sY=x(async()=>{const{diagram:e}=await Kt(async()=>{const{diagram:t}=await import("./journeyDiagram-XKPGCS4Q-BwrQKhXc.js");return{diagram:t}},__vite__mapDeps([44,15,17,32]));return{id:jA,diagram:e}},"loader"),oY={id:jA,detector:rY,loader:sY},aY=oY,lY=x((e,t,i)=>{X.debug(`rendering svg for syntax error
`);const n=WG(t),r=n.append("g");n.attr("viewBox","0 0 2412 512"),m2(n,100,512,!0),r.append("path").attr("class","error-icon").attr("d","m411.313,123.313c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32-9.375,9.375-20.688-20.688c-12.484-12.5-32.766-12.5-45.25,0l-16,16c-1.261,1.261-2.304,2.648-3.31,4.051-21.739-8.561-45.324-13.426-70.065-13.426-105.867,0-192,86.133-192,192s86.133,192 192,192 192-86.133 192-192c0-24.741-4.864-48.327-13.426-70.065 1.402-1.007 2.79-2.049 4.051-3.31l16-16c12.5-12.492 12.5-32.758 0-45.25l-20.688-20.688 9.375-9.375 32.001-31.999zm-219.313,100.687c-52.938,0-96,43.063-96,96 0,8.836-7.164,16-16,16s-16-7.164-16-16c0-70.578 57.422-128 128-128 8.836,0 16,7.164 16,16s-7.164,16-16,16z"),r.append("path").attr("class","error-icon").attr("d","m459.02,148.98c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l16,16c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16.001-16z"),r.append("path").attr("class","error-icon").attr("d","m340.395,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16-16c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l15.999,16z"),r.append("path").attr("class","error-icon").attr("d","m400,64c8.844,0 16-7.164 16-16v-32c0-8.836-7.156-16-16-16-8.844,0-16,7.164-16,16v32c0,8.836 7.156,16 16,16z"),r.append("path").attr("class","error-icon").attr("d","m496,96.586h-32c-8.844,0-16,7.164-16,16 0,8.836 7.156,16 16,16h32c8.844,0 16-7.164 16-16 0-8.836-7.156-16-16-16z"),r.append("path").attr("class","error-icon").attr("d","m436.98,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688l32-32c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32c-6.251,6.25-6.251,16.375-0.001,22.625z"),r.append("text").attr("class","error-text").attr("x",1440).attr("y",250).attr("font-size","150px").style("text-anchor","middle").text("Syntax error in text"),r.append("text").attr("class","error-text").attr("x",1250).attr("y",400).attr("font-size","100px").style("text-anchor","middle").text(`mermaid version ${i}`)},"draw"),HA={draw:lY},cY=HA,hY={db:{},renderer:HA,parser:{parse:x(()=>{},"parse")}},uY=hY,VA="flowchart-elk",dY=x((e,t={})=>/^\s*flowchart-elk/.test(e)||/^\s*(flowchart|graph)/.test(e)&&t?.flowchart?.defaultRenderer==="elk"?(t.layout="elk",!0):!1,"detector"),fY=x(async()=>{const{diagram:e}=await Kt(async()=>{const{diagram:t}=await import("./flowDiagram-NV44I4VS-t_rUD_c2.js");return{diagram:t}},__vite__mapDeps([16,17,18,19,20]));return{id:VA,diagram:e}},"loader"),gY={id:VA,detector:dY,loader:fY},pY=gY,UA="timeline",mY=x(e=>/^\s*timeline/.test(e),"detector"),yY=x(async()=>{const{diagram:e}=await Kt(async()=>{const{diagram:t}=await import("./timeline-definition-IT6M3QCI-_PeLrePV.js");return{diagram:t}},__vite__mapDeps([45,32]));return{id:UA,diagram:e}},"loader"),_Y={id:UA,detector:mY,loader:yY},xY=_Y,qA="mindmap",CY=x(e=>/^\s*mindmap/.test(e),"detector"),bY=x(async()=>{const{diagram:e}=await Kt(async()=>{const{diagram:t}=await import("./mindmap-definition-VGOIOE7T-BzFX8Ipu.js");return{diagram:t}},__vite__mapDeps([46,18,19]));return{id:qA,diagram:e}},"loader"),vY={id:qA,detector:CY,loader:bY},wY=vY,YA="kanban",SY=x(e=>/^\s*kanban/.test(e),"detector"),TY=x(async()=>{const{diagram:e}=await Kt(async()=>{const{diagram:t}=await import("./kanban-definition-3W4ZIXB7-o-WeTiMO.js");return{diagram:t}},__vite__mapDeps([47,17]));return{id:YA,diagram:e}},"loader"),EY={id:YA,detector:SY,loader:TY},kY=EY,XA="sankey",RY=x(e=>/^\s*sankey(-beta)?/.test(e),"detector"),AY=x(async()=>{const{diagram:e}=await Kt(async()=>{const{diagram:t}=await import("./sankeyDiagram-TZEHDZUN-DKf_m5bS.js");return{diagram:t}},__vite__mapDeps([48,33,28]));return{id:XA,diagram:e}},"loader"),LY={id:XA,detector:RY,loader:AY},MY=LY,KA="packet",IY=x(e=>/^\s*packet(-beta)?/.test(e),"detector"),PY=x(async()=>{const{diagram:e}=await Kt(async()=>{const{diagram:t}=await import("./diagram-S2PKOQOG-DzX1Sy7S.js");return{diagram:t}},__vite__mapDeps([49,23,25,10,8]));return{id:KA,diagram:e}},"loader"),FY={id:KA,detector:IY,loader:PY},ZA="radar",OY=x(e=>/^\s*radar-beta/.test(e),"detector"),DY=x(async()=>{const{diagram:e}=await Kt(async()=>{const{diagram:t}=await import("./diagram-QEK2KX5R-VsuAoklT.js");return{diagram:t}},__vite__mapDeps([50,23,25,10,8]));return{id:ZA,diagram:e}},"loader"),BY={id:ZA,detector:OY,loader:DY},JA="block",NY=x(e=>/^\s*block(-beta)?/.test(e),"detector"),$Y=x(async()=>{const{diagram:e}=await Kt(async()=>{const{diagram:t}=await import("./blockDiagram-VD42YOAC-BLblwFWd.js");return{diagram:t}},__vite__mapDeps([51,17,11,7,8,20]));return{id:JA,diagram:e}},"loader"),zY={id:JA,detector:NY,loader:$Y},GY=zY,QA="architecture",WY=x(e=>/^\s*architecture/.test(e),"detector"),jY=x(async()=>{const{diagram:e}=await Kt(async()=>{const{diagram:t}=await import("./architectureDiagram-VXUJARFQ-QWfjrkN1.js");return{diagram:t}},__vite__mapDeps([52,23,25,10,8,13]));return{id:QA,diagram:e}},"loader"),HY={id:QA,detector:WY,loader:jY},VY=HY,tL="treemap",UY=x(e=>/^\s*treemap/.test(e),"detector"),qY=x(async()=>{const{diagram:e}=await Kt(async()=>{const{diagram:t}=await import("./diagram-PSM6KHXK-eL0VgOPT.js");return{diagram:t}},__vite__mapDeps([53,19,23,25,10,8,29,33,28]));return{id:tL,diagram:e}},"loader"),YY={id:tL,detector:UY,loader:qY},Eb=!1,Zf=x(()=>{Eb||(Eb=!0,rd("error",uY,e=>e.toLowerCase().trim()==="error"),rd("---",{db:{clear:x(()=>{},"clear")},styles:{},renderer:{draw:x(()=>{},"draw")},parser:{parse:x(()=>{throw new Error("Diagrams beginning with --- are not valid. If you were trying to use a YAML front-matter, please ensure that you've correctly opened and closed the YAML front-matter with un-indented `---` blocks")},"parse")},init:x(()=>null,"init")},e=>e.toLowerCase().trimStart().startsWith("---")),om(pY,wY,VY),om(QU,kY,Xq,Vq,uq,xq,vq,Tq,Bq,Gq,aq,nq,xY,pq,nY,Qq,aY,Aq,MY,FY,Pq,GY,BY,YY))},"addDiagrams"),XY=x(async()=>{X.debug("Loading registered diagrams");const t=(await Promise.allSettled(Object.entries(So).map(async([i,{detector:n,loader:r}])=>{if(r)try{hm(i)}catch{try{const{diagram:s,id:o}=await r();rd(o,s,n)}catch(s){throw X.error(`Failed to load external diagram with key ${i}. Removing from detectors.`),delete So[i],s}}}))).filter(i=>i.status==="rejected");if(t.length>0){X.error(`Failed to load ${t.length} external diagrams`);for(const i of t)X.error(i);throw new Error(`Failed to load ${t.length} external diagrams`)}},"loadRegisteredDiagrams"),KY="graphics-document document";function eL(e,t){e.attr("role",KY),t!==""&&e.attr("aria-roledescription",t)}x(eL,"setA11yDiagramInfo");function iL(e,t,i,n){if(e.insert!==void 0){if(i){const r=`chart-desc-${n}`;e.attr("aria-describedby",r),e.insert("desc",":first-child").attr("id",r).text(i)}if(t){const r=`chart-title-${n}`;e.attr("aria-labelledby",r),e.insert("title",":first-child").attr("id",r).text(t)}}}x(iL,"addSVGa11yTitleDescription");var mo,t0=(mo=class{constructor(t,i,n,r,s){this.type=t,this.text=i,this.db=n,this.parser=r,this.renderer=s}static async fromText(t,i={}){const n=ui(),r=Sy(t,n);t=YH(t)+`
`;try{hm(r)}catch{const c=_5(r);if(!c)throw new r2(`Diagram ${r} not found.`);const{id:h,diagram:u}=await c();rd(h,u)}const{db:s,parser:o,renderer:a,init:l}=hm(r);return o.parser&&(o.parser.yy=s),s.clear?.(),l?.(n),i.title&&s.setDiagramTitle?.(i.title),await o.parse(t),new mo(r,t,s,o,a)}async render(t,i){await this.renderer.draw(this.text,t,i,this)}getParser(){return this.parser}getType(){return this.type}},x(mo,"Diagram"),mo),kb=[],ZY=x(()=>{kb.forEach(e=>{e()}),kb=[]},"attachFunctions"),JY=x(e=>e.replace(/^\s*%%(?!{)[^\n]+\n?/gm,"").trimStart(),"cleanupComments");function nL(e){const t=e.match(n2);if(!t)return{text:e,metadata:{}};let i=XW(t[1],{schema:YW})??{};i=typeof i=="object"&&!Array.isArray(i)?i:{};const n={};return i.displayMode&&(n.displayMode=i.displayMode.toString()),i.title&&(n.title=i.title.toString()),i.config&&(n.config=i.config),{text:e.slice(t[0].length),metadata:n}}x(nL,"extractFrontMatter");var QY=x(e=>e.replace(/\r\n?/g,`
`).replace(/<(\w+)([^>]*)>/g,(t,i,n)=>"<"+i+n.replace(/="([^"]*)"/g,"='$1'")+">"),"cleanupText"),t7=x(e=>{const{text:t,metadata:i}=nL(e),{displayMode:n,title:r,config:s={}}=i;return n&&(s.gantt||(s.gantt={}),s.gantt.displayMode=n),{title:r,config:s,text:t}},"processFrontmatter"),e7=x(e=>{const t=vn.detectInit(e)??{},i=vn.detectDirective(e,"wrap");return Array.isArray(i)?t.wrap=i.some(({type:n})=>n==="wrap"):i?.type==="wrap"&&(t.wrap=!0),{text:OH(e),directive:t}},"processDirectives");function w_(e){const t=QY(e),i=t7(t),n=e7(i.text),r=o_(i.config,n.directive);return e=JY(n.text),{code:e,title:i.title,config:r}}x(w_,"preprocessDiagram");function rL(e){const t=new TextEncoder().encode(e),i=Array.from(t,n=>String.fromCodePoint(n)).join("");return btoa(i)}x(rL,"toBase64");var i7=5e4,n7="graph TB;a[Maximum text size in diagram exceeded];style a fill:#faa",r7="sandbox",s7="loose",o7="http://www.w3.org/2000/svg",a7="http://www.w3.org/1999/xlink",l7="http://www.w3.org/1999/xhtml",c7="100%",h7="100%",u7="border:0;margin:0;",d7="margin:0",f7="allow-top-navigation-by-user-activation allow-popups",g7='The "iframe" tag is not supported by your browser.',p7=["foreignobject"],m7=["dominant-baseline"];function S_(e){const t=w_(e);return id(),F5(t.config??{}),t}x(S_,"processAndSetConfigs");async function sL(e,t){Zf();try{const{code:i,config:n}=S_(e);return{diagramType:(await aL(i)).type,config:n}}catch(i){if(t?.suppressErrors)return!1;throw i}}x(sL,"parse");var Rb=x((e,t,i=[])=>`
.${e} ${t} { ${i.join(" !important; ")} !important; }`,"cssImportantStyles"),y7=x((e,t=new Map)=>{let i="";if(e.themeCSS!==void 0&&(i+=`
${e.themeCSS}`),e.fontFamily!==void 0&&(i+=`
:root { --mermaid-font-family: ${e.fontFamily}}`),e.altFontFamily!==void 0&&(i+=`
:root { --mermaid-alt-font-family: ${e.altFontFamily}}`),t instanceof Map){const o=e.htmlLabels??e.flowchart?.htmlLabels?["> *","span"]:["rect","polygon","ellipse","circle","path"];t.forEach(a=>{Tb(a.styles)||o.forEach(l=>{i+=Rb(a.id,l,a.styles)}),Tb(a.textStyles)||(i+=Rb(a.id,"tspan",(a?.textStyles||[]).map(l=>l.replace("color","fill"))))})}return i},"createCssStyles"),_7=x((e,t,i,n)=>{const r=y7(e,i),s=t4(t,r,e.themeVariables);return Xm(PU(`${n}{${s}}`),OU)},"createUserStyles"),x7=x((e="",t,i)=>{let n=e;return!i&&!t&&(n=n.replace(/marker-end="url\([\d+./:=?A-Za-z-]*?#/g,'marker-end="url(#')),n=Bo(n),n=n.replace(/<br>/g,"<br/>"),n},"cleanUpSvgCode"),C7=x((e="",t)=>{const i=t?.viewBox?.baseVal?.height?t.viewBox.baseVal.height+"px":h7,n=rL(`<body style="${d7}">${e}</body>`);return`<iframe style="width:${c7};height:${i};${u7}" src="data:text/html;charset=UTF-8;base64,${n}" sandbox="${f7}">
  ${g7}
</iframe>`},"putIntoIFrame"),Ab=x((e,t,i,n,r)=>{const s=e.append("div");s.attr("id",i),n&&s.attr("style",n);const o=s.append("svg").attr("id",t).attr("width","100%").attr("xmlns",o7);return r&&o.attr("xmlns:xlink",r),o.append("g"),e},"appendDivSvgG");function e0(e,t){return e.append("iframe").attr("id",t).attr("style","width: 100%; height: 100%;").attr("sandbox","")}x(e0,"sandboxedIframe");var b7=x((e,t,i,n)=>{e.getElementById(t)?.remove(),e.getElementById(i)?.remove(),e.getElementById(n)?.remove()},"removeExistingElements"),v7=x(async function(e,t,i){Zf();const n=S_(t);t=n.code;const r=ui();X.debug(r),t.length>(r?.maxTextSize??i7)&&(t=n7);const s="#"+e,o="i"+e,a="#"+o,l="d"+e,c="#"+l,h=x(()=>{const R=Xt(d?a:c).node();R&&"remove"in R&&R.remove()},"removeTempElements");let u=Xt("body");const d=r.securityLevel===r7,f=r.securityLevel===s7,g=r.fontFamily;if(i!==void 0){if(i&&(i.innerHTML=""),d){const F=e0(Xt(i),o);u=Xt(F.nodes()[0].contentDocument.body),u.node().style.margin=0}else u=Xt(i);Ab(u,e,l,`font-family: ${g}`,a7)}else{if(b7(document,e,l,o),d){const F=e0(Xt("body"),o);u=Xt(F.nodes()[0].contentDocument.body),u.node().style.margin=0}else u=Xt("body");Ab(u,e,l)}let p,m;try{p=await t0.fromText(t,{title:n.title})}catch(F){if(r.suppressErrorRendering)throw h(),F;p=await t0.fromText("error"),m=F}const y=u.select(c).node(),_=p.type,C=y.firstChild,b=C.firstChild,v=p.renderer.getClasses?.(t,p),S=_7(r,_,v,s),w=document.createElement("style");w.innerHTML=S,C.insertBefore(w,b);try{await p.renderer.draw(t,e,YC.version,p)}catch(F){throw r.suppressErrorRendering?h():cY.draw(t,e,YC.version),F}const L=u.select(`${c} svg`),A=p.db.getAccTitle?.(),B=p.db.getAccDescription?.();lL(_,L,A,B),u.select(`[id="${e}"]`).selectAll("foreignobject > *").attr("xmlns",l7);let O=u.select(c).node().innerHTML;if(X.debug("config.arrowMarkerAbsolute",r.arrowMarkerAbsolute),O=x7(O,d,He(r.arrowMarkerAbsolute)),d){const F=u.select(c+" svg").node();O=C7(O,F)}else f||(O=Ga.sanitize(O,{ADD_TAGS:p7,ADD_ATTR:m7,HTML_INTEGRATION_POINTS:{foreignobject:!0}}));if(ZY(),m)throw m;return h(),{diagramType:_,svg:O,bindFunctions:p.db.bindFunctions}},"render");function oL(e={}){const t=We({},e);t?.fontFamily&&!t.themeVariables?.fontFamily&&(t.themeVariables||(t.themeVariables={}),t.themeVariables.fontFamily=t.fontFamily),I5(t),t?.theme&&t.theme in Or?t.themeVariables=Or[t.theme].getThemeVariables(t.themeVariables):t&&(t.themeVariables=Or.default.getThemeVariables(t.themeVariables));const i=typeof t=="object"?M5(t):c2();wy(i.logLevel),Zf()}x(oL,"initialize");var aL=x((e,t={})=>{const{code:i}=w_(e);return t0.fromText(i,t)},"getDiagramFromText");function lL(e,t,i,n){eL(t,e),iL(t,i,n,t.attr("id"))}x(lL,"addA11yInfo");var Lo=Object.freeze({render:v7,parse:sL,getDiagramFromText:aL,initialize:oL,getConfig:ui,setConfig:h2,getSiteConfig:c2,updateSiteConfig:P5,reset:x(()=>{id()},"reset"),globalReset:x(()=>{id(Wa)},"globalReset"),defaultConfig:Wa});wy(ui().logLevel);id(ui());var w7=x((e,t,i)=>{X.warn(e),s_(e)?(i&&i(e.str,e.hash),t.push({...e,message:e.str,error:e})):(i&&i(e),e instanceof Error&&t.push({str:e.message,message:e.message,hash:e.name,error:e}))},"handleError"),cL=x(async function(e={querySelector:".mermaid"}){try{await S7(e)}catch(t){if(s_(t)&&X.error(t.str),Vr.parseError&&Vr.parseError(t),!e.suppressErrors)throw X.error("Use the suppressErrors option to suppress these errors"),t}},"run"),S7=x(async function({postRenderCallback:e,querySelector:t,nodes:i}={querySelector:".mermaid"}){const n=Lo.getConfig();X.debug(`${e?"":"No "}Callback function found`);let r;if(i)r=i;else if(t)r=document.querySelectorAll(t);else throw new Error("Nodes and querySelector are both undefined");X.debug(`Found ${r.length} diagrams`),n?.startOnLoad!==void 0&&(X.debug("Start On Load: "+n?.startOnLoad),Lo.updateSiteConfig({startOnLoad:n?.startOnLoad}));const s=new vn.InitIDGenerator(n.deterministicIds,n.deterministicIDSeed);let o;const a=[];for(const l of Array.from(r)){if(X.info("Rendering diagram: "+l.id),l.getAttribute("data-processed"))continue;l.setAttribute("data-processed","true");const c=`mermaid-${s.next()}`;o=l.innerHTML,o=Lk(vn.entityDecode(o)).trim().replace(/<br\s*\/?>/gi,"<br/>");const h=vn.detectInit(o);h&&X.debug("Detected early reinit: ",h);try{const{svg:u,bindFunctions:d}=await fL(c,o,l);l.innerHTML=u,e&&await e(c),d&&d(l)}catch(u){w7(u,a,Vr.parseError)}}if(a.length>0)throw a[0]},"runThrowsErrors"),hL=x(function(e){Lo.initialize(e)},"initialize"),T7=x(async function(e,t,i){X.warn("mermaid.init is deprecated. Please use run instead."),e&&hL(e);const n={postRenderCallback:i,querySelector:".mermaid"};typeof t=="string"?n.querySelector=t:t&&(t instanceof HTMLElement?n.nodes=[t]:n.nodes=t),await cL(n)},"init"),E7=x(async(e,{lazyLoad:t=!0}={})=>{Zf(),om(...e),t===!1&&await XY()},"registerExternalDiagrams"),uL=x(function(){if(Vr.startOnLoad){const{startOnLoad:e}=Lo.getConfig();e&&Vr.run().catch(t=>X.error("Mermaid failed to initialize",t))}},"contentLoaded");typeof document<"u"&&window.addEventListener("load",uL,!1);var k7=x(function(e){Vr.parseError=e},"setParseErrorHandler"),Od=[],pp=!1,dL=x(async()=>{if(!pp){for(pp=!0;Od.length>0;){const e=Od.shift();if(e)try{await e()}catch(t){X.error("Error executing queue",t)}}pp=!1}},"executeQueue"),R7=x(async(e,t)=>new Promise((i,n)=>{const r=x(()=>new Promise((s,o)=>{Lo.parse(e,t).then(a=>{s(a),i(a)},a=>{X.error("Error parsing",a),Vr.parseError?.(a),o(a),n(a)})}),"performCall");Od.push(r),dL().catch(n)}),"parse"),fL=x((e,t,i)=>new Promise((n,r)=>{const s=x(()=>new Promise((o,a)=>{Lo.render(e,t,i).then(l=>{o(l),n(l)},l=>{X.error("Error parsing",l),Vr.parseError?.(l),a(l),r(l)})}),"performCall");Od.push(s),dL().catch(r)}),"render"),A7=x(()=>Object.keys(So).map(e=>({id:e})),"getRegisteredDiagramsMetadata"),Vr={startOnLoad:!0,mermaidAPI:Lo,parse:R7,render:fL,init:T7,run:cL,registerExternalDiagrams:E7,registerLayoutLoaders:CA,initialize:hL,parseError:void 0,contentLoaded:uL,setParseErrorHandler:k7,detectType:Sy,registerIconPacks:J9,getRegisteredDiagramsMetadata:A7},Lb=Vr;const L7=["innerHTML"],M7={__name:"Mermaid",props:{code:{type:String,required:!0}},setup(e){const t=e,i=Je(""),{isDark:n}=S0(),r=o=>{Lb.initialize({startOnLoad:!1,theme:o?"dark":"default",securityLevel:"loose"})};Vd(async()=>{r(n.value),await s()}),Tn(()=>t.code,async()=>{await s()}),Tn(n,async o=>{r(o),await s()});async function s(){if(t.code)try{const o=decodeURIComponent(t.code),a=`mermaid-${Math.random().toString(36).substr(2,9)}`,{svg:l}=await Lb.render(a,o);i.value=l}catch(o){console.error("Mermaid render error:",o),i.value=`<div class="mermaid-error" style="color: red; padding: 10px; border: 1px solid red;">
      Mermaid render error: ${o.message}
    </div>`}}return(o,a)=>(Wt(),oe("div",{class:"mermaid-container",innerHTML:i.value},null,8,L7))}},I7=Ka(M7,[["__scopeId","data-v-b1c9bc81"]]),T_=WI(LF);T_.component("Mermaid",I7);const{setAppError:Jf}=E0();T_.config.errorHandler=e=>{Jf(e)};window.addEventListener("error",e=>{Jf(e?.error||new Error("Window error"))});window.addEventListener("unhandledrejection",e=>{Jf(e?.reason||new Error("Unhandled promise rejection"))});Sf.onError(e=>{Jf(e)});T_.use(Sf).mount("#app");export{y2 as $,rc as A,W$ as B,c4 as C,o_ as D,ui as E,l2 as F,zH as G,WG as H,YC as I,YW as J,S5 as K,ja as L,$7 as M,Gf as N,j5 as O,Ty as P,o1 as Q,PG as R,pu as S,$H as T,ch as U,Z5 as V,lh as W,ft as X,Tt as Y,MH as Z,x as _,n4 as a,qV as a$,AG as a0,E1 as a1,T1 as a2,K7 as a3,V7 as a4,Y7 as a5,q7 as a6,j7 as a7,Xo as a8,Ny as a9,wi as aA,Hg as aB,Vd as aC,Ud as aD,nM as aE,F7 as aF,yo as aG,Rr as aH,mn as aI,Lu as aJ,Ee as aK,Sh as aL,Ma as aM,nw as aN,rv as aO,Te as aP,P7 as aQ,vI as aR,$I as aS,Kt as aT,mU as aU,aX as aV,cX as aW,sX as aX,yt as aY,oX as aZ,JV as a_,X7 as aa,H7 as ab,J7 as ac,Z7 as ad,U7 as ae,TV as af,mA as ag,lX as ah,KW as ai,He as aj,Os as ak,Ky as al,Wk as am,Bo as an,gk as ao,Ft as ap,ar as aq,oe as ar,Wt as as,Nv as at,y0 as au,me as av,dt as aw,Js as ax,Ka as ay,Je as az,i4 as b,G1 as b$,UV as b0,tV as b1,$F as b2,LG as b3,N7 as b4,zf as b5,Sd as b6,lk as b7,yN as b8,mh as b9,CH as bA,Zy as bB,Tb as bC,mt as bD,YE as bE,Gi as bF,i6 as bG,Py as bH,M2 as bI,uh as bJ,F2 as bK,W7 as bL,G$ as bM,EH as bN,xH as bO,RH as bP,Df as bQ,oj as bR,Jy as bS,sk as bT,LH as bU,nl as bV,uH as bW,$U as bX,fh as bY,wd as bZ,Fs as b_,J9 as ba,Z9 as bb,Fy as bc,fs as bd,x1 as be,c6 as bf,Fc as bg,sH as bh,ok as bi,QE as bj,cj as bk,bd as bl,hj as bm,gh as bn,Ks as bo,tH as bp,U1 as bq,Fo as br,uj as bs,Qy as bt,lj as bu,gj as bv,rl as bw,rH as bx,kH as by,xj as bz,ne as c,t_ as c0,ek as c1,Jm as c2,Xt as d,m2 as e,We as f,s4 as g,Hr as h,dn as i,i8 as j,el as k,X as l,mk as m,z7 as n,uX as o,o4 as p,a4 as q,hX as r,r4 as s,XW as t,vn as u,jV as v,jH as w,Q7 as x,e4 as y,G7 as z};
